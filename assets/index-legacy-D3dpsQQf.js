System.register(["https://cdn.skypack.dev/three@0.124.0/build/three.module.js","https://cdn.skypack.dev/cannon-es@0.18.0","https://cdn.skypack.dev/imagesloaded@4.1.4","https://cdn.skypack.dev/three@0.124.0/examples/jsm/controls/OrbitControls.js","https://cdn.skypack.dev/three@0.124.0/examples/jsm/libs/stats.module.js","https://cdn.skypack.dev/three@0.124.0/examples/jsm/postprocessing/EffectComposer.js","https://cdn.skypack.dev/three@0.124.0/examples/jsm/postprocessing/RenderPass.js","https://cdn.skypack.dev/three@0.124.0/examples/jsm/postprocessing/ShaderPass.js","https://cdn.skypack.dev/gsap@3.6.1","https://cdn.skypack.dev/simplex-noise@3.0.0","https://cdn.skypack.dev/maku.js@1.0.1"],function(t,n){var r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_,w,S,E,C,A,T,M,D,k,N,F,I,R,L,P,O,B,U,z,V,j,G,H,W,$,q,X,Y,Z,K,Q,J,ee,te,ne,re,ie,se,ae,oe,le,ue,ce,he,de,pe,fe,me,ge,ve,ye,be,xe,_e,we,Se,Ee,Ce,Ae,Te,Me,De,ke,Ne,Fe,Ie,Re,Le,Pe,Oe,Be,Ue,ze,Ve,je,Ge,He,We,$e,qe,Xe,Ye,Ze,Ke,Qe,Je,et,tt,nt,rt,it,st,at,ot,lt,ut,ct,ht,dt,pt,ft,mt,gt,vt,yt,bt,xt,_t,wt,St,Et,Ct,At,Tt,Mt,Dt,kt,Nt,Ft,It,Rt,Lt,Pt,Ot,Bt,Ut,zt,Vt,jt,Gt,Ht,Wt,$t,qt,Xt,Yt,Zt,Kt,Qt,Jt,en,tn,nn,rn,sn,an,on,ln,un,cn,hn,dn,pn,mn,gn,vn,yn,bn,xn,_n,wn,Sn,En,Cn,An,Tn,Mn,Dn,kn,Nn,Fn,In,Rn,Ln,Pn,On,Bn,Un,zn,Vn,jn,Gn,Hn,Wn,$n,qn,Xn,Yn,Zn,Kn,Qn,Jn,er,tr,nr,rr,ir,sr,ar,or,lr,ur,cr,hr,dr,pr,fr,mr,gr,vr,yr,br,xr,_r,wr,Sr,Er,Cr,Ar,Tr,Mr,Dr,kr,Nr,Fr,Ir,Rr,Lr,Pr,Or,Br,Ur,zr,Vr,jr,Gr,Hr,Wr,$r,qr,Xr,Yr,Zr,Kr,Qr,Jr,ei,ti,ni,ri,ii,si,ai,oi,li,ui,ci,hi,di,pi,fi,mi,gi,vi,yi,bi,xi,_i,wi,Si,Ei,Ci,Ai,Ti,Mi,Di,ki,Ni,Fi,Ii,Ri,Li,Pi,Oi,Bi,Ui,zi,Vi,ji,Gi,Hi,Wi,$i,qi,Xi,Yi,Zi,Ki,Qi,Ji,es,ts,ns,rs,is,ss,as,os,ls,us,cs,hs,ds,ps,fs,ms,gs,vs,ys,bs,xs,_s,ws,Ss,Es,Cs,As,Ts,Ms,Ds,ks,Ns,Fs,Is,Rs,Ls,Ps,Os,Bs,Us,zs,Vs,js,Gs,Hs,Ws,$s,qs,Xs,Ys,Zs,Ks,Qs,Js,ea,ta,na,ra,ia,sa,aa,oa,la,ua,ca,ha,da,pa,fa,ma,ga,va,ya,ba,xa,_a,wa,Sa,Ea,Ca,Aa,Ta,Ma,Da,ka,Na,Fa,Ia,Ra,La,Pa,Oa,Ba,Ua,za,Va,ja,Ga,Ha,Wa,$a,qa,Xa,Ya,Za,Ka,Qa,Ja,eo,to,no,ro,io,so,ao,oo,lo,uo,co,ho,po,fo,mo,go,vo,yo,bo,xo,_o,wo,So,Eo,Co,Ao,To,Mo,Do,ko,No,Fo,Io,Ro,Lo,Po,Oo,Bo,Uo,zo,Vo,jo,Go,Ho,Wo,$o,qo,Xo,Yo,Zo,Ko,Qo,Jo,el,tl,nl,rl,il,sl,al,ol,ll,ul,cl,hl,dl,pl,fl,ml,gl,vl,yl,bl,xl,_l,wl,Sl,El,Cl,Al,Tl,Ml,Dl,kl,Nl,Fl,Il,Rl,Ll,Pl,Ol,Bl,Ul,zl,Vl,jl,Gl,Hl,Wl,$l,ql,Xl,Yl,Zl,Kl,Ql,Jl,eu,tu,nu,ru,iu,su,au,ou,lu,uu,cu,hu,du,pu,fu,mu,gu,vu,yu,bu,xu,_u,wu,Su,Eu,Cu,Au,Tu,Mu,Du,ku,Nu,Fu,Iu,Ru,Lu,Pu,Ou,Bu,Uu,zu,Vu,ju,Gu,Hu,Wu,$u,qu,Xu,Yu,Zu,Ku,Qu,Ju,ec,tc,nc,rc,ic,sc,ac,oc,lc,uc,cc,hc,dc,pc,fc,mc,gc,vc,yc,bc,xc,_c,wc,Sc,Ec,Cc,Ac,Tc,Mc,Dc,kc,Nc,Fc,Ic,Rc,Lc,Pc,Oc,Bc,Uc,zc,Vc,jc,Gc,Hc,Wc,$c,qc,Xc,Yc,Zc,Kc,Qc,Jc,eh,th,nh,rh,ih,sh,ah,oh,lh,uh,ch,hh,dh,ph,fh,mh,gh,vh,yh,bh,xh,_h,wh,Sh,Eh,Ch,Ah,Th,Mh,Dh,kh,Nh,Fh,Ih,Rh,Lh,Ph,Oh,Bh,Uh,zh,Vh,jh,Gh,Hh,Wh,$h,qh,Xh,Yh,Zh,Kh,Qh,Jh,ed,td,nd,rd,id,sd,ad,od,ld,ud,cd,hd,dd,pd,fd,md,gd,vd,yd,bd,xd,_d,wd,Sd,Ed,Cd,Ad,Td,Md,Dd,kd,Nd,Fd,Id,Rd,Ld,Pd,Od,Bd,Ud,zd,Vd,jd,Gd,Hd,Wd,$d,qd,Xd,Yd,Zd,Kd,Qd,Jd,ep,tp,np,rp,ip,sp,ap,op,lp,up,cp,hp,dp,pp,fp,mp,gp,vp,yp,bp,xp,_p,wp,Sp,Ep,Cp,Ap,Tp,Mp,Dp,kp,Np,Fp,Ip,Rp,Lp,Pp,Op,Bp,Up,zp,Vp,jp,Gp,Hp,Wp,$p,qp,Xp,Yp,Zp,Kp,Qp,Jp,ef,tf,nf,rf,sf,af,of,lf,uf,cf,hf,df,pf,ff,mf,gf,vf,yf,bf,xf,_f,wf,Sf,Ef,Cf,Af,Tf,Mf,Df,kf,Nf,Ff,If,Rf,Lf,Pf,Of,Bf,Uf,zf,Vf,jf,Gf,Hf,Wf,$f,qf,Xf,Yf,Zf,Kf,Qf,Jf,em,tm,nm,rm,im,sm,am,om,lm,um,cm,hm,dm,pm,fm,mm,gm,vm,ym,bm,xm,_m,wm,Sm,Em,Cm,Am,Tm,Mm,Dm,km,Nm,Fm,Im,Rm,Lm,Pm,Om,Bm,Um,zm,Vm,jm,Gm,Hm,Wm,$m,qm,Xm,Ym,Zm,Km,Qm,Jm,eg,tg,ng,rg,ig,sg,ag,og,lg,ug,cg,hg,dg,pg,fg,mg,gg,vg,yg,bg,xg,_g,wg,Sg,Eg,Cg,Ag,Tg,Mg,Dg,kg,Ng,Fg,Ig,Rg,Lg,Pg,Og,Bg,Ug,zg,Vg,jg,Gg,Hg,Wg,$g,qg,Xg,Yg,Zg,Kg,Qg,Jg,ev,tv,nv,rv,iv,sv,av,ov,lv,uv,cv,hv,dv,pv,fv,mv,gv,vv,yv,bv,xv,_v,wv,Sv,Ev,Cv,Av,Tv,Mv,Dv,kv,Nv,Fv,Iv,Rv,Lv,Pv,Ov,Bv,Uv,zv,Vv,jv,Gv,Hv,Wv,$v,qv,Xv,Yv,Zv,Kv,Qv,Jv,ey,ty,ny,ry,iy,sy,ay,oy,ly,uy,cy,hy,dy,py,fy,my,gy,vy,yy,by,xy,_y,wy,Sy,Ey,Cy,Ay,Ty,My,Dy,ky,Ny,Fy,Iy,Ry,Ly,Py,Oy,By,Uy,zy,Vy,jy,Gy,Hy,Wy,$y,qy,Xy,Yy,Zy,Ky,Qy,Jy,eb,tb,nb,rb,ib,sb,ab,ob,lb,ub,cb,hb,db,pb,fb,mb,gb,vb,yb,bb,xb,_b,wb,Sb,Eb,Cb,Ab,Tb,Mb,Db,kb,Nb,Fb,Ib,Rb,Lb,Pb,Ob,Bb,Ub,zb,Vb,jb,Gb,Hb,Wb,$b,qb,Xb,Yb,Zb,Kb,Qb,Jb,ex,tx,nx,rx,ix,sx,ax,ox,lx,ux,cx,hx,dx,px,fx,mx,gx,vx,yx,bx,xx,_x,wx,Sx,Ex,Cx,Ax,Tx,Mx,Dx,kx,Nx,Fx,Ix,Rx,Lx,Px,Ox,Bx,Ux,zx,Vx,jx,Gx,Hx,Wx,$x,qx,Xx,Yx,Zx,Kx,Qx,Jx,e_,t_,n_,r_,i_,s_,a_,o_,l_,u_,c_,h_,d_,p_,f_,m_,g_,v_,y_,b_,x_,__,w_,S_,E_,C_,A_,T_,M_,D_,k_,N_,F_,I_,R_,L_,P_,O_,B_,U_,z_,V_,j_,G_,H_,W_,$_,q_,X_,Y_,Z_,K_,Q_,J_,ew,tw,nw,rw,iw,sw,aw,ow,lw,uw,cw,hw,dw,pw,fw,mw,gw,vw,yw,bw,xw,_w,ww,Sw,Ew,Cw,Aw,Tw,Mw,Dw,kw,Nw,Fw,Iw,Rw,Lw,Pw,Ow,Bw;function Uw(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,u=c();function c(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=c(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function d(e,t){o="PUSH";let r=Gw(m.location,e,t);n&&n(r,e),u=c()+1;let h=jw(r,u),d=m.createHref(r);try{a.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o="REPLACE";let r=Gw(m.location,e,t);n&&n(r,e),u=c();let i=jw(r,u),h=m.createHref(r);a.replaceState(i,"",h),s&&l&&l({action:o,location:m.location,delta:0})}function f(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),zw(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:Hw(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}(e)}null==u&&(u=0,a.replaceState({...a.state,idx:u},""));let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(D,h),l=e,()=>{i.removeEventListener(D,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:p,go:e=>a.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Gw("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Hw(t)},null,e)}function zw(e,t){if(!1===e||null==e)throw new Error(t)}function Vw(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function jw(e,t){return{usr:e.state,key:e.key,idx:t}}function Gw(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Ww(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function Hw({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function Ww(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function $w(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?Ww(t):t,s=Jw(i.pathname||"/",n);if(null==s)return null;let a=qw(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=Qw(s);o=Zw(a[l],e,r)}return o}(e,t,n,!1)}function qw(e,t=[],n=[],r="",i=!1){let s=(e,s,a=i,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;zw(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let u=O([r,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(zw(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),qw(e.children,t,c,u,a)),(null!=e.path||e.index)&&t.push({path:u,score:Yw(u,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of Xw(e.path))s(e,t,!0,n);else s(e,t)}),t}function Xw(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=Xw(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}function Yw(e,t){let n=e.split("/"),r=n.length;return n.some(P)&&(r+=L),t&&(r+=F),n.filter(e=>!P(e)).reduce((e,t)=>e+(k.test(t)?N:""===t?I:R),r)}function Zw(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=Kw({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=Kw({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:O([s,c.pathname]),pathnameBase:B(O([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=O([s,c.pathnameBase]))}return a}function Kw(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){Vw("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function Qw(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Vw(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Jw(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function eS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function tS(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nS(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function rS(e,t,n,r=!1){let i;"string"==typeof e?i=Ww(e):(i={...e},zw(!i.pathname||!i.pathname.includes("?"),tS("?","pathname","search",i)),zw(!i.pathname||!i.pathname.includes("#"),tS("#","pathname","hash",i)),zw(!i.search||!i.search.includes("#"),tS("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:i=""}="string"==typeof e?Ww(e):e;return{pathname:n?n.startsWith("/")?n:eS(n,t):t,search:U(r),hash:z(i)}}(i,s),u=o&&"/"!==o&&o.endsWith("/"),c=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}function iS(){return null!=M.useContext(q)}function sS(){return zw(iS(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(q).location}function aS(e){M.useContext($).static||M.useLayoutEffect(e)}function oS(){let{isDataRoute:e}=M.useContext(X);return e?function(){let{router:e}=function(e){let t=M.useContext(G);return zw(t,dS(e)),t}("useNavigate"),t=fS("useNavigate"),n=M.useRef(!1);return aS(()=>{n.current=!0}),M.useCallback(async(r,i={})=>{Vw(n.current,Z),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}():function(){zw(iS(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(G),{basename:t,navigator:n}=M.useContext($),{matches:r}=M.useContext(X),{pathname:i}=sS(),s=JSON.stringify(nS(r)),a=M.useRef(!1);return aS(()=>{a.current=!0}),M.useCallback((r,o={})=>{if(Vw(a.current,Z),!a.current)return;if("number"==typeof r)return void n.go(r);let l=rS(r,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:O([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,s,i,e])}()}function lS(e,{relative:t}={}){let{matches:n}=M.useContext(X),{pathname:r}=sS(),i=JSON.stringify(nS(n));return M.useMemo(()=>rS(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function uS(e,t,n,r,i){zw(iS(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=M.useContext($),{matches:a}=M.useContext(X),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";gS(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let d,p=sS();if(t){let e="string"==typeof t?Ww(t):t;zw("/"===c||e.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${e.pathname}" was given in the \`location\` prop.`),d=e}else d=p;let f=d.pathname||"/",m=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=$w(e,{pathname:m});Vw(h||null!=g,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Vw(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=n?.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==s?.[e.route.id]);zw(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let e=i[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=l),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){a=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight((e,l,u)=>{let c,h=!1,d=null,p=null;n&&(c=s&&l.route.id?s[l.route.id]:void 0,d=l.route.errorElement||Q,a&&(o<0&&0===u?(gS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):o===u&&(h=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,u+1)),m=()=>{let t;return t=c?d:h?p:l.route.Component?M.createElement(l.route.Component,null):l.route.element?l.route.element:e,M.createElement(hS,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===u)?M.createElement(J,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:r}):m()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:O([c,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:O([c,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,n,r);return t&&v?M.createElement(q.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},v):v}function cS(){let e=function(){let e=M.useContext(Y),t=pS("useRouteError"),n=fS("useRouteError");return void 0!==e?e:t.errors?.[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=M.createElement(M.Fragment,null,M.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:s},"ErrorBoundary")," or"," ",M.createElement("code",{style:s},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,a)}function hS({routeContext:e,match:t,children:n}){let r=M.useContext(G);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(X.Provider,{value:e},n)}function dS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pS(e){let t=M.useContext(H);return zw(t,dS(e)),t}function fS(e){let t=function(e){let t=M.useContext(X);return zw(t,dS(e)),t}(e),n=t.matches[t.matches.length-1];return zw(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function mS(){let{matches:e,loaderData:t}=pS("useMatches");return M.useMemo(()=>e.map(e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}(e,t)),[e,t])}function gS(e,t,n){t||ee[e]||(ee[e]=!0,Vw(!1,n))}function vS({routes:e,future:t,state:n,unstable_onError:r}){return uS(e,void 0,n,r,t)}function yS({to:e,replace:t,state:n,relative:r}){zw(iS(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext($);Vw(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=M.useContext(X),{pathname:a}=sS(),o=oS(),l=rS(e,nS(s),a,"path"===r),u=JSON.stringify(l);return M.useEffect(()=>{o(JSON.parse(u),{replace:t,state:n,relative:r})},[o,u,r,t,n]),null}function bS(e){return function(e){let t=M.useContext(X).outlet;return M.useMemo(()=>t&&M.createElement(K.Provider,{value:e},t),[t,e])}(e.context)}function xS(e){zw(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _S({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){zw(!iS(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=M.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);"string"==typeof n&&(n=Ww(n));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:d="default"}=n,p=M.useMemo(()=>{let e=Jw(l,a);return null==e?null:{location:{pathname:e,search:u,hash:c,state:h,key:d},navigationType:r}},[a,l,u,c,h,d,r]);return Vw(null!=p,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:M.createElement($.Provider,{value:o},M.createElement(q.Provider,{children:t,value:p}))}function wS({children:e,location:t}){return uS(SS(e),t)}function SS(e,t=[]){let n=[];return M.Children.forEach(e,(e,r)=>{if(!M.isValidElement(e))return;let i=[...t,r];if(e.type===M.Fragment)return void n.push.apply(n,SS(e.props.children,i));zw(e.type===xS,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zw(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=SS(e.props.children,i)),n.push(s)}),n}function ES(e){return null!=e&&"string"==typeof e.tagName}function CS(e){return null==e||ie.has(e)?e:(Vw(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ne}"`),null)}function AS(e,t){let n,r,i,s,a;if(ES(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?Jw(a,t):null,n=e.getAttribute("method")||te,i=CS(e.getAttribute("enctype"))||ne,s=new FormData(e)}else if(function(e){return ES(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ES(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?Jw(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||te,i=CS(e.getAttribute("formenctype"))||CS(a.getAttribute("enctype"))||ne,s=new FormData(a,e),!function(){if(null===re)try{new FormData(document.createElement("form"),0),re=!1}catch(e){re=!0}return re}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(ES(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=te,r=null,i=ne,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function TS(e,t){if(!1===e||null==e)throw new Error(t)}function MS(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function DS(e,t,r){return function(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&(null==(s=i)||"string"!=typeof s.page)&&"script"===i.as&&i.href&&r.has(i.href))return e;var s;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await T(()=>{return t=e.module,new Promise(e=>e(n.import(`${t}`)));var t},void 0);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(i,r);return e.links?e.links():[]}return[]}))).flat(1).filter(MS).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function kS(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function NS(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function FS(){let e=M.useContext(G);return TS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function IS(){let e=M.useContext(se);return TS(e,"You must render this element inside a <HydratedRouter> element"),e}function RS(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function LS({page:e,...t}){let{router:n}=FS(),r=M.useMemo(()=>$w(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?M.createElement(PS,{page:e,matches:r,...t}):null}function PS({page:e,matches:t,...n}){let r=sS(),{manifest:i,routeModules:s}=IS(),{basename:a}=FS(),{loaderData:o,matches:l}=function(){let e=M.useContext(H);return TS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),u=M.useMemo(()=>kS(e,t,l,i,r,"data"),[e,t,l,i,r]),c=M.useMemo(()=>kS(e,t,l,i,r,"assets"),[e,t,l,i,r]),h=M.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];t&&t.hasLoader&&(!u.some(t=>t.route.id===e.route.id)&&e.route.id in o&&s[e.route.id]?.shouldRevalidate||t.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let c=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===Jw(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,a,"data");return l&&n.size>0&&c.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[a,o,r,i,u,t,e,s]),d=M.useMemo(()=>NS(c,i),[c,i]),p=function(e){let{manifest:t,routeModules:n}=IS(),[r,i]=M.useState([]);return M.useEffect(()=>{let r=!1;return DS(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(c);return M.createElement(M.Fragment,null,h.map(e=>M.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),d.map(e=>M.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),p.map(({key:e,link:t})=>M.createElement("link",{key:e,nonce:n.nonce,...t})))}function OS(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function BS({basename:e,children:t,window:n}){let r=M.useRef();null==r.current&&(r.current=Uw({window:n,v5Compat:!0}));let i=r.current,[s,a]=M.useState({action:i.action,location:i.location}),o=M.useCallback(e=>{M.startTransition(()=>a(e))},[a]);return M.useLayoutEffect(()=>i.listen(o),[i,o]),M.createElement(_S,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}function US({basename:e,children:t,history:n}){let[r,i]=M.useState({action:n.action,location:n.location}),s=M.useCallback(e=>{M.startTransition(()=>i(e))},[i]);return M.useLayoutEffect(()=>n.listen(s),[n,s]),M.createElement(_S,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:n})}function zS({getKey:e,storageKey:t,...n}){let r=M.useContext(se),{basename:i}=M.useContext($),s=sS(),a=mS();!function({getKey:e,storageKey:t}={}){let{router:n}=jS("useScrollRestoration"),{restoreScrollPosition:r,preventScrollReset:i}=function(e){let t=M.useContext(H);return zw(t,VS(e)),t}("useScrollRestoration"),{basename:s}=M.useContext($),a=sS(),o=mS(),l=pS("useNavigation").navigation;M.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),function(e,t){let{capture:n}=t||{};M.useEffect(()=>{let t=null!=n?{capture:n}:void 0;return window.addEventListener("pagehide",e,t),()=>{window.removeEventListener("pagehide",e,t)}},[e,n])}(M.useCallback(()=>{if("idle"===l.state){let t=HS(a,o,s,e);de[t]=window.scrollY}try{sessionStorage.setItem(t||he,JSON.stringify(de))}catch(n){Vw(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${n}).`)}window.history.scrollRestoration="auto"},[l.state,e,s,a,o,t])),"undefined"!=typeof document&&(M.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||he);e&&(de=JSON.parse(e))}catch(e){}},[t]),M.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(de,()=>window.scrollY,e?(t,n)=>HS(t,n,s,e):void 0);return()=>t&&t()},[n,s,e]),M.useLayoutEffect(()=>{if(!1!==r)if("number"!=typeof r){try{if(a.hash){let e=document.getElementById(decodeURIComponent(a.hash.slice(1)));if(e)return void e.scrollIntoView()}}catch{Vw(!1,`"${a.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}!0!==i&&window.scrollTo(0,0)}else window.scrollTo(0,r)},[a,r,i]))}({getKey:e,storageKey:t});let o=M.useMemo(()=>{if(!r||!e)return null;let t=HS(s,a,i,e);return t!==s.key?t:null},[]);if(!r||r.isSpaMode)return null;let l=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},"")}try{let n=JSON.parse(sessionStorage.getItem(e)||"{}")[t||window.history.state.key];"number"==typeof n&&window.scrollTo(0,n)}catch(n){console.error(n),sessionStorage.removeItem(e)}}).toString();return M.createElement("script",{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${l})(${JSON.stringify(t||he)}, ${JSON.stringify(o)})`}})}function VS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jS(e){let t=M.useContext(G);return zw(t,VS(e)),t}function GS(){let{router:e}=jS("useSubmit"),{basename:t}=M.useContext($),n=fS("useRouteId");return M.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:u}=AS(r,t);if(!1===i.navigate){let t=i.fetcherKey||ce();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function HS(e,t,n,r){let i=null;return r&&(i=r("/"!==n?{...e,pathname:Jw(e.pathname,n)||e.pathname}:e,t)),null==i&&(i=e.key),i}function WS(e,t){t.applyMatrix=function(...e){let t=e[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(e[0])||t?this._renderer.applyMatrix(...e[0]):this._renderer.applyMatrix(...e),this},t.resetMatrix=function(){return this._renderer.resetMatrix(),this},t.rotate=function(e,t){return this._renderer.rotate(this._toRadians(e),t),this},t.rotateX=function(e){return this._assert3d("rotateX"),this._renderer.rotateX(this._toRadians(e)),this},t.rotateY=function(e){return this._assert3d("rotateY"),this._renderer.rotateY(this._toRadians(e)),this},t.rotateZ=function(e){return this._assert3d("rotateZ"),this._renderer.rotateZ(this._toRadians(e)),this},t.scale=function(t,n,r){if(t instanceof e.Vector){const e=t;t=e.x,n=e.y,r=e.z}else if(Array.isArray(t)){const e=t;t=e[0],n=e[1],r=e[2]||1}return isNaN(n)?n=r=t:isNaN(r)&&(r=1),this._renderer.scale(t,n,r),this},t.shearX=function(e){const t=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},t.shearY=function(e){const t=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},t.translate=function(e,t,n){return this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this},t.push=function(){this._renderer.push()},t.pop=function(){this._renderer.pop()}}function $S(e,t){t.noLoop=function(){this._loop=!1},t.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.isLooping=function(){return this._loop},t.redraw=async function(e){if(this._inUserDraw||!this._setupDone)return;let t=parseInt(e);(isNaN(t)||t<1)&&(t=1);const n=this._isGlobal?window:this;if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(let e=0;e<t;e++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),this._renderer.isP3D&&this._renderer._update(),this.frameCount=n.frameCount+1,await this._runLifecycleHook("predraw"),this._inUserDraw=!0;try{await n.draw()}finally{this._inUserDraw=!1}await this._runLifecycleHook("postdraw")}}}}function qS(e,t,n){const r=[ye,_e,we,Se,Ee,Ce];t._frameRate=0,t._lastFrameTime=window.performance.now(),t._targetFrameRate=60;const i=window.print;let s=!1;function a(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function o(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}n.presetup=function(){for(const e of["resize"])window.addEventListener(e,this[`_on${e}`].bind(this),{passive:!1,signal:this._removeSignal})},t.print=function(...e){e.length?console.log(...e):s||(i(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(s=!0))},t.frameCount=0,t.deltaTime=0,t.focused=document.hasFocus(),t.cursor=function(e,t,n){let i="auto";const s=this._curElement.elt;if(r.includes(e))i=e;else if("string"==typeof e){let r="";t&&n&&"number"==typeof t&&"number"==typeof n&&(r=`${t} ${n}`),i="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?`url(${e}) ${r}, auto`:e}s.style.cursor=i},t.frameRate=function(e){return"number"!=typeof e||e<0?this._frameRate:(this._targetFrameRate=e,0===e&&(this._frameRate=e),this)},t.getFrameRate=function(){return this.frameRate()},t.setFrameRate=function(e){return this.frameRate(e)},t.getTargetFrameRate=function(){return this._targetFrameRate},t.noCursor=function(){this._curElement.elt.style.cursor="none"},t.webglVersion="p2d",t.displayWidth=screen.width,t.displayHeight=screen.height,t.windowWidth=0,t.windowHeight=0,t._onresize=function(e){let t;this.windowWidth=a(),this.windowHeight=o(),"function"==typeof this._customActions.windowResized&&(t=this._customActions.windowResized(e),void 0===t||t||e.preventDefault())},t._updateWindowSize=function(){this.windowWidth=a(),this.windowHeight=o()},Object.defineProperty(t,"width",{get(){return this._renderer.width}}),Object.defineProperty(t,"height",{get(){return this._renderer.height}}),t.fullscreen=function(e){if(void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e?function(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},t.pixelDensity=function(e){let t;return"number"==typeof e?(e!==this._renderer._pixelDensity&&(this._renderer._pixelDensity=e),t=this,this.resizeCanvas(this.width,this.height,!0)):t=this._renderer._pixelDensity,t},t.displayDensity=()=>window.devicePixelRatio,t.getURL=()=>location.href,t.getURLPath=()=>location.pathname.split("/").filter(e=>""!==e),t.getURLParams=function(){const e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim;let t;const n={};for(;null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,n[t[1]]=t[2];return n},t.worldToScreen=function(e){return"number"==typeof e&&(e=this.createVector(...arguments)),this._renderer.getWorldToScreenMatrix().multiplyAndNormalizePoint(e)},t.screenToWorld=function(e){"number"==typeof e&&(e=this.createVector(...arguments));const t=this._renderer.getWorldToScreenMatrix();if(2===e.dimensions){let n=t.mat4[14]/t.mat4[15];e=this.createVector(e.x,e.y,n)}return t.invert(t).multiplyAndNormalizePoint(e)}}function XS(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(e=>[e]));let r=t[0].length,i=t[0].map((e,n)=>t.map(e=>e[n])),s=e.map(e=>i.map(t=>{let n=0;if(!Array.isArray(e)){for(let r of t)n+=e*r;return n}for(let r=0;r<e.length;r++)n+=e[r]*(t[r]||0);return n}));return 1===n&&(s=s[0]),1===r?s.map(e=>e[0]):s}function YS(e){return"string"===ZS(e)}function ZS(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function KS(e,{precision:t,unit:n}){return QS(e)?"none":function(e,t){if(0===e)return 0;let n=~~e,r=0;n&&t&&(r=1+~~Math.log10(Math.abs(n)));const i=10**(t-r);return Math.floor(e*i+.5)/i}(e,t)+(n??"")}function QS(e){return Number.isNaN(e)||e instanceof Number&&e?.none}function JS(e){return e[e.length-1]}function eE(e,t,n){return isNaN(e)?t:isNaN(t)?e:e+(t-e)*n}function tE(e,t,n){return eE(t[0],t[1],function(e,t,n){return(n-e)/(t-e)}(e[0],e[1],n))}function nE(e,t){return Math.sign(e)===Math.sign(t)?e:-e}function rE(e,t){return nE(Math.abs(e)**t,e)}function iE(e,t){return 0===t?0:e/t}function sE(e){return Array.isArray(e)?e:Dt[e]}function aE(e,t,n,r={}){if(e=sE(e),t=sE(t),!e||!t)throw new TypeError(`Missing white point to convert ${e?"":"from"}${e||t?"":"/"}${t?"":"to"}`);if(e===t)return n;let i={W1:e,W2:t,XYZ:n,options:r};if(Mt.run("chromatic-adaptation-start",i),i.M||(i.W1===Dt.D65&&i.W2===Dt.D50?i.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:i.W1===Dt.D50&&i.W2===Dt.D65&&(i.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Mt.run("chromatic-adaptation-end",i),i.M)return XS(i.M,i.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}function oE(e,t,n,r){return Object.entries(e.coords).map(([e,i],s)=>{let a,o=t.coordGrammar[s],l=r[s],u=l?.type;if(a=l.none?o.find(e=>Nt.has(e)):o.find(e=>e==u),!a){let t=i.name||e;throw new TypeError(`${u??l.raw} not allowed for ${t} in ${n}()`)}let c=a.range;"<percentage>"===u&&(c||=[0,1]);let h=i.range||i.refRange;return c&&h&&(r[s]=tE(c,h,r[s])),a})}function lE(e,{meta:t}={}){let n={str:String(e)?.trim()};if(Mt.run("parse-start",n),n.color)return n.color;if(n.parsed=function(e){if(!e)return;e=e.trim();const t=/^-?[\d.]+$/,n=/%|deg|g?rad|turn$/,r=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let i=e.match(/^([a-z]+)\((.+?)\)$/i);if(i){let e=[];return i[2].replace(r,(r,i)=>{let s=i.match(n),a=i;if(s){let e=s[0],t=a.slice(0,-e.length);"%"===e?(a=new Number(t/100),a.type="<percentage>"):(a=new Number(t*Ct[e]),a.type="<angle>",a.unit=e)}else t.test(a)?(a=new Number(a),a.type="<number>"):"none"===a&&(a=new Number(NaN),a.none=!0);r.startsWith("/")&&(a=a instanceof Number?a:new Number(a),a.alpha=!0),"object"==typeof a&&a instanceof Number&&(a.raw=i),e.push(a)}),{name:i[1].toLowerCase(),rawName:i[1],rawArgs:i[2],args:e}}}(n.str),n.parsed){let e=n.parsed.name;if("color"===e){let e=n.parsed.args.shift(),r=e.startsWith("--")?e.substring(2):`--${e}`,i=[e,r],s=n.parsed.rawArgs.indexOf("/")>0?n.parsed.args.pop():1;for(let l of Ft.all){let r=l.getFormat("color");if(r&&(i.includes(r.id)||r.ids?.filter(e=>i.includes(e)).length)){const i=Object.keys(l.coords).map((e,t)=>n.parsed.args[t]||0);let a;return r.coordGrammar&&(a=oE(l,r,"color",i)),t&&Object.assign(t,{formatId:"color",types:a}),r.id.startsWith("--")&&!e.startsWith("--")&&kt.warn(`${l.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${r.id}) instead of color(${e}).`),e.startsWith("--")&&!r.id.startsWith("--")&&kt.warn(`${l.name} is a standard space and supported in the CSS spec. Use color(${r.id}) instead of prefixed color(${e}).`),{spaceId:l.id,coords:i,alpha:s}}}let a="",o=e in Ft.registry?e:r;if(o in Ft.registry){let e=Ft.registry[o].formats?.color?.id;e&&(a=`Did you mean color(${e})?`)}throw new TypeError(`Cannot parse color(${e}). `+(a||"Missing a plugin?"))}for(let r of Ft.all){let i=r.getFormat(e);if(i&&"function"===i.type){let s=1;(i.lastAlpha||JS(n.parsed.args).alpha)&&(s=n.parsed.args.pop());let a,o=n.parsed.args;return i.coordGrammar&&(a=oE(r,i,e,o)),t&&Object.assign(t,{formatId:i.name,types:a}),{spaceId:r.id,coords:o,alpha:s}}}}else for(let r of Ft.all)for(let e in r.formats){let i=r.formats[e];if("custom"!==i.type)continue;if(i.test&&!i.test(n.str))continue;let s=i.parse(n.str);if(s)return s.alpha??=1,t&&(t.formatId=e),s}throw new TypeError(`Could not parse ${e} as a color. Missing a plugin?`)}function uE(e){if(Array.isArray(e))return e.map(uE);if(!e)throw new TypeError("Empty color reference");YS(e)&&(e=lE(e));let t=e.space||e.spaceId;return t instanceof Ft||(e.space=Ft.get(t)),void 0===e.alpha&&(e.alpha=1),e}function cE(e){let t=[e];for(let n=e;n=n.base;)t.push(n);return t}function hE(e,{coords:t}={}){if(e.coords&&!e.coordGrammar){e.type||="function",e.name||="color",e.coordGrammar=e.coords.map(e=>e.split("|").map(e=>{let t=(e=e.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(t){let e=new String(t[1]);return e.range=[+t[2],+t[3]],e}return e}));let n=Object.entries(t).map(([t,n],r)=>{let i=e.coordGrammar[r][0],s=n.range||n.refRange,a=i.range,o="";return"<percentage>"==i?(a=[0,100],o="%"):"<angle>"==i&&(o="deg"),{fromRange:s,toRange:a,suffix:o}});e.serializeCoords=(e,t)=>e.map((e,r)=>{let{fromRange:i,toRange:s,suffix:a}=n[r];return i&&s&&(e=tE(i,s,e)),e=KS(e,{precision:t,unit:a})})}return e}function dE(e,t){return e=uE(e),!t||e.space.equals(t)?e.coords.slice():(t=Ft.get(t)).from(e)}function pE(e,t){e=uE(e);let{space:n,index:r}=Ft.resolveCoord(t,e.space);return dE(e,n)[r]}function fE(e,t,n){return e=uE(e),t=Ft.get(t),e.coords=t.to(e.space,n),e}function mE(e,t,n){if(e=uE(e),2===arguments.length&&"object"===ZS(arguments[1])){let t=arguments[1];for(let n in t)mE(e,n,t[n])}else{"function"==typeof n&&(n=n(pE(e,t)));let{space:r,index:i}=Ft.resolveCoord(t,e.space),s=dE(e,r);s[i]=n,fE(e,r,s)}return e}function gE(e){return(e%360+360)%360}function vE(e){const t=e*e;return t*t*t*e}function yE(e,t,{kL:n=1,kC:r=1,kH:i=1}={}){[e,t]=uE([e,t]);let[s,a,o]=zt.from(e),l=Vt.from(zt,[s,a,o])[1],[u,c,h]=zt.from(t),d=Vt.from(zt,[u,c,h])[1];l<0&&(l=0),d<0&&(d=0);let p=vE((l+d)/2),f=.5*(1-Math.sqrt(p/(p+jt))),m=(1+f)*a,g=(1+f)*c,v=Math.sqrt(m**2+o**2),y=Math.sqrt(g**2+h**2),b=0===m&&0===o?0:Math.atan2(o,m),x=0===g&&0===h?0:Math.atan2(h,g);b<0&&(b+=2*Gt),x<0&&(x+=2*Gt),b*=Ht,x*=Ht;let _,w=u-s,S=y-v,E=x-b,C=b+x,A=Math.abs(E);v*y===0?_=0:A<=180?_=E:E>180?_=E-360:E<-180?_=E+360:kt.warn("the unthinkable has happened");let T,M=2*Math.sqrt(y*v)*Math.sin(_*Wt/2),D=(s+u)/2,k=(v+y)/2,N=vE(k);T=v*y===0?C:A<=180?C/2:C<360?(C+360)/2:(C-360)/2;let F=(D-50)**2,I=1+.015*F/Math.sqrt(20+F),R=1+.045*k,L=1;L-=.17*Math.cos((T-30)*Wt),L+=.24*Math.cos(2*T*Wt),L+=.32*Math.cos((3*T+6)*Wt),L-=.2*Math.cos((4*T-63)*Wt);let P=1+.015*k*L,O=30*Math.exp(-1*((T-275)/25)**2),B=2*Math.sqrt(N/(N+jt)),U=(w/(n*I))**2;return U+=(S/(r*R))**2,U+=(M/(i*P))**2,U+=-1*Math.sin(2*O*Wt)*B*(S/(r*R))*(M/(i*P)),Math.sqrt(U)}function bE(e,t){[e,t]=uE([e,t]);let[n,r,i]=Zt.from(e),[s,a,o]=Zt.from(t),l=n-s,u=r-a,c=i-o;return Math.sqrt(l**2+u**2+c**2)}function xE(e,t,{epsilon:n=Kt}={}){e=uE(e),t||(t=e.space),t=Ft.get(t);let r=e.coords;return t!==e.space&&(r=t.from(e)),t.inGamut(r,{epsilon:n})}function _E(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function wE(e,t){return function(e,t,n="lab"){let r=(n=Ft.get(n)).from(e),i=n.from(t);return Math.sqrt(r.reduce((e,t,n)=>{let r=i[n];return isNaN(t)||isNaN(r)?e:e+(r-t)**2},0))}(e,t,"lab")}function SE(e,t,{l:n=2,c:r=1}={}){[e,t]=uE([e,t]);let[i,s,a]=zt.from(e),[,o,l]=Vt.from(zt,[i,s,a]),[u,c,h]=zt.from(t),d=Vt.from(zt,[u,c,h])[1];o<0&&(o=0),d<0&&(d=0);let p=i-u,f=o-d,m=(s-c)**2+(a-h)**2-f**2,g=.511;i>=16&&(g=.040975*i/(1+.01765*i));let v,y=.0638*o/(1+.0131*o)+.638;Number.isNaN(l)&&(l=0),v=l>=164&&l<=345?.56+Math.abs(.2*Math.cos((l+168)*Qt)):.36+Math.abs(.4*Math.cos((l+35)*Qt));let b=Math.pow(o,4),x=Math.sqrt(b/(b+1900)),_=(p/(n*g))**2;return _+=(f/(r*y))**2,_+=m/(y*(x*v+1-x))**2,Math.sqrt(_)}function EE(e,t){[e,t]=uE([e,t]);let[n,r,i]=yn.from(e),[s,a,o]=yn.from(t),l=n-s,u=r-a;Number.isNaN(i)&&Number.isNaN(o)?(i=0,o=0):Number.isNaN(i)?i=o:Number.isNaN(o)&&(o=i);let c=i-o,h=2*Math.sqrt(r*a)*Math.sin(c/2*(Math.PI/180));return Math.sqrt(l**2+u**2+h**2)}function CE(e,t){[e,t]=uE([e,t]);let[n,r,i]=kn.from(e),[s,a,o]=kn.from(t);return 720*Math.sqrt((n-s)**2+.25*(r-a)**2+(i-o)**2)}function AE(e,t){return e.map(e=>{const n=rE(t*Math.abs(e)*.01,Fn);return 400*nE(n,e)/(n+27.13)})}function TE(e,t,n,r,i){const s={};s.discounting=i,s.refWhite=e,s.surround=r;const a=e.map(e=>100*e);s.la=t,s.yb=n;const o=a[1],l=XS(Ln,a),u=(r=Bn[s.surround])[0];s.c=r[1],s.nc=r[2];const c=(1/(5*s.la+1))**4;s.fl=c*s.la+.1*(1-c)*(1-c)*Math.cbrt(5*s.la),s.flRoot=s.fl**.25,s.n=s.yb/o,s.z=1.48+Math.sqrt(s.n),s.nbb=.725*s.n**-.2,s.ncb=s.nbb;const h=i?1:Math.max(Math.min(u*(1-1/3.6*Math.exp((-s.la-42)/92)),1),0);s.dRgb=l.map(e=>eE(1,o/e,h)),s.dRgbInv=s.dRgb.map(e=>1/e);const d=AE(l.map((e,t)=>e*s.dRgb[t]),s.fl);return s.aW=s.nbb*(2*d[0]+d[1]+.05*d[2]),s}function ME(e,t){if(!(void 0!==e.J^void 0!==e.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==e.C^void 0!==e.M^void 0!==e.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==e.h^void 0!==e.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===e.J||0===e.Q)return[0,0,0];let n=0;n=void 0!==e.h?gE(e.h)*Vn:function(e){let t=(e%400+400)%400;const n=Math.floor(.01*t);t%=100;const[r,i]=Un.h.slice(n,n+2),[s,a]=Un.e.slice(n,n+2);return gE((t*(a*r-s*i)-100*r*a)/(t*(a-s)-100*a))}(e.H)*Vn;const r=Math.cos(n),i=Math.sin(n);let s=0;void 0!==e.J?s=.1*rE(e.J,.5):void 0!==e.Q&&(s=.25*t.c*e.Q/((t.aW+4)*t.flRoot));let a=0;void 0!==e.C?a=e.C/s:void 0!==e.M?a=e.M/t.flRoot/s:void 0!==e.s&&(a=4e-4*e.s**2*(t.aW+4)/t.c);const o=rE(a*Math.pow(1.64-Math.pow(.29,t.n),-.73),10/9),l=.25*(Math.cos(n+2)+3.8),u=t.aW*rE(s,2/t.c/t.z),c=5e4/13*t.nc*t.ncb*l,h=u/t.nbb,d=23*(h+.305)*iE(o,23*c+o*(11*r+108*i)),p=function(e,t){const n=100/t*27.13**In;return e.map(e=>{const t=Math.abs(e);return nE(n*rE(t/(400-t),In),e)})}(XS(On,[h,d*r,d*i]).map(e=>1*e/1403),t.fl);return XS(Pn,p.map((e,n)=>e*t.dRgbInv[n])).map(e=>e/100)}function DE(e,t){const n=e.map(e=>100*e),r=AE(XS(Ln,n).map((e,n)=>e*t.dRgb[n]),t.fl),i=r[0]+(-12*r[1]+r[2])/11,s=(r[0]+r[1]-2*r[2])/9,a=(Math.atan2(s,i)%Rn+Rn)%Rn,o=.25*(Math.cos(a+2)+3.8),l=rE(5e4/13*t.nc*t.ncb*iE(o*Math.sqrt(i**2+s**2),r[0]+r[1]+1.05*r[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),u=rE(t.nbb*(2*r[0]+r[1]+.05*r[2])/t.aW,.5*t.c*t.z),c=100*rE(u,2),h=4/t.c*u*(t.aW+4)*t.flRoot,d=l*u,p=d*t.flRoot,f=gE(a*zn),m=function(e){let t=gE(e);t<=Un.h[0]&&(t+=360);const n=function(e,t,n=0,r=e.length){for(;n<r;){const i=n+r>>1;e[i]<t?n=i+1:r=i}return n}(Un.h,t)-1,[r,i]=Un.h.slice(n,n+2),[s,a]=Un.e.slice(n,n+2),o=(t-r)/s;return Un.H[n]+100*o/(o+(i-t)/a)}(f);return{J:c,C:d,h:f,s:50*rE(t.c*l/(t.aW+4),.5),Q:h,M:p,H:m}}function kE(e){return e>8?Math.pow((e+16)/116,3):e/Wn}function NE(e,t){const n=116*((r=e[1])>Hn?Math.cbrt(r):(Wn*r+16)/116)-16;var r;if(0===n)return[0,0,0];const i=DE(e,$n);return[gE(i.h),i.C,n]}function FE(e){e[1]<0&&(e=qn.fromBase(qn.toBase(e)));const t=Math.log(Math.max(1+Yn[2]*e[1]*$n.flRoot,1))/Yn[2],n=e[0]*Xn,r=t*Math.cos(n),i=t*Math.sin(n);return[e[2],r,i]}function IE(e,t){[e,t]=uE([e,t]);let[n,r,i]=FE(qn.from(e)),[s,a,o]=FE(qn.from(t));return Math.sqrt((n-s)**2+(r-a)**2+(i-o)**2)}function RE(e,{method:t=kt.gamut_mapping,space:n,deltaEMethod:r="",jnd:i=2,blackWhiteClamp:s={}}={}){if(e=uE(e),YS(arguments[1])?n=arguments[1]:n||(n=e.space),xE(e,n=Ft.get(n),{epsilon:0}))return e;let a;if("css"===t)a=function(e,{space:t}={}){const n=.02,r=1e-4;e=uE(e),t||(t=e.space),t=Ft.get(t);const i=Ft.get("oklch");if(t.isUnbounded)return LE(e,t);const s=LE(e,i);let a=s.coords[0];if(a>=1){const n=LE(Qn.WHITE,t);return n.alpha=e.alpha,LE(n,t)}if(a<=0){const n=LE(Qn.BLACK,t);return n.alpha=e.alpha,LE(n,t)}if(xE(s,t,{epsilon:0}))return LE(s,t);function o(e){const n=LE(e,t),r=Object.values(t.coords);return n.coords=n.coords.map((e,t)=>{if("range"in r[t]){const[n,i]=r[t].range;return function(e,t,n){return Math.max(Math.min(n,t),e)}(n,e,i)}return e}),n}let l=0,u=s.coords[1],c=!0,h=_E(s),d=o(h),p=bE(d,h);if(p<n)return d;for(;u-l>r;){const e=(l+u)/2;if(h.coords[1]=e,c&&xE(h,t,{epsilon:0}))l=e;else if(d=o(h),p=bE(d,h),p<n){if(n-p<r)break;c=!1,l=e}else u=e}return d}(e,{space:n});else{if("clip"===t||xE(e,n))a=LE(e,n);else{Object.prototype.hasOwnProperty.call(Kn,t)&&({method:t,jnd:i,deltaEMethod:r,blackWhiteClamp:s}=Kn[t]);let o=yE;if(""!==r)for(let e in Zn)if("deltae"+r.toLowerCase()===e.toLowerCase()){o=Zn[e];break}let l=RE(LE(e,n),{method:"clip",space:n});if(o(e,l)>i){if(3===Object.keys(s).length){let t=Ft.resolveCoord(s.channel),n=pE(LE(e,t.space),t.id);if(QS(n)&&(n=0),n>=s.max)return LE({space:"xyz-d65",coords:Dt.D65},e.space);if(n<=s.min)return LE({space:"xyz-d65",coords:[0,0,0]},e.space)}let r=Ft.resolveCoord(t),l=r.space,u=r.id,c=LE(e,l);c.coords.forEach((e,t)=>{QS(e)&&(c.coords[t]=0)});let h=(r.range||r.refRange)[0],d=function(e){const t=e?Math.floor(Math.log10(Math.abs(e))):0;return Math.max(parseFloat("1e"+(t-2)),1e-6)}(i),p=h,f=pE(c,u);for(;f-p>d;){let e=_E(c);e=RE(e,{space:n,method:"clip"}),o(c,e)-i<d?p=pE(c,u):f=pE(c,u),mE(c,u,(p+f)/2)}a=LE(c,n)}else a=l}if("clip"===t||!xE(a,n,{epsilon:0})){let e=Object.values(n.coords).map(e=>e.range||[]);a.coords=a.coords.map((t,n)=>{let[r,i]=e[n];return void 0!==r&&(t=Math.max(r,t)),void 0!==i&&(t=Math.min(t,i)),t})}}return n!==e.space&&(a=LE(a,e.space)),e.coords=a.coords,e}function LE(e,t,{inGamut:n}={}){e=uE(e);let r=(t=Ft.get(t)).from(e),i={space:t,coords:r,alpha:e.alpha};return n&&(i=RE(i,!0===n?void 0:n)),i}function PE(e){return pE(e,[It,"y"])}function OE(e,t){e=uE(e),t=uE(t);let n=Math.max(PE(e),0),r=Math.max(PE(t),0);return r>n&&([n,r]=[r,n]),(n+.05)/(r+.05)}function BE(e){return e>=cr?e:e+(cr-e)**hr}function UE(e){let t=e<0?-1:1,n=Math.abs(e);return t*Math.pow(n,2.4)}function zE(e,t){let n,r,i,s,a,o;t=uE(t),e=uE(e),t=LE(t,"srgb"),[s,a,o]=t.coords;let l=.2126729*UE(s)+.7151522*UE(a)+.072175*UE(o);e=LE(e,"srgb"),[s,a,o]=e.coords;let u=.2126729*UE(s)+.7151522*UE(a)+.072175*UE(o),c=BE(l),h=BE(u),d=h>c;return Math.abs(h-c)<pr?r=0:d?(n=h**ar-c**or,r=n*fr):(n=h**ur-c**lr,r=n*gr),i=Math.abs(r)<dr?0:r>0?r-mr:r+mr,100*i}function VE(e,t,n={}){if("function"===ZS(r=e)&&r.rangeArgs){let[n,r]=[e,t];return VE(...n.rangeArgs.colors,{...n.rangeArgs.options,...r})}var r;let{space:i,outputSpace:s,progression:a,premultiplied:o}=n;e=uE(e),t=uE(t),e=_E(e),t=_E(t);let l={colors:[e,t],options:n};if(i=i?Ft.get(i):Ft.registry[kt.interpolationSpace]||e.space,s=s?Ft.get(s):i,e=LE(e,i),t=LE(t,i),e=RE(e),t=RE(t),i.coords.h&&"angle"===i.coords.h.type){let r=n.hue=n.hue||"shorter",s=[i,"h"],[a,o]=[pE(e,s),pE(t,s)];isNaN(a)&&!isNaN(o)?a=o:isNaN(o)&&!isNaN(a)&&(o=a),[a,o]=function(e,t){if("raw"===e)return t;let[n,r]=t.map(gE),i=r-n;return"increasing"===e?i<0&&(r+=360):"decreasing"===e?i>0&&(n+=360):"longer"===e?-180<i&&i<180&&(i>0?n+=360:r+=360):"shorter"===e&&(i>180?n+=360:i<-180&&(r+=360)),[n,r]}(r,[a,o]),mE(e,s,a),mE(t,s,o)}return o&&(e.coords=e.coords.map(t=>t*e.alpha),t.coords=t.coords.map(e=>e*t.alpha)),Object.assign(n=>{n=a?a(n):n;let r=e.coords.map((e,r)=>eE(e,t.coords[r],n)),l=eE(e.alpha,t.alpha,n),u={space:i,coords:r,alpha:l};return o&&(u.coords=u.coords.map(e=>e/l)),s!==i&&(u=LE(u,s)),u},{rangeArgs:l})}function jE(e){const t=e[0]/360*6,n=e[1]/100,r=e[2]/100;let i=[];if(0===n)i=[r,r,r];else{const e=Math.floor(t),s=r*(1-n),a=r*(1-n*(t-e)),o=r*(1-n*(1+e-t));let l,u,c;1===e?(l=a,u=r,c=s):2===e?(l=s,u=r,c=o):3===e?(l=s,u=a,c=r):4===e?(l=o,u=s,c=r):5===e?(l=r,u=s,c=a):(l=r,u=o,c=s),i=[l,u,c]}return i}function GE(e,t,n){e.Color=Er,ir.fromGray=sr.fromGray=function(e,t,n){const r=t.map(e=>Array.isArray(e)?e:[0,e]),i=wr(e,r[2][0],r[2][1],0,1,n);return[i,i,i]},_r.fromGray=vr.fromGray=function(e,t,n){const r=t.map(e=>Array.isArray(e)?e:[0,e]);return[0,0,wr(e,r[2][0],r[2][1],0,100,n)]},br.fromGray=function(e,t,n){const r=t.map(e=>Array.isArray(e)?e:[0,e]),i=Math.abs(r[1][0]-r[1][1])/2+Math.abs(r[2][0]-r[2][1])/2,s=wr(e,0,i,0,100);let a,o;return s<50?(o=s,a=100-s):s>=50&&(a=s,o=100-s),[0,a,o]},zt.fromGray=Vt.fromGray=Zt.fromGray=xr.fromGray=function(e,t,n){const r=t.map(e=>Array.isArray(e)?e:[0,e]);return[wr(e,r[0][0],r[0][1],0,100,n),0,0]},e.Color.addColorMode("rgb",ir),e.Color.addColorMode(Cr,sr),e.Color.addColorMode("hsb",_r),e.Color.addColorMode("hsl",vr),e.Color.addColorMode("hwb",br),e.Color.addColorMode("lab",zt),e.Color.addColorMode("lch",Vt),e.Color.addColorMode(Ar,Zt),e.Color.addColorMode(Tr,xr),n.presetup=function(){const t=this,n=["Red","Green","Blue","Alpha"];for(let i in n){const r=n[i],s=e.Color.prototype["set"+r];e.Color.prototype["set"+r]=function(e,n){return n=n||t?._renderer?.states?.colorMaxes?.rgb[i],s.call(this,e,n)}}function r(n,r){const i=e.Color.prototype["_get"+n];e.Color.prototype["_get"+n]=function(e){if(Object.keys(r).includes(this.mode))e=e||t?._renderer?.states?.colorMaxes?.[this.mode][r[this.mode]];else{const n=Object.keys(r)[0];e=e||t?._renderer?.states?.colorMaxes?.[n][r[n]]}return i.call(this,e)}}r("Red",{rgb:0,[Cr]:0}),r("Green",{rgb:1,[Cr]:1}),r("Blue",{rgb:2,[Cr]:2}),r("Alpha",{rgb:3,[Cr]:3,hsb:3,hsl:3,hwb:3,lab:3,lch:3,[Ar]:3,[Tr]:3}),r("Hue",{hsl:0,hsb:0,hwb:0,lch:2,[Tr]:2}),r("Saturation",{hsl:1,hsb:1}),r("Brightness",{hsb:2}),r("Lightness",{hsl:2})}}function HE(e,t){t.RGB="rgb",t.RGBHDR=Cr,t.HSB="hsb",t.HSL="hsl",t.HWB="hwb",t.LAB="lab",t.LCH="lch",t.OKLAB=Ar,t.OKLCH=Tr,t.RGBA=Mr,e.Renderer.states.colorMode="rgb",e.Renderer.states.colorMaxes={rgb:[255,255,255,255],[Cr]:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1],hwb:[360,100,100,1],lab:[100,[-125,125],[-125,125],1],lch:[100,150,360,1],[Ar]:[100,[-125,125],[-125,125],1],[Tr]:[100,150,360,1],clone:function(){const e={...this};for(const t in e)e[t]instanceof Array&&(e[t]=[...e[t]]);return e}},t.color=function(...e){if(e[0]instanceof Er)return e[0];const t=Array.isArray(e[0])?e[0]:e;return new Er(t,this._renderer.states.colorMode,this._renderer.states.colorMaxes[this._renderer.states.colorMode],{clamp:!0})},t.red=function(e){return this.color(e)._getRed()},t.green=function(e){return this.color(e)._getGreen()},t.blue=function(e){return this.color(e)._getBlue()},t.alpha=function(e){return this.color(e)._getAlpha()},t.hue=function(e){let t="hsl",n=0;return"hsb"===this._renderer.states.colorMode||"hsl"===this._renderer.states.colorMode?t=this._renderer.states.colorMode:"lch"!==this._renderer.states.colorMode&&"oklch"!==this._renderer.states.colorMode||(t=this._renderer.states.colorMode,n=2),this.color(e)._getHue(this._renderer.states.colorMaxes[t][n])},t.saturation=function(e){const t="hsb"===this._renderer.states.colorMode?"hsb":"hsl";return this.color(e)._getSaturation(this._renderer.states.colorMaxes[t][1])},t.brightness=function(e){return this.color(e)._getBrightness(this._renderer.states.colorMaxes.hsb[2])},t.lightness=function(e){return this.color(e)._getLightness(this._renderer.states.colorMaxes.hsl[2])},t.lerpColor=function(e,t,n){return e.lerp(t,n,this._renderer.states.colorMode)},t.paletteLerp=function(e,t){const n=e[0];if(t<n[1])return this.color(n[0]);for(let r=1;r<e.length;r++){const n=e[r];if(t<n[1]){const i=e[r-1];return this.lerpColor(this.color(i[0]),this.color(n[0]),(t-i[1])/(n[1]-i[1]))}}return this.color(e[e.length-1][0])}}function WE(e){const t=[];for(let n=0;n<e.length;n++)t.push(new Dr(e[n]));return t}function $E(e,t){e.XML=Dr}function qE(e,t){e.File=kr}function XE(e,t){e.Element=Nr}function YE(e,t){const n=Fr._toPixels(e),r=e.width,i=e.height,s=r*i,a=new Int32Array(s);for(let A=0;A<s;A++)a[A]=Fr._getARGB(n,A);let o,l,u,c,h,d,p,f,m,g;const v=new Int32Array(s),y=new Int32Array(s),b=new Int32Array(s),x=new Int32Array(s);let _,w,S,E,C=0;for(function(e){let t=3.5*e|0;if(t=t<1?1:t<248?t:248,Ir!==t){Rr=1+(Ir=t)<<1,Lr=new Int32Array(Rr),Pr=new Array(Rr);for(let t=0;t<Rr;t++)Pr[t]=new Int32Array(256);let e,n,r,i;for(let s=1,a=t-1;s<t;s++){Lr[t+s]=Lr[a]=n=a*a,r=Pr[t+s],i=Pr[a--];for(let e=0;e<256;e++)r[e]=i[e]=n*e}e=Lr[t]=t*t,r=Pr[t];for(let t=0;t<256;t++)r[t]=e*t}}(t),w=0;w<i;w++){for(_=0;_<r;_++){if(c=u=l=h=o=0,d=_-Ir,d<0)g=-d,d=0;else{if(d>=r)break;g=0}for(S=g;S<Rr&&!(d>=r);S++){const e=a[d+C];E=Pr[S],h+=E[(-16777216&e)>>>24],l+=E[(16711680&e)>>16],u+=E[(65280&e)>>8],c+=E[255&e],o+=Lr[S],d++}p=C+_,v[p]=h/o,y[p]=l/o,b[p]=u/o,x[p]=c/o}C+=r}for(C=0,f=-Ir,m=f*r,w=0;w<i;w++){for(_=0;_<r;_++){if(c=u=l=h=o=0,f<0)g=p=-f,d=_;else{if(f>=i)break;g=0,p=f,d=_+m}for(S=g;S<Rr&&!(p>=i);S++)E=Pr[S],h+=E[v[d]],l+=E[y[d]],u+=E[b[d]],c+=E[x[d]],o+=Lr[S],p++,d+=r;a[_+C]=h/o<<24|l/o<<16|u/o<<8|c/o}C+=r,m+=r,f++}Fr._setPixels(n,a)}function ZE(e,t){e.Vector=Ur}function KE(e){let t=0;for(let n=1;n<e.length;n++)t+=e[n-1].position.dist(e[n].position);return t}function QE(e,t){e.Shape=ni,e.Contour=jr,e.ShapePrimitive=Vr,e.Vertex=zr,e.Anchor=Gr,e.Segment=Hr,e.LineSegment=Wr,e.BezierSegment=$r,e.SplineSegment=qr,e.Point=Xr,e.Line=Yr,e.Triangle=Zr,e.Quad=Kr,e.TriangleFan=Qr,e.TriangleStrip=Jr,e.QuadStrip=ei,e.PrimitiveVisitor=ri,e.PrimitiveToPath2DConverter=ii,e.PrimitiveToVerticesConverter=si,e.PointAtLengthGetter=ai,t.bezierOrder=function(e){return this._renderer.bezierOrder(e)},t.splineVertex=function(...e){let t=0,n=0,r=0,i=0,s=0;2===e.length?[t,n]=e:4===e.length?[t,n,i,s]=e:3===e.length?[t,n,r]=e:5===e.length&&([t,n,r,i,s]=e),this._renderer.splineVertex(t,n,r,i,s)},t.splineProperty=function(e,t){return this._renderer.splineProperty(e,t)},t.splineProperties=function(e){return this._renderer.splineProperties(e)},t.vertex=function(e,t){let n,r,i;n=r=i=0,3===arguments.length?n=arguments[2]:4===arguments.length?(r=arguments[2],i=arguments[3]):5===arguments.length&&(n=arguments[2],r=arguments[3],i=arguments[4]),this._renderer.vertex(e,t,n,r,i)},t.beginContour=function(e){this._renderer.beginContour(e)},t.endContour=function(e=Ve){this._renderer.endContour(e)}}function JE(e,t,n){const r=eC(t,n)[0];let i=e;i instanceof Blob||(i=new Blob([e])),ui.saveAs(i,r)}function eC(e,t){t&&!0!==t&&"true"!==t||(t=""),e||(e="untitled");let n="";return e&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e=`${e}.${n}`),[e,n]}function tC(e,t){e.Image=ci}function nC(e,t){e.Renderer=di}function rC(e,t){function n(e,t,n){(t._userNode?t._userNode:document.body).appendChild(e);const r=n?new gi(e,t):new Nr(e,t);return t._elements.push(r),r}function r(e,t,r,i){const s=document.createElement(t);"string"==typeof(r=r||"")&&(r=[r]);for(const n of r){const e=document.createElement("source");e.setAttribute("src",n),s.appendChild(e)}const a=n(s,e,!0);if(a.loadedmetadata=!1,s.addEventListener("loadedmetadata",()=>{a.width=s.videoWidth,a.height=s.videoHeight,0===a.elt.width&&(a.elt.width=s.videoWidth),0===a.elt.height&&(a.elt.height=s.videoHeight),a.presetPlaybackRate&&(a.elt.playbackRate=a.presetPlaybackRate,delete a.presetPlaybackRate),a.loadedmetadata=!0}),"function"==typeof i){const e=()=>{i(a),s.removeEventListener("canplaythrough",e)};s.addEventListener("canplaythrough",e)}return a}t.createVideo=function(e,t){return r(this,pi,e,t)},t.createAudio=function(e,t){return r(this,fi,e,t)},t.VIDEO=pi,t.AUDIO=fi,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){const t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise(function(n,r){t.call(navigator,e,n,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),t.createCapture=function(...r){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");let i,s,a=!0,o=!0,l=!1;for(const e of r)e===t.VIDEO?o=!1:e===t.AUDIO?a=!1:"object"==typeof e?(void 0!==e.flipped&&(l=e.flipped,delete e.flipped),i=Object.assign({},i,e)):"function"==typeof e&&(s=e);const u={video:a,audio:o};i=Object.assign({},u,i);const c=document.createElement(pi);c.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(i).then(function(e){try{"srcObject"in c?c.srcObject=e:c.src=window.URL.createObjectURL(e)}catch(t){c.src=e}}).catch(t=>{"NotFoundError"===t.name&&e._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===t.name&&e._friendlyError("Access to the camera was denied","createCapture"),console.error(t)});const h=n(c,this,!0);return h.loadedmetadata=!1,c.addEventListener("loadedmetadata",function(){c.play(),c.width?(h.width=c.width,h.height=c.height,l&&(h.elt.style.transform="scaleX(-1)")):(h.width=h.elt.width=c.videoWidth,h.height=h.elt.height=c.videoHeight),h.loadedmetadata=!0,s&&s(c.srcObject)}),h.flipped=l,h},e.MediaElement=gi,gi.prototype._getSoundOut=function(){return e.soundOut},gi.prototype._getAudioContext=function(){return"function"==typeof t.getAudioContext?t.getAudioContext():void 0}}function iC(e,t,n,r,i){let s;return"corner"===i?s={x:e,y:t,w:Math.abs(n),h:Math.abs(r)}:"corners"===i?s={x:Math.min(e,n),y:Math.min(t,r),w:Math.abs(n-e),h:Math.abs(r-t)}:"radius"===i?s={x:e-(n=Math.abs(n)),y:t-(r=Math.abs(r)),w:2*n,h:2*r}:"center"===i&&(s={x:e-.5*(n=Math.abs(n)),y:t-.5*(r=Math.abs(r)),w:n,h:r}),s}function sC(e,t){t._normalizeArcAngles=(e,t,n,r,i)=>{let s;return e-=ke*Math.floor(e/ke),t-=ke*Math.floor(t/ke),s=Math.min(Math.abs(e-t),ke-Math.abs(e-t)),i&&(e=e<=Ae?Math.atan(n/r*Math.tan(e)):e>Ae&&e<=3*Ae?Math.atan(n/r*Math.tan(e))+Te:Math.atan(n/r*Math.tan(e))+ke,t=t<=Ae?Math.atan(n/r*Math.tan(t)):t>Ae&&t<=3*Ae?Math.atan(n/r*Math.tan(t))+Te:Math.atan(n/r*Math.tan(t))+ke),e>t&&(t+=ke),{start:e,stop:t,correspondToSamePoint:s<1e-5}},t.arc=function(e,t,n,r,i,s,a,o){if(!this._renderer.states.strokeColor&&!this._renderer.states.fillColor)return this;if(i===s)return this;i=this._toRadians(i),s=this._toRadians(s);const l=vi.modeAdjust(e,t,n,r,this._renderer.states.ellipseMode),u=this._normalizeArcAngles(i,s,l.w,l.h,!0);return u.correspondToSamePoint?this._renderer.ellipse([l.x,l.y,l.w,l.h,o]):(this._renderer.arc(l.x,l.y,l.w,l.h,u.start,u.stop,a,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[l.x,l.y,l.w,l.h,u.start,u.stop,a])),this},t.ellipse=function(e,t,n,r,i){return this._renderEllipse(...arguments)},t.circle=function(...e){const t=e.slice(0,2);return t.push(e[2],e[2]),this._renderEllipse(...t)},t._renderEllipse=function(e,t,n,r,i){if(!this._renderer.states.strokeColor&&!this._renderer.states.fillColor)return this;void 0===r&&(r=n);const s=vi.modeAdjust(e,t,n,r,this._renderer.states.ellipseMode);return this._renderer.ellipse([s.x,s.y,s.w,s.h,i]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[s.x,s.y,s.w,s.h]),this},t.line=function(...e){return this._renderer.states.strokeColor&&this._renderer.line(...e),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",e),this},t.point=function(...t){return this._renderer.states.strokeColor&&(1===t.length&&t[0]instanceof e.Vector?this._renderer.point.call(this._renderer,t[0].x,t[0].y,t[0].z):(this._renderer.point(...t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",t))),this},t.quad=function(...e){return(this._renderer.states.strokeColor||this._renderer.states.fillColor)&&(this._renderer.isP3D&&e.length<12?this._renderer.quad.call(this._renderer,e[0],e[1],0,e[2],e[3],0,e[4],e[5],0,e[6],e[7],0,e[8],e[9]):(this._renderer.quad(...e),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",e))),this},t.rect=function(...e){return this._renderRect(...e)},t.square=function(e,t,n,r,i,s,a){return this._renderRect.call(this,e,t,n,n,r,i,s,a)},t._renderRect=function(){if(this._renderer.states.strokeColor||this._renderer.states.fillColor){3===arguments.length&&(arguments[3]=arguments[2]);const e=vi.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer.states.rectMode);"corner"===this._renderer.states.rectMode&&(e.w=arguments[2],e.h=arguments[3]);const t=[e.x,e.y,e.w,e.h];for(let n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},t.triangle=function(...e){return(this._renderer.states.strokeColor||this._renderer.states.fillColor)&&this._renderer.triangle(e),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",e),this}}function aC(e,t){t.ellipseMode=function(e){return"corner"!==e&&"corners"!==e&&"radius"!==e&&"center"!==e||this._renderer.states.setValue("ellipseMode",e),this},t.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},t.rectMode=function(e){return"corner"!==e&&"corners"!==e&&"radius"!==e&&"center"!==e||this._renderer.states.setValue("rectMode",e),this},t.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},t.strokeCap=function(e){return"round"!==e&&"butt"!==e&&"square"!==e||this._renderer.strokeCap(e),this},t.strokeJoin=function(e){return"round"!==e&&"bevel"!==e&&"miter"!==e||this._renderer.strokeJoin(e),this},t.strokeWeight=function(e){return this._renderer.strokeWeight(e),this}}function oC(e,t){t.bezier=function(...e){return this._renderer.states.strokeColor||this._renderer.states.fillColor?(this._renderer.bezier(...e),this):this},t.bezierPoint=function(e,t,n,r,i){const s=1-i;return Math.pow(s,3)*e+3*Math.pow(s,2)*i*t+3*s*Math.pow(i,2)*n+Math.pow(i,3)*r},t.bezierTangent=function(e,t,n,r,i){const s=1-i;return 3*r*Math.pow(i,2)-3*n*Math.pow(i,2)+6*n*s*i-6*t*s*i+3*t*Math.pow(s,2)-3*e*Math.pow(s,2)},t.spline=function(...e){return this._renderer.states.strokeColor||this._renderer.states.fillColor?(this._renderer.spline(...e),this):this},t.splinePoint=function(e,t,n,r,i){const s=this._renderer.states.splineProperties.tightness,a=i*i*i,o=i*i;return e*((s-1)/2*a+(1-s)*o+(s-1)/2*i)+t*((s+3)/2*a+(-5-s)/2*o+1)+n*((-3-s)/2*a+(s+2)*o+(1-s)/2*i)+r*((1-s)/2*a+(s-1)/2*o)},t.splineTangent=function(e,t,n,r,i){const s=this._renderer.states.splineProperties.tightness,a=i*i*3,o=2*i;return e*((s-1)/2*a+(1-s)*o+(s-1)/2)+t*((s+3)/2*a+(-5-s)/2*o)+n*((-3-s)/2*a+(s+2)*o+(1-s)/2)+r*((1-s)/2*a+(s-1)/2*o)}}function lC(e,t){t.beginShape=function(e){this._renderer.beginShape(...arguments)},t.bezierVertex=function(...e){this._renderer.bezierVertex(...e)},t.endShape=function(e,t=1){t<1&&(console.log("ðŸŒ¸ p5.js says: You can not have less than one instance"),t=1),this._renderer.endShape(e,t)},t.normal=function(e,t,n){return this._assert3d("normal"),this._renderer.normal(...arguments),this},t.vertexProperty=function(e,t){this._renderer.vertexProperty(e,t)}}function uC(e,t){t.beginClip=function(e={}){this._renderer.beginClip(e)},t.endClip=function(){this._renderer.endClip()},t.clip=function(e,t){this._renderer.beginClip(t),e(),this._renderer.endClip(t)},t.background=function(...e){return this._renderer.background(...e),this},t.clear=function(...e){const t=e[0]||0,n=e[1]||0,r=e[2]||0,i=e[3]||0;return this._renderer.clear(t,n,r,i),this},t.colorMode=function(e,t,n,r,i){if(["rgb","rgbhdr","hsb","hsl","hwb","lab","lch","oklab","oklch"].includes(e)){this._renderer.states.setValue("colorMode",e),this._renderer.states.setValue("colorMaxes",this._renderer.states.colorMaxes.clone());const s=this._renderer.states.colorMaxes[e];2===arguments.length?(s[0]=t,s[1]=t,s[2]=t,s[3]=t):4===arguments.length?(s[0]=t,s[1]=n,s[2]=r):5===arguments.length&&(s[0]=t,s[1]=n,s[2]=r,s[3]=i)}return this._renderer.states.colorMode},t.fill=function(...e){return this._renderer.fill(...e),this},t.noFill=function(){return this._renderer.noFill(),this},t.noStroke=function(){return this._renderer.states.setValue("strokeColor",null),this},t.stroke=function(...e){return this._renderer.stroke(...e),this},t.erase=function(e=255,t=255){return this._renderer.erase(e,t),this},t.noErase=function(){return this._renderer.noErase(),this},t.blendMode=function(e){"normal"===e&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=We),this._renderer.blendMode(e)}}function cC(e){const t=e.options.typed?function(e){switch(!0){case"true"===e:case"false"===e:return"true"===e;case/.\./.test(e):return parseFloat(e);case isFinite(e):return parseInt(e);default:return e}}(e.value):e.value;e.entry.push(e.reviver(t,e.row,e.col)),e.value="",e.col++}function hC(e){e.output.push(e.entry),e.entry=[],e.row++,e.col=1}function dC(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function pC(e,t){t.blend=function(...t){this._renderer?this._renderer.blend(...t):e.Renderer2D.prototype.blend.apply(this,t)},t.copy=function(...e){let n,r,i,s,a,o,l,u,c;if(9===e.length)n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];else{if(8!==e.length)throw new Error("Signature not supported");n=this,r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7]}t._copyHelper(this,n,r,i,s,a,o,l,u,c)},t._copyHelper=(e,t,n,r,i,s,a,o,l,u)=>{const c=t.canvas.width/t.width;let h=0,d=0;t._renderer&&t._renderer.isP3D&&(h=t.width/2,d=t.height/2),e._renderer&&e._renderer.isP3D?(e.push(),e.resetMatrix(),e.noLights(),e.blendMode(e.BLEND),e.imageMode(e.CORNER),e._renderer.image(t,n+h,r+d,i,s,a,o,l,u),e.pop()):e.drawingContext.drawImage(t.canvas,c*(n+h),c*(r+d),c*i,c*s,a,o,l,u)},t.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},t.filter=function(...t){let{shader:n,operation:r,value:i,useWebGL:s}=function(...t){let n={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return t[0]instanceof e.Shader?(n.shader=t[0],n):(n.operation=t[0],t.length>1&&"number"==typeof t[1]&&(n.value=t[1]),!1===t[t.length-1]&&(n.useWebGL=!1),n)}(...t);this._renderer.isP3D&&n?this._renderer.filter(n):s||this._renderer.isP3D?(!s&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?this._renderer.filter(r,i):(n?this._renderer.filterRenderer.setOperation(r,i,n):this._renderer.filterRenderer.setOperation(r,i),this._renderer.filterRenderer.applyFilter())):void 0!==this.canvas?Fr.apply(this.canvas,Fr[r],i):Fr.apply(this.elt,Fr[r],i)},t.get=function(e,t,n,r){return this._renderer.get(...arguments)},t.loadPixels=function(...e){this._renderer.loadPixels()},t.set=function(e,t,n){this._renderer.set(e,t,n)},t.updatePixels=function(e,t,n,r){0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,r)}}function fC(e,t){e.Matrix=Ci}function mC(e,t){e.DataArray=Ai}function gC(e,t){e.Geometry=Ti}function vC(e,t){e.Quat=Di}function yC(e,t){e.RenderBuffer=ki}function bC(e,t){const n=t.DEGREES="degrees",r=t.RADIANS="radians";t._angleMode=r,t.acos=function(e){return this._fromRadians(Math.acos(e))},t.asin=function(e){return this._fromRadians(Math.asin(e))},t.atan=function(e){return this._fromRadians(Math.atan(e))},t.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},t.cos=function(e){return Math.cos(this._toRadians(e))},t.sin=function(e){return Math.sin(this._toRadians(e))},t.tan=function(e){return Math.tan(this._toRadians(e))},t.degrees=e=>e*Fe,t.radians=e=>e*Ne,t.angleMode=function(e){if(void 0===e)return this._angleMode;if(e===n||e===r){if(e===this._angleMode)return;e===r?(this.pRotationX=this.pRotationX*Ne,this.pRotationY=this.pRotationY*Ne,this.pRotationZ=this.pRotationZ*Ne):(this.pRotationX=this.pRotationX*Fe,this.pRotationY=this.pRotationY*Fe,this.pRotationZ=this.pRotationZ*Fe),this._angleMode=e}},t._toRadians=function(e){return this._angleMode===n?e*Ne:e},t._toDegrees=function(e){return this._angleMode===r?e*Fe:e},t._fromRadians=function(e){return this._angleMode===n?e*Fe:e},t._fromDegrees=function(e){return this._angleMode===r?e*Ne:e}}function xC(e,t){t.createImage=function(t,n){return new e.Image(t,n)},t.saveCanvas=function(...e){let n,r,i,s,a;if(e[0]instanceof HTMLCanvasElement)n=e[0],e.shift();else if(e[0]instanceof Nr)n=e[0].elt,e.shift();else if(e[0]instanceof ms){const t=e[0];s=this.createGraphics(t.width,t.height),s.pixelDensity(t.pixelDensity()),t.loadPixels(),s.loadPixels(),s.pixels.set(t.pixels),s.updatePixels(),n=s._renderer.canvas,e.shift()}else n=this._curElement&&this._curElement.elt;switch(e.length>=1&&(r=e[0]),e.length>=2&&(i=e[1]),i=i||t._checkFileExtension(r,i)[1]||"png",i){default:a="image/png";break;case"webp":a="image/webp";break;case"jpeg":case"jpg":a="image/jpeg"}n.toBlob(e=>{t.downloadFile(e,r,i),s&&s.remove()},a)},t.encodeAndDownloadGif=function(e,n){const r=e.gifProperties;let i=r.loopLimit;1===i?i=null:null===i&&(i=0);const s=new Uint8Array(e.width*e.height*r.numFrames),a=[],o={};for(let t=0;t<r.numFrames;t++){const n=new Set,i=r.frames[t].image.data,s=i.length,l=new Uint32Array(e.width*e.height);for(let e=0,t=0;e<s;e+=4,t++){const r=i[e+0]<<16|i[e+1]<<8|i[e+2];n.add(r),l[t]=r}const u=[...n].sort().toString();void 0===o[u]?o[u]={freq:1,frames:[t]}:(o[u].freq+=1,o[u].frames.push(t)),a.push(l)}let l=[];const u=Object.keys(o).sort(function(e,t){return o[t].freq-o[e].freq}),c=u[0].split(",").map(e=>parseInt(e));l=l.concat(o[c].frames);const h=new Set(c);for(let t=1;t<u.length;t++){const e=u[t].split(",").map(e=>parseInt(e)).filter(e=>!h.has(e));if(c.length+e.length<=256){for(let t=0;t<e.length;t++)c.push(e[t]),h.add(e[t]);l=l.concat(o[u[t]].frames)}}l=new Set(l);const d={};for(let t=0;t<c.length;t++)d[c[t]]||(d[c[t]]=t);let p=1;for(;p<c.length;)p<<=1;c.length=p;const f={loop:i,palette:new Uint32Array(c)},m=new yi.GifWriter(s,e.width,e.height,f);let g={};for(let t=0;t<r.numFrames;t++){const n=!l.has(t),i=n?[]:c,s=new Uint8Array(e.width*e.height),o={},u=new Set;a[t].forEach((e,r)=>{n?(void 0===o[e]&&(o[e]=i.length,i.push(e)),s[r]=o[e]):s[r]=d[e],t>0&&a[t-1][r]!==e&&u.add(e)});const h={},p=i.filter(e=>!u.has(e));if(p.length>0){const e=p[0],r=n?o[e]:d[e];if(t>0){for(let e=0;e<a[t].length;e++)a[t-1][e]===a[t][e]&&(s[e]=r);h.transparent=r,g.frameOpts.disposal=1}}if(h.delay=r.frames[t].delay/10,n){let e=1;for(;e<i.length;)e<<=1;i.length=e,h.palette=new Uint32Array(i)}t>0&&m.addFrame(0,0,e.width,e.height,g.pixelPaletteIndex,g.frameOpts),g={pixelPaletteIndex:s,frameOpts:h}}g.frameOpts.disposal=1,m.addFrame(0,0,e.width,e.height,g.pixelPaletteIndex,g.frameOpts);const v=new Blob([s.slice(0,m.end())],{type:"image/gif"});t.downloadFile(v,n,"gif")},t.saveFrames=function(e,n,r,i,s){let a=r||3;a=Math.max(Math.min(a,15),0),a*=1e3;let o=i||15;o=Math.max(Math.min(o,22),0);let l=0;const u=t._makeFrame,c=this._curElement.elt;let h=[];const d=setInterval(()=>{h.push(u(e+l,n,c)),l++},1e3/o);setTimeout(()=>{if(clearInterval(d),s)s(h);else for(const e of h)t.downloadFile(e.imageData,e.filename,e.ext);h=[]},a+.01)},t._makeFrame=function(e,t,n){let r,i;if(r=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":default:i="image/png";break;case"jpeg":case"jpg":i="image/jpeg"}else t="png",i="image/png";let s=r.toDataURL(i);s=s.replace(i,"image/octet-stream");const a={};return a.imageData=s,a.filename=e,a.ext=t,a}}async function _C(e,t){try{const n=await fetch(e);if(n.ok){let e;switch(t){case"json":e=await n.json();break;case"text":e=await n.text();break;case"arrayBuffer":e=await n.arrayBuffer();break;case"blob":e=await n.blob();break;case"bytes":if(n.bytes)e=await n.bytes();else{const t=await n.arrayBuffer();e=new Uint8Array(t)}break;default:throw new Error("Unsupported response type")}return{data:e,headers:n.headers}}{const e=new Bi(n.statusText);throw e.status=n.status,e.response=n,e.ok=!1,e}}catch(n){throw n instanceof TypeError?console.log("You may have encountered a CORS error"):n instanceof Bi?console.log("You have encountered a HTTP error"):n instanceof SyntaxError&&console.log("There is an error parsing the response to requested data structure"),n}}function wC(e,t){function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}t.loadJSON=async function(t,n,r){try{const{data:e}=await _C(t,"json");return n?n(e):e}catch(i){if(e._friendlyFileLoadError(5,t),r)return r(i);throw i}},t.loadStrings=async function(t,n,r){try{let{data:e}=await _C(t,"text");return e=e.split(/\r?\n/),n?n(e):e}catch(i){if(e._friendlyFileLoadError(3,t),r)return r(i);throw i}},t.loadTable=async function(t,n,r,i,s){"function"==typeof arguments[arguments.length-1]&&("function"==typeof arguments[arguments.length-2]?(i=arguments[arguments.length-2],s=arguments[arguments.length-1]):i=arguments[arguments.length-1]),"string"!=typeof n&&(n=","),"function"==typeof r&&(r=!1);try{let{data:s}=await _C(t,"text"),a=new e.Table;return s=function(e,t,n=e=>e){const r=Object.create(null);if(r.options=t||{},r.reviver=n,r.value="",r.entry=[],r.output=[],r.col=1,r.row=1,r.options.delimiter=void 0===r.options.delimiter?'"':t.delimiter,r.options.delimiter.length>1||0===r.options.delimiter.length)throw Error(`CSVError: delimiter must be one character [${r.options.separator}]`);if(r.options.separator=void 0===r.options.separator?",":t.separator,r.options.separator.length>1||0===r.options.separator.length)throw Error(`CSVError: separator must be one character [${r.options.separator}]`);const i=new RegExp(`${dC(r.options.delimiter)}|${dC(r.options.separator)}|\r\n|\n|\r|[^${dC(r.options.delimiter)}${dC(r.options.separator)}\r\n]+`,"y"),s=/^(\r\n|\n|\r)$/;let a=[],o="",l=0;for(;null!==(a=i.exec(e));)switch(o=a[0],l){case 0:switch(!0){case o===r.options.delimiter:l=3;break;case o===r.options.separator:l=0,cC(r);break;case s.test(o):l=0,cC(r),hC(r);break;default:r.value+=o,l=2}break;case 2:switch(!0){case o===r.options.separator:l=0,cC(r);break;case s.test(o):l=0,cC(r),hC(r);break;default:throw l=4,Error(`CSVError: Illegal state [row:${r.row}, col:${r.col}]`)}break;case 3:1==(o===r.options.delimiter)?l=4:(l=3,r.value+=o);break;case 4:switch(!0){case o===r.options.delimiter:l=3,r.value+=o;break;case o===r.options.separator:l=0,cC(r);break;case s.test(o):l=0,cC(r),hC(r);break;default:throw Error(`CSVError: Illegal state [row:${r.row}, col:${r.col}]`)}}return 0!==r.entry.length&&(cC(r),hC(r)),r.output}(s,{separator:n}),a.columns=r?s.shift():Array(s[0].length).fill(null),s.forEach(t=>{const n=new e.TableRow(t);a.addRow(n)}),i?i(a):a}catch(a){if(e._friendlyFileLoadError(2,t),s)return s(a);throw a}},t.loadXML=async function(t,n,r){try{const r=new DOMParser;let{data:i}=await _C(t,"text");const s=r.parseFromString(i,"application/xml");return i=new e.XML(s),n?n(i):i}catch(i){if(e._friendlyFileLoadError(1,t),r)return r(i);throw i}},t.loadBytes=async function(t,n,r){try{let{data:e}=await _C(t,"arrayBuffer");return e=new Uint8Array(e),n?n(e):e}catch(i){if(e._friendlyFileLoadError(6,t),r)return r(i);throw i}},t.loadBlob=async function(e,t,n){try{const{data:n}=await _C(e,"blob");return t?t(n):n}catch(r){if(n)return n(r);throw r}},t.httpGet=async function(e,t="text",n,r){return"function"==typeof t&&(r=n,n=t,t="text"),this.httpDo(e,"GET",t,n,r)},t.httpPost=async function(t,n,r="text",i,s){"function"==typeof n?(i=n,s=r,n=void 0,r="text"):"function"==typeof r&&(s=i,i=r,r="text");let a=n,o="text/plain";n instanceof e.XML?(a=n.serialize(),o="application/xml"):n instanceof e.Image?(a=await n.toBlob(),o="image/png"):"object"==typeof n&&(a=JSON.stringify(n),o="application/json");const l={method:"POST",body:a,headers:{"Content-Type":o}};a&&(l.body=a);const u=new Request(t,l);return this.httpDo(u,"POST",r,i,s)},t.httpDo=async function(e,t,n,r,i){if("function"==typeof n&&(i=r,r=n,n=void 0),!n)switch("string"==typeof e?e.split(".").pop():e.url.split(".").pop()){case"json":n="json";break;case"jpg":case"jpeg":case"png":case"webp":case"gif":n="blob";break;default:n="text"}const s=new Request(e,{method:t});try{const{data:e}=await _C(s,n);return r?r(e):e}catch(a){if(i)return i(a);throw a}},t._pWriters=[],t.createWriter=function(n,r){let i;for(const s in t._pWriters)if(t._pWriters[s].name===n)return i=new e.PrintWriter(n+this.millis(),r),t._pWriters.push(i),i;return i=new e.PrintWriter(n,r),t._pWriters.push(i),i},e.PrintWriter=function(e,n){let r=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+=`${e}\n`},this.clear=function(){this.content=""},this.close=function(){const i=[];i.push(this.content),t.writeFile(i,e,n);for(const e in t._pWriters)t._pWriters[e].name===this.name&&t._pWriters.splice(e,1);r.clear(),r={}}},t.save=function(n,r,i){const s=arguments,a=this._curElement?this._curElement.elt:this.elt;if(0!==s.length)if(s[0]instanceof di||s[0]instanceof us)t.saveCanvas(s[0].canvas,s[1],s[2]);else if(1===s.length&&"string"==typeof s[0])t.saveCanvas(a,s[0]);else switch(eC(s[1],s[2])[1]){case"json":return void t.saveJSON(s[0],s[1],s[2]);case"txt":return void t.saveStrings(s[0],s[1],s[2]);default:s[0]instanceof Array?t.saveStrings(s[0],s[1],s[2]):s[0]instanceof e.Table?t.saveTable(s[0],s[1],s[2]):s[0]instanceof e.Image?t.saveCanvas(s[0].canvas,s[1]):s[0]instanceof e.SoundFile&&t.saveSound(s[0],s[1],s[2],s[3])}else t.saveCanvas(a)},t.saveJSON=function(e,t,n){let r;r=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(r.split("\n"),t,"json")},t.saveStrings=function(t,n,r,i){const s=r||"txt",a=new e.PrintWriter(n,s);for(let e of t)i?a.write(e+"\r\n"):a.write(e+"\n");a.close(),a.clear()},t.saveTable=function(e,t,r){let i;void 0===r?(i=t.substring(t.lastIndexOf(".")+1,t.length),i===t&&(i="csv")):i=r;const s=this.createWriter(t,i),a=e.columns;let o=",";if("tsv"===i&&(o="\t"),"html"!==i){const t=e.toString(o);s.write(t)}else{s.print("<html>"),s.print("<head>");let t='  <meta http-equiv="content-type" content';if(t+='="text/html;charset=utf-8" />',s.print(t),s.print("</head>"),s.print("<body>"),s.print("  <table>"),"0"!==a[0]){s.print("    <tr>");for(let e=0;e<a.length;e++){const t=n(a[e]);s.print(`      <td>${t}`),s.print("      </td>")}s.print("    </tr>")}for(let r=0;r<e.rows.length;r++){s.print("    <tr>");for(let t=0;t<e.columns.length;t++){const i=n(e.rows[r].getString(t));s.print(`      <td>${i}`),s.print("      </td>")}s.print("    </tr>")}s.print("  </table>"),s.print("</body>"),s.print("</html>")}s.close(),s.clear()},t.writeFile=function(e,n,r){let i="application/octet-stream";t._isSafari()&&(i="text/plain");const s=new Blob(e,{type:i});t.downloadFile(s,n,r)},t.downloadFile=JE,t._checkFileExtension=eC,t._isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function SC(e,t){function n(e,t,n){const r=parseInt(n/2),i=4*t,s=new Uint8Array(4*t);for(let a=0;a<r;++a){const t=a*i,r=(n-a-1)*i;s.set(e.subarray(t,t+i)),e.copyWithin(t,r,r+i),e.set(s,r)}return e}function r(e,t,n,r,i,s,a,o,l,u,c){if("cover"===e){const{x:e,y:r,w:i,h:h}=function(e,t,n,r,i,s,a,o){const l=Math.max(n/a,r/o),[u,c]=[n/l,r/l];let h=i,d=s;return"center"===e?h+=(a-u)/2:"right"===e&&(h+=a-u),"center"===t?d+=(o-c)/2:"bottom"===t&&(d+=o-c),{x:h,y:d,w:u,h:c}}(t,n,s,a,o,l,u,c);o=e,l=r,u=i,c=h}if("contain"===e){const{x:e,y:o,w:l,h:h}=function(e,t,n,r,i,s,a,o){const l=Math.max(a/i,o/s),[u,c]=[a/l,o/l];let h=n,d=r;return"center"===e?h+=(i-u)/2:"right"===e&&(h+=i-u),"center"===t?d+=(s-c)/2:"bottom"===t&&(d+=s-c),{x:h,y:d,w:u,h:c}}(t,n,r,i,s,a,u,c);r=e,i=o,s=l,a=h}return{sx:o,sy:l,sw:u,sh:c,dx:r,dy:i,dw:s,dh:a}}function i(e,t){return e>0&&e<t?e:t}t.loadImage=async function(t,n,r){try{let r=new e.Image(1,1,this);const i=new Request(t,{method:"GET",mode:"cors"}),{data:s,headers:a}=await _C(i,"bytes"),o=a.get("content-type");if(null===o&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),o&&o.includes("image/gif"))await async function(t,n){const r=new yi.GifReader(t);n.width=n.canvas.width=r.width,n.height=n.canvas.height=r.height;const i=[],s=r.numFrames();let a=new Uint8ClampedArray(n.width*n.height*4);const o=(t,r)=>{try{r.decodeAndBlitFrameRGBA(t,a)}catch(i){throw e._friendlyFileLoadError(8,n.src),i}};for(let e=0;e<s;e++){const t=r.frameInfo(e),s=n.drawingContext.getImageData(0,0,n.width,n.height);a=s.data.slice(),o(e,r);const l=new ImageData(a,n.width,n.height);n.drawingContext.putImageData(l,0,0);let u=t.delay;0===u&&(u=10),i.push({image:n.drawingContext.getImageData(0,0,n.width,n.height),delay:10*u}),2===t.disposal?n.drawingContext.clearRect(t.x,t.y,t.width,t.height):3===t.disposal&&n.drawingContext.putImageData(s,0,0,t.x,t.y,t.width,t.height)}let l=r.loopCount();return null===l?l=1:0===l&&(l=null),n.drawingContext.putImageData(i[0].image,0,0),i.length>1&&(n.gifProperties={displayIndex:0,loopLimit:l,loopCount:0,frames:i,numFrames:s,playing:!0,timeDisplayed:0,lastChangeTime:0}),n}(s,r);else{const e=new Blob([s]),t=await createImageBitmap(e);r.width=r.canvas.width=t.width,r.height=r.canvas.height=t.height,r.drawingContext.drawImage(t,0,0)}return r.modified=!0,n?n(r):r}catch(i){if(e._friendlyFileLoadError(0,t),"function"==typeof r)return r(i);throw i}},t.saveGif=async function(r,i,s={delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar",reset:!0}){if("string"!=typeof r)throw TypeError("fileName parameter must be a string");if("number"!=typeof i)throw TypeError("Duration parameter must be a number");const a=s&&s.delay||0,o=s&&s.units||"seconds",l=s&&s.silent||!1,u=s&&s.notificationDuration||0,c=s&&s.notificationID||"progressBar",h=!s||void 0===s.reset||s.reset;if("number"!=typeof a)throw TypeError("Delay parameter must be a number");if("seconds"!==o&&"frames"!==o)throw TypeError('Units parameter must be either "frames" or "seconds"');if("boolean"!=typeof l)throw TypeError("Silent parameter must be a boolean");if("number"!=typeof u)throw TypeError("Notification duration parameter must be a number");if("string"!=typeof c)throw TypeError("Notification ID parameter must be a string");this._recording=!0;let d=this._targetFrameRate;d!==1/0&&void 0!==d&&0!==d||(d=60);let p=1/d*1e3;p=p<20?20:p;const f="seconds"===o?i*d:i,m="seconds"===o?a*d:a;let g,v;h?(g=m,this.frameCount=g,v=f+m):(g=this.frameCount+m,v=g+f);const y=this._renderer._pixelDensity;this.pixelDensity(1);let b,x,_,w=[];for(null!==document.getElementById(c)&&document.getElementById(c).remove(),l||(b=this.createP(""),b.id(c),b.style("font-size","16px"),b.style("font-family","Montserrat"),b.style("background-color","#ffffffa0"),b.style("padding","8px"),b.style("border-radius","10px"),b.position(0,0)),this._renderer instanceof e.RendererGL&&(_=this.drawingContext,x=new Uint8Array(_.drawingBufferWidth*_.drawingBufferHeight*4)),this.noLoop(),await new Promise(requestAnimationFrame);g<v;){let t;this.redraw(),await new Promise(requestAnimationFrame),this._renderer instanceof e.RendererGL?(x=new Uint8Array(_.drawingBufferWidth*_.drawingBufferHeight*4),_.readPixels(0,0,_.drawingBufferWidth,_.drawingBufferHeight,_.RGBA,_.UNSIGNED_BYTE,x),t=n(x,this.width,this.height)):t=this.drawingContext.getImageData(0,0,this.width,this.height).data,w.push(t),g++,l||b.html("Saved frame <b>"+w.length.toString()+"</b> out of "+f.toString()),await new Promise(e=>setTimeout(e,0))}l||b.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(y);const S=(0,xi.GIFEncoder)(),E=function(e){let t=new Uint8Array(e.length*e[0].length);for(let r=0;r<e.length;r++)t.set(e[r],r*e[0].length);let n=(0,xi.quantize)(t,256,{format:"rgba4444",oneBitAlpha:!0});return 256===n.length?n[n.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:n.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),n}(w),C={},A=e=>{const t=e.length/4,n=new Uint8Array(t);for(let r=0;r<t;r++){const t=e[4*r]<<24|e[4*r+1]<<16|e[4*r+2]<<8|e[4*r+3];void 0===C[t]&&(C[t]=(0,xi.nearestColorIndex)(E,e.slice(4*r,4*(r+1)))),n[r]=C[t]}return n},T=E.length-1;let M=[];for(let e=0;e<w.length;e++){const t=A(w[e]),n=t.slice();if(0===e)S.writeFrame(t,this.width,this.height,{palette:E,delay:p,dispose:1});else{for(let e=0;e<t.length;e++)t[e]===M[e]&&(t[e]=T);S.writeFrame(t,this.width,this.height,{delay:p,transparent:!0,transparentIndex:T,dispose:1})}M=n,l||b.html("Rendered frame <b>"+e.toString()+"</b> out of "+f.toString()),await new Promise(e=>setTimeout(e,0))}S.finish();const D=S.bytesView(),k=new Blob([D],{type:"image/gif"});w=[],this._recording=!1,this.loop(),l||(b.html("Done. Downloading your gif!ðŸŒ¸"),u>0&&setTimeout(()=>b.remove(),1e3*u)),t.downloadFile(k,r,"gif")},t.image=function(e,t,n,s,a,o,l,u,c,h,d,p){let f=e.width,m=e.height;p=p||"center",d=d||"center",e.elt&&(f=void 0!==f?f:e.elt.width,m=void 0!==m?m:e.elt.height),e.elt&&e.elt.videoWidth&&!e.canvas&&(f=void 0!==f?f:e.elt.videoWidth,m=void 0!==m?m:e.elt.videoHeight);let g=t,v=n,y=s||f,b=a||m,x=o||0,_=l||0,w=void 0!==u?u:f,S=void 0!==c?c:m;w=i(w,f),S=i(S,m);let E=1;e.elt&&!e.canvas&&e.elt.style.width&&(E=e.elt.videoWidth&&!s?e.elt.videoWidth:e.elt.width,E/=parseInt(e.elt.style.width,10)),x*=E,_*=E,S*=E,w*=E;let C=vi.modeAdjust(g,v,y,b,this._renderer.states.imageMode);C=r(h,d,p,C.x,C.y,C.w,C.h,x,_,w,S),this._renderer.image(e,C.sx,C.sy,C.sw,C.sh,C.dx,C.dy,C.dw,C.dh)},t.tint=function(...e){const t=this.color(...e);this._renderer.states.setValue("tint",t._getRGBA([255,255,255,255]))},t.noTint=function(){this._renderer.states.setValue("tint",null)},t.imageMode=function(e){"corner"!==e&&"corners"!==e&&"center"!==e||this._renderer.states.setValue("imageMode",e)}}function EC(e,t){t.camera=function(...e){return this._assert3d("camera"),this._renderer.camera(...e),this},t.perspective=function(...e){return this._assert3d("perspective"),this._renderer.perspective(...e),this},t.linePerspective=function(e){if(!(this._renderer instanceof ls))throw new Error("linePerspective() must be called in WebGL mode.");return this._renderer.linePerspective(e)},t.ortho=function(...e){return this._assert3d("ortho"),this._renderer.ortho(...e),this},t.frustum=function(...e){return this._assert3d("frustum"),this._renderer.frustum(...e),this},t.createCamera=function(){return this._assert3d("createCamera"),this._renderer.createCamera()},t.setCamera=function(e){this._renderer.setCamera(e)},e.Camera=Ui,ls.prototype.camera=function(...e){this.states.curCamera.camera(...e)},ls.prototype.perspective=function(...e){this.states.curCamera.perspective(...e)},ls.prototype.linePerspective=function(e){if(void 0===e)return this.states.curCamera.useLinePerspective;this.states.curCamera.useLinePerspective=e},ls.prototype.ortho=function(...e){this.states.curCamera.ortho(...e)},ls.prototype.frustum=function(...e){this.states.curCamera.frustum(...e)},ls.prototype.createCamera=function(){const e=new Ui(this);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),e},ls.prototype.setCamera=function(e){this.states.setValue("curCamera",e),this.states.setValue("uPMatrix",this.states.uPMatrix.clone()),this.states.uPMatrix.set(e.projMatrix),this.states.setValue("uViewMatrix",this.states.uViewMatrix.clone()),this.states.uViewMatrix.set(e.cameraMatrix)}}function CC(e,t){e.Shader=zi}function AC(e,t){e.RendererGL=ls,t.setAttributes=function(t,n){if(void 0===this._glAttributes)return void console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");let r=!0;void 0!==n?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[t]!==n&&(this._glAttributes[t]=n,r=!1)):t instanceof Object&&this._glAttributes!==t&&(this._glAttributes=t,r=!1),this._renderer.isP3D&&!r&&(!this._setupDone&&this._renderer.geometryBufferCache.numCached()>0?e._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()"):(this._renderer._resetContext(),this._renderer.states.curCamera&&(this._renderer.states.curCamera._renderer=this._renderer)))},t._assert3d=function(e){if(!this._renderer.isP3D)throw new Error(`${e}() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information.`)},e.renderers[ge]=e.RendererGL,e.renderers[ve]=e.RendererGL}function TC(e,t,n,r,i,s,a,o,l,u){const c=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,n);const h=o===t.RGBA?4:3,d=s*a*h,p=l===t.UNSIGNED_BYTE?Uint8Array:Float32Array;if(e instanceof p&&e.length===d||(e=new p(d)),t.readPixels(r,u?u-i-a:i,s,a,o,l,e),t.bindFramebuffer(t.FRAMEBUFFER,c),u){const t=Math.floor(a/2),n=new p(s*h);for(let r=0;r<t;r++){const t=r*s*4,i=(a-r-1)*s*4;n.set(e.subarray(t,t+4*s)),e.copyWithin(t,i,i+4*s),e.set(n,i)}}return e}function MC(e,t,n,r,i,s,a){const o=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,t);const l=i===e.RGBA?4:3,u=new(s===e.UNSIGNED_BYTE?Uint8Array:Float32Array)(l);return e.readPixels(n,a?a-r-1:r,1,1,i,s,u),e.bindFramebuffer(e.FRAMEBUFFER,o),Array.from(u)}function DC(e,t){t.strokeMode=function(e){if(void 0===e)return this._renderer._simpleLines?be:xe;if("simple"===e)this._renderer._simpleLines=!0;else{if("full"!==e)throw Error("no such parameter");this._renderer._simpleLines=!1}},t.buildGeometry=function(e){return this._renderer.buildGeometry(e)},t.freeGeometry=function(e){this._renderer.geometryBufferCache.freeBuffers(e.gid)},t.plane=function(e=50,t=e,n=1,r=1){return this._assert3d("plane"),this._renderer.plane(e,t,n,r),this},t.box=function(e,t,n,r,i){return this._assert3d("box"),this._renderer.box(e,t,n,r,i),this},t.sphere=function(e=50,t=24,n=16){return this._assert3d("sphere"),this._renderer.sphere(e,t,n),this},t.cylinder=function(e=50,t=e,n=24,r=1,i=!0,s=!0){return this._assert3d("cylinder"),this._renderer.cylinder(e,t,n,r,i,s),this},t.cone=function(e=50,t=e,n=24,r=1,i=!0){return this._assert3d("cone"),this._renderer.cone(e,t,n,r,i),this},t.ellipsoid=function(e=50,t=e,n=e,r=24,i=16){return this._assert3d("ellipsoid"),this._renderer.ellipsoid(e,t,n,r,i),this},t.torus=function(e,t,n,r){return this._assert3d("torus"),this._renderer.torus(e,t,n,r),this},ls.prototype.point=function(e,t,n=0){const r=[];return r.push(new Ur(e,t,n)),this._drawPoints(r,this.buffers.point),this},ls.prototype.triangle=function(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o="tri";if(!this.geometryInHash(o)){const e=new Ti(1,1,function(){const e=[];e.push(new Ur(0,0,0)),e.push(new Ur(1,0,0)),e.push(new Ur(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]},this);e._edgesToVertices(),e.computeNormals(),e.gid=o,this.geometryBufferCache.ensureCached(e)}const l=this.states.uModelMatrix.copy();try{const e=Math.sign(t*i-r*n+r*a-s*i+s*n-t*a),l=new Ci([r-t,i-n,0,0,s-t,a-n,0,0,0,0,e,0,t,n,0,1]).mult(this.states.uModelMatrix);this.states.setValue("uModelMatrix",l),this.model(this.geometryBufferCache.getGeometryByID(o))}finally{this.states.setValue("uModelMatrix",l)}return this},ls.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,ke,Ve,e[4])},ls.prototype.arc=function(...e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7]||25;let u,c;if(Math.abs(a-s)>=ke?(u="ellipse",c=`${u}|${l}|`):(u="arc",c=`${u}|${s}|${a}|${o}|${l}|`),!this.geometryInHash(c)){const e=new Ti(l,1,function(){if(s.toFixed(10)!==a.toFixed(10)){"pie"!==o&&void 0!==o||(this.vertices.push(new Ur(.5,.5,0)),this.uvs.push([.5,.5]));for(let e=0;e<=l;e++){const t=e/l*(a-s)+s,n=.5+Math.cos(t)/2,r=.5+Math.sin(t)/2;this.vertices.push(new Ur(n,r,0)),this.uvs.push([n,r]),e<l-1&&(this.faces.push([0,e+1,e+2]),this.edges.push([e+1,e+2]))}switch(o){case"pie":this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case je:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case Ve:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}},this);e.computeNormals(),l<=50?e._edgesToVertices(e):this.states.strokeColor&&console.log(`Cannot apply a stroke to an ${u} with more than 50 detail`),e.gid=c,this.geometryBufferCache.ensureCached(e)}const h=this.states.uModelMatrix;this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone());try{this.states.uModelMatrix.translate([t,n,0]),this.states.uModelMatrix.scale(r,i,1),this.model(this.geometryBufferCache.getGeometryByID(c))}finally{this.states.setValue("uModelMatrix",h)}return this},ls.prototype.rect=function(e){const t=e[0],n=e[1],r=e[2],i=e[3];if(void 0===e[4]){const s=this._pInst._glAttributes.perPixelLighting,a=e[4]||(s?1:24),o=e[5]||(s?1:16),l=`rect|${a}|${o}`;if(!this.geometryInHash(l)){const e=new Ti(a,o,function(){for(let e=0;e<=this.detailY;e++){const t=e/this.detailY;for(let e=0;e<=this.detailX;e++){const n=e/this.detailX,r=new Ur(n,t,0);this.vertices.push(r),this.uvs.push(n,t)}}a>0&&o>0&&(this.edges=[[0,a],[a,(a+1)*(o+1)-1],[(a+1)*(o+1)-1,(a+1)*o],[(a+1)*o,0]])},this);e.computeFaces().computeNormals()._edgesToVertices(),e.gid=l,this.geometryBufferCache.ensureCached(e)}const u=this.states.uModelMatrix;this.states.setValue("uModelMatrix",this.states.uModelMatrix.copy());try{this.states.uModelMatrix.translate([t,n,0]),this.states.uModelMatrix.scale(r,i,1),this.model(this.geometryBufferCache.getGeometryByID(l))}finally{this.states.setValue("uModelMatrix",u)}}else{let s=e[4],a=void 0===e[5]?s:e[5],o=void 0===e[6]?a:e[6],l=void 0===e[7]?o:e[7],u=t,c=n,h=r,d=i;if(h+=u,d+=c,u>h){const e=u;u=h,h=e}if(c>d){const e=c;c=d,d=e}const p=Math.min((h-u)/2,(d-c)/2);s>p&&(s=p),a>p&&(a=p),o>p&&(o=p),l>p&&(l=p);let f=u,m=c,g=h,v=d;const y=this.states.textureMode;this.states.setValue("textureMode",ut);const b=this.bezierOrder();this.bezierOrder(2),this.beginShape();const x=(e,t)=>[e,t,0,(e-f)/r,(t-m)/i];0!==a?(this.vertex(...x(g-a,m)),this.bezierVertex(...x(g,m)),this.bezierVertex(...x(g,m+a))):this.vertex(...x(g,m)),0!==o?(this.vertex(...x(g,v-o)),this.bezierVertex(...x(g,v)),this.bezierVertex(...x(g-o,v))):this.vertex(...x(g,v)),0!==l?(this.vertex(...x(f+l,v)),this.bezierVertex(...x(f,v)),this.bezierVertex(...x(f,v-l))):this.vertex(...x(f,v)),0!==s?(this.vertex(...x(f,m+s)),this.bezierVertex(...x(f,m)),this.bezierVertex(...x(f+s,m))):this.vertex(...x(f,m)),this.endShape(ze),this.states.setValue("textureMode",y),this.bezierOrder(b)}return this},ls.prototype.quad=function(e,t,n,r,i,s,a,o,l,u,c,h,d=2,p=2){const f=`quad|${e}|${t}|${n}|${r}|${i}|${s}|${a}|${o}|${l}|${u}|${c}|${h}|${d}|${p}`;if(!this.geometryInHash(f)){const m=new Ti(d,p,function(){let d=1/(this.detailX-1),p=1/(this.detailY-1);for(let f=0;f<this.detailY;f++)for(let m=0;m<this.detailX;m++){let g=m*d,v=f*p,y=(1-g)*((1-v)*e+v*u)+g*((1-v)*r+v*a),b=(1-g)*((1-v)*t+v*c)+g*((1-v)*i+v*o),x=(1-g)*((1-v)*n+v*h)+g*((1-v)*s+v*l);this.vertices.push(new Ur(y,b,x)),this.uvs.push([g,v])}},this);m.faces=[];for(let e=0;e<p-1;e++)for(let t=0;t<d-1;t++){let n=t+e*d,r=t+1+e*d,i=t+1+(e+1)*d,s=t+(e+1)*d;m.faces.push([n,r,i]),m.faces.push([n,i,s])}m.computeNormals(),m.edges.length=0;const g=[0,2,3,1];for(let e=0;e<g.length;e++){const t=g[e],n=g[(e+1)%g.length];m.edges.push([t,n])}m._edgesToVertices(),m.gid=f,this.geometryBufferCache.ensureCached(m)}return this.model(this.geometryBufferCache.getGeometryByID(f)),this},ls.prototype.bezier=function(e,t,n,r,i,s,a,o,l,u,c,h){8===arguments.length&&(c=o,u=a,o=s,a=i,i=r,r=n,n=s=l=h=0),this.bezierOrder(),this.bezierOrder(3),this.beginShape(),this.vertex(e,t,n),this.bezierVertex(r,i,s),this.bezierVertex(a,o,l),this.bezierVertex(u,c,h),this.endShape()},ls.prototype.curve=function(e,t,n,r,i,s,a,o,l,u,c,h){8===arguments.length&&(u=a,c=o,a=i,o=r,i=r=n,n=s=l=h=0),this.beginShape(),this.splineVertex(e,t,n),this.splineVertex(r,i,s),this.splineVertex(a,o,l),this.splineVertex(u,c,h),this.endShape()},ls.prototype.line=function(...e){return 6===e.length?(this.beginShape(1),this.vertex(e[0],e[1],e[2]),this.vertex(e[3],e[4],e[5]),this.endShape()):4===e.length&&(this.beginShape(1),this.vertex(e[0],e[1],0),this.vertex(e[2],e[3],0),this.endShape()),this},ls.prototype.image=function(e,t,n,r,i,s,a,o,l){this._isErasing&&this.blendMode(this._cachedBlendMode),this.push(),this.noLights(),this.states.setValue("strokeColor",null),this.texture(e),this.states.setValue("textureMode",ut);let u=0;t<=e.width&&(u=t/e.width);let c=1;t+r<=e.width&&(c=(t+r)/e.width);let h=0;n<=e.height&&(h=n/e.height);let d=1;n+i<=e.height&&(d=(n+i)/e.height),this._drawingImage=!0,this.beginShape(),this.vertex(s,a,0,u,h),this.vertex(s+o,a,0,c,h),this.vertex(s+o,a+l,0,c,d),this.vertex(s,a+l,0,u,d),this.endShape(ze),this._drawingImage=!1,this.pop(),this._isErasing&&this.blendMode($e)};const n=function(e,t,n,r,i,s,a){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;const o=(s=void 0===s||s)?-2:0,l=(i=i<1?1:i)+((a=void 0===a?0!==t:a)?2:0),u=Math.atan2(e-t,n),c=Math.sin(u),h=Math.cos(u);let d,p,f;for(d=o;d<=l;++d){let s,a=d/i,o=n*a;for(d<0?(o=0,a=0,s=e):d>i?(o=n,a=1,s=t):s=e+(t-e)*a,-2!==d&&d!==i+2||(s=0),o-=n/2,p=0;p<r;++p){const e=p/(r-1),n=2*Math.PI*e,l=Math.sin(n),u=Math.cos(n);let f;this.vertices.push(new Ur(l*s,o,u*s)),f=d<0?new Ur(0,-1,0):d>i&&t?new Ur(0,1,0):new Ur(l*h,c,u*h),this.vertexNormals.push(f),this.uvs.push(e,a)}}let m=0;if(s){for(f=0;f<r;++f){const e=(f+1)%r;this.faces.push([m+f,m+r+e,m+r+f])}m+=2*r}for(d=0;d<i;++d){for(p=0;p<r;++p){const e=(p+1)%r;this.faces.push([m+p,m+e,m+r+e]),this.faces.push([m+p,m+r+e,m+r+p])}m+=r}if(a)for(m+=r,p=0;p<r;++p)this.faces.push([m+p,m+(p+1)%r,m+r])};ls.prototype.plane=function(e=50,t=e,n=1,r=1){const i=`plane|${n}|${r}`;if(!this.geometryInHash(i)){const e=new Ti(n,r,function(){let e,t,n;for(let r=0;r<=this.detailY;r++){t=r/this.detailY;for(let r=0;r<=this.detailX;r++)e=r/this.detailX,n=new Ur(e-.5,t-.5,0),this.vertices.push(n),this.uvs.push(e,t)}},this);e.computeFaces().computeNormals(),n<=1&&r<=1?e._makeTriangleEdges()._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),e.gid=i,this.geometryBufferCache.ensureCached(e)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(i),e,t,1)},ls.prototype.box=function(e=50,t=e,n=t,r,i){const s=this.attributes&&this.attributes.perPixelLighting;void 0===r&&(r=s?1:4),void 0===i&&(i=s?1:4);const a=`box|${r}|${i}`;if(!this.geometryInHash(a)){const e=new Ti(r,i,function(){this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach((e,t)=>{const n=4*t;for(let r=0;r<4;r++){const t=e[r],n=new Ur((2*(1&t)-1)/2,((2&t)-1)/2,((4&t)/2-1)/2);this.vertices.push(n),this.uvs.push(1&r,(2&r)/2)}this.faces.push([n,n+1,n+2]),this.faces.push([n+2,n+1,n+3])})},this);e.computeNormals(),r<=4&&i<=4?e._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),e.gid=a,this.geometryBufferCache.ensureCached(e)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(a),e,t,n)},ls.prototype.sphere=function(e=50,t=24,n=16){this.ellipsoid(e,e,e,t,n)},ls.prototype.ellipsoid=function(t=50,n=t,r=t,i=24,s=16){const a=`ellipsoid|${i}|${s}`;if(!this.geometryInHash(a)){const t=new Ti(i,s,function(){for(let t=0;t<=this.detailY;t++){const n=t/this.detailY,r=Math.PI*n-Math.PI/2,i=Math.cos(r),s=Math.sin(r);for(let t=0;t<=this.detailX;t++){const r=t/this.detailX,a=2*Math.PI*r,o=Math.cos(a),l=Math.sin(a),u=new e.Vector(i*l,s,i*o);this.vertices.push(u),this.vertexNormals.push(u),this.uvs.push(r,n)}}},this);t.computeFaces(),i<=24&&s<=24?t._makeTriangleEdges()._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),t.gid=a,this.geometryBufferCache.ensureCached(t)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(a),t,n,r)},ls.prototype.cylinder=function(t=50,r=t,i=24,s=1,a=!0,o=!0){const l=`cylinder|${i}|${s}|${a}|${o}`;if(!this.geometryInHash(l)){const t=new e.Geometry(i,s,function(){n.call(this,1,1,1,i,s,a,o)},this);i<=24&&s<=16?t._makeTriangleEdges()._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),t.gid=l,this.geometryBufferCache.ensureCached(t)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(l),t,r,t)},ls.prototype.cone=function(e=50,t=e,r=24,i=1,s=!0){const a=`cone|${r}|${i}|${s}`;if(!this.geometryInHash(a)){const e=new Ti(r,i,function(){n.call(this,1,0,1,r,i,s,!1)},this);r<=24&&i<=16?e._makeTriangleEdges()._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),e.gid=a,this.geometryBufferCache.ensureCached(e)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(a),e,t,e)},ls.prototype.torus=function(e=50,t=10,n=24,r=16){if(0===e)return;if(0===t)return;const i=(t/e).toPrecision(4),s=`torus|${i}|${n}|${r}`;if(!this.geometryInHash(s)){const e=new Ti(n,r,function(){for(let e=0;e<=this.detailY;e++){const t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),s=Math.sin(n),a=1+i*r;for(let e=0;e<=this.detailX;e++){const n=e/this.detailX,o=2*Math.PI*n,l=Math.cos(o),u=Math.sin(o),c=new Ur(a*l,a*u,i*s),h=new Ur(r*l,r*u,s);this.vertices.push(c),this.vertexNormals.push(h),this.uvs.push(n,t)}}},this);e.computeFaces(),n<=24&&r<=16?e._makeTriangleEdges()._edgesToVertices():this.states.strokeColor&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),e.gid=s,this.geometryBufferCache.ensureCached(e)}this._drawGeometryScaled(this.geometryBufferCache.getGeometryByID(s),e,e,e)},t.curveDetail=function(e){if(!(this._renderer instanceof ls))throw new Error("curveDetail() only works in WebGL mode. Did you mean to call createCanvas(width, height, WEBGL)?");return this._renderer.curveDetail(e)}}function kC(e,t){t.ambientLight=function(e,t,n,r){return this._assert3d("ambientLight"),this._renderer.ambientLight(...arguments),this},t.specularColor=function(e,t,n){return this._assert3d("specularColor"),this._renderer.specularColor(...arguments),this},t.directionalLight=function(e,t,n,r,i,s){return this._assert3d("directionalLight"),this._renderer.directionalLight(...arguments),this},t.pointLight=function(e,t,n,r,i,s){return this._assert3d("pointLight"),this._renderer.pointLight(...arguments),this},t.imageLight=function(e){this._renderer.imageLight(e)},t.panorama=function(e){this.filter(this._renderer._getSphereMapping(e))},t.lights=function(){return this._assert3d("lights"),this._renderer.lights(),this},t.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),this._renderer.lightFalloff(e,t,n),this},t.spotLight=function(e,t,n,r,i,s,a,o,l,u,c){return this._assert3d("spotLight"),this._renderer.spotLight(...arguments),this},t.noLights=function(...e){return this._assert3d("noLights"),this._renderer.noLights(),this},ls.prototype.ambientLight=function(e,t,n,r){const i=this._pInst.color(...arguments);this.states.setValue("ambientLightColors",[...this.states.ambientLightColors]),this.states.ambientLightColors.push(i._array[0],i._array[1],i._array[2]),this.states.setValue("enableLighting",!0)},ls.prototype.specularColor=function(e,t,n){const r=this._pInst.color(...arguments);this.states.setValue("specularColors",[r._array[0],r._array[1],r._array[2]])},ls.prototype.directionalLight=function(e,t,n,r,i,s){let a,o,l,u;a=e instanceof Er?e:this._pInst.color(e,t,n);const c=arguments[arguments.length-1];"number"==typeof c?(o=arguments[arguments.length-3],l=arguments[arguments.length-2],u=arguments[arguments.length-1]):(o=c.x,l=c.y,u=c.z);const h=Math.sqrt(o*o+l*l+u*u);this.states.setValue("directionalLightDirections",[...this.states.directionalLightDirections]),this.states.directionalLightDirections.push(o/h,l/h,u/h),this.states.setValue("directionalLightDiffuseColors",[...this.states.directionalLightDiffuseColors]),this.states.directionalLightDiffuseColors.push(a._array[0],a._array[1],a._array[2]),this.states.setValue("directionalLightSpecularColors",[...this.states.directionalLightSpecularColors]),Array.prototype.push.apply(this.states.directionalLightSpecularColors,this.states.specularColors),this.states.setValue("enableLighting",!0)},ls.prototype.pointLight=function(e,t,n,r,i,s){let a,o,l,u;a=e instanceof Er?e:this._pInst.color(e,t,n);const c=arguments[arguments.length-1];"number"==typeof c?(o=arguments[arguments.length-3],l=arguments[arguments.length-2],u=arguments[arguments.length-1]):(o=c.x,l=c.y,u=c.z),this.states.setValue("pointLightPositions",[...this.states.pointLightPositions]),this.states.pointLightPositions.push(o,l,u),this.states.setValue("pointLightDiffuseColors",[...this.states.pointLightDiffuseColors]),this.states.pointLightDiffuseColors.push(a._array[0],a._array[1],a._array[2]),this.states.setValue("pointLightSpecularColors",[...this.states.pointLightSpecularColors]),Array.prototype.push.apply(this.states.pointLightSpecularColors,this.states.specularColors),this.states.setValue("enableLighting",!0)},ls.prototype.imageLight=function(e){this.states.setValue("activeImageLight",e),this.states.setValue("enableLighting",!0)},ls.prototype.lights=function(){const e=this._pInst.color("rgb(128,128,128)");this.ambientLight(e),this.directionalLight(e,0,0,-1)},ls.prototype.lightFalloff=function(e,t,n){e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this.states.setValue("constantAttenuation",e),this.states.setValue("linearAttenuation",t),this.states.setValue("quadraticAttenuation",n)},ls.prototype.spotLight=function(e,t,n,r,i,s,a,o,l,u,c){let h,d,p;const f=arguments.length;switch(f){case 11:case 10:h=this._pInst.color(e,t,n),d=new Ur(r,i,s),p=new Ur(a,o,l);break;case 9:e instanceof Er?(h=e,d=new Ur(t,n,r),p=new Ur(i,s,a),u=o,c=l):r instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=new Ur(i,s,a),u=o,c=l):a instanceof Ur?(h=this._pInst.color(e,t,n),d=new Ur(r,i,s),p=a,u=o,c=l):(h=this._pInst.color(e,t,n),d=new Ur(r,i,s),p=new Ur(a,o,l));break;case 8:e instanceof Er?(h=e,d=new Ur(t,n,r),p=new Ur(i,s,a),u=o):r instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=new Ur(i,s,a),u=o):(h=this._pInst.color(e,t,n),d=new Ur(r,i,s),p=a,u=o);break;case 7:e instanceof Er&&t instanceof Ur?(h=e,d=t,p=new Ur(n,r,i),u=s,c=a):e instanceof Er&&i instanceof Ur?(h=e,d=new Ur(t,n,r),p=i,u=s,c=a):r instanceof Ur&&i instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=i,u=s,c=a):e instanceof Er?(h=e,d=new Ur(t,n,r),p=new Ur(i,s,a)):r instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=new Ur(i,s,a)):(h=this._pInst.color(e,t,n),d=new Ur(r,i,s),p=a);break;case 6:r instanceof Ur&&i instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=i,u=s):e instanceof Er&&i instanceof Ur?(h=e,d=new Ur(t,n,r),p=i,u=s):e instanceof Er&&t instanceof Ur&&(h=e,d=t,p=new Ur(n,r,i),u=s);break;case 5:e instanceof Er&&t instanceof Ur&&n instanceof Ur?(h=e,d=t,p=n,u=r,c=i):r instanceof Ur&&i instanceof Ur?(h=this._pInst.color(e,t,n),d=r,p=i):e instanceof Er&&i instanceof Ur?(h=e,d=new Ur(t,n,r),p=i):e instanceof Er&&t instanceof Ur&&(h=e,d=t,p=new Ur(n,r,i));break;case 4:h=e,d=t,p=n,u=r;break;case 3:h=e,d=t,p=n;break;default:return void console.warn(`Sorry, input for spotlight() is not in prescribed format. Too ${f<3?"few":"many"} arguments were provided`)}this.states.setValue("spotLightDiffuseColors",[h._array[0],h._array[1],h._array[2]]),this.states.setValue("spotLightSpecularColors",[...this.states.specularColors]),this.states.setValue("spotLightPositions",[d.x,d.y,d.z]),p.normalize(),this.states.setValue("spotLightDirections",[p.x,p.y,p.z]),void 0===u&&(u=Math.PI/3),void 0!==c&&c<1?(c=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===c&&(c=100),u=this._pInst._toRadians(u),this.states.setValue("spotLightAngle",[Math.cos(u)]),this.states.setValue("spotLightConc",[c]),this.states.setValue("enableLighting",!0)},ls.prototype.noLights=function(){this.states.setValue("activeImageLight",null),this.states.setValue("enableLighting",!1),this.states.setValue("ambientLightColors",[]),this.states.setValue("specularColors",[1,1,1]),this.states.setValue("directionalLightDirections",[]),this.states.setValue("directionalLightDiffuseColors",[]),this.states.setValue("directionalLightSpecularColors",[]),this.states.setValue("pointLightPositions",[]),this.states.setValue("pointLightDiffuseColors",[]),this.states.setValue("pointLightSpecularColors",[]),this.states.setValue("spotLightPositions",[]),this.states.setValue("spotLightDirections",[]),this.states.setValue("spotLightDiffuseColors",[]),this.states.setValue("spotLightSpecularColors",[]),this.states.setValue("spotLightAngle",[]),this.states.setValue("spotLightConc",[]),this.states.setValue("constantAttenuation",1),this.states.setValue("linearAttenuation",0),this.states.setValue("quadraticAttenuation",0),this.states.setValue("_useShininess",1),this.states.setValue("_useMetalness",0)}}function NC(e,t){t.loadShader=async function(e,t,n,r){const i=new zi;try{return i._vertSrc=(await _C(e,"text")).data,i._fragSrc=(await _C(t,"text")).data,n?n(i):i}catch(s){if(r)return r(s);throw s}},t.createShader=function(e,t,n){return new zi(this._renderer,e,t,n)},t.loadFilterShader=async function(e,t,n){try{const n=await(await this.loadStrings(e)).join("\n"),r=this.createFilterShader(n,!0);return t&&t(r),r}catch(r){n?n(r):console.error(r)}},t.createFilterShader=function(e,t=!1){let n=e.includes("#version 300 es")?"#version 300 es\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uProjectionMatrix;\n\n      in vec3 aPosition;\n      in vec2 aTexCoord;\n      out vec2 vTexCoord;\n\n      void main() {\n        // transferring texcoords for the frag shader\n        vTexCoord = aTexCoord;\n\n        // copy position with a fourth coordinate for projection (1.0 is normal)\n        vec4 positionVec4 = vec4(aPosition, 1.0);\n\n        // project to 3D space\n        gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n      }\n    ":"\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uProjectionMatrix;\n\n      attribute vec3 aPosition;\n      // texcoords only come from p5 to vertex shader\n      // so pass texcoords on to the fragment shader in a varying variable\n      attribute vec2 aTexCoord;\n      varying vec2 vTexCoord;\n\n      void main() {\n        // transferring texcoords for the frag shader\n        vTexCoord = aTexCoord;\n\n        // copy position with a fourth coordinate for projection (1.0 is normal)\n        vec4 positionVec4 = vec4(aPosition, 1.0);\n\n        // project to 3D space\n        gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n      }\n    ";const r=new zi(this._renderer,n,e);return t||(this._renderer.GL?r.ensureCompiledOnContext(this._renderer):r.ensureCompiledOnContext(this)),r},t.shader=function(e){return this._assert3d("shader"),this._renderer.shader(e),this},t.strokeShader=function(e){return this._assert3d("strokeShader"),this._renderer.strokeShader(e),this},t.imageShader=function(e){return this._assert3d("imageShader"),this._renderer.imageShader(e),this},t.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},t.baseFilterShader=function(){return(this._renderer.filterRenderer||this._renderer).baseFilterShader()},t.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},t.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},t.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},t.resetShader=function(){return this._renderer.resetShader(),this},t.texture=function(e){return this._assert3d("texture"),e.gifProperties&&e._animateGif(this),this._renderer.texture(e),this},t.textureMode=function(e){"image"!==e&&"normal"!==e?console.warn(`You tried to set ${e} textureMode only supports IMAGE & NORMAL `):this._renderer.states.setValue("textureMode",e)},t.textureWrap=function(e,t=e){this._renderer.states.setValue("textureWrapX",e),this._renderer.states.setValue("textureWrapY",t);for(const n of this._renderer.textures.values())n.setWrapMode(e,t)},t.normalMaterial=function(...e){return this._assert3d("normalMaterial"),this._renderer.normalMaterial(...e),this},t.ambientMaterial=function(e,n,r){this._assert3d("ambientMaterial");const i=t.color.apply(this,arguments);return this._renderer.states.setValue("_hasSetAmbient",!0),this._renderer.states.setValue("curAmbientColor",i._array),this._renderer.states.setValue("_useNormalMaterial",!1),this._renderer.states.setValue("enableLighting",!0),this._renderer.states.fillColor||this._renderer.states.setValue("fillColor",new Er([1,1,1])),this},t.emissiveMaterial=function(e,n,r,i){this._assert3d("emissiveMaterial");const s=t.color.apply(this,arguments);return this._renderer.states.setValue("curEmissiveColor",s._array),this._renderer.states.setValue("_useEmissiveMaterial",!0),this._renderer.states.setValue("_useNormalMaterial",!1),this._renderer.states.setValue("enableLighting",!0),this},t.specularMaterial=function(e,n,r,i){this._assert3d("specularMaterial");const s=t.color.apply(this,arguments);return this._renderer.states.setValue("curSpecularColor",s._array),this._renderer.states.setValue("_useSpecularMaterial",!0),this._renderer.states.setValue("_useNormalMaterial",!1),this._renderer.states.setValue("enableLighting",!0),this},t.shininess=function(e){return this._assert3d("shininess"),this._renderer.shininess(e),this},t.metalness=function(e){return this._assert3d("metalness"),this._renderer.metalness(e),this},ls.prototype._applyColorBlend=function(e,t){const n=this.GL,r=this.states.drawMode===dt,i=t||this.states.userFillShader||this.states.userStrokeShader||this.states.userPointShader||r||"source-over"!==this.states.curBlendMode||e[e.length-1]<1||this._isErasing;return i!==this._isBlending&&(i||"source-over"!==this.states.curBlendMode&&"lighter"!==this.states.curBlendMode?n.enable(n.BLEND):n.disable(n.BLEND),n.depthMask(!0),this._isBlending=i),this._applyBlendMode(),e},ls.prototype._applyBlendMode=function(){if(this._cachedBlendMode===this.states.curBlendMode)return;const e=this.GL;switch(this.states.curBlendMode){case We:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case qe:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE);break;case $e:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_ALPHA);break;case Qe:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case Je:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_COLOR);break;case Ke:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case et:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case Ze:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Xe:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case Ye:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._cachedBlendMode=this.states.curBlendMode},ls.prototype.shader=function(e){this.states.setValue("userFillShader",e),this.states.setValue("_useNormalMaterial",!1),e.ensureCompiledOnContext(this),e.setDefaultUniforms()},ls.prototype.strokeShader=function(e){this.states.setValue("userStrokeShader",e),e.ensureCompiledOnContext(this),e.setDefaultUniforms()},ls.prototype.imageShader=function(e){this.states.setValue("userImageShader",e),e.ensureCompiledOnContext(this),e.setDefaultUniforms()},ls.prototype.resetShader=function(){this.states.setValue("userFillShader",null),this.states.setValue("userStrokeShader",null),this.states.setValue("userImageShader",null)},ls.prototype.texture=function(e){this.states.setValue("drawMode",dt),this.states.setValue("_useNormalMaterial",!1),this.states.setValue("_tex",e),this.states.setValue("fillColor",new Er([1,1,1]))},ls.prototype.normalMaterial=function(...e){this.states.setValue("drawMode",ht),this.states.setValue("_useSpecularMaterial",!1),this.states.setValue("_useEmissiveMaterial",!1),this.states.setValue("_useNormalMaterial",!0),this.states.setValue("curFillColor",[1,1,1,1]),this.states.setValue("fillColor",new Er([1,1,1])),this.states.setValue("strokeColor",null)},ls.prototype.shininess=function(e){e<1&&(e=1),this.states.setValue("_useShininess",e)},ls.prototype.metalness=function(e){const t=1-Math.exp(-e/100);this.states.setValue("_useMetalness",t)}}function FC(e,t){e.Graphics=us,sC(e,e.Graphics.prototype),aC(0,e.Graphics.prototype),oC(0,e.Graphics.prototype),lC(0,e.Graphics.prototype),QE(e,e.Graphics.prototype),uC(0,e.Graphics.prototype),SC(e,e.Graphics.prototype),xC(e,e.Graphics.prototype),pC(e,e.Graphics.prototype),WS(e,e.Graphics.prototype),DC(e,e.Graphics.prototype),kC(0,e.Graphics.prototype),NC(0,e.Graphics.prototype),HE(e,e.Graphics.prototype),bC(0,e.Graphics.prototype)}function IC(e,t){e.Texture=cs,e.MipmapTexture=hs}function RC({GL:e,webglVersion:t}){const n=e,r="webgl2"===t?n.getExtension("EXT_color_buffer_float")&&n.getExtension("EXT_float_blend"):n.getExtension("OES_texture_float"),i=r&&n.getExtension("OES_texture_float_linear"),s="webgl2"===t?n.getExtension("EXT_color_buffer_float"):n.getExtension("OES_texture_half_float");return{float:r,floatLinear:i,halfFloat:s,halfFloatLinear:s&&n.getExtension("OES_texture_half_float_linear")}}function LC(e,t){e.FramebufferCamera=ps,e.FramebufferTexture=fs,e.Framebuffer=ms}function PC(e,t){gs=e.renderers={},t.createCanvas=function(e,t,n,...r){let i="p2d";return Reflect.ownKeys(gs).includes(n)?i=n:r.unshift(n),this._renderer&&this._renderer.remove(),this._renderer=new gs[i](this,e,t,!0,...r),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer),this._renderer._applyDefaults(),Object.hasOwn(this,"pixels")||Object.defineProperty(this,"pixels",{get(){return this._renderer?.pixels}}),this._renderer},t.resizeCanvas=function(e,t,n){this._renderer&&(this._renderer.resize(e,t),n||this.redraw()),this._addAccsOutput()&&this._updateAccsOutput()},t.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},t.createGraphics=function(t,n,...r){return r[0]instanceof HTMLCanvasElement&&(r[1]=r[0],r[0]="p2d"),new e.Graphics(t,n,r[0],this,r[1])},t.createFramebuffer=function(e){return new ms(this._renderer,e)},t.clearDepth=function(e){this._assert3d("clearDepth"),this._renderer.clearDepth(e)}}function OC(e,t){e.Renderer2D=bs,e.renderers.p2d=bs,e.renderers["p2d-hdr"]=new Proxy(bs,{construct:(e,[t,n,r,i,s])=>new e(t,n,r,i,s,{colorSpace:"display-p3"})})}function BC(e){return function(t){if("constructor"===t)return;const n=Object.getOwnPropertyDescriptor(e,t),r=Object.getOwnPropertyDescriptor(xs.prototype,t),i=n&&n.get||r&&r.get;let s,a=!1,o=!1;if(!i){const e=xs.prototype[t];a="function"==typeof e,a||void 0===Et[t]||(o=!0,s=e)}if(a){const n=xs.prototype[t].bind(e);Object.defineProperty(window,t,{configurable:!0,enumerable:!0,value:n})}else if(o)Object.defineProperty(window,t,{configurable:!0,enumerable:!0,value:s});else if(i||!a){let n=null,r=null,i=null;Object.defineProperty(window,t,{configurable:!0,enumerable:!0,get:()=>{const s=e[t];return null===i?(i="function"==typeof s,i?(n=s,r=s.bind(e),r):s):i?(s!==n&&(n=s,r=s.bind(e)),r):s}})}}}function UC(e,t){const n="_Description",r="_fallbackDesc",i="_fallbackTable",s="_fte_",a="_Label",o="_labelDesc",l="_labelTable",u="_lte_";function c(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}t.describe=function(e,t){if("string"!=typeof e)return;const n=this.canvas.id;e=c(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e))},t.describeElement=function(e,t,n){if("string"!=typeof t||"string"!=typeof e)return;const r=this.canvas.id;t=c(t);let i=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e);e=e.replace(/[^a-zA-Z0-9]/g,"");let s=`<th scope="row">${i}</th><td>${t}</td>`;this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==s&&(this.descriptions.fallbackElements[e].innerHTML=s):this._describeElementHTML("fallback",e,s),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==s&&(this.descriptions.labelElements[e].innerHTML=s):this._describeElementHTML("label",e,s))},t._describeHTML=function(e,t){const s=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector(`#${s+n}`))this.dummyDOM.querySelector("#"+s+i).insertAdjacentHTML("beforebegin",`<p id="${s+r}"></p>`);else{let e=`<div id="${s}${n}" role="region" aria-label="Canvas Description"><p id="${s}${r}"></p></div>`;this.dummyDOM.querySelector(`#${s}accessibleOutput`)?this.dummyDOM.querySelector(`#${s}accessibleOutput`).insertAdjacentHTML("beforebegin",e):this.dummyDOM.querySelector(`#${s}`).innerHTML=e}return this.descriptions.fallback=this.dummyDOM.querySelector(`#${s}${r}`),void(this.descriptions.fallback.innerHTML=t)}if("label"===e){if(this.dummyDOM.querySelector(`#${s+a}`))this.dummyDOM.querySelector(`#${s+l}`)&&this.dummyDOM.querySelector(`#${s+l}`).insertAdjacentHTML("beforebegin",`<p id="${s}${o}"></p>`);else{let e=`<div id="${s}${a}" class="p5Label"><p id="${s}${o}"></p></div>`;this.dummyDOM.querySelector(`#${s}accessibleOutputLabel`)?this.dummyDOM.querySelector(`#${s}accessibleOutputLabel`).insertAdjacentHTML("beforebegin",e):this.dummyDOM.querySelector("#"+s).insertAdjacentHTML("afterend",e)}return this.descriptions.label=this.dummyDOM.querySelector("#"+s+o),void(this.descriptions.label.innerHTML=t)}},t._describeElementHTML=function(e,t,c){const h=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector(`#${h+n}`))this.dummyDOM.querySelector("#"+h+i)||this.dummyDOM.querySelector("#"+h+r).insertAdjacentHTML("afterend",`<table id="${h}${i}"><caption>Canvas elements and their descriptions</caption></table>`);else{let e=`<div id="${h}${n}" role="region" aria-label="Canvas Description"><table id="${h}${i}"><caption>Canvas elements and their descriptions</caption></table></div>`;this.dummyDOM.querySelector(`#${h}accessibleOutput`)?this.dummyDOM.querySelector(`#${h}accessibleOutput`).insertAdjacentHTML("beforebegin",e):this.dummyDOM.querySelector("#"+h).innerHTML=e}let e=document.createElement("tr");return e.id=h+s+t,this.dummyDOM.querySelector("#"+h+i).appendChild(e),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector(`#${h}${s}${t}`),void(this.descriptions.fallbackElements[t].innerHTML=c)}if("label"===e){if(this.dummyDOM.querySelector(`#${h+a}`))this.dummyDOM.querySelector(`#${h+l}`)||this.dummyDOM.querySelector("#"+h+o).insertAdjacentHTML("afterend",`<table id="${h+l}"></table>`);else{let e=`<div id="${h}${a}" class="p5Label"><table id="${h}${l}"></table></div>`;this.dummyDOM.querySelector(`#${h}accessibleOutputLabel`)?this.dummyDOM.querySelector(`#${h}accessibleOutputLabel`).insertAdjacentHTML("beforebegin",e):this.dummyDOM.querySelector("#"+h).insertAdjacentHTML("afterend",e)}let e=document.createElement("tr");e.id=h+u+t,this.dummyDOM.querySelector("#"+h+l).appendChild(e),this.descriptions.labelElements[t]=this.dummyDOM.querySelector(`#${h}${u}${t}`),this.descriptions.labelElements[t].innerHTML=c}}}function zC(e,t){t._updateGridOutput=function(t){if(this._renderer&&this._renderer instanceof e.RendererGL)return void(this._didOutputGridWebGLMessage||(this._didOutputGridWebGLMessage=!0,console.error("gridOutput() does not yet work in WebGL mode.")));if(!this.dummyDOM.querySelector(`#${t}_summary`))return;let n=this._accessibleOutputs[t],r=function(e,t){let n="",r="",i=0;for(let s in t){let a=0;for(let r in t[s]){let o=`<li id="${e}shape${i}">${t[s][r].color} ${s},`;"line"===s?o+=` location = ${t[s][r].pos}, length = ${t[s][r].length} pixels`:(o+=` location = ${t[s][r].pos}`,"point"!==s&&(o+=`, area = ${t[s][r].area} %`),o+="</li>"),n+=o,a++,i++}r=a>1?`${r} ${a} ${s}s`:`${r} ${a} ${s}`}return{numShapes:[i,r],details:n}}(t,this.ingredients.shapes),i=function(e,t,n,r){let i=`${t} canvas, ${n} by ${r} pixels, contains ${e[0]}`;return i=1===e[0]?`${i} shape: ${e[1]}`:`${i} shapes: ${e[1]}`,i}(r.numShapes,this.ingredients.colors.background,this.width,this.height),s=function(e,t){let n=0,r="",i=Array.from(Array(10),()=>Array(10));for(let s in t)for(let r in t[s]){let a;a="line"!==s?`<a href="#${e}shape${n}">${t[s][r].color} ${s}</a>`:`<a href="#${e}shape${n}">${t[s][r].color} ${s} midpoint</a>`,t[s][r].loc.locY<i.length&&t[s][r].loc.locX<i[t[s][r].loc.locY].length&&(i[t[s][r].loc.locY][t[s][r].loc.locX]?i[t[s][r].loc.locY][t[s][r].loc.locX]=i[t[s][r].loc.locY][t[s][r].loc.locX]+"  "+a:i[t[s][r].loc.locY][t[s][r].loc.locX]=a,n++)}for(let s in i){let e="<tr>";for(let t in i[s])e+="<td>",void 0!==i[s][t]&&(e+=i[s][t]),e+="</td>";r=r+e+"</tr>"}return r}(t,this.ingredients.shapes);i!==n.summary.innerHTML&&(n.summary.innerHTML=i),s!==n.map.innerHTML&&(n.map.innerHTML=s),r.details!==n.shapeDetails.innerHTML&&(n.shapeDetails.innerHTML=r.details),this._accessibleOutputs[t]=n}}function VC(e,t){t._updateTextOutput=function(t){if(this._renderer&&this._renderer instanceof e.RendererGL)return void(this._didOutputTextWebGLMessage||(this._didOutputTextWebGLMessage=!0,console.error("textOutput() does not yet work in WebGL mode.")));if(!this.dummyDOM.querySelector(`#${t}_summary`))return;let n=this._accessibleOutputs[t],r=function(e,t){let n="",r=0;for(let i in t)for(let s in t[i]){let a=`<li><a href="#${e}shape${r}">${t[i][s].color} ${i}</a>`;"line"===i?a+=`, ${t[i][s].pos}, ${t[i][s].length} pixels long.</li>`:(a+=`, at ${t[i][s].pos}`,"point"!==i&&(a+=`, covering ${t[i][s].area}% of the canvas`),a+=".</li>"),n+=a,r++}return{numShapes:r,listShapes:n}}(t,this.ingredients.shapes),i=function(e,t,n,r){let i=`Your output is a, ${n} by ${r} pixels, ${t} canvas containing the following`;return i=1===e?`${i} shape:`:`${i} ${e} shapes:`,i}(r.numShapes,this.ingredients.colors.background,this.width,this.height),s=function(e,t){let n="",r=0;for(let i in t)for(let s in t[i]){let a=`<tr id="${e}shape${r}"><th>${t[i][s].color} ${i}</th>`;"line"===i?a+=`<td>location = ${t[i][s].pos}</td><td>length = ${t[i][s].length} pixels</td></tr>`:(a+=`<td>location = ${t[i][s].pos}</td>`,"point"!==i&&(a+=`<td> area = ${t[i][s].area}%</td>`),a+="</tr>"),n+=a,r++}return n}(t,this.ingredients.shapes);i!==n.summary.innerHTML&&(n.summary.innerHTML=i),r.listShapes!==n.list.innerHTML&&(n.list.innerHTML=r.listShapes),s!==n.shapeDetails.innerHTML&&(n.shapeDetails.innerHTML=s),this._accessibleOutputs[t]=n}}function jC(e,t){function n(e,t,n){let r=Math.floor(e[0]/t*10),i=Math.floor(e[1]/n*10);return 10===r&&(r-=1),10===i&&(i-=1),{locX:r,locY:i}}t.textOutput=function(e){this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},t.gridOutput=function(e){this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},t._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},t._createOutput=function(e,t){let n,r,i,s=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(s).parentNode);let a="";"Fallback"===t?(n=s+e,r=s+"accessibleOutput",this.dummyDOM.querySelector(`#${r}`)||(this.dummyDOM.querySelector(`#${s}_Description`)?this.dummyDOM.querySelector(`#${s}_Description`).insertAdjacentHTML("afterend",`<div id="${r}" role="region" aria-label="Canvas Outputs"></div>`):this.dummyDOM.querySelector(`#${s}`).innerHTML=`<div id="${r}" role="region" aria-label="Canvas Outputs"></div>`)):"Label"===t&&(a=t,n=s+e+t,r=s+"accessibleOutput"+t,this.dummyDOM.querySelector(`#${r}`)||(this.dummyDOM.querySelector(`#${s}_Label`)?this.dummyDOM.querySelector(`#${s}_Label`).insertAdjacentHTML("afterend",`<div id="${r}"></div>`):this.dummyDOM.querySelector(`#${s}`).insertAdjacentHTML("afterend",`<div id="${r}"></div>`))),this._accessibleOutputs[n]={},"textOutput"===e?(a=`#${s}gridOutput${a}`,i=`<div id="${n}">Text Output<div id="${n}Summary" aria-label="text output summary"><p id="${n}_summary"></p><ul id="${n}_list"></ul></div><table id="${n}_shapeDetails" summary="text output shape details"></table></div>`,this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector(`#${r}`).innerHTML=i,this._accessibleOutputs[n].list=this.dummyDOM.querySelector(`#${n}_list`)):"gridOutput"===e&&(a=`#${s}textOutput${a}`,i=`<div id="${n}">Grid Output<p id="${n}_summary" aria-label="grid output summary"><table id="${n}_map" summary="grid output content"></table><ul id="${n}_shapeDetails" aria-label="grid output shape details"></ul></div>`,this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",i):this.dummyDOM.querySelector(`#${r}`).innerHTML=i,this._accessibleOutputs[n].map=this.dummyDOM.querySelector(`#${n}_map`)),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector(`#${n}_shapeDetails`),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector(`#${n}_summary`)},t._updateAccsOutput=function(){let e=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},t._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},t._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},t._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");let r={},i=!0,s=function(e,t){let n,r;return"rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),r=Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,r=(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,r=(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,r=(t[1]+t[3])/2):(n=t[0],r=t[1]),[n,r]}(e,t);if("line"===e){r.color=this.ingredients.colors.stroke,r.length=Math.round(Math.hypot(t[2]-t[0],t[3]-t[1]));let e=this._getPos(t[0],[1]),i=this._getPos(t[2],[3]);r.loc=n(s,this.width,this.height),r.pos=e===i?`at ${e}`:`from ${e} to ${i}`}else"point"===e?r.color=this.ingredients.colors.stroke:(r.color=this.ingredients.colors.fill,r.area=this._getArea(e,t)),r.pos=this._getPos(...s),r.loc=n(s,this.width,this.height);if(this.ingredients.shapes[e]){for(let t in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][t])===JSON.stringify(r)&&(i=!1);!0===i&&this.ingredients.shapes[e].push(r)}else this.ingredients.shapes[e]=[r]},t._getPos=function(t,n){const{x:r,y:i}=this.worldToScreen(new e.Vector(t,n)),s=this.width,a=this.height;return r<.4*s?i<.4*a?"top left":i>.6*a?"bottom left":"mid left":r>.6*s?i<.4*a?"top right":i>.6*a?"bottom right":"mid right":i<.4*a?"top middle":i>.6*a?"bottom middle":"middle"},t._getArea=function(e,t){let n=0;if("arc"===e){const e=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(n=e*t[2]*t[3]/8,"open"===t[6]||"chord"===t[6]){const r=t[0],i=t[1],s=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),a=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),o=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),l=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),u=Math.abs(r*(a-l)+s*(l-i)+o*(i-a))/2;e>Math.PI?n+=u:n-=u}}else"ellipse"===e||"circle"===e?n=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?n=0:"quadrilateral"===e?n=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?n=t[2]*t[3]:"triangle"===e&&(n=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2);const r=this.width*this._renderer._pixelDensity,i=this.height*this._renderer._pixelDensity,s=[new DOMPoint(0,0),new DOMPoint(r,0),new DOMPoint(r,i),new DOMPoint(0,i)],a=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),o=s.map(e=>e.matrixTransform(a)),l=Math.abs((o[3].x+o[0].x)*(o[3].y-o[0].y)+(o[0].x+o[1].x)*(o[0].y-o[1].y)+(o[1].x+o[2].x)*(o[1].y-o[2].y)+(o[2].x+o[3].x)*(o[2].y-o[3].y))/2;return Math.round(100*n/l)}}function GC(e,t){let n;const r=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],i=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];t._rgbColorName=function(e){let t=_s._rgbaToHSBA(e);return n=t,function(e){let t;if(0!==e[0]){e[0]=Math.round(100*e[0]);let t=e[0].toString().split("");const n=t.length-1;t[n]=parseInt(t[n]),t[n]<2.5?t[n]=0:t[n]>=2.5&&t[n]<7.5&&(t[n]=5),2===t.length?(t[0]=parseInt(t[0]),t[n]>=7.5&&(t[n]=0,t[0]=t[0]+1),e[0]=10*t[0]+t[1]):t[n]>=7.5?e[0]=10:e[0]=t[n]}e[2]=e[2]/255;for(let n=e.length-1;n>=1;n--)e[n]<=.25?e[n]=0:e[n]>.25&&e[n]<.75?e[n]=.5:e[n]=1;if(0===e[0]&&0===e[1]&&1===e[2]){for(let e=2;e>=0;e--)n[e]=Math.round(1e4*n[e])/1e4;for(let e=0;e<r.length;e++){if(r[e].h===n[0]&&r[e].s===n[1]&&r[e].b===n[2]){t=r[e].name;break}t="white"}}else for(let n=0;n<i.length;n++)if(i[n].h===e[0]&&i[n].s===e[1]&&i[n].b===e[2]){t=i[n].name;break}return t}([t[0],t[1],t[2]])}}function HC(e){return(HC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WC(e){var t=function(e,t){if("object"!=HC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HC(t)?t:t+""}function $C(e,t,n){return(t=WC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){$C(e,t,n[t])})}return e}function XC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WC(r.key),r)}}function ZC(e,t,n){return t&&YC(e.prototype,t),n&&YC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QC(e,t){if(t&&("object"==HC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KC(e)}function JC(e){return(JC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eA(e,t){return(eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eA(e,t)}function nA(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function rA(e){return null==e?"":""+e}function iA(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var s="string"!=typeof t?[].concat(t):t.split(".");s.length>1;){if(i())return{};var a=r(s.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(s.shift())}}function sA(e,t,n){var r=iA(e,t,Object);r.obj[r.k]=n}function aA(e,t){var n=iA(e,t),r=n.obj,i=n.k;if(r)return r[i]}function oA(e,t,n){var r=aA(e,n);return void 0!==r?r:aA(t,n)}function lA(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):lA(e[r],t[r],n):e[r]=t[r]);return e}function uA(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function cA(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return Cs[e]}):e}function hA(e){return e.charAt(0).toUpperCase()+e.slice(1)}function dA(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function pA(){}function fA(e,t){const n=["#2D7BB6","#EE9900","#4DB200","#C83C00"];let r=null,i=null;class s extends Error{}if("undefined"!=typeof IS_MINIFIED)e._friendlyError=e._checkForUserDefinedFunctions=e._fesErrorMonitor=()=>{};else{const a={},o=a.toString,l=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(let e=0;e<l.length;e++)a[`[object ${l[e]}]`]=l[e].toLowerCase();const u=e=>null==e?`${e}`:"object"==typeof e||"function"==typeof e?a[o.call(e)]||"object":typeof e,c=["setup","draw","deviceMoved","deviceTurned","deviceShaken","doubleClicked","mousePressed","mouseReleased","mouseMoved","mouseDragged","mouseClicked","mouseWheel","touchStarted","touchMoved","touchEnded","keyPressed","keyReleased","keyTyped","windowResized"],h=(e,t)=>{let n="";if(null==t||"load"===t.substring(0,4))n=e;else{const r=t.split("."),i=r.length>1?`${r[0]}.${r[1]}`:"p5",s=1===r.length?t:r.slice(2).join("/");n=s.startsWith("p5.")?`${e} (https://p5js.org/reference/${i}.${s})`:`${e} (https://p5js.org/reference/${i}/${s})`}return n};e._report=(t,r,i)=>{const s=null==e._fesLogger?console.log.bind(console):e._fesLogger;"undefined"===u(i)?i="#B40033":"number"===u(i)&&(i=n[i]),t=h(t,r),s(xa("fes.pre",{message:t}))},e._error=(t,n,r)=>{throw e._report(n,r),t.hitCriticalError=!0,new s("Stopping sketch to prevent more errors")},e._friendlyError=function(t,n,r){e.disableFriendlyErrors||e._report(t,n,r)},e._friendlyAutoplayError=function(e){const t=xa("fes.autoplay",{src:e,url:"https://developer.mozilla.org/docs/Web/Media/Autoplay_guide"});console.log(xa("fes.pre",{message:t}))};const d=(e,t)=>{const n=e.length,r=t.length;if(0===n)return t;if(0===r)return e;let i=[],s=[];for(let a=0;a<r+1;a++)s[a]=a;i=s;for(let a=1;a<n+1;a++){s=[];for(let n=0;n<r+1;n++)if(0===n)s[n]=a;else{let r=e[a-1],o=t[n-1],l=999999,u=r.toLowerCase()===o.toLowerCase()?0:1;l=l>u+i[n-1]?u+i[n-1]:l,l=l>1+s[n-1]?1+s[n-1]:l,l=l>1+i[n]?1+i[n]:l,s[n]=l}i=s}return s[r]};e.isPreloadSupported=function(){return!1};const p=t=>{if(e.disableFriendlyErrors)return;t=t instanceof e?t:window;const n=c;t.preload&&!e.isPreloadSupported()&&e._error(t,xa("fes.preloadDisabled"));const r={};n.forEach(e=>{r[e.toLowerCase()]=e});for(const i of Object.keys(t)){const n=i.toLowerCase();if(r.hasOwnProperty(n)&&!t[r[n]]&&"function"==typeof t[i]){const t=xa("fes.checkUserDefinedFns",{name:i,actualName:r[n]});e._friendlyError(t,r[n])}}},f=(t,n)=>{r||i();const s={};let a=999999;if(r.forEach(e=>{let n=d(t,e.name);s[n]?s[n].push(e):s[n]=[e],n<a&&(a=n)}),a>Math.min(2,t.length))return!1;const o=s[a].filter(e=>e.name!==t);if(0!==o.length){const r=e._getErrorStackParser().parse(n);let i,s;if(r&&r[0]&&r[0].fileName&&r[0].lineNumber&&r[0].columnNumber&&(i={location:`${r[0].fileName}:${r[0].lineNumber}:${r[0].columnNumber}`,file:r[0].fileName.split("/").slice(-1),line:r[0].lineNumber}),1===o.length)s=xa("fes.misspelling",{name:t,actualName:o[0].name,type:o[0].type,location:i?xa("fes.location",i):"",count:o.length});else{const e=o.map(e=>{const t="â–¶ï¸ "+e.name+("function"===e.type?"()":"");return h(t,e.name)}).join("\n");s=xa("fes.misspelling",{name:t,suggestions:e,location:i?xa("fes.location",i):"",count:o.length})}return e._friendlyError(s,1===o.length?o[0].name:void 0),!0}return!1},m=t=>{const n=e._fesLogger&&"function"==typeof e._fesLogger?e._fesLogger:console.log.bind(console);if(t.length>1){let e="";t.forEach((t,n)=>{const r=`${t.fileName}:${t.lineNumber}:${t.columnNumber}`;let i,s={func:t.functionName,line:t.lineNumber,location:r,file:t.fileName.split("/").slice(-1)};i=xa(0===n?"fes.globalErrors.stackTop":"fes.globalErrors.stackSubseq",s),e+=i}),n(e)}},g=(n,r)=>{if(!r)return[!1,null];r.forEach(e=>{e.functionName=e.functionName||""});let i,s,a,o=!1;try{throw new Error}catch(l){i=e._getErrorStackParser().parse(l)[0].fileName}for(let e=r.length-1;e>=0;e--){let t=r[e].functionName.split(".");if(c.includes(t[t.length-1])){if(s=r.slice(0,e+1),a=t[t.length-1],r[0].fileName===i){o=!0;break}break}}if(s||(s=r),o){if(s=s.map((e,t)=>(e.frameIndex=t,e)).filter(e=>e.fileName!==i),0===s.length)return[!0,null];const o=r[s[0].frameIndex-1].functionName.split(".").slice(-1)[0];let l;if(s[0].fileName&&s[0].lineNumber&&s[0].columnNumber&&(l={location:`${s[0].fileName}:${s[0].lineNumber}:${s[0].columnNumber}`,file:s[0].fileName.split("/").slice(-1),line:s[0].lineNumber},e._fesLogCache[l.location]))return[!0,null];"preload"===a&&null==t._preloadMethods[o]?e._friendlyError(xa("fes.wrongPreload",{func:o,location:l?xa("fes.location",l):"",error:n.message}),"preload"):e._friendlyError(xa("fes.libraryError",{func:o,location:l?xa("fes.location",l):"",error:n.message}),o),s&&s.length&&m(s)}return[o,s]},v=t=>{if(e.disableFriendlyErrors)return;if(t&&(t instanceof s||t.reason instanceof s))return;let n;if(t instanceof Error)n=t;else if(t instanceof ErrorEvent)n=t.error;else if(t instanceof PromiseRejectionEvent&&(n=t.reason,!(n instanceof Error)))return;if(!n)return;let r=e._getErrorStackParser().parse(n),[i,a]=g(n,r);if(i)return;const o=wa[n.name];if(!o)return;let l,u;for(const e of o){let t=e.msg;t=t.replace(new RegExp("{{}}","g"),"([a-zA-Z0-9_]+)"),t=t.replace(new RegExp("{{.}}","g"),"(.+)"),t=t.replace(new RegExp("{}","g"),"(?:[a-zA-Z0-9_]+)");let r=n.message.match(t);if(r){l=Object.assign({},e),l.match=r;break}}if(l)switch(r&&r[0].fileName&&r[0].lineNumber&&r[0].columnNumber&&(u={location:`${r[0].fileName}:${r[0].lineNumber}:${r[0].columnNumber}`,file:r[0].fileName.split("/").slice(-1),line:a[0].lineNumber}),n.name){case"SyntaxError":switch(l.type){case"INVALIDTOKEN":e._friendlyError(xa("fes.globalErrors.syntax.invalidToken",{url:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Errors/Illegal_character#What_went_wrong"}));break;case"UNEXPECTEDTOKEN":e._friendlyError(xa("fes.globalErrors.syntax.unexpectedToken",{url:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Errors/Unexpected_token#What_went_wrong"}));break;case"REDECLAREDVARIABLE":{let t=l.match[1];e._friendlyError(xa("fes.globalErrors.syntax.redeclaredVariable",{symbol:t,url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Redeclared_parameter#what_went_wrong"}));break}case"MISSINGINITIALIZER":e._friendlyError(xa("fes.globalErrors.syntax.missingInitializer",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Missing_initializer_in_const#what_went_wrong"}));break;case"BADRETURNORYIELD":e._friendlyError(xa("fes.globalErrors.syntax.badReturnOrYield",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Bad_return_or_yield#what_went_wrong"}))}break;case"ReferenceError":switch(l.type){case"NOTDEFINED":{let t=l.match[1];if(t&&f(t,n))break;e._friendlyError(xa("fes.globalErrors.reference.notDefined",{url:"https://p5js.org/examples/data-variable-scope.html",symbol:t,location:u?xa("fes.location",u):""})),a&&m(a);break}case"CANNOTACCESS":{let t=l.match[1];e._friendlyError(xa("fes.globalErrors.reference.cannotAccess",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cant_access_lexical_declaration_before_init#what_went_wrong",symbol:t,location:u?xa("fes.location",u):""})),a&&m(a);break}}break;case"TypeError":switch(l.type){case"NOTFUNC":{let t=l.match[1].split("."),n={url:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Errors/Not_a_function#What_went_wrong",symbol:t[t.length-1],obj:t.slice(0,t.length-1).join("."),location:u?xa("fes.location",u):""};t.length>1?e._friendlyError(xa("fes.globalErrors.type.notfuncObj",n)):e._friendlyError(xa("fes.globalErrors.type.notfunc",n)),a&&m(a);break}case"READNULL":{let t=l.match[1];e._friendlyError(xa("fes.globalErrors.type.readFromNull",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cant_access_property#what_went_wrong",symbol:t,location:u?xa("fes.location",u):""})),a&&m(a);break}case"READUDEFINED":{let t=l.match[1];e._friendlyError(xa("fes.globalErrors.type.readFromUndefined",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cant_access_property#what_went_wrong",symbol:t,location:u?xa("fes.location",u):""})),a&&m(a);break}case"CONSTASSIGN":e._friendlyError(xa("fes.globalErrors.type.constAssign",{url:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Invalid_const_assignment#what_went_wrong",location:u?xa("fes.location",u):""})),a&&m(a)}}};e._fesErrorMonitor=v,e._checkForUserDefinedFunctions=p,e._fesLogger=null,e._fesLogCache={},window.addEventListener("load",p,!1),window.addEventListener("error",e._fesErrorMonitor,!1),window.addEventListener("unhandledrejection",e._fesErrorMonitor,!1)}r=null;const a="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";i=()=>{const e={},n=t=>Object.getOwnPropertyNames(t).filter(t=>"_"!==t[0]&&!(t in e)&&(e[t]=!0,!0)).map(e=>{let n;return n="function"==typeof t[e]?"function":e===e.toUpperCase()?"constant":"variable",{name:e,type:n}});r=[].concat(n(t),n(Et)),r.sort((e,t)=>t.name.length-e.name.length)};const o=(e,t)=>{t||(t=console.log.bind(console)),r||i(),r.some(n=>{if(e.message&&null!==e.message.match(`\\W?${n.name}\\W`)){const e="function"===n.type?`${n.name}()`:n.name;return"undefined"!=typeof IS_MINIFIED?t(`Did you just try to use p5.js's ${e} ${n.type}? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ${a}`):t(xa("fes.misusedTopLevel",{symbolName:e,symbolType:n.type,url:a})),!0}})};t._helpForMisusedAtTopLevelCode=o,"complete"!==document.readyState&&(window.addEventListener("error",o,!1),window.addEventListener("load",()=>{window.removeEventListener("error",o,!1)}))}function mA(){let e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/);t=n?t.replace(n[0],""):t;let r=t.split(/\s+/).slice(1),i=this.extractLocation(n?n[1]:r.pop());return{functionName:r.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0],lineNumber:i[1],columnNumber:i[2],source:e}},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(n)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};{let t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,i=this.extractLocation(e.replace(t,""));return{functionName:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e}}},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){let t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[];for(let i=2,s=n.length;i<s;i+=2){let e=t.exec(n[i]);e&&r.push({fileName:e[2],lineNumber:e[1],source:n[i]})}return r},parseOpera10:function(e){let t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[];for(let i=0,s=n.length;i<s;i+=2){let e=t.exec(n[i]);e&&r.push({functionName:e[3]||void 0,fileName:e[2],lineNumber:e[1],source:n[i]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){let t,n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return i.match(/\(([^)]*)\)/)&&(t=i.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:s,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)}}}function gA(e,t){e._getErrorStackParser=function(){return new mA}}function vA(e,t,n){function r(n,r){var i;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}const i=n?.Parent??Object;class s extends i{}function a(e){var t;const i=n?.Parent?new s:this;r(i,e),(t=i._zod).deferred??(t.deferred=[]);for(const n of i._zod.deferred)n();return i}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}function yA(e){return e&&Object.assign(Ea,e),Ea}function bA(e,t){return"bigint"==typeof t?t.toString():t}function xA(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function _A(e){return null==e}function wA(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function SA(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function EA(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function CA(e){return JSON.stringify(e)}function AA(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function TA(e){if(!1===AA(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==AA(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function MA(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function DA(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function kA(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function NA(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function FA(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function IA(e){return"string"==typeof e?e:e?.message}function RA(e,t,n){const r={...e,path:e.path??[]};return e.message||(r.message=IA(e.inst?._zod.def?.error?.(e))??IA(t?.error?.(e))??IA(n.customError?.(e))??IA(n.localeError?.(e))??"Invalid input"),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function LA(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function PA(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}function OA(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function BA(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}function UA(e,t,n){e.issues.length&&t.issues.push(...FA(n,e.issues)),t.value[n]=e.value}function zA(e,t,n){e.issues.length&&t.issues.push(...FA(n,e.issues)),t.value[n]=e.value}function VA(e,t,n,r){e.issues.length?void 0===r[n]?t.value[n]=n in r?void 0:e.value:t.issues.push(...FA(n,e.issues)):void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function jA(e,t,n,r){for(const i of e)if(0===i.issues.length)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>RA(e,r,yA())))}),t}function GA(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(TA(e)&&TA(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const s of r){const n=GA(e[s],t[s]);if(!n.valid)return{valid:!1,mergeErrorPath:[s,...n.mergeErrorPath]};i[s]=n.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=GA(e[r],t[r]);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function HA(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),NA(e))return e;const r=GA(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}function WA(e,t,n){e.issues.length&&t.issues.push(...FA(n,e.issues)),t.value[n]=e.value}function $A(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}function qA(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}function XA(e,t,n){return NA(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}function YA(e){return e.value=Object.freeze(e.value),e}function ZA(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(PA(e))}}function KA(){return new Ml}function QA(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...kA(t)})}function JA(e){return new e({type:"unknown"})}function eT(e,t){return new go({check:"less_than",...kA(t),value:e,inclusive:!1})}function tT(e,t){return new go({check:"less_than",...kA(t),value:e,inclusive:!0})}function nT(e,t){return new vo({check:"greater_than",...kA(t),value:e,inclusive:!1})}function rT(e,t){return new vo({check:"greater_than",...kA(t),value:e,inclusive:!0})}function iT(e,t){return new yo({check:"multiple_of",...kA(t),value:e})}function sT(e,t){return new xo({check:"max_length",...kA(t),maximum:e})}function aT(e,t){return new _o({check:"min_length",...kA(t),minimum:e})}function oT(e,t){return new wo({check:"length_equals",...kA(t),length:e})}function lT(e){return new ko({check:"overwrite",tx:e})}function uT(e,t,n){return new e({type:"array",element:t,...kA(n)})}function cT(e,t,n,r){const i=n instanceof Io;return new e({type:"tuple",items:t,rest:i?n:null,...kA(i?r:n)})}function hT(e){return new kl({type:"function",input:Array.isArray(e?.input)?cT(ml,e?.input):e?.input??uT(hl,JA(ul)),output:e?.output??JA(ul)})}function dT(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...kA(t)})}(Nl,e)}function pT(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...kA(t)})}(Fl,e)}function fT(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...kA(t)})}(Il,e)}function mT(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...kA(t)})}(Rl,e)}function gT(e){return function(e,t){return new e({type:"string",...kA(t)})}(Gl,e)}function vT(e){return function(e,t){return new e({type:"number",checks:[],...kA(t)})}(cu,e)}function yT(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...kA(t)})}(hu,e)}function bT(e){return function(e,t){return new e({type:"boolean",...kA(t)})}(du,e)}function xT(){return new pu({type:"any"})}function _T(){return JA(fu)}function wT(e){return function(e,t){return new e({type:"never",...kA(t)})}(mu,e)}function ST(e,t){return uT(gu,e,t)}function ET(e,t){const n={type:"object",get shape(){return EA(this,"shape",{...e}),this.shape},...kA(t)};return new vu(n)}function CT(e,t){return new yu({type:"union",options:e,...kA(t)})}function AT(e,t,n){const r=t instanceof Io;return new xu({type:"tuple",items:e,rest:r?t:null,...kA(r?n:t)})}function TT(e,t){return new wu({type:"literal",values:Array.isArray(e)?e:[e],...kA(t)})}function MT(e){return new Eu({type:"optional",innerType:e})}function DT(e){return new Cu({type:"nullable",innerType:e})}function kT(e,t){return new ku({type:"pipe",in:e,out:t})}function NT(e,t){return function(e,t,n){const r=kA(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}(Fu,e??(()=>!0),t)}function FT(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...kA(n)})}(Fu,e,t)}function IT(e){const t=function(e){const t=new fo({check:"custom"});return t._zod.check=e,t}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(PA(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(PA(r))}},e(n.value,n)));return t}function RT(e,t={error:`Input not instance of ${e.name}`}){const n=new Fu({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...kA(t)});return n._zod.bag.Class=e,n}function LT(e,t,n){let r=new Map;const i=Object.keys(e).reduce((t,n)=>(n.match(/^[A-Z]/)&&!n.match(/^[A-Z][A-Z0-9]*$/)&&e[n]instanceof Function&&(t[n]=e[n]),t),{}),s={};for(const[m,g]of Object.entries(Et))s[m]=g;const a={Any:xT(),Array:ST(xT()),Boolean:bT(),Function:hT(),Integer:vT().int(),Number:vT(),Object:ET({}),String:gT()},o=["AudioNode","HTMLCanvasElement","HTMLElement","KeyboardEvent","MouseEvent","RegExp","TouchEvent","UIEvent","WheelEvent"].reduce((e,t)=>(e[t]=NT(e=>e instanceof globalThis[t],{message:`Expected a ${t}`}),e),{});Object.assign(a,o);const l=["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth"];function u(e){const t=e.lastIndexOf(".");return{funcName:e.slice(t+1),funcClass:e.slice(0,-1!==t?t:0)||"p5"}}function c(e){let t=0;for(let n=0;n<e.length;n++)if("["===e[n])t++;else if("]"===e[n]&&(t--,t<0))return!1;return 0===t}const h=function(e){const{funcName:n,funcClass:r}=u(e);let o=Iu[r][n];if(!o)return;let l=[];o.hasOwnProperty("overloads")&&(l=o.overloads);const h=e=>{if(!e)return xT();let n;if(e in s)n=TT(s[e]);else if(e.match(/^[A-Z][A-Z0-9]*$/)&&e in t)n=TT(t[e]);else if(e.startsWith("function"))n=hT();else if(/^p5\.[a-zA-Z0-9]+$/.exec(e)||"p5"===e){const t=e.substring(e.indexOf(".")+1);n=RT(i[t])}else if(a[e])n=a[e];else if(e.startsWith("[")&&e.endsWith("]")&&c(e.slice(1,-1)))n=AT(e.slice(1,-1).split(/, */g).map(e=>h(e)));else if(e.match(/^[A-Z]/)&&e in window)n=RT(window[e]);else if(e.includes("|")&&e.split("|").every(e=>c(e)))n=CT(e.split("|").map(e=>h(e)).filter(e=>void 0!==e));else{if(!e.endsWith("[]"))throw new Error(`Unsupported type '${e}' in parameter validation. Please report this issue.`);n=ST(h(e.slice(0,-2)))}return n},d=l.flatMap(e=>(e=>{if(!e.some(e=>e?.endsWith("?")))return[e];const t=[];for(let n=e.filter(e=>null===e||!e.endsWith("?")).length;n<=e.length;n++)t.push(e.slice(0,n));return t})(e).map(e=>{const t=e.map(e=>(e=>{const t=e?.endsWith("?");e=e?.replace(/\?$/,"");const n=e?.startsWith("...")&&e?.endsWith("[]");e=e?.replace(/^\.\.\.(.+)\[\]$/,"$1");let r=h(e);return"function"===r.def.type&&(r=NT(e=>e instanceof Function)),t&&(r=r.optional()),{schema:r,rest:n}})(e)).filter(e=>void 0!==e.schema);let n;t.at(-1)?.rest&&(n=t.pop());let r=AT(t.map(e=>e.schema));return n&&(r=r.rest(n.schema)),r}));return 1===d.length?d[0]:CT(d)},d=function(e,t){if(!(e instanceof yu))return e;let n=e.def.options[0],r=1/0;return e.def.options.forEach(e=>{const i=(e=>{let n=1/0;if(!(e instanceof xu))return console.warn("Schema below is not a tuple: "),printZodSchema(e),n;const r=t.length,i=e.def.items,s=i.length,a=i.filter(e=>!e.isOptional()).length;n=r>=a&&r<=s?0:4*Math.abs(r<a?a-r:r-s);for(let o=0;o<Math.min(i.length,t.length);o++){const e=i[o],r=t[o];e.safeParse(r).success||n++}return n})(e);i<r&&(n=e,r=i)}),n},p=function(t,n,r){let i="ðŸŒ¸ p5.js says: ",s=!1,a=t.issues[0];const o=(e,t,n)=>`Expected ${t} ${n?`at the ${l[n]} parameter`:""}${e?`, but received ${e}`:""}`;switch(a.code){case"invalid_union":(e=>{const t=new Set;let n;if(e.errors.forEach(i=>{const s=i[0];if(s)if(n||(n=s.message),"invalid_type"===s.code)n=s.message.split(", received ")[1],t.add(s.expected);else if("invalid_value"===s.code)t.add("constant (please refer to documentation for allowed values)"),n=r[e.path[0]];else if("custom"===s.code){const e=s.message.match(/Input not instance of (\w+)/);e&&t.add(e[1]),n=void 0}}),t.size>0){e.path?.length>0&&r[e.path[0]]instanceof Promise&&(i+="Did you mean to put `await` before a loading function? An unexpected Promise was found. ",s=!0);const a=Array.from(t).join(" or "),l=e.path.join(".");i+=o(n,a,l)}})(a);break;case"too_small":{const e=a.minimum;i+=`Expected at least ${e} argument${e>1?"s":""}, but received fewer`;break}case"invalid_type":i+=o(a.message.split(", received ")[1],a.expected,a.path.join("."));break;case"too_big":{const e=a.maximum;i+=`Expected at most ${e} argument${e>1?"s":""}, but received more`;break}default:console.log("Zod error object",a)}if(i+=` in ${n}().`,"too_big"===a.code||"too_small"===a.code){const e=(e=>{const{funcName:t,funcClass:n}=u(e);return`https://p5js.org/reference/${n}/${t}`})(n);i+=` For more information, see ${e}.`}return s?e._error(this,i):console.log(i),i},f=function(t,n){if(e.disableFriendlyErrors)return;if(Array.isArray(n)||(n=Array.from(n)),Array.isArray(n)&&n.length>0&&n.every(e=>void 0===e))return{success:!1,error:`ðŸŒ¸ p5.js says: All arguments for ${t}() are undefined. There is likely an error in the code.`};let i=r.get(t);if(!i){if(i=h(t),!i)return;r.set(t,i)}try{return{success:!0,data:i.parse(n)}}catch(s){const e=d(i,n).safeParse(n).error;return{success:!1,error:p(e,t,n)}}};t._validate=f,e.decorateHelper(/^(?!_).+$/,function(t,{name:n}){return function(...r){return e.disableFriendlyErrors||e.disableParameterValidator||f(n,r),t.call(this,...r)}}),n.presetup=function(){!function(){for(let t of Object.keys(e))"function"==typeof e[t]&&t[0]!==t[0].toLowerCase()&&(i[t]=e[t])}()}}function PT(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function OT(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Vu.test(String.fromCharCode(e)):!1!==t&&PT(e,Lu)))}function BT(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&ju.test(String.fromCharCode(e)):!1!==t&&(PT(e,Lu)||PT(e,Ru)))))}function UT(e,t){return new Gu(e,{beforeExpr:!0,binop:t})}function zT(e,t){return void 0===t&&(t={}),t.keyword=e,$u[e]=new Gu(e,t)}function VT(e){return 10===e||13===e||8232===e||8233===e}function jT(e,t,n){void 0===n&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(VT(i))return r<n-1&&13===i&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}function GT(e){return rc[e]||(rc[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function HT(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function WT(e,t){for(var n=1,r=0;;){var i=jT(e,r,t);if(i<0)return new sc(n,t-r);++n,r=i}}function $T(e){var t={};for(var n in oc)t[n]=e&&tc(e,n)?e[n]:oc[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!lc&&"object"==typeof console&&console.warn&&(lc=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14),nc(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return nc(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new ac(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}function qT(e,t){return uc|(e?cc:0)|(t?hc:0)}function XT(e,t){var n=t.key.name,r=e[n],i="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(i=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===i||"iset"===r&&"iget"===i||"sget"===r&&"sset"===i||"sset"===r&&"sget"===i?(e[n]="true",!1):!!r||(e[n]=i,!1)}function YT(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}function ZT(e){return"Identifier"===e.type||"ParenthesizedExpression"===e.type&&ZT(e.expression)}function KT(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&KT(e.expression)||"ParenthesizedExpression"===e.type&&KT(e.expression)}function QT(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}function JT(e){var t=Kc[e]={binary:GT(jc[e]+" "+Hc),binaryOfStrings:GT(Gc[e]),nonBinary:{General_Category:GT(Hc),Script:GT(Zc[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}function eM(e){return 105===e||109===e||115===e}function tM(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function nM(e){return e>=65&&e<=90||e>=97&&e<=122}function rM(e){return nM(e)||95===e}function iM(e){return rM(e)||sM(e)}function sM(e){return e>=48&&e<=57}function aM(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function oM(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function lM(e){return e>=48&&e<=55}function uM(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}function cM(e,t){return mc.parse(e,t)}function hM(e,t,n,r,i){var s=n?function(e,t){var n=Object.create(t||ah);for(var r in e)n[r]=e[r];return n}(n,r||void 0):r;!function e(t,n,r){s[r||t.type](t,n,e)}(e,t,i)}function dM(e,t,n){n(e,t)}function pM(e,t,n){}function fM(e,t,n){n.presetup=async function(){e.disableFriendlyErrors||e.disableSketchChecker||lh.runFES(e)}}function mM(e,t){e._friendlyFileLoadError=function(t,n){const{message:r,method:i}=((e,t)=>{const n=xa("fes.fileLoadError.suggestion",{filePath:t,url:"https://github.com/processing/p5.js/wiki/Local-server"});switch(e){case 0:return{message:xa("fes.fileLoadError.image",{suggestion:n}),method:"loadImage"};case 1:return{message:xa("fes.fileLoadError.xml",{suggestion:n}),method:"loadXML"};case 2:return{message:xa("fes.fileLoadError.table",{suggestion:n}),method:"loadTable"};case 3:return{message:xa("fes.fileLoadError.strings",{suggestion:n}),method:"loadStrings"};case 4:return{message:xa("fes.fileLoadError.font",{suggestion:n}),method:"loadFont"};case 5:return{message:xa("fes.fileLoadError.json",{suggestion:n}),method:"loadJSON"};case 6:return{message:xa("fes.fileLoadError.bytes",{suggestion:n}),method:"loadBytes"};case 7:return{message:xa("fes.fileLoadError.large"),method:"loadX"};case 8:return{message:xa("fes.fileLoadError.gif"),method:"loadImage"}}})(t,n);e._friendlyError(r,i,3)}}function gM(e,t){t.storeItem=function(t,n){"string"!=typeof t&&console.log(`The argument that you passed to storeItem() - ${t} is not a string.`),t.endsWith("p5TypeID")&&console.log(`The argument that you passed to storeItem() - ${t} must not end with 'p5TypeID'.`),void 0===n&&console.log("You cannot store undefined variables using storeItem().");let r=typeof n;switch(r){case"number":case"boolean":n=n.toString();break;case"object":n instanceof e.Color?(r="p5.Color",n=n.toString()):n instanceof e.Vector&&(r="p5.Vector",n=n.values),n=JSON.stringify(n)}localStorage.setItem(t,n);const i=`${t}p5TypeID`;localStorage.setItem(i,r)},t.getItem=function(e){let t=localStorage.getItem(e);const n=localStorage.getItem(`${e}p5TypeID`);if(void 0===n)console.log(`Unable to determine type of item stored under ${e}in local storage. Did you save the item with something other than setItem()?`);else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=this.color(JSON.parse(t));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector(...t)}return t},t.clearStorage=function(){Object.keys(localStorage).forEach(e=>{e.endsWith("p5TypeID")&&this.removeItem(e.replace("p5TypeID",""))})},t.removeItem=function(e){"string"!=typeof e&&console.log(`The argument that you passed to removeItem() - ${e} is not a string.`),localStorage.removeItem(e),localStorage.removeItem(`${e}p5TypeID`)}}function vM(e,t){function n(e,t,n){(t._userNode?t._userNode:document.body).appendChild(e);const r=n?new gi(e,t):new Nr(e,t);return t._elements.push(r),r}t.select=function(e,t){const n=this._getContainer(t).querySelector(e);return n?this._wrapElement(n):null},t.selectAll=function(e,t){const n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(let i=0;i<r.length;i++){const e=this._wrapElement(r[i]);n.push(e)}return n},t._getContainer=function(e){let t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof Nr?t=e.elt:e instanceof HTMLElement&&(t=e),t},t._wrapElement=function(e){const t=Array.prototype.slice.call(e.children);if("INPUT"===e.tagName&&"checkbox"===e.type){let t=new Nr(e,this);return t.checked=function(...e){return 0===e.length?this.elt.checked:(e[0]?this.elt.checked=!0:this.elt.checked=!1,this)},t}return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new gi(e,this):"SELECT"===e.tagName?this.createSelect(new Nr(e,this)):t.length>0&&t.every(function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName})&&("DIV"===e.tagName||"SPAN"===e.tagName)?this.createRadio(new Nr(e,this)):new Nr(e,this)},t.createElement=function(e,t){const r=document.createElement(e);return void 0!==t&&(r.innerHTML=t),n(r,this)},t.removeElements=function(e){this._elements.filter(e=>!(e.elt instanceof HTMLCanvasElement)).map(e=>e.remove())},t.createDiv=function(e=""){let t=document.createElement("div");return t.innerHTML=e,n(t,this)},t.createP=function(e=""){let t=document.createElement("p");return t.innerHTML=e,n(t,this)},t.createSpan=function(e=""){let t=document.createElement("span");return t.innerHTML=e,n(t,this)},t.createImg=function(){const e=document.createElement("img"),t=arguments;let r;return t.length>1&&"string"==typeof t[1]&&(e.alt=t[1]),t.length>2&&"string"==typeof t[2]&&(e.crossOrigin=t[2]),e.src=t[0],r=n(e,this),e.addEventListener("load",function(){r.width=e.offsetWidth||e.width,r.height=e.offsetHeight||e.height;const n=t[t.length-1];"function"==typeof n&&n(r)}),r},t.createA=function(e,t,r){const i=document.createElement("a");return i.href=e,i.innerHTML=t,r&&(i.target=r),n(i,this)},t.createSlider=function(e,t,r,i){const s=document.createElement("input");return s.type="range",s.min=e,s.max=t,0===i?s.step=1e-18:i&&(s.step=i),"number"==typeof r&&(s.value=r),n(s,this)},t.createButton=function(e,t){const r=document.createElement("button");return r.innerHTML=e,t&&(r.value=t),n(r,this)},t.createCheckbox=function(...e){const t=document.createElement("div"),r=document.createElement("input");r.type="checkbox";const i=document.createElement("label");i.appendChild(r),t.appendChild(i);const s=n(t,this);if(s.checked=function(...e){const t=s.elt.firstElementChild.getElementsByTagName("input")[0];if(t){if(0===e.length)return t.checked;e[0]?t.checked=!0:t.checked=!1}return s},this.value=function(e){return s.value=e,this},e[0]){s.value(e[0]);const t=document.createElement("span");t.innerHTML=e[0],i.appendChild(t)}return e[1]&&(r.checked=!0),s},t.createSelect=function(...e){let t,r=e[0];if(r instanceof Nr&&r.elt instanceof HTMLSelectElement)t=r,this.elt=r.elt;else if(r instanceof HTMLSelectElement)t=n(r,this),this.elt=r;else{const e=document.createElement("select");r&&"boolean"==typeof r&&e.setAttribute("multiple","true"),t=n(e,this),this.elt=e}return t.option=function(e,t){let n;if(void 0!==e){for(let t=0;t<this.elt.length;t+=1)if(this.elt[t].textContent===e){n=t;break}if(void 0!==n)!1===t?this.elt.remove(n):this.elt[n].value=t;else{const n=document.createElement("option");n.textContent=e,n.value=void 0===t?e:t,this.elt.appendChild(n),this._pInst._elements.push(n)}}},t.selected=function(e){if(void 0!==e){for(let t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){let e=[];for(const t of this.elt.selectedOptions)e.push(t.value);return e}return this.elt.value},t.disable=function(e){if("string"==typeof e)for(let t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},t.enable=function(e){if("string"==typeof e)for(let t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!1,this.elt[t].selected=!1);else{this.elt.disabled=!1;for(let e=0;e<this.elt.length;e++)this.elt[e].disabled=!1,this.elt[e].selected=!1}return this},t};let r=0;t.createRadio=function(...e){let t,i,s;const a=e[0];a instanceof Nr&&(a.elt instanceof HTMLDivElement||a.elt instanceof HTMLSpanElement)?(t=a,this.elt=a.elt):a instanceof HTMLDivElement||a instanceof HTMLSpanElement?(t=n(a,this),this.elt=a,i=a,"string"==typeof e[1]&&(s=e[1])):("string"==typeof a&&(s=a),i=document.createElement("div"),t=n(i,this),this.elt=i),t._name=s||"radioOption_"+r++;const o=e=>e instanceof HTMLInputElement&&"radio"===e.type,l=e=>e instanceof HTMLLabelElement;return t._getOptionsArray=function(){return Array.from(this.elt.children).filter(e=>o(e)||l(e)&&o(e.firstElementChild)).map(e=>o(e)?e:e.firstElementChild)},t.option=function(e,n){let r,i,s;for(const a of t._getOptionsArray())if(a.value===e){r=a;break}return void 0===r&&(r=document.createElement("input"),r.setAttribute("type","radio"),r.setAttribute("value",e)),r.setAttribute("name",t._name),l(r.parentElement)?i=r.parentElement:(i=document.createElement("label"),i.insertAdjacentElement("afterbegin",r)),i.lastElementChild instanceof HTMLSpanElement?s=i.lastElementChild:(s=document.createElement("span"),r.insertAdjacentElement("afterend",s)),s.innerHTML=void 0===n?e:n,this.elt.appendChild(i),r},t.remove=function(e){for(const n of t._getOptionsArray())if(n.value===e)return void(l(n.parentElement)?n.parentElement.remove():n.remove())},t.value=function(){let e="";for(const n of t._getOptionsArray())if(n.checked){e=n.value;break}return e},t.selected=function(e){let n=null;if(void 0===e){for(const r of t._getOptionsArray())if(r.checked){n=r;break}}else{t._getOptionsArray().forEach(e=>{e.checked=!1,e.removeAttribute("checked")});for(const r of t._getOptionsArray())r.value===e&&(r.setAttribute("checked",!0),r.checked=!0,n=r)}return n},t.disable=function(e=!0){for(const n of t._getOptionsArray())n.setAttribute("disabled",e)},t},t.createColorPicker=function(t){const r=document.createElement("input");let i;r.type="color",t?t instanceof e.Color?r.value=t.toString("#rrggbb"):(this.push(),this.colorMode("rgb"),r.value=this.color(t).toString("#rrggbb"),this.pop()):r.value="#000000",i=n(r,this);const s=this;return i.color=function(){s.push(),t&&t.mode&&s.colorMode(t.mode,...t?.maxes&&t.maxes[t.mode]||[]);const e=s.color(this.elt.value);return s.pop(),e},i},t.createInput=function(e="",t="text"){let r=document.createElement("input");return r.setAttribute("value",e),r.setAttribute("type",t),n(r,this)},t.createFileInput=function(e,t=!1){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return void console.log("The File APIs are not fully supported in this browser. Cannot create element.");const r=document.createElement("input");return r.setAttribute("type","file"),t&&r.setAttribute("multiple",!0),r.addEventListener("change",function(t){for(const n of t.target.files)kr._load(n,e)},!1),n(r,this)}}function yM(e,t,n){n.presetup=function(){for(const e of["deviceorientation","devicemotion"])window.addEventListener(e,this[`_on${e}`].bind(this),{passive:!1,signal:this._removeSignal})},t.deviceOrientation=window.innerWidth/window.innerHeight>1?"landscape":"portrait",t.accelerationX=0,t.accelerationY=0,t.accelerationZ=0,t.pAccelerationX=0,t.pAccelerationY=0,t.pAccelerationZ=0,t._updatePAccelerations=function(){this.pAccelerationX=this.accelerationX,this.pAccelerationY=this.accelerationY,this.pAccelerationZ=this.accelerationZ},t.rotationX=0,t.rotationY=0,t.rotationZ=0,t.pRotationX=0,t.pRotationY=0,t.pRotationZ=0;let r=0,i=0,s=0,a="clockwise",o="clockwise",l="clockwise";t.pRotateDirectionX=void 0,t.pRotateDirectionY=void 0,t.pRotateDirectionZ=void 0,t._updatePRotations=function(){this.pRotationX=this.rotationX,this.pRotationY=this.rotationY,this.pRotationZ=this.rotationZ},t.turnAxis=void 0;let u=.5,c=30;t.setMoveThreshold=function(e){u=e},t.setShakeThreshold=function(e){c=e},t._ondeviceorientation=function(e){this._updatePRotations(),this.rotationX=this._fromDegrees(e.beta),this.rotationY=this._fromDegrees(e.gamma),this.rotationZ=this._fromDegrees(e.alpha),this._handleMotion()},t._ondevicemotion=function(e){this._updatePAccelerations(),this.accelerationX=2*e.acceleration.x,this.accelerationY=2*e.acceleration.y,this.accelerationZ=2*e.acceleration.z,this._handleMotion()},t._handleMotion=function(){if("landscape-primary"===screen.orientation.type||"landscape-secondary"===screen.orientation.type?this.deviceOrientation="landscape":"portrait-primary"===screen.orientation.type||"portrait-secondary"===screen.orientation.type?this.deviceOrientation="portrait":this.deviceOrientation="undefined","function"==typeof this._customActions.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>u||Math.abs(this.accelerationY-this.pAccelerationY)>u||Math.abs(this.accelerationZ-this.pAccelerationZ)>u)&&this._customActions.deviceMoved(),"function"==typeof this._customActions.deviceTurned){const e=this._toDegrees(this.rotationX)+180,t=this._toDegrees(this.pRotationX)+180;let n=r+180;e-t>0&&e-t<270||e-t<-270?a="clockwise":(e-t<0||e-t>270)&&(a="counter-clockwise"),a!==this.pRotateDirectionX&&(n=e),Math.abs(e-n)>90&&Math.abs(e-n)<270&&(n=e,this.turnAxis="X",this._customActions.deviceTurned()),this.pRotateDirectionX=a,r=n-180;const u=this._toDegrees(this.rotationY)+180,c=this._toDegrees(this.pRotationY)+180;let h=i+180;u-c>0&&u-c<270||u-c<-270?o="clockwise":(u-c<0||u-this.pRotationY>270)&&(o="counter-clockwise"),o!==this.pRotateDirectionY&&(h=u),Math.abs(u-h)>90&&Math.abs(u-h)<270&&(h=u,this.turnAxis="Y",this._customActions.deviceTurned()),this.pRotateDirectionY=o,i=h-180;const d=this._toDegrees(this.rotationZ),p=this._toDegrees(this.pRotationZ);d-p>0&&d-p<270||d-p<-270?l="clockwise":(d-p<0||d-p>270)&&(l="counter-clockwise"),l!==this.pRotateDirectionZ&&(s=d),Math.abs(d-s)>90&&Math.abs(d-s)<270&&(s=d,this.turnAxis="Z",this._customActions.deviceTurned()),this.pRotateDirectionZ=l,this.turnAxis=void 0}if("function"==typeof this._customActions.deviceShaken){let e,t;null!==this.pAccelerationX&&(e=Math.abs(this.accelerationX-this.pAccelerationX),t=Math.abs(this.accelerationY-this.pAccelerationY)),e+t>c&&this._customActions.deviceShaken()}}}function bM(e,t,n){n.presetup=function(){for(const e of["keydown","keyup","keypress","blur"])window.addEventListener(e,this[`_on${e}`].bind(this),{passive:!1,signal:this._removeSignal})},t.keyIsPressed=!1,t.key="",t.code="",t.keyCode=0,t._onkeydown=function(e){this._downKeys[e.code]||(this.keyIsPressed=!0,this.keyCode=e.which,this.key=e.key,this.code=e.code,this._downKeyCodes[e.code]=!0,this._downKeys[e.key]=!0,"function"!=typeof this._customActions.keyPressed||e.charCode||!1===this._customActions.keyPressed(e)&&e.preventDefault())},t._onkeyup=function(e){"function"==typeof this._customActions.keyReleased&&!1===this._customActions.keyReleased(e)&&e.preventDefault(),delete this._downKeyCodes[e.code],delete this._downKeys[e.key],this._areDownKeys()?(this.code=Object.keys(this._downKeyCodes).pop(),this.key=Object.keys(this._downKeys).pop()):(this.keyIsPressed=!1,this.key="",this.code="")},t._onkeypress=function(e){e.which===this._lastKeyCodeTyped&&e.repeat||(this._lastKeyCodeTyped=e.which,this.key=e.key||String.fromCharCode(e.which)||e.which,"function"==typeof this._customActions.keyTyped&&!1===this._customActions.keyTyped(e)&&e.preventDefault())},t._onblur=function(e){this._downKeys={}},t.keyIsDown=function(e){return function(e){return!["Alt","Shift","Control","Meta"].includes(e)&&"string"==typeof e&&e.length>1}(e)?this._downKeyCodes[e]||this._downKeys[e]||!1:this._downKeys[e]||this._downKeyCodes[e]||!1},t._areDownKeys=function(){for(const e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1}}function xM(e,t,n){function r(e,t,n,r){const i=e.getBoundingClientRect();return{x:(r.clientX-i.left)/t,y:(r.clientY-i.top)/n,winX:r.clientX,winY:r.clientY,id:r.pointerId}}n.presetup=function(){for(const e of["pointerdown","pointerup","pointermove","dragend","dragover","click","dblclick","wheel"])window.addEventListener(e,this[`_on${e}`].bind(this),{passive:!1,signal:this._removeSignal})},t.movedX=0,t.movedY=0,t._hasMouseInteracted=!1,t.mouseX=0,t.mouseY=0,t.pmouseX=0,t.pmouseY=0,t.winMouseX=0,t.winMouseY=0,t.pwinMouseX=0,t.pwinMouseY=0,t.mouseButton={left:!1,right:!1,center:!1},t.touches=[],t._activePointers=new Map,t.mouseIsPressed=!1,t._updatePointerCoords=function(e){if(null!==this._curElement){const t=this._curElement.elt,n=t.scrollWidth/this.width||1,i=t.scrollHeight/this.height||1;if("touch"===e.pointerType){const e=[];for(const s of this._activePointers.values())e.push(r(t,n,i,s));this.touches=e}const s=function(e,t,n,r){const i=e.getBoundingClientRect();return{x:(r.clientX-i.left)/t,y:(r.clientY-i.top)/n,winX:r.clientX,winY:r.clientY}}(t,n,i,e);this.movedX=e.movementX||0,this.movedY=e.movementY||0,this.mouseX=s.x,this.mouseY=s.y,this.winMouseX=s.winX,this.winMouseY=s.winY,this._hasMouseInteracted||(this._updateMouseCoords(),this._hasMouseInteracted=!0)}},t._updateMouseCoords=function(){this.pmouseX=this.mouseX,this.pmouseY=this.mouseY,this.pwinMouseX=this.winMouseX,this.pwinMouseY=this.winMouseY,this._pmouseWheelDeltaY=this._mouseWheelDeltaY},t._setMouseButton=function(e){this.mouseButton.left=Array.from(this._activePointers.values()).some(e=>!!(1&e.buttons)),this.mouseButton.center=Array.from(this._activePointers.values()).some(e=>!!(4&e.buttons)),this.mouseButton.right=Array.from(this._activePointers.values()).some(e=>!!(2&e.buttons))},t._onpointermove=function(e){let t;this._updatePointerCoords(e),this._activePointers.set(e.pointerId,e),this._setMouseButton(e),this.mouseIsPressed||"function"!=typeof this._customActions.mouseMoved?this.mouseIsPressed&&"function"==typeof this._customActions.mouseDragged&&(t=this._customActions.mouseDragged(e),!1===t&&e.preventDefault()):(t=this._customActions.mouseMoved(e),!1===t&&e.preventDefault())},t._onpointerdown=function(e){let t;this.mouseIsPressed=!0,this._activePointers.set(e.pointerId,e),this._setMouseButton(e),this._updatePointerCoords(e),"function"==typeof this._customActions.mousePressed&&(t=this._customActions.mousePressed(e),!1===t&&e.preventDefault())},t._onpointerup=function(e){let t;this.mouseIsPressed=!1,this._activePointers.delete(e.pointerId),this._setMouseButton(e),this._updatePointerCoords(e),"function"==typeof this._customActions.mouseReleased&&(t=this._customActions.mouseReleased(e),!1===t&&e.preventDefault())},t._ondragend=t._onpointerup,t._ondragover=t._onpointermove,t._onclick=function(e){"function"==typeof this._customActions.mouseClicked&&!1===this._customActions.mouseClicked(e)&&e.preventDefault()},t._ondblclick=function(e){"function"==typeof this._customActions.doubleClicked&&!1===this._customActions.doubleClicked(e)&&e.preventDefault()},t._mouseWheelDeltaY=0,t._pmouseWheelDeltaY=0,t._onwheel=function(e){this._mouseWheelDeltaY=e.deltaY,"function"==typeof this._customActions.mouseWheel&&(e.delta=e.deltaY,!1===this._customActions.mouseWheel(e)&&e.preventDefault())},t.requestPointerLock=function(){const e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},t.exitPointerLock=function(){document.exitPointerLock()}}function _M(e,t){e.Table=uh}function wM(e,t){e.TableRow=ch}function SM(e,t){t.abs=Math.abs,t.ceil=Math.ceil,t.constrain=function(e,t,n){return Math.max(Math.min(e,n),t)},t.dist=function(...e){return 4===e.length?Math.hypot(e[2]-e[0],e[3]-e[1]):6===e.length?Math.hypot(e[3]-e[0],e[4]-e[1],e[5]-e[2]):void 0},t.exp=Math.exp,t.floor=Math.floor,t.lerp=function(e,t,n){return n*(t-e)+e},t.log=Math.log,t.mag=function(e,t){return Math.hypot(e,t)},t.map=function(e,t,n,r,i,s){const a=(e-t)/(n-t)*(i-r)+r;return s?r<i?this.constrain(a,r,i):this.constrain(a,i,r):a},t.max=function(...e){const t=e=>{let t=-1/0;for(let n of e)t=Math.max(t,n);return t};return e[0]instanceof Array?t(e[0]):t(e)},t.min=function(...e){const t=e=>{let t=1/0;for(let n of e)t=Math.min(t,n);return t};return e[0]instanceof Array?t(e[0]):t(e)},t.norm=function(e,t,n){return this.map(e,t,n,0,1)},t.pow=Math.pow,t.round=function(e,t){if(!t)return Math.round(e);const n=Math.pow(10,t);return Math.round(e*n)/n},t.sq=e=>e*e,t.sqrt=Math.sqrt,t.fract=function(e){let t=0,n=Number(e);if(isNaN(n)||Math.abs(n)===1/0)return n;if(n<0&&(n=-n,t=1),String(n).includes(".")&&!String(n).includes("e")){let e=String(n);return e=Number("0"+e.slice(e.indexOf("."))),Math.abs(t-e)}return n<1?Math.abs(t-n):0}}function EM(e,t){const n=4095;let r=4,i=.5;const s=e=>.5*(1-Math.cos(e*Math.PI));let a;t.noise=function(e,t=0,o=0){if(null==a){a=new Array(4096);for(let e=0;e<4096;e++)a[e]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),o<0&&(o=-o);let l,u,c,h,d,p=Math.floor(e),f=Math.floor(t),m=Math.floor(o),g=e-p,v=t-f,y=o-m,b=0,x=.5;for(let _=0;_<r;_++){let e=p+(f<<4)+(m<<8);l=s(g),u=s(v),c=a[e&n],c+=l*(a[e+1&n]-c),h=a[e+16&n],h+=l*(a[e+16+1&n]-h),c+=u*(h-c),e+=256,h=a[e&n],h+=l*(a[e+1&n]-h),d=a[e+16&n],d+=l*(a[e+16+1&n]-d),h+=u*(d-h),c+=s(y)*(h-c),b+=c*x,x*=i,p<<=1,g*=2,f<<=1,v*=2,m<<=1,y*=2,g>=1&&(p++,g--),v>=1&&(f++,v--),y>=1&&(m++,y--)}return b},t.noiseDetail=function(e,t){e>0&&(r=e),t>0&&(i=t)},t.noiseSeed=function(e){const t=(()=>{const e=4294967296;let t,n;return{setSeed(r){n=t=(null==r?Math.random()*e:r)>>>0},getSeed:()=>t,rand:()=>(n=(1664525*n+1013904223)%e,n/e)}})();t.setSeed(e),a=new Array(4096);for(let n=0;n<4096;n++)a[n]=t.rand()}}function CM(e,t){const n="_lcg_random_state",r=4294967296;let i=0;t._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%r,this[e]/r},t._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*r:t)>>>0},t.randomSeed=function(e){this._lcgSetSeed(n,e),this._gaussian_previous=!1},t.random=function(e,t){let r;if(r=null!=this[n]?this._lcg(n):Math.random(),void 0===e)return r;if(void 0===t)return e instanceof Array?e[Math.floor(r*e.length)]:r*e;if(e>t){const n=e;e=t,t=n}return r*(t-e)+e},t.randomGaussian=function(e,t=1){let n,r,s,a;if(this._gaussian_previous)n=i,this._gaussian_previous=!1;else{do{r=this.random(2)-1,s=this.random(2)-1,a=r*r+s*s}while(a>=1);a=Math.sqrt(-2*Math.log(a)/a),n=r*a,i=s*a,this._gaussian_previous=!0}return n*t+(e||0)}}function AM(e,t){t.createVector=function(t,n,r){return 0===arguments.length&&e._friendlyError("In 1.x, createVector() was a shortcut for createVector(0, 0, 0). In 2.x, p5.js has vectors of any dimension, so you must provide your desired number of zeros. Use createVector(0, 0) for a 2D vector and createVector(0, 0, 0) for a 3D vector."),this instanceof e?new e.Vector(this._fromRadians.bind(this),this._toRadians.bind(this),...arguments):new e.Vector(t,n,r)},t.createMatrix=function(...t){return new e.Matrix(...t)}}function TM(e,t){t.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},t.int=function(e,n=10){return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,n):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map(e=>t.int(e,n)):void 0},t.str=function(e){return e instanceof Array?e.map(t.str):String(e)},t.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(t.boolean):void 0},t.byte=function(e){const n=t.int(e,10);return"number"==typeof n?(n+128)%256-128:n instanceof Array?n.map(t.byte):void 0},t.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(t.char):"string"==typeof e?t.char(parseInt(e,10)):void 0:String.fromCharCode(e)},t.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(t.unchar):void 0},t.hex=function(e,n){if(n=null==n?n=8:n,e instanceof Array)return e.map(e=>t.hex(e,n));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(n);if("number"==typeof e){e<0&&(e=4294967295+e+1);let t=Number(e).toString(16).toUpperCase();for(;t.length<n;)t=`0${t}`;return t.length>=n&&(t=t.substring(t.length-n,t.length)),t}},t.unhex=function(e){return e instanceof Array?e.map(t.unhex):parseInt(`0x${e}`,16)}}function MM(e,t){function n(e,t,n){let r=e<0;e=Math.abs(e);let[i,s]=e.toString().split(".");if(void 0===n){i=i.padStart(t,"0");let e=s?i+"."+s:i;return r?"-"+e:e}{let a=e.toFixed(n);[i,s]=a.toString().split("."),i=i.padStart(t,"0");let o=void 0===s?i:i+"."+s;return r?"-"+o:o}}function r(e,t){const n=(e=e.toString()).indexOf(".");let r=-1!==n?e.substring(n):"",i=-1!==n?e.substring(0,n):e;if(i=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length){r+=-1===n?".":"";const e=t-r.length+1;for(let t=0;t<e;t++)r+="0"}else r=r.substring(0,t+1);return i+r}function i(e){return parseFloat(e)>0?`+${e.toString()}`:e.toString()}function s(e){return parseFloat(e)>=0?` ${e.toString()}`:e.toString()}t.nf=function(e,t,r){return e instanceof Array?e.map(e=>n(e,t,r)):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):n(e,t,r)},t.nfc=function(e,t){return e instanceof Array?e.map(e=>r(e,t)):r(e,t)},t.nfp=function(...e){const n=t.nf.apply(this,e);return n instanceof Array?n.map(i):i(n)},t.nfs=function(...e){const n=t.nf.apply(this,e);return n instanceof Array?n.map(s):s(n)},t.splitTokens=function(e,t){let n;if(void 0!==t){let e=t;const r=/\]/g.exec(e);let i=/\[/g.exec(e);i&&r?(e=e.slice(0,r.index)+e.slice(r.index+1),i=/\[/g.exec(e),e=e.slice(0,i.index)+e.slice(i.index+1),n=new RegExp(`[\\[${e}\\]]`,"g")):r?(e=e.slice(0,r.index)+e.slice(r.index+1),n=new RegExp(`[${e}\\]]`,"g")):i?(e=e.slice(0,i.index)+e.slice(i.index+1),n=new RegExp(`[${e}\\[]`,"g")):n=new RegExp(`[${e}]`,"g")}else n=/\s/g;return e.split(n).filter(e=>e)},t.shuffle=function(e,t){const n=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e);let r,i,s=(e=t||n?e:e.slice()).length;for(;s>1;)r=this.random(0,1)*s|0,i=e[--s],e[s]=e[r],e[r]=i;return e}}function DM(e,t){t.day=function(){return(new Date).getDate()},t.hour=function(){return(new Date).getHours()},t.minute=function(){return(new Date).getMinutes()},t.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},t.month=function(){return(new Date).getMonth()+1},t.second=function(){return(new Date).getSeconds()},t.year=function(){return(new Date).getFullYear()}}function kM(e,t){t.orbitControl=function(e,t,n,r){this._assert3d("orbitControl");const i=this._renderer.states.curCamera;void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=1),"object"!=typeof r&&(r={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=()=>!1,this.contextMenuDisabled=!0),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=()=>!1,this.wheelDefaultDisabled=!0);const{disableTouchActions:s=!0}=r;!0!==this.touchActionsDisabled&&s&&(this.canvas.style["touch-action"]="none",this.touchActionsDisabled=!0);const{freeRotation:a=!1}=r,o=[];this.touches.forEach(e=>{this._renderer.prevTouches.forEach(t=>{if(e.id===t.id){const n={x:e.x,y:e.y,px:t.x,py:t.y};o.push(n)}})}),this._renderer.prevTouches=this.touches;let l=0,u=0,c=0,h=0,d=0;const p=.85,f=this.height<this.width?this.height:this.width;let m=!1;if(o.length>0){if(m=o[0].x>0&&o[0].x<this.width&&o[0].y>0&&o[0].y<this.height,1===o.length){const n=o[0];u=-e*(n.x-n.px)/f,c=t*(n.y-n.py)/f}else{const e=o[0],t=o[1];l=-(Math.hypot(e.x-t.x,e.y-t.y)-Math.hypot(e.px-t.px,e.py-t.py))*n*4e-4,h=.5*(e.x+t.x)-.5*(e.px+t.px),d=.5*(e.y+t.y)-.5*(e.py+t.py)}this.touches.length>0?m&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)}else m=this.mouseX>0&&this.mouseX<this.width&&this.mouseY>0&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(l=Math.sign(this._mouseWheelDeltaY)*n,l*=.01,this._mouseWheelDeltaY=0,m&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton.left?(u=-e*this.movedX/f,c=t*this.movedY/f):this.mouseButton.right&&(h=this.movedX,d=this.movedY*i.yScale),m&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1;if(0!==l&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=l),Math.abs(this._renderer.zoomVelocity)>.001?(a?i._orbitFree(0,0,this._renderer.zoomVelocity):i._orbit(0,0,this._renderer.zoomVelocity),0!==i.projMatrix.mat4[15]&&(i.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),i.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uPMatrix.mat4[0]=i.projMatrix.mat4[0],this._renderer.states.uPMatrix.mat4[5]=i.projMatrix.mat4[5]),this._renderer.zoomVelocity*=p):this._renderer.zoomVelocity=0,0===u&&0===c||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*u,.6*c),this._renderer.rotateVelocity.magSq()>1e-6?(a?i._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):i._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(p)):this._renderer.rotateVelocity.set(0,0),(0!==h||0!==d)&&this._renderer.executeRotateAndMove){const e=2*h/this.width,t=2*-d/this.height;this._renderer.moveVelocity.add(.15*e,.15*t)}if(this._renderer.moveVelocity.magSq()>1e-6){const e=i._getLocalAxes(),t=i.eyeX-i.centerX,n=i.eyeY-i.centerY,r=i.eyeZ-i.centerZ,s=Math.sqrt(t*t+n*n+r*r);let a,o,l=new Ur(i.centerX,i.centerY,i.centerZ);l=i.cameraMatrix.multiplyPoint(l),l=this._renderer.states.uPMatrix.multiplyAndNormalizePoint(l),l.x-=this._renderer.moveVelocity.x,l.y-=this._renderer.moveVelocity.y;const u=this._renderer.states.uPMatrix.mat4;0===u[15]?(a=(u[8]+l.x)/u[0]*s,o=(u[9]+l.y)/u[5]*s):(a=(l.x-u[12])/u[0],o=(l.y-u[13])/u[5]),i.setPosition(i.eyeX+a*e.x[0]+o*e.y[0],i.eyeY+a*e.x[1]+o*e.y[1],i.eyeZ+a*e.x[2]+o*e.y[2]),this._renderer.moveVelocity.mult(p)}else this._renderer.moveVelocity.set(0,0);return this},t.debugMode=function(...t){this._assert3d("debugMode");for(let n=e.lifecycleHooks.postdraw.length-1;n>=0;n--)e.lifecycleHooks.postdraw[n].toString()!==this._grid().toString()&&e.lifecycleHooks.postdraw[n].toString()!==this._axesIcon().toString()||e.lifecycleHooks.postdraw.splice(n,1);"grid"===t[0]?e.lifecycleHooks.postdraw.push(this._grid(t[1],t[2],t[3],t[4],t[5])):"axes"===t[0]?e.lifecycleHooks.postdraw.push(this._axesIcon(t[1],t[2],t[3],t[4])):(e.lifecycleHooks.postdraw.push(this._grid(t[0],t[1],t[2],t[3],t[4])),e.lifecycleHooks.postdraw.push(this._axesIcon(t[5],t[6],t[7],t[8])))},t.noDebugMode=function(){this._assert3d("noDebugMode");for(let t=e.lifecycleHooks.postdraw.length-1;t>=0;t--)e.lifecycleHooks.postdraw[t].toString()!==this._grid().toString()&&e.lifecycleHooks.postdraw[t].toString()!==this._axesIcon().toString()||e.lifecycleHooks.postdraw.splice(t,1)},t._grid=function(e,t,n,r,i){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);const s=e/t,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.states.curStrokeColor[0],255*this._renderer.states.curStrokeColor[1],255*this._renderer.states.curStrokeColor[2]),this._renderer.states.setValue("uModelMatrix",this._renderer.states.uModelMatrix.clone()),this._renderer.states.uModelMatrix.reset();for(let e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-a+n,r,e*s-a+i),this.vertex(+a+n,r,e*s-a+i),this.endShape();for(let e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(e*s-a+n,r,-a+i),this.vertex(e*s-a+n,r,+a+i),this.endShape();this.pop()}},t._axesIcon=function(e,t,n,r){return void 0===e&&(e=this.width/20>40?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),()=>{this.push(),this._renderer.states.setValue("uModelMatrix",this._renderer.states.uModelMatrix.clone()),this._renderer.states.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}}}async function NM(e){try{return(await fetch(e,{method:"HEAD"})).ok}catch(t){return!1}}function FM(e,t){async function n(e){let t=null,n={};const{data:r}=await _C(e,"text"),i=r.split("\n");for(let s=0;s<i.length;++s){const e=i[s].trim().split(/\s+/);"newmtl"===e[0]?(t=e[1],n[t]={}):"Kd"===e[0]?n[t].diffuseColor=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]:"Ka"===e[0]?n[t].ambientColor=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]:"Ks"===e[0]?n[t].specularColor=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]:"map_Kd"===e[0]&&(n[t].texturePath=e[1])}return n}function r(e,t,n={}){const r={v:[],vt:[],vn:[]},i={};let s=null,a=!1,o=!1;for(let l=0;l<t.length;++l){const u=t[l].trim().split(/\b\s+/);if(u.length>0)if("usemtl"===u[0])s=u[1];else if("v"===u[0]||"vn"===u[0]){const e=new Ur(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));r[u[0]].push(e)}else if("vt"===u[0]){const e=[parseFloat(u[1]),1-parseFloat(u[2])];r[u[0]].push(e)}else if("f"===u[0])for(let t=3;t<u.length;++t){const l=[],c=[1,t-1,t];for(let t=0;t<c.length;++t){const h=u[c[t]];let d=h.split("/");for(let e=0;e<d.length;e++)d[e]=parseInt(d[e])-1;if(i[h]||(i[h]={}),void 0===i[h][s]){const t=e.vertices.length;if(e.vertices.push(r.v[d[0]].copy()),e.uvs.push(r.vt[d[1]]?r.vt[d[1]].slice():[0,0]),e.vertexNormals.push(r.vn[d[2]]?r.vn[d[2]].copy():new Ur),i[h][s]=t,l.push(t),s&&n[s]&&n[s].diffuseColor){a=!0;const t=n[s].diffuseColor;e.vertexColors.push(t[0]),e.vertexColors.push(t[1]),e.vertexColors.push(t[2]),e.vertexColors.push(1)}else o=!0}else l.push(i[h][s])}l[0]!==l[1]&&l[0]!==l[2]&&l[1]!==l[2]&&e.faces.push(l)}}if(0===e.vertexNormals.length&&e.computeNormals(),a===o)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.");return e}function i(e,t){if(function(e){const t=new DataView(e),n=[115,111,108,105,100];for(let r=0;r<5;r++)if(s(n,t,r))return!1;return!0}(t))!function(e,t){const n=new DataView(t),r=n.getUint32(80,!0);let i,s,a,o,l,u,c,h=!1;for(let f=0;f<70;f++)1129270351===n.getUint32(f,!1)&&82===n.getUint8(f+4)&&61===n.getUint8(f+5)&&(h=!0,o=[],l=n.getUint8(f+6)/255,u=n.getUint8(f+7)/255,c=n.getUint8(f+8)/255);const d=84,p=50;for(let f=0;f<r;f++){const t=d+f*p,r=n.getFloat32(t,!0),m=n.getFloat32(t+4,!0),g=n.getFloat32(t+8,!0);if(h){const e=n.getUint16(t+48,!0);32768&e?(i=l,s=u,a=c):(i=(31&e)/31,s=(e>>5&31)/31,a=(e>>10&31)/31)}const v=new Ur(r,m,g);for(let l=1;l<=3;l++){const r=t+12*l,u=new Ur(n.getFloat32(r,!0),n.getFloat32(r+4,!0),n.getFloat32(r+8,!0));e.vertices.push(u),e.vertexNormals.push(v),h&&o.push(i,s,a)}e.faces.push([3*f,3*f+1,3*f+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{const n=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)"),e;!function(e,t){let n,r,i="",s=[];for(let a=0;a<t.length;++a){const o=t[a].trim(),l=o.split(" ");for(let e=0;e<l.length;++e)""===l[e]&&l.splice(e,1);if(0!==l.length)switch(i){case"":if("solid"!==l[0])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "solid"`);i="solid";break;case"solid":if("facet"!==l[0]||"normal"!==l[1])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "facet normal"`);n=new Ur(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(n,n,n),i="facet normal";break;case"facet normal":if("outer"!==l[0]||"loop"!==l[1])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "outer loop"`);i="vertex";break;case"vertex":if("vertex"===l[0])r=new Ur(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),e.vertices.push(r),e.uvs.push([0,0]),s.push(e.vertices.indexOf(r));else{if("endloop"!==l[0])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "vertex" or "endloop"`);e.faces.push(s),s=[],i="endloop"}break;case"endloop":if("endfacet"!==l[0])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "endfacet"`);i="endfacet";break;case"endfacet":if("endsolid"===l[0]);else{if("facet"!==l[0]||"normal"!==l[1])return console.error(o),void console.error(`Invalid state "${l[0]}", should be "endsolid" or "facet normal"`);n=new Ur(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(n,n,n),i="facet normal"}break;default:console.error(`Invalid state "${i}"`)}}}(e,new TextDecoder("utf-8").decode(n).split("\n"))}return e}function s(e,t,n){for(let r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}t.loadModel=async function(t,s,a,o,l){let u=!1,c=!1;"object"==typeof s?(a=s.normalize||!1,o=s.successCallback,l=s.failureCallback,u=(s=s.fileType||s).flipU||!1,c=s.flipV||!1):("function"==typeof arguments[arguments.length-1]&&("function"==typeof arguments[arguments.length-2]?(o=arguments[arguments.length-2],l=arguments[arguments.length-1]):o=arguments[arguments.length-1]),"string"==typeof s?"boolean"!=typeof a&&(a=!1):"boolean"==typeof s?(a=s,s=t.slice(-4)):(s=t.slice(-4),a=!1)),".obj"!==s.toLowerCase()&&".stl"!==s.toLowerCase()&&(s=".obj");const h=new Ti(void 0,void 0,void 0,this._renderer);h.gid=`${t}|${a}`;try{if(s.match(/\.stl$/i)){const{data:e}=await _C(t,"arrayBuffer");return i(h,e),a&&h.normalize(),u&&h.flipU(),c&&h.flipV(),h._makeTriangleEdges(),o?o(h):h}if(s.match(/\.obj$/i)){const{data:e}=await _C(t,"text"),i=e.split("\n"),s=await async function(e){const r=[];for(let s of e){const e=s.match(/^mtllib (.+)/);if(e){let i="";const s=e[1],a=t.split("/");a.length>1?(a.pop(),i=a.join("/")+"/"+s):i=s,r.push(NM(i).then(e=>e?n(i):(console.warn(`MTL file not found or error in parsing; proceeding without materials: ${i}`),{})).catch(e=>(console.warn(`Error loading MTL file: ${i}`,e),{})))}}try{const e=await Promise.all(r);return Object.assign({},...e)}catch(i){return{}}}(i);return r(h,i,s),a&&h.normalize(),u&&h.flipU(),c&&h.flipV(),h._makeTriangleEdges(),o?o(h):h}}catch(d){if(e._friendlyFileLoadError(3,t),l)return l(d);throw d}},t.model=function(e,t=1){this._assert3d("model"),this._renderer.model(e,t)};let a=0;t.createModel=function(t,n=" ",s){let o,l,u=!1,c=!1,h=!1;s&&"object"==typeof s?(u=s.normalize||!1,o=s.successCallback,l=s.failureCallback,c=s.flipU||!1,h=s.flipV||!1):"boolean"==typeof s?(u=s,o=arguments[3],l=arguments[4]):(o="function"==typeof arguments[2]?arguments[2]:void 0,l=arguments[3]);const d=new e.Geometry;if(d.gid=`${n}|${u}|${a++}`,n.match(/\.stl$/i))try{i(d,(new TextEncoder).encode(t).buffer)}catch(p){return void(l?l(p):e._friendlyError("Error during parsing: "+p.message))}else if(n.match(/\.obj$/i))try{r(d,t.split("\n"))}catch(p){return void(l?l(p):e._friendlyError("Error during parsing: "+p.message))}else e._friendlyFileLoadError(3,t),l?l():e._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return u&&d.normalize(),c&&d.flipU(),h&&d.flipV(),d._makeTriangleEdges(),"function"==typeof o&&o(d),d}}function IM(e,t){const n=/\r?\n/g,r=/,\s+/,i=/^".*"$/,s=/\t/g,a=new RegExp(`(?:${["wght","wdth","ital","slnt","opsz"].join("|")})`);["text","textAlign","textAscent","textDescent","textLeading","textMode","textFont","textSize","textStyle","textWidth","textWrap","textBounds","textDirection","textProperty","textProperties","fontBounds","fontWidth","fontAscent","fontDescent","textWeight"].forEach(n=>{t[n]=function(...e){if(!(n in di.prototype))throw Error(`Renderer2D.prototype.${n} is not defined.`);return this._renderer[n](...e)},e.Graphics.prototype[n]=function(...e){return this._renderer[n](...e)}});const o={textAlign:{default:t.LEFT,type:"Context2d"},textBaseline:{default:t.BASELINE,type:"Context2d"},textFont:{default:{family:"sans-serif"}},textLeading:{default:15},textSize:{default:12},textWrap:{default:t.WORD},fontStretch:{default:t.NORMAL,isShorthand:!0},fontWeight:{default:t.NORMAL,isShorthand:!0},lineHeight:{default:t.NORMAL,isShorthand:!0},fontVariant:{default:t.NORMAL,isShorthand:!0},fontStyle:{default:t.NORMAL,isShorthand:!0},direction:{default:"inherit"}},l=["font","direction","fontKerning","fontStretch","fontVariantCaps","letterSpacing","textAlign","textBaseline","textRendering","wordSpacing"],u=Object.keys(o).filter(e=>o[e].isShorthand),c=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"];let h,d;if(di.prototype.text=function(e,t,n,r,i){let s=this.textDrawingContext().textBaseline;({x:t,y:n,width:r,height:i}=this._handleRectMode(t,n,r,i));let a=this._processLines(e,r,i);a=this._positionLines(t,n,r,i,a),a.forEach(e=>this._renderText(e.text,e.x,e.y)),this.textDrawingContext().textBaseline=s},di.prototype.textBounds=function(e,t,n,r,i){return this._computeBounds(hh._TEXT_BOUNDS,e,t,n,r,i).bounds},di.prototype.fontBounds=function(e,t,n,r,i){return this._computeBounds(hh._FONT_BOUNDS,e,t,n,r,i).bounds},di.prototype.textWidth=function(e){let t=this._processLines(e);return Math.max(...t.map(e=>this._textWidthSingle(e)))},di.prototype.fontWidth=function(e){let t=this._processLines(e);return Math.max(...t.map(e=>this._fontWidthSingle(e)))},di.prototype.textAscent=function(e=""){return e.length?this.textDrawingContext().measureText(e).actualBoundingBoxAscent:this.fontAscent()},di.prototype.fontAscent=function(){return this.textDrawingContext().measureText("_").fontBoundingBoxAscent},di.prototype.textDescent=function(e=""){return e.length?this.textDrawingContext().measureText(e).actualBoundingBoxDescent:this.fontDescent()},di.prototype.fontDescent=function(){return this.textDrawingContext().measureText("_").fontBoundingBoxDescent},di.prototype.textAlign=function(e,n){return void 0!==e?(this.states.setValue("textAlign",e),void 0!==n&&(n===t.CENTER&&(n=hh._CTX_MIDDLE),this.states.setValue("textBaseline",n)),this._applyTextProperties()):{horizontal:this.states.textAlign,vertical:this.states.textBaseline}},di.prototype._currentTextFont=function(){return this.states.textFont.font||this.states.textFont.family},di.prototype.textFont=function(t,n,r){if(0===arguments.length)return this._currentTextFont();let i=t;if(t instanceof e.Font?i=t.face.family:t.data instanceof Uint8Array?(i=t.name.fontFamily,t.name?.fontSubfamily&&(i+="-"+t.name.fontSubfamily)):"string"==typeof t&&void 0===n&&/[.0-9]+(%|em|p[xt])/.test(i)&&({family:i,size:n}=this._directSetFontString(i)),"string"!=typeof i)throw Error("null font in textFont()");return 2===arguments.length&&"object"==typeof n&&(r=n,n=void 0),this.states.setValue("textFont",{font:t,family:i,size:n}),void 0!==n&&this._setTextSize(n),"object"==typeof r&&this.textProperties(r),this._applyTextProperties()},di.prototype._directSetFontString=function(e,t=0){t&&console.log('_directSetFontString"'+e+'"');let n=u.reduce((e,t)=>(e[t]=o[t].default,e),{}),r=this._cachedDiv(n);r.style.font=e;let i=getComputedStyle(r);return u.forEach(e=>{this.states[e]=i[e],t&&console.log("  this.states."+e+'="'+i[e]+'"')}),{family:i.fontFamily,size:i.fontSize}},di.prototype.textLeading=function(e){return"number"==typeof e?(this.states.setValue("leadingSet",!0),this.states.setValue("textLeading",e),this._applyTextProperties()):this.states.textLeading},di.prototype.textWeight=function(t){return"number"==typeof t?(this.states.setValue("fontWeight",t),this._applyTextProperties(),void(e.prototype._isSafari()||this._setCanvasStyleProperty("font-variation-settings",`"wght" ${t}`))):this.states.fontWeight},di.prototype.textSize=function(e){return void 0!==e?(this._setTextSize(e),this._applyTextProperties()):this.states.textSize},di.prototype.textStyle=function(e){return void 0!==e?(this.states.setValue("fontStyle",e),this._applyTextProperties()):this.states.fontStyle},di.prototype.textWrap=function(e){return e===t.WORD||e===t.CHAR?(this.states.setValue("textWrap",e),this._pInst):this.states.textWrap},di.prototype.textDirection=function(e){return void 0!==e?(this.states.setValue("direction",e),this._applyTextProperties()):this.states.direction},di.prototype.textProperty=function(e,t,n){let r=!1,i=n?.debug||!1;if(void 0===t){let t=this.textProperties();if(e in t)return t[e];throw Error('Unknown text option "'+e+'"')}return e in this.states&&this.states[e]!==t?(this.states[e]=t,r=!0,i&&console.log("this.states."+e+'="'+options[e]+'"')):e in this.textDrawingContext()?(this._setContextProperty(e,t,i),r=!0):e in this.textCanvas().style?(this._setCanvasStyleProperty(e,t,i),r=!0):console.warn('Ignoring unknown text option: "'+e+'"\n'),r?this._applyTextProperties():this._pInst},di.prototype.textProperties=function(e){if(void 0!==e)return Object.keys(e).forEach(t=>{this.textProperty(t,e[t])}),this._pInst;let t=this.textDrawingContext();return e=l.reduce((e,n)=>(e[n]=t[n],e),{}),Object.keys(o).forEach(n=>{if("Context2d"===o[n]?.type)e[n]=t[n];else if("textFont"===n){let t=this._currentTextFont();"object"==typeof t&&"_pInst"in t&&(t=Object.assign({},t),delete t._pInst),e[n]=t}else e[n]=this.states[n]}),e},di.prototype.textMode=function(){},di.prototype._currentTextFont=function(){return this.states.textFont.font||this.states.textFont.family},di.prototype._computeBounds=function(t,n,r,i,s,a,o){let l=this.textDrawingContext(),u=l.textBaseline,{textLeading:c,textAlign:h}=this.states;({width:s,height:a}=this._rectModeAdjust(r,i,s,a));let d=this._processLines(n,s,a),p=d.map((e,n)=>this[t].bind(this)(e,r,i+n*c));if(d.length>1){const t=p.reduce((e,t)=>Math.max(e,t.w||0),0);p.forEach(n=>{const r=s??t;n.x+=e.Renderer2D.prototype._xAlignOffset.call(this,h,r)})}void 0!==a&&e.Renderer2D.prototype._yAlignOffset.call(this,p,a);let f=p[0];return d.length>1&&(f=this._aggregateBounds(p),o?.ignoreRectMode||this._rectModeAlign(f,s||0,a||0)),l.textBaseline=u,{bounds:f,lines:d}},di.prototype._rectModeAdjust=function(e,n,r,i){if(void 0!==r)switch(this.states.rectMode){case t.CENTER:break;case t.CORNERS:r-=e,i-=n;break;case t.RADIUS:r*=2,i*=2}return{x:e,y:n,width:r,height:i}},di.prototype._setCanvasStyleProperty=function(e,t,n){let r=t.toString();n&&console.log("canvas.style."+e+'="'+r+'"'),"fontVariationSettings"===e&&this._handleFontVariationSettings(r),this.textCanvas().style[e]=r,this.textCanvas().style[e]},di.prototype._handleFontVariationSettings=function(e,t=!1){"object"==typeof e&&(e=Object.keys(e).map(t=>t+" "+e[t]).join(", ")),e.split(r).forEach(e=>{e=e.replace(/["']/g,"");let n=a.exec(e);if(n&&n.length){let r=n[0],i=parseFloat(parseFloat(e.replace(r,"").trim()).toFixed(3));switch(r){case"wght":return t&&console.log("setting font-weight="+i),this.states.fontWeight!==i&&this.textWeight(i),i;case"wdth":break;case"ital":t&&console.log("setting font-style="+(i?"italic":"normal"));break;case"slnt":t&&console.log("setting font-style="+(i?"oblique":"normal"));break;case"opsz":t&&console.log("setting font-optical-size="+i)}}})},di.prototype._setContextProperty=function(e,t,n=!1){if(this.textDrawingContext()[e]===t)return this._pInst;(h??=[]).push([e,t]),n&&console.log("queued context2d."+e+'="'+t+'"')},di.prototype._handleRectMode=function(e,n,r,i){let s=this.states.rectMode;if(void 0!==r)switch(s){case t.RADIUS:e-=(r*=2)/2,void 0!==i&&(n-=(i*=2)/2);break;case t.CENTER:e-=r/2,void 0!==i&&(n-=i/2);break;case t.CORNERS:r-=e,void 0!==i&&(i-=n)}return{x:e,y:n,width:r,height:i}},di.prototype._fontSizePx=function(e,{family:t}=this.states.textFont){if(n=e,!isNaN(n)&&""!==n.trim())return parseFloat(e);var n;let r=this._cachedDiv({fontSize:e});r.style.fontSize=e,r.style.fontFamily=t;let i=getComputedStyle(r).fontSize,s=parseFloat(i);if("number"!=typeof s)throw Error("textSize: invalid font-size");return s},di.prototype._cachedDiv=function(e){if(void 0===d){let t=document.createElement("div");t.ariaHidden="true",t.style.display="none",Object.entries(e).forEach(([e,n])=>{t.style[e]=n}),this.textCanvas().appendChild(t),d=t}return d},di.prototype._aggregateBounds=function(e){let t=Math.min(...e.map(e=>e.x)),n=Math.min(...e.map(e=>e.y)),r=Math.max(...e.map(e=>e.y+e.h));return{x:t,y:n,w:Math.max(...e.map(e=>e.x+e.w))-t,h:r-n}},di.prototype._processLines=function(e,n,r){void 0!==n&&this.textDrawingContext().textBaseline===t.BASELINE&&(this.drawingContext.textBaseline=t.TOP);let i=this._splitOnBreaks(e.toString()),s=i.length>1,a=void 0!==n,o=a&&i.some(e=>this._textWidthSingle(e)>n),{textLeading:l,textWrap:u}=this.states;if((s||o)&&a&&(i=this._lineate(u,i,n)),a&&void 0!==r){if(void 0===l)throw Error("leading is required if height is specified");for(let e=0;e<i.length;e++)if(l*(e+1)>r){i=i.slice(0,e);break}}return i},di.prototype._xAlignOffset=function(e,n){switch(e){case t.LEFT:return 0;case t.CENTER:return n/2;case t.RIGHT:return n;case hh.START:return 0;case hh.END:throw new Error("textBounds: END not yet supported for textAlign");default:return 0}},di.prototype._rectModeAlign=function(e,n,r){if(void 0!==n){switch(this.states.rectMode){case t.CENTER:e.x-=(n-e.w)/2,e.y-=(r-e.h)/2;break;case t.CORNERS:e.w+=e.x,e.h+=e.y;break;case t.RADIUS:e.x-=(n-e.w)/2,e.y-=(r-e.h)/2,e.w/=2,e.h/=2}return e}},di.prototype._rectModeAlignRevert=function(e,n,r){if(void 0!==n){switch(this.states.rectMode){case t.CENTER:e.x+=(n-e.w)/2,e.y+=(r-e.h)/2;break;case t.CORNERS:e.w-=e.x,e.h-=e.y;break;case t.RADIUS:e.x+=(n-e.w)/2,e.y+=(r-e.h)/2,e.w*=2,e.h*=2}return e}},di.prototype._textWidthSingle=function(e){let t=this.textDrawingContext().measureText(e),n=t.actualBoundingBoxLeft;return t.actualBoundingBoxRight+n},di.prototype._fontWidthSingle=function(e){return this.textDrawingContext().measureText(e).width},di.prototype._textBoundsSingle=function(e,t=0,n=0){let r=this.textDrawingContext().measureText(e),i=r.actualBoundingBoxAscent,s=r.actualBoundingBoxDescent,a=r.actualBoundingBoxLeft;return{x:t-a,y:n-i,w:r.actualBoundingBoxRight+a,h:i+s}},di.prototype._fontBoundsSingle=function(e,t=0,n=0){let r=this.textDrawingContext().measureText(e),i=r.fontBoundingBoxAscent,s=r.fontBoundingBoxDescent;return{x:t-=this._xAlignOffset(this.states.textAlign,r.width),y:n-i,w:r.width,h:i+s}},di.prototype._setTextSize=function(e){if("string"==typeof e&&(e=this._fontSizePx(e)),"number"==typeof e){if(this.states.textSize!==e)return this.states.setValue("textSize",e),this.states.leadingSet||this.states.setValue("textLeading",1.275*this.states.textSize),!0}else console.warn("textSize: invalid size: "+e);return!1},di.prototype._lineate=function(e,n,r=1/0,i={}){let s,a,o,l,u=i.splitChar??(e===t.WORD?" ":""),c=[];for(let t=0;t<n.length;t++){s="",l=n[t].split(u);for(let e=0;e<l.length;e++)a=`${s+l[e]}`+u,o=this._textWidthSingle(a),s.length>0&&o>r?(c.push(s.trim()),s=`${l[e]}`+u):s=a;c.push(s.trim())}return c},di.prototype._splitOnBreaks=function(e){return e&&0!==e.length?e.replace(s,"  ").split(n):[""]},di.prototype._parseFontFamily=function(e){return e.split(r).map(e=>((e=e.trim()).indexOf(" ")>-1&&!i.test(e)&&(e=`"${e}"`),e)).join(", ")},di.prototype._applyFontString=function(){let{textFont:e,textSize:n,lineHeight:r,fontStyle:i,fontWeight:s,fontVariant:a}=this.states,o=this.textDrawingContext(),l=this._parseFontFamily(e.family),u=i!==t.NORMAL?`${i} `:"",c=s!==t.NORMAL?`${s} `:"",h=`${u}${a!==t.NORMAL?`${a} `:""}${c}${`${n}px`+(r!==t.NORMAL?`/${r} `:" ")}${l}`.trim();return o.font=h,o.font===h||h===o.font},di.prototype._applyTextProperties=function(e=!1){this._applyFontString();let t=this.textDrawingContext();t.direction=this.states.direction,t.textAlign=this.states.textAlign,t.textBaseline=this.states.textBaseline;let n=this.states.fontStretch;for(c.includes(n)&&t.fontStretch!==n&&(t.fontStretch=n);h?.length;){let[n,r]=h.shift();e&&console.log('apply context property "'+n+'" = "'+r+'"'),t[n]=r,t[n]!==r&&(console.warn(`Unable to set '${n}' property on context2d. It may not be supported.`),console.log('Expected "'+r+'" but got: "'+t[n]+'"'))}return this._pInst},e.Renderer2D&&(e.Renderer2D.prototype.textCanvas=function(){return this.canvas},e.Renderer2D.prototype.textDrawingContext=function(){return this.drawingContext},e.Renderer2D.prototype._renderText=function(e,t,n,r,i){let s=this.states,a=this.textDrawingContext();n<i||n>=r||(this.push(),s.strokeColor&&s.strokeSet&&a.strokeText(e,t,n),!this._clipping&&s.fillColor&&(s.fillSet||this._setFill("#000000"),a.fillText(e,t,n)),this.pop())},e.Renderer2D.prototype._positionLines=function(e,n,r,i,s){let a,{textLeading:o,textAlign:l}=this.states,u=new Array(s.length),c=void 0===r?0:r,h=void 0===i?0:i;for(let d=0;d<s.length;d++){switch(l){case hh.START:throw new Error("textBounds: START not yet supported for textAlign");case t.LEFT:a=e;break;case t.CENTER:a=e+c/2;break;case t.RIGHT:a=e+c;break;case hh.END:throw new Error("textBounds: END not yet supported for textAlign")}u[d]={text:s[d],x:a,y:n+d*o}}return this._yAlignOffset(u,h)},e.Renderer2D.prototype._yAlignOffset=function(e,n){if(void 0===n)throw Error("_yAlignOffset: height is required");let{textLeading:r,textBaseline:i}=this.states,s=0,a=n-r*(e.length-1);switch(i){case t.TOP:case t.BASELINE:break;case hh._CTX_MIDDLE:s=a/2;break;case t.BOTTOM:s=a;break;case hh.IDEOGRAPHIC:console.warn("textBounds: IDEOGRAPHIC not yet supported for textBaseline");break;case hh.HANGING:console.warn("textBounds: HANGING not yet supported for textBaseline")}return e.forEach(e=>e.y+=s),e}),e.RendererGL){e.RendererGL.prototype.textCanvas=function(){return this._textCanvas||(this._textCanvas=document.createElement("canvas"),this._textCanvas.width=1,this._textCanvas.height=1,this._textCanvas.style.display="none",this.canvas.parentElement.insertBefore(this._textCanvas,this.canvas)),this._textCanvas},e.RendererGL.prototype.textDrawingContext=function(){return this._textDrawingContext||(this._textDrawingContext=this.textCanvas().getContext("2d")),this._textDrawingContext};const n=e.RendererGL.prototype.remove;e.RendererGL.prototype.remove=function(){this._textCanvas&&this._textCanvas.parentElement.removeChild(this._textCanvas),n.call(this)},e.RendererGL.prototype._positionLines=function(e,n,r,i,s){let{textLeading:a,textAlign:o}=this.states;const l=s.map(e=>this._fontWidthSingle(e));let u,c=new Array(s.length),h=void 0===r?Math.max(0,...l):r,d=void 0===i?0:i;for(let p=0;p<s.length;p++){switch(o){case hh.START:throw new Error("textBounds: START not yet supported for textAlign");case t.LEFT:u=e;break;case t.CENTER:u=e+(h-l[p])/2-h/2+(r||0)/2;break;case t.RIGHT:u=e+h-l[p]-h+(r||0);break;case hh.END:throw new Error("textBounds: END not yet supported for textAlign")}c[p]={text:s[p],x:u,y:n+p*a}}return this._yAlignOffset(c,d)},e.RendererGL.prototype._yAlignOffset=function(e,n){if(void 0===n)throw Error("_yAlignOffset: height is required");let{textLeading:r,textBaseline:i,textSize:s,textFont:a}=this.states,o=0,l=e.length,u=s*l+(r-s)*(l-1);switch(i){case t.TOP:o=s;break;case t.BASELINE:break;case hh._CTX_MIDDLE:o=-u/2+s+(n||0)/2;break;case t.BOTTOM:o=-(u-s)+(n||0);break;default:console.warn(`${i} is not supported in WebGL mode.`)}return o+=this.states.textFont.font?._verticalAlign(s)||0,e.forEach(e=>e.y+=o),e}}}function RM(e){let t=e.length;for(;--t>=0;)e[t]=0}function LM(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function PM(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function OM(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function BM(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Dd,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Id),this.dyn_dtree=new Uint16Array(2*(2*Nd+1)),this.bl_tree=new Uint16Array(2*(2*Fd+1)),jd(this.dyn_ltree),jd(this.dyn_dtree),jd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rd+1),this.heap=new Uint16Array(2*kd+1),jd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*kd+1),jd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function UM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function zM(e){this.options=dp.assign({level:Cp,method:Tp,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ap},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vp,this.strm.avail_out=0;let n=up.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Sp)throw new Error(sd[n]);if(t.header&&up.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?gp.string2buf(t.dictionary):"[object ArrayBuffer]"===yp.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=up.deflateSetDictionary(this.strm,e),n!==Sp)throw new Error(sd[n]);this._dict_set=!0}}function VM(e,t){const n=new zM(t);if(n.push(e,!0),n.err)throw n.msg||sd[n.err];return n.result}function jM(e,t){return(t=t||{}).raw=!0,VM(e,t)}function GM(e,t){return(t=t||{}).gzip=!0,VM(e,t)}function HM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function WM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function $M(e){this.options=dp.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vp,this.strm.avail_out=0;let n=mf.inflateInit2(this.strm,t.windowBits);if(n!==xf)throw new Error(sd[n]);if(this.header=new gf,mf.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=gp.string2buf(t.dictionary):"[object ArrayBuffer]"===vf.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=mf.inflateSetDictionary(this.strm,t.dictionary),n!==xf)))throw new Error(sd[n])}function qM(e,t){const n=new $M(t);if(n.push(e),n.err)throw n.msg||sd[n.err];return n.result}function XM(e,t){return(t=t||{}).raw=!0,qM(e,t)}async function YM(e,t,n,r,i){let s=function(e,t,n,r){e=function(e){return/^[A-Za-z][A-Za-z0-9_-]*$/.test(e)||(e="'"+String(e).replace(/'/g,"\\'")+"'"),e}(e);let i=r?._compressedData??r?._data;if(!i){if(!Vf.test(t))throw Error(Gf);t.startsWith("url(")||(t="url("+t+")"),i=t}if((r?.fvar?.length??0)>0){n=n||{};for(const[e,t,i,s,a,o]of r.fvar[0])"wght"===e?n.weight=`${t} ${s}`:"wdth"===e&&(n.stretch=`${t}% ${s}%`)}let s=new FontFace(e,i,n);if("error"===s.status)throw Error('Failed to create FontFace for "'+e+'"');return s}(t,n,r,i);return"loaded"!==s.status&&await s.load(),document.fonts.add(s),await document.fonts.ready,new Wf(e,s,t,n,i)}function ZM(e){return(e.startsWith('"')||e.startsWith("'"))&&e.at(0)===e.at(-1)?e.slice(1,-1).replace(/\/(['"])/g,"$1"):e}function KM(e,t){e.Font=Wf,t.parseFontData=async function(e){let n=e instanceof Uint8Array?e:await t.loadBytes(e);if(!n)throw Error("Failed to load font data");let r=Pf.parse(n);if(0===r.length||void 0===r[0].cmap)throw Error("parsing font data");return r[0]},t.loadFont=async function(...e){let n,{path:r,name:i,success:s,error:a,options:{sets:o,...l}={}}=function(...e){let t,n,r,i,s=e.shift();"string"==typeof s&&0!==s.length||p5._friendlyError(Gf,"p5.loadFont"),"string"==typeof e[0]&&(t=e.shift());for(let a=0;a<e.length;a++){const t=e[a];"function"==typeof t?n?r=t:n=t:"object"==typeof t&&(i=t)}return{path:s,name:t,success:n,error:r,options:i}}(...e),u=r.includes("@font-face");if(u||(await fetch(r,{method:"HEAD"})).headers.get("content-type")?.startsWith("text/css")&&(u=!0,r=await fetch(r).then(e=>e.text())),u){const e=new CSSStyleSheet;await e.replace(r);const n=[];for(const r of e.cssRules)if(r instanceof CSSFontFaceRule){const e=r.style;let i=ZM(e.getPropertyValue("font-family"));const s=e.getPropertyValue("src"),a={...l||{}};for(const t of e){if("font-family"===t||"src"===t)continue;const n=t.replace(/^font-/,"").split("-").map((e,t)=>0===t?e:`${e[0].toUpperCase()}${e.slice(1)}`).join("");a[n]=e.getPropertyValue(t)}n.push({name:i,src:s,fontDescriptors:a,loadWithData:async()=>{let e;try{const n=/url\(([^\)]+)\)/.exec(s);if(n){let r=n[1];/^['"]/.exec(r)&&r.at(0)===r.at(-1)&&(r=r.slice(1,-1)),e=await t.parseFontData(r)}}catch(n){}return YM(this,i,s,a,e)},loadWithoutData:()=>YM(this,i,s,a)})}o=o||["latin"];const i=(o instanceof Array?o:[o]).map(e=>e.toLowerCase()),s=fh.filter(e=>i.some(t=>e.category.includes(t)&&e.category.includes("ext")===t.includes("ext"))),a=new Set(ph.UnicodeRange.parse(s.map(e=>`U+${e.hexrange[0]}-${e.hexrange[1]}`)));let u,c=0,h=0;for(const t of n){if(!t.fontDescriptors.unicodeRange)continue;const e=[...new Set(ph.UnicodeRange.parse(t.fontDescriptors.unicodeRange.split(/,\s*/g))).values()].filter(e=>a.has(e)).length,n={style:"normal",weight:400,...l},r=Object.keys(t.fontDescriptors).filter(e=>t.fontDescriptors[e]===n[e]).length;(r>h||r===h&&e>=c)&&(h=r,c=e,u=t)}const d=u||n.at(-1);for(const t of n)t!==d&&t.loadWithoutData();return d?.loadWithData()}try{const e=await t.parseFontData(r);i=i||function(e,t){let n,r=e?.name;if(r){if(r.fullName)return r.fullName;r.familyName&&(n=r.familyName)}if(!n){let e=jf.exec(t);n=e&&e.length>=3?e[1]:t}return n.includes(" ")&&(n=n.replace(/ /g,"_")),n}(e,r),n=await YM(this,i,r,l,e)}catch(c){let e=i||r.substring(r.lastIndexOf("/")+1).replace(/\.[^/.]+$/,"");console.warn(`WARN: No glyph data for '${e}', retrying as FontFace`);try{n=await YM(this,e,r,l)}catch(h){if(a)return a(h);throw h}}return s?s(n):n}}function QM(e){return!function(e){return!!Object.keys(Jf).includes(e)||!!{float:!0,vec2:!0,vec3:!0,vec4:!0,int:!0,ivec2:!0,ivec3:!0,ivec4:!0,bool:!0,bvec2:!0,bvec3:!0,bvec4:!0,mat2:!0,mat3:!0,mat4:!0,sampler2D:!0}[e]}(e)}function JM(e,t){return e.dimension===t.dimension&&e.baseType===t.baseType}function eD(e){throw new Error(`[p5.strands internal error]: ${e}`)}function tD(e,t){throw new Error(`[p5.strands ${e}]: ${t}`)}function nD(){return{nextID:0,cache:new Map,nodeTypes:[],baseTypes:[],dimensions:[],opCodes:[],values:[],identifiers:[],phiBlocks:[],dependsOn:[],usedBy:[],statementTypes:[],swizzles:[]}}function rD(e,t){return function(e,t){const n=e.nextID++;e.nodeTypes[n]=t.nodeType,e.opCodes[n]=t.opCode,e.values[n]=t.value,e.identifiers[n]=t.identifier,e.dependsOn[n]=t.dependsOn.slice(),e.usedBy[n]=t.usedBy,e.phiBlocks[n]=t.phiBlocks.slice(),e.baseTypes[n]=t.baseType,e.dimensions[n]=t.dimension,e.statementTypes[n]=t.statementType,e.swizzles[n]=t.swizzle;for(const r of t.dependsOn)Array.isArray(e.usedBy[r])||(e.usedBy[r]=[]),e.usedBy[r].push(n);return n}(e,t)}function iD(e={}){const t={nodeType:e.nodeType??null,baseType:e.baseType??null,dimension:e.dimension??null,opCode:e.opCode??null,value:e.value??null,identifier:e.identifier??null,statementType:e.statementType??null,swizzle:e.swizzle??null,dependsOn:Array.isArray(e.dependsOn)?e.dependsOn:[],usedBy:Array.isArray(e.usedBy)?e.usedBy:[],phiBlocks:Array.isArray(e.phiBlocks)?e.phiBlocks:[]};return function(e){const t=e.nodeType,n=Yf[t];2===n.length&&eD(`Required fields for node type '${Xf[t]}' not defined. Please add them to the utils.js file in p5.strands!`);const r=[];for(const i of n)null===e[i]&&r.push(i);if(e.dependsOn?.some(e=>void 0===e))throw new Error("Undefined dependency!");r.length>0&&eD(`Missing fields ${r.join(", ")} for a node type '${Xf[t]}'.`)}(t),t}function sD(e,t){return{id:t,nodeType:e.nodeTypes[t],opCode:e.opCodes[t],value:e.values[t],identifier:e.identifiers[t],dependsOn:e.dependsOn[t],usedBy:e.usedBy[t],phiBlocks:e.phiBlocks[t],dimension:e.dimensions[t],baseType:e.baseTypes[t],statementType:e.statementTypes[t],swizzle:e.swizzles[t]}}function aD(e,t){return{baseType:e.baseTypes[t],dimension:e.dimensions[t],priority:Qf[e.baseTypes[t]]}}function oD(e,t){return e.nodeTypes[t]===qf.OPERATION&&e.baseTypes[t]!==Kf.SAMPLER2D&&(e.usedBy[t]||[]).length>1}function lD(e){switch(e){case"+":return"add";case"-":return"sub";case"*":return"mult";case"/":return"div";case"%":return"mod";case"==":case"===":return"equalTo";case"!=":case"!==":return"notEqual";case">":return"greaterThan";case">=":return"greaterEqual";case"<":return"lessThan";case"<=":return"lessEqual";case"&&":return"and";case"||":return"or"}}function uD(e){return"CallExpression"===e.type&&("Identifier"===e.callee?.type&&e.callee?.name.startsWith("uniform")||"MemberExpression"===e.callee?.type&&e.callee?.property.name.startsWith("uniform"))}function cD(e,t,n,r){const i=cM(t,{ecmaVersion:2021,locations:n}),s={...Ym};var a,o,l,u;delete s.IfStatement,delete s.ForStatement,a=s,u=[],(o=void 0)||(o=ah),function e(t,n,r){var i=r||t.type,s=t!==u[u.length-1];s&&u.push(t),o[i](t,n,e),a[i]&&a[i](t,n||u,u),s&&u.pop()}(i,{varyings:{}},l),hM(i,{varyings:{}},{IfStatement(e,t,n){e.test&&n(e.test,t),e.consequent&&n(e.consequent,t),e.alternate&&n(e.alternate,t),Ym.IfStatement(e,t,[])},ForStatement(e,t,n){e.init&&n(e.init,t),e.test&&n(e.test,t),e.update&&n(e.update,t),e.body&&n(e.body,t),Ym.ForStatement(e,t,[])}});const c=qm.generate(i),h=Object.keys(r),d=new Function("__p5",...h,c.slice(c.indexOf("{")+1,c.lastIndexOf("}")).replaceAll(";",""));return()=>d(e,...h.map(e=>r[e]))}function hD(e,t){e.blockStack.push(t),e.blockOrder.push(t),e.currentBlock=t}function dD(e){e.blockStack.pop();const t=e.blockStack.length;e.currentBlock=e.blockStack[t-1]}function pD(e,t){e.blockStack.push(t),e.currentBlock=t}function fD(e,t){const n=e.nextID++;return e.blockTypes[n]=t,e.incomingEdges[n]=[],e.outgoingEdges[n]=[],e.blockInstructions[n]=[],n}function mD(e,t,n){e.outgoingEdges[t].push(n),e.incomingEdges[n].push(t)}function gD(e,t,n){void 0===n&&eD("undefined nodeID in `recordInBasicBlock()`"),void 0===t&&eD("undefined blockID in `recordInBasicBlock()"),e.blockInstructions[t]=e.blockInstructions[t]||[],e.blockInstructions[t].push(n)}function vD(e,t){const n=new Set,r=[];return function t(i){if(!n.has(i)){n.add(i);for(let n of e[i].sort((e,t)=>t-e)||[])t(n);r.push(i)}}(t),r.reverse()}function yD(e,t,n,r){return new Proxy(new Km(e,t,n),function(e,t,n,r){const i=[["x","y","z","w"],["r","g","b","a"],["s","t","p","q"]].map(e=>e.slice(0,t));return{get(e,t,r){if(t in e)return Reflect.get(...arguments);for(const s of i)if([...t.toString()].every(e=>s.includes(e))){const r=[...t].map(e=>{const t=s.indexOf(e);return i[0][t]}).join(""),a=kD(n,e,r);return yD(a.id,a.dimension,n)}},set(e,t,s,a){for(const o of i){const i=[...t];if(!(i.every(e=>o.includes(e))&&new Set(i).size===i.length&&e.dimension>=i.length))continue;const a=e.dimension,l=new Array(a);for(let t=0;t<a;t++){const{id:r,dimension:i}=kD(n,e,"xyzw"[t]);l[t]=yD(r,i,n)}let u=[];if(s instanceof Km)if(1===s.dimension)u=Array(i.length).fill(s);else if(s.dimension===i.length)for(let e=0;e<i.length;e++){const{id:t,dimension:r}=kD(n,s,"xyzw"[e]);u.push(yD(t,r,n))}else tD("type error",`Swizzle assignment: RHS vector does not match LHS vector (need ${i.length}, got ${s.dimension}).`);else if(Array.isArray(s)){const e=s.flat(1/0);1===e.length?u=Array(i.length).fill(e[0]):e.length===i.length?u=e:tD("type error",`Swizzle assignment: RHS length ${e.length} does not match ${i.length}.`)}else"number"==typeof s?u=Array(i.length).fill(s):tD("type error",`Unsupported RHS for swizzle assignment: ${s}`);for(let e=0;e<i.length;e++)l[o.indexOf(i[e])]=u[e];const c=sD(n.dag,e.id)?.baseType??Kf.FLOAT,{id:h}=AD(n,{baseType:c,dimension:a},l);return e.id=h,"function"==typeof r&&r(h),!0}return Reflect.set(...arguments)}}}(0,t,n,r))}function bD(e,t,n){const{cfg:r,dag:i}=e;let{dimension:s,baseType:a}=t;1!==s&&eD("Created a scalar literal node with dimension > 1.");const o=rD(i,iD({nodeType:qf.LITERAL,dimension:s,baseType:a,value:n}));return gD(r,r.currentBlock,o),{id:o,dimension:s}}function xD(e,t,n){const{cfg:r,dag:i}=e,{dimension:s,baseType:a}=t,o=rD(i,iD({nodeType:qf.VARIABLE,dimension:s,baseType:a,identifier:n}));return gD(r,r.currentBlock,o),{id:o,dimension:s}}function _D(e,t,n){const{dag:r,cfg:i}=e;let s,a;if(t instanceof Km)a=t;else{const{id:n,dimension:r}=AD(e,{baseType:Kf.FLOAT,dimension:null},t);a=yD(n,r,e)}s=[a.id];const o=rD(r,iD({nodeType:qf.OPERATION,opCode:n,dependsOn:s,baseType:r.baseTypes[a.id],dimension:a.dimension}));return gD(i,i.currentBlock,o),{id:o,dimension:a.dimension}}function wD(e,t,n,r){const{dag:i,cfg:s}=e;let a;if(n[0]instanceof Km&&1===n.length)a=n[0];else{const{id:t,dimension:r}=AD(e,{baseType:Kf.FLOAT,dimension:null},n);a=yD(t,r,e)}let o=t.id,l=a.id;const u=aD(i,t.id),c=aD(i,a.id),h={node:null,toType:u};if(u.baseType===c.baseType&&u.baseType===Kf.DEFER){h.toType.baseType=Kf.FLOAT,u.dimension===c.dimension?h.toType.dimension=u.dimension:1===u.dimension&&c.dimension>1?h.toType.dimension=c.dimension:1===c.dimension&&u.dimension>1?h.toType.dimension=u.dimension:tD("type error",`You have tried to perform a binary operation:\n${u.baseType+u.dimension} ${sm[r]} ${c.baseType+c.dimension}\nIt's only possible to operate on two nodes with the same dimension, or a scalar value and a vector.`);const n=AD(e,h.toType,t),i=AD(e,h.toType,a);o=n.id,l=i.id}else if(u.baseType!==c.baseType||u.dimension!==c.dimension){1===u.dimension&&c.dimension>1?(h.node=t,h.toType=c):1===c.dimension&&u.dimension>1||u.priority>c.priority?(h.node=a,h.toType=u):c.priority>u.priority?(h.node=t,h.toType=c):tD("type error",`A vector of length ${u.dimension} operated with a vector of length ${c.dimension} is not allowed.`);const n=AD(e,h.toType,h.node);h.node===t?o=(t=yD(n.id,n.dimension,e)).id:(a=yD(n.id,n.dimension,e),l=a.id)}const d=iD({nodeType:qf.OPERATION,opCode:r,dependsOn:[o,l],baseType:h.toType.baseType,dimension:h.toType.dimension}),p=rD(i,d);return gD(s,s.currentBlock,p),{id:p,dimension:d.dimension}}function SD(e,t,n,r){const{cfg:i,dag:s}=e;if(0===r.length)for(const o of t.properties){const e=o.dataType,t=rD(s,iD({nodeType:qf.VARIABLE,baseType:e.baseType,dimension:e.dimension,identifier:`${n}.${o.name}`}));gD(i,i.currentBlock,t),r.push(t)}const a=rD(s,iD({nodeType:qf.VARIABLE,dimension:t.properties.length,baseType:t.typeName,identifier:n,dependsOn:r}));return gD(i,i.currentBlock,a),{id:a,dimension:0,components:r}}function ED(e,t,n){const r=Array.isArray(n)?n:[n],i=[];let{dimension:s,baseType:a}=t;const o=e.dag;let l=0,u=null;for(const c of r.flat(1/0)){if(c instanceof Km){const e=sD(o,c.id);if(u=c.id,a=e.baseType,e.opCode===rm.Nary.CONSTRUCTOR)for(const t of e.dependsOn)i.push(t);else i.push(c.id);l+=e.dimension;continue}if("number"==typeof c){const{id:t,dimension:n}=bD(e,{dimension:1,baseType:a},c);i.push(t),l+=n;continue}tD("type error",`You've tried to construct a scalar or vector type with a non-numeric value: ${c}`)}return null===s?s=l:s>l&&1===l?l=s:1!==l&&l!==s&&tD("type error",`You've tried to construct a ${a+s} with ${l} components`),{originalNodeID:u,mappedDependencies:i,inferredTypeInfo:{dimension:s,baseType:a,priority:Qf[a]}}}function CD(e,t,n){const r=iD({nodeType:qf.OPERATION,opCode:rm.Nary.CONSTRUCTOR,dimension:t.dimension,baseType:t.baseType,dependsOn:n});return rD(e.dag,r)}function AD(e,t,n){const r=e.cfg,{mappedDependencies:i,inferredTypeInfo:s}=ED(e,t,n),a={baseType:t.baseType,dimension:s.dimension},o=CD(e,a,i);return t.baseType!==Kf.DEFER&&gD(r,r.currentBlock,o),{id:o,dimension:a.dimension,components:i}}function TD(e,t,n){const{cfg:r,dag:i}=e,{identifer:s,properties:a}=t;n.length!==a.length&&tD("type error",`You've tried to construct a ${t.typeName} struct with ${n.length} properties, but it expects ${a.length} properties.\nThe properties it expects are:\n${a.map(e=>e.name+" "+e.DataType.baseType+e.DataType.dimension)}`);const o=[];for(let u=0;u<a.length;u++){const t=a[u],{originalNodeID:r,mappedDependencies:i}=ED(e,t.dataType,n[u]);r?o.push(r):o.push(CD(e,t.dataType,i))}const l=rD(i,iD({nodeType:qf.OPERATION,opCode:rm.Nary.CONSTRUCTOR,dimension:a.length,baseType:t.typeName,dependsOn:o}));return gD(r,r.currentBlock,l),{id:l,dimension:a.length,components:t.components}}function MD(e,t,n,{overloads:r}={}){const{cfg:i,dag:s}=e,a=r||Zm[t],o=n.map(t=>ED(e,Jf.defer,t)),l=a.filter(e=>e.params.length===o.length);if(0===l.length){const e=new Set,n=[];a.forEach(t=>e.add(t.params.length)),e.forEach(e=>n.push(`${e}`));const r=n.join(", or ");tD("parameter validation error",`Function '${t}' has ${a.length} variants which expect ${r} arguments, but ${o.length} arguments were provided.`)}const u=e=>null===e.dimension;let c=null,h=0,d=null,p=null;for(const g of l){let e=!0,t=0;for(let n=0;n<o.length;n++){const r=o[n].inferredTypeInfo,i=g.params[n];let s=i.dimension;u(i)?(null!==p&&1!==p||(p=r.dimension),p===r.dimension||1===r.dimension&&p>=1||(e=!1),s=p):r.dimension>s&&(e=!1),r.baseType===i.baseType?t+=2:i.priority>r.priority&&(t+=1)}e&&(!c||t>h)&&(c=g,h=t,d={...g.returnType},u(d)&&(d.dimension=p))}null===c&&tD("parameter validation",`No matching overload for ${t} was found!`);let f=[];for(let g=0;g<c.params.length;g++){const t=o[g],n={...c.params[g]};if(u(n)&&(n.dimension=p),t.originalNodeID&&JM(t.inferredTypeInfo,n))f.push(t.originalNodeID);else{const r=CD(e,n,t.mappedDependencies);gD(i,i.currentBlock,r),f.push(r)}}const m=rD(s,iD({nodeType:qf.OPERATION,opCode:rm.Nary.FUNCTION_CALL,identifier:t,dependsOn:f,baseType:d.baseType,dimension:d.dimension}));return gD(i,i.currentBlock,m),{id:m,dimension:d.dimension}}function DD(e,t){const{dag:n,cfg:r}=e,i=rD(n,iD({nodeType:qf.STATEMENT,statementType:t}));return gD(r,r.currentBlock,i),i}function kD(e,t,n){const{dag:r,cfg:i}=e,s=r.baseTypes[t.id],a=rD(r,iD({nodeType:qf.OPERATION,baseType:s,dimension:n.length,opCode:rm.Unary.SWIZZLE,dependsOn:[t.id],swizzle:n}));return gD(i,i.currentBlock,a),{id:a,dimension:n.length}}function ND(e,t,n){const r=t.filter(e=>null!==e.value.id);if(0===r.length)throw new Error(`No valid inputs for phi node for variable ${n}`);const i=sD(e.dag,r[0].value.id),s=i.dimension,a=i.baseType,o={nodeType:qf.PHI,dimension:s,baseType:a,dependsOn:t.map(e=>e.value.id).filter(e=>null!==e),phiBlocks:t.map(e=>e.blockId)},l=rD(e.dag,o);return gD(e.cfg,e.cfg.currentBlock,l),{id:l,dimension:s,baseType:a}}function FD(e,t){const n=[],r=e.dag;for(const i of t)if(QM(i.type.typeName)){const t=em(i),{id:s,dimension:a}=SD(e,t,i.name,[]),o=yD(s,a,e);for(let n=0;n<t.properties.length;n++){const s=t.properties[n];Object.defineProperty(o,s.name,{get(){const s=sD(r,r.dependsOn[o.id][n]);return yD(s.id,s.dimension,e,s=>{const a=r.dependsOn[o.id].slice();a[n]=s,o.id=SD(e,t,i.name,a).id})},set(a){const l=[...r.dependsOn[o.id]];let u;u=a instanceof Km?a.id:AD(e,s.dataType,a).id,l[n]=u,o.id=SD(e,t,i.name,l).id}})}n.push(o)}else{const t=nm[i.type.typeName],{id:r,dimension:s}=xD(e,t,i.name),a=yD(r,s,e);n.push(a)}return n}function ID(e,t,n,r){if(!(n instanceof Km))return AD(e,t,n).id;const i=e.dag;let s=n.id;const a=i.baseTypes[s],o=i.dimensions[s];return o!==t.dimension?1!==o?tD("type error",`You have returned a vector with ${o} components in ${r} when a ${t.baseType+t.dimension} was expected!`):s=AD(e,t,n).id:a!==t.baseType&&(s=AD(e,t,n).id),s}function RD(e,t){function n(t,n,{active:r=!1}={}){t.dag=nD(),t.cfg={blockTypes:[],incomingEdges:[],outgoingEdges:[],blockInstructions:[],nextID:0,blockStack:[],blockOrder:[],blockConditions:{},currentBlock:-1},t.uniforms=[],t.vertexDeclarations=new Set,t.fragmentDeclarations=new Set,t.hooks=[],t.globalAssignments=[],t.backend=n,t.active=r,t.previousFES=e.disableFriendlyErrors,t.windowOverrides={},t.fnOverrides={},r&&(e.disableFriendlyErrors=!0)}const r={};n(r),function(e,t,n){for(const{name:i,arity:s,opCode:a}of im)"binary"===s&&(Km.prototype[i]=function(...e){const{id:t,dimension:r}=wD(n,this,e,a);return yD(t,r,n)}),"unary"===s&&(e[i]=function(e){const{id:t,dimension:r}=_D(n,e,a);return yD(t,r,n)});t.discard=function(){DD(n,Zf.DISCARD)},t.break=function(){DD(n,Zf.BREAK)},e.break=t.break,t.instanceID=function(){const e=xD(n,{baseType:Kf.INT,dimension:1},"gl_InstanceID");return yD(e.id,e.dimension,n)},e.strandsIf=function(e,t){return new Qm(n,e,t)},t.strandsIf=e.strandsIf,e.strandsFor=function(e,t,r,i,s){return new Jm(n,e,t,r,i,s).build()},t.strandsFor=e.strandsFor,e.strandsNode=function(...e){if(1===e.length&&e[0]instanceof Km)return e[0];e.length>4&&tD("type error","It looks like you've tried to construct a p5.strands node implicitly, with more than 4 components. This is currently not supported.");const{id:t,dimension:r}=AD(n,{baseType:Kf.FLOAT,dimension:null},e.flat());return yD(t,r,n)};for(const[i,s]of Object.entries(Zm))if(s[0].isp5Function){const e=t[i];t[i]=function(...t){if(n.active){const{id:e,dimension:r}=MD(n,i,t);return yD(e,r,n)}return e.apply(this,t)}}else t[i]=function(...t){if(n.active){const{id:e,dimension:r}=MD(n,i,t);return yD(e,r,n)}e._friendlyError(`It looks like you've called ${i} outside of a shader's modify() function.`)};const r=t.noise;t.noise=function(...i){if(!n.active)return r.apply(this,i);n.vertexDeclarations.add(eg),n.fragmentDeclarations.add(eg);const s=i.map(t=>e.strandsNode(t));let a;3===s.length?a=[t.vec3(s[0],s[1],s[2])]:2===s.length?a=[t.vec3(s[0],s[1],0)]:1===s.length&&s[0].dimension<=3?a=3===s[0].dimension?s:2===s[0].dimension?[t.vec3(s[0],0)]:[t.vec3(s[0],0,0)]:e._friendlyError(`It looks like you've called noise() with ${i.length} arguments. It only supports 1D to 3D input.`);const{id:o,dimension:l}=MD(n,"noise",a,{overloads:[{params:[Jf.float3],returnType:Jf.float1}]});return yD(o,l,n)};for(const i in Jf){if(i===Kf.DEFER)continue;const r=Jf[i],s=[];let a;/^[ib]vec/.test(r.fnName)?(a=r.fnName.slice(0,2).toUpperCase()+r.fnName.slice(2).toLowerCase(),s.push(a.replace("Vec","Vector"))):(a=r.fnName.charAt(0).toUpperCase()+r.fnName.slice(1),"Sampler2D"===a?s.push("Texture"):/^vec/.test(r.fnName)&&s.push(a.replace("Vec","Vector"))),t[`uniform${a}`]=function(e,t){const{id:i,dimension:s}=xD(n,r,e);return n.uniforms.push({name:e,typeInfo:r,defaultValue:t}),yD(i,s,n)},t[`shared${a}`]=function(e){const{id:t,dimension:i}=xD(n,r,e);return n.sharedVariables||(n.sharedVariables=new Map),n.sharedVariables.set(e,{typeInfo:r,usedInVertex:!1,usedInFragment:!1,declared:!1}),yD(t,i,n)},t[`varying${a}`]=t[`shared${a}`];for(const e of s)t[`uniform${e}`]=t[`uniform${a}`],t[`varying${e}`]=t[`varying${a}`],t[`shared${e}`]=t[`shared${a}`];const o=t[r.fnName];t[r.fnName]=function(...t){if(n.active){const{id:e,dimension:i}=AD(n,r,t);return yD(e,i,n)}if(o)return o.apply(this,t);e._friendlyError(`It looks like you've called ${r.fnName} outside of a shader's modify() function.`)}}}(e,t,r);const i=e.Shader.prototype.modify;e.Shader.prototype.modify=function(s,a={}){if(s instanceof Function){n(r,hm,{active:!0}),function(e,t,n){const r={...Object.fromEntries(Object.entries(n.hooks.vertex).map(([e,t])=>[e,{...t,shaderContext:"vertex"}])),...Object.fromEntries(Object.entries(n.hooks.fragment).map(([e,t])=>[e,{...t,shaderContext:"fragment"}]))},i=Object.keys(r).map(e=>n.hookTypes(e)),{cfg:s,dag:a}=e;for(const o of i){const n=function(t){const n=fD(s,lm.FUNCTION);mD(s,s.currentBlock,n),hD(s,n);const i=t(...FD(e,o.parameters)),l=o.returnType;let u=null;if(QM(l.typeName)){const t=em(l);if(i instanceof Km){const n=sD(e.dag,i.id);n.baseType!==t.typeName&&tD("type error",`You have returned a ${i.baseType} from ${o.name} when a ${t.typeName} was expected.`);const r=n.dependsOn.slice();for(let s=0;s<t.properties.length;s++){const l=t.properties[s].dataType,u=yD(n.dependsOn[s],a.dependsOn[i.id],e);r[s]=ID(e,l,u,o.name)}a.dependsOn[i.id]=r,u=i.id}else{const n=t.properties,r=[];for(let t=0;t<n.length;t++){const s=n[t],a=i[s.name];void 0===a&&tD("type error",`You've returned an incomplete struct from ${o.name}.\nExpected: { ${l.properties.map(e=>e.name).join(", ")} }\nReceived: { ${Object.keys(i).join(", ")} }\nAll of the properties are required!`);const u=s.dataType,c=ID(e,u,a,o.name);r.push(c)}u=TD(e,t,r).id}}else{const t=nm[l.typeName];u=ID(e,t,i,o.name)}const c=`${o.returnType.typeName} ${o.name}`,h=r[c];e.hooks.push({hookType:o,entryBlockID:n,rootNodeID:u,shaderContext:h?.shaderContext}),dD(s)};e.windowOverrides[o.name]=window[o.name],e.fnOverrides[o.name]=t[o.name],window[o.name]=n,t[o.name]=n}}(r,t,this);const o={srcLocations:!1};let l;{const t=`(${s.toString()})`;l=cD(e,t,o.srcLocations,a)}const u=fD(r.cfg,lm.GLOBAL);hD(r.cfg,u),l(),dD(r.cfg);const c=function(e){const{cfg:t,backend:n,vertexDeclarations:r,fragmentDeclarations:i}=e,s={uniforms:{}};for(const{name:a,typeInfo:o,defaultValue:l}of e.uniforms){const e=n.generateUniformDeclaration(a,o);s.uniforms[e]=l}for(const{hookType:a,rootNodeID:o,entryBlockID:l,shaderContext:u}of e.hooks){const r={indent:1,codeLines:[],write(e){this.codeLines.push("  ".repeat(this.indent)+e)},tempNames:{},declarations:[],nextTempID:0,visitedNodes:new Set,shaderContext:u,strandsContext:e},i=vD(t.outgoingEdges,l);for(const t of i)n.generateBlock(t,e,r);for(const t of e.globalAssignments)r.visitedNodes.has(t)||(n.generateAssignment(r,e.dag,t),r.visitedNodes.add(t));e.globalAssignments=[];const c=n.hookEntry(a);let h=a.returnType.properties?em(a.returnType):nm[a.returnType.typeName];n.generateReturnStatement(e,r,o,h),s[`${a.returnType.typeName} ${a.name}`]=[c,...r.codeLines,"}"].join("\n")}if(e.sharedVariables)for(const[a,o]of e.sharedVariables)o.usedInVertex&&o.usedInFragment?(r.add(`OUT ${o.typeInfo.fnName} ${a};`),i.add(`IN ${o.typeInfo.fnName} ${a};`)):o.usedInVertex?r.add(`${o.typeInfo.fnName} ${a};`):o.usedInFragment&&i.add(`${o.typeInfo.fnName} ${a};`);return s.vertexDeclarations=[...r].join("\n"),s.fragmentDeclarations=[...i].join("\n"),s}(r);return function(n){n.dag=nD(),n.cfg={blockTypes:[],incomingEdges:[],outgoingEdges:[],blockInstructions:[],nextID:0,blockStack:[],blockOrder:[],blockConditions:{},currentBlock:-1},n.uniforms=[],n.vertexDeclarations=new Set,n.fragmentDeclarations=new Set,n.hooks=[],n.globalAssignments=[],n.active=!1,e.disableFriendlyErrors=n.previousFES;for(const e in n.windowOverrides)window[e]=n.windowOverrides[e];for(const e in n.fnOverrides)t[e]=n.fnOverrides[e]}(r),i.call(this,c)}return i.call(this,s)}}function LD(e){AC(e,e.prototype),DC(e,e.prototype),kM(e,e.prototype),kC(0,e.prototype),FM(e,e.prototype),NC(0,e.prototype),function(e){ls.prototype.maxCachedGlyphs=function(){return 200},Wf.prototype._getFontInfo=function(e){this._fontInfos=this._fontInfos||{};const t=JSON.stringify(e);if(this._fontInfos[t])return this._fontInfos[t];{const n=new i(this,{axs:e});return this._fontInfos[t]=n,n}};class t{constructor(e,t){this.width=e,this.height=t,this.infos=[]}findImage(e){const t=this.width*this.height;if(e>t)throw new Error("font is too complex to render in 3D");let n,r;for(let a=this.infos.length-1;a>=0;--a){const i=this.infos[a];if(i.index+e<t){n=i,r=i.imageData;break}}if(!n){try{r=new ImageData(this.width,this.height)}catch(s){let e=document.getElementsByTagName("canvas")[0];const t=!e;e||(e=document.createElement("canvas"),e.style.display="none",document.body.appendChild(e));const n=e.getContext("2d");n&&(r=n.createImageData(this.width,this.height)),t&&document.body.removeChild(e)}n={index:0,imageData:r},this.infos.push(n)}const i=n.index;return n.index+=e,r._dirty=!0,{imageData:r,index:i}}}function n(e,t,n,r,i){const s=e.imageData.data;let a=4*e.index++;s[a++]=t,s[a++]=n,s[a++]=r,s[a++]=i}const r=Math.sqrt(3);class i{constructor(e,{axs:n}={}){this.font=e,this.axs=n,this.strokeImageInfos=new t(64,64),this.colDimImageInfos=new t(64,64),this.rowDimImageInfos=new t(64,64),this.colCellImageInfos=new t(64,64),this.rowCellImageInfos=new t(64,64),this.glyphInfos={}}getGlyphInfo(e){let t=this.glyphInfos[e.index];if(t)return t;const i=this.axs,{glyph:{path:{commands:s}}}=this.font._singleShapeToPath(e.shape,{axs:i});let a=1/0,o=-1/0,l=1/0,u=-1/0;for(const n of s)for(let e=1;e<n.length;e+=2)a=Math.min(a,n[e]),o=Math.max(o,n[e]),l=Math.min(l,n[e+1]),u=Math.max(u,n[e+1]);if(a>=o||l>=u||!s.length)return this.glyphInfos[e.index]={};const c=o-a,h=u-l,d=$f(s);let p;const f=[],m=[],g=[];for(p=8;p>=0;--p)g.push([]);for(p=8;p>=0;--p)m.push([]);function v(e,t,n){const r=f.length;function i(e,t,n){for(let r=e.length;r-- >0;){const i=e[r];t>i&&(t=i),n<i&&(n=i)}return{min:t,max:n}}f.push(n);const s=.5,a=i(e,1,0),o=Math.max(Math.floor(9*a.min-s),0),l=Math.min(Math.ceil(9*a.max+s),9);for(let d=o;d<l;++d)g[d].push(r);const u=i(t,1,0),c=Math.max(Math.floor(9*u.min-s),0),h=Math.min(Math.ceil(9*u.max+s),9);for(let d=c;d<h;++d)m[d].push(r)}function y(e){return function(e,t,n){return e<t?t:e>n?n:e}(255*e,0,255)}class b{constructor(e,t,n,r){this.p0=e,this.c0=t,this.c1=n,this.p1=r}toQuadratic(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}quadError(){return Ur.sub(Ur.sub(this.p1,this.p0),Ur.mult(Ur.sub(this.c1,this.c0),3)).mag()/2}split(e){const t=Ur.lerp(this.p0,this.c0,e),n=Ur.lerp(this.c0,this.c1,e),r=Ur.lerp(t,n,e);this.c1=Ur.lerp(this.c1,this.p1,e),this.c0=Ur.lerp(n,this.c1,e);const i=Ur.lerp(r,this.c0,e),s=new b(this.p0,t,r,i);return this.p0=i,s}splitInflections(){const e=Ur.sub(this.c0,this.p0),t=Ur.sub(Ur.sub(this.c1,this.c0),e),n=Ur.sub(Ur.sub(Ur.sub(this.p1,this.c1),e),Ur.mult(t,2)),r=[];let i=t.x*n.y-t.y*n.x;if(0!==i){let s=e.x*n.y-e.y*n.x,a=e.x*t.y-e.y*t.x;const o=s*s-4*i*a;if(o>=0){i<0&&(i=-i,s=-s,a=-a);const e=Math.sqrt(o),t=(-s-e)/(2*i);let n=(-s+e)/(2*i);t>0&&t<1&&(r.push(this.split(t)),n=1-(1-n)/(1-t)),n>0&&n<1&&r.push(this.split(n))}}return r.push(this),r}}function x(e,t,n,i,s,a,o,l){const u=new b(new Ur(e,t),new Ur(n,i),new Ur(s,a),new Ur(o,l)).splitInflections(),c=[],h=30/r;for(let r of u){const e=[];let t;for(;t=h/r.quadError(),!(t>=.125);){const n=Math.pow(t,1/3),i=r.split(n),s=r.split(1-n/(1-n));c.push(i),e.push(r),r=s}t<1&&c.push(r.split(.5)),c.push(r),Array.prototype.push.apply(c,e.reverse())}return c}function _(e,t,n,r){v([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function w(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}let S,E,C,A;for(const n of d){const e=(n.x-a)/c,t=(n.y-l)/h;if(!w(S,E,e,t)){switch(n.type){case"M":C=e,A=t;break;case"L":_(S,E,e,t);break;case"Q":{const r=(n.x1-a)/c,i=(n.y1-l)/h;v([S,e,r],[E,t,i],{x:S,y:E,cx:r,cy:i});break}case"Z":w(S,E,C,A)?f.push({x:S,y:E}):(_(S,E,C,A),f.push({x:C,y:A}));break;case"C":{const r=x(S,E,(n.x1-a)/c,(n.y1-l)/h,(n.x2-a)/c,(n.y2-l)/h,e,t);for(let e=0;e<r.length;e++){const t=r[e].toQuadratic();v([t.x,t.x1,t.cx],[t.y,t.y1,t.cy],t)}break}default:throw new Error(`unknown command type: ${n.type}`)}S=e,E=t}}const T=f.length,M=this.strokeImageInfos.findImage(T),D=M.index;for(let r=0;r<T;++r){const e=f[r];n(M,y(e.x),y(e.y),y(e.cx),y(e.cy))}function k(e,t,r){const i=e.length,s=t.findImage(i),a=s.index;let o=0;for(let n=0;n<i;++n)o+=e[n].length;const l=r.findImage(o);for(let u=0;u<i;++u){const t=e[u],r=t.length,i=l.index;n(s,i>>7,127&i,r>>7,127&r);for(let e=0;e<r;++e){const r=t[e]+D;n(l,r>>7,127&r,0,0)}}return{cellImageInfo:l,dimOffset:a,dimImageInfo:s}}return t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[a,l,o,u],strokeImageInfo:M,strokes:f,colInfo:k(g,this.colDimImageInfos,this.colCellImageInfos),rowInfo:k(m,this.rowDimImageInfos,this.rowCellImageInfos)},t.uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset],t}}ls.prototype._renderText=function(t,n,r,i,s){if(!this.states.textFont||"string"==typeof this.states.textFont)return void console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.");if(r>=i||!this.states.fillColor)return;if(!e.Font.hasGlyphData(this.states.textFont))return void console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts with glyph data are supported");this.push();const a=this.states.strokeColor,o=this.states.drawMode;this.states.setValue("strokeColor",null),this.states.setValue("drawMode",dt);const{font:l}=this.states.textFont;if(!l)throw new Error("In WebGL mode, textFont() needs to be given the result of loadFont() instead of a font family name.");const u=l._currentAxes(this);let c=l._getFontInfo(u);const h={x:n,y:r},d=this.states.textSize/(l.data?.head?.unitsPerEm||1e3);this.translate(h.x,h.y,0),this.scale(d,d,1);const p=this.GL,f=!this._defaultFontShader,m=this._getFontShader();m.init(),m.bindShader(),f&&(m.setUniform("uGridImageSize",[64,64]),m.setUniform("uCellsImageSize",[64,64]),m.setUniform("uStrokeImageSize",[64,64]),m.setUniform("uGridSize",[9,9]));const g=this.states.fillSet?this.states.curFillColor:[0,0,0,255];this._setGlobalUniforms(m),this._applyColorBlend(g);let v=this.geometryBufferCache.getGeometryByID("glyph");v||(v=this._textGeom=new Ti(1,1,function(){for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)this.vertices.push(new Ur(t,e,0)),this.uvs.push(t,e)},this),v.gid="glyph",v.computeFaces().computeNormals(),this.geometryBufferCache.ensureCached(v));for(const e of this.buffers.text)e._prepareBuffer(v,m);this._bindBuffer(this.geometryBufferCache.cache.glyph.indexBuffer,p.ELEMENT_ARRAY_BUFFER),m.setUniform("uMaterialColor",g),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.glyphDataCache=this.glyphDataCache||new Set;try{const e=l._positionGlyphs(t);for(const t of e){const e=c.getGlyphInfo(t);if(e.uGlyphRect){const n=e.rowInfo,r=e.colInfo,i=[e.strokeImageInfo.imageData,n.cellImageInfo.imageData,n.dimImageInfo.imageData,r.cellImageInfo.imageData,r.dimImageInfo.imageData];for(const e of i)this.glyphDataCache.delete(e),this.glyphDataCache.add(e);for(;this.glyphDataCache.size>this.maxCachedGlyphs();){const e=this.glyphDataCache.values().next().value;this.glyphDataCache.delete(e);const t=this.textures.get(e);t&&(t.remove(),this.textures.delete(e))}m.setUniform("uSamplerStrokes",e.strokeImageInfo.imageData),m.setUniform("uSamplerRowStrokes",n.cellImageInfo.imageData),m.setUniform("uSamplerRows",n.dimImageInfo.imageData),m.setUniform("uSamplerColStrokes",r.cellImageInfo.imageData),m.setUniform("uSamplerCols",r.dimImageInfo.imageData),m.setUniform("uGridOffset",e.uGridOffset),m.setUniform("uGlyphRect",e.uGlyphRect),m.setUniform("uGlyphOffset",t.x),m.bindTextures(),p.drawElements(p.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}}}finally{m.unbindShader(),this.states.setValue("strokeColor",a),this.states.setValue("drawMode",o),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.pop()}}}(e,e.prototype),yC(e,e.prototype),vC(e,e.prototype),fC(e,e.prototype),gC(e,e.prototype),EC(e,e.prototype),LC(e,e.prototype),mC(e,e.prototype),CC(e,e.prototype),IC(e,e.prototype),RD(e,e.prototype)}function PD({text:e="WORK",letterSpacing:t=0,rowH:n=3,colW:r=12,subRows:i=3,diamondH:s=2,maxW:a=18,topColor:o="#ff663e",botColor:l="#ff663e",bgClear:u=!0,fadeEdge:c=.15,edgeThresh:h=.05,stagger:d=!0,fontFamily:p="Helvetica, Arial, sans-serif",centerAlign:f=!0,lineGapFrac:m=.22,fitToCssFont:g=!0,fontSizeRatio:v=.26,baselinePx:y=60,tightPadPx:b=0,className:x="",style:_={}}){const w=(0,M.useRef)(null),S=(0,M.useRef)(null),E=(0,M.useRef)(null);return(0,M.useEffect)(()=>{if(!w.current)return;let x,_,C,A=2,T=2,M=0;return S.current=new xs(S=>{function E(){const e=w.current.getBoundingClientRect();A=Math.max(2,Math.floor(e.width));const t=getComputedStyle(w.current);return parseFloat(t.fontSize)||16}function D(e,t){S.pixelDensity(1),S.resizeCanvas(e,t),x&&x.remove(),x=S.createGraphics(e,t),x.pixelDensity(1)}let k=t;function N(e){if(!e)return 0;let t=0;for(const n of e)t+=x.textWidth(n);return e.length>1&&(t+=k*(e.length-1)),t}function F(e,t,n){let r=n;for(const i of e)x.text(i,r,t),r+=x.textWidth(i)+k}function I(t,n){x.textFont(p),x.textSize(t);const r=String(e),i=.92*A;let s=[r];if(N(r)>i&&r.includes(" ")){const e=r.trim().split(/\s+/);let t={i:Math.floor(e.length/2),diff:1/0,ok:!1};for(let n=1;n<e.length;n++){const r=e.slice(0,n).join(" "),s=e.slice(n).join(" "),a=N(r),o=N(s),l=a<=i&&o<=i,u=Math.abs(a-o);l&&u<t.diff&&(t={i:n,diff:u,ok:!0})}t.ok&&(s=[e.slice(0,t.i).join(" "),e.slice(t.i).join(" ")])}const a=t*m,o=s.length*t+(s.length-1)*a;return{lines:s,ts:t,lineGap:a,desiredH:Math.max(2,Math.ceil(o+2*n))}}function R(e,t,n){x.clear(),x.textAlign(S.LEFT,S.CENTER),x.textFont(p),x.textSize(t);const r=e.length*t+(e.length-1)*n;let i=T/2-r/2+.65*t;x.fill(255);for(const s of e){const e=N(s);F(s,i,f?A/2-e/2:.1*t),i+=t+n}x.loadPixels()}function L(e,t){let n=0;for(let r=-1;r<=1;r++)for(let i=-1;i<=1;i++){const s=S.constrain(Math.floor(e+i),0,A-1),a=4*(S.constrain(Math.floor(t+r),0,T-1)*A+s)+3;n=Math.max(n,x.pixels[a]||0)}return n}function P(e,t,n,r){S.beginShape(),S.vertex(e,t-r/2),S.vertex(e+n/2,t),S.vertex(e,t+r/2),S.vertex(e-n/2,t),S.endShape(S.CLOSE)}let O=1,B=n,U=r,z=s,V=a,j=b;function G(e){O=Math.max(.001,e/y),B=n*O,U=r*O,z=s*O,V=a*O,k=t*O,j=b*O}function H(){if(!g)return;const e=E();G(e);const{lines:t,ts:n,lineGap:r,desiredH:i}=I(e,j);Math.abs(i-T)>1&&M<2?(M++,T=i,D(A,T),R(t,n,r),M--):R(t,n,r)}S.setup=()=>{S.createCanvas(2,2,S.P2D).parent(w.current),S.noStroke(),_=S.color(o),C=S.color(l),function(){const e=E();G(e);const t=g?Math.ceil(1.4*e):Math.max(2,Math.floor(w.current.getBoundingClientRect().height));D(A,t);const n=g?e:t*v,{lines:r,ts:i,lineGap:s,desiredH:a}=I(n,j);T=a,D(A,T),R(r,i,s)}(),setTimeout(H,0)},S.draw=()=>{if(x){u?S.clear():S.background(0,0);for(let e=.5*B;e<T;e+=B){const t=d&&Math.floor(e/B)%2==1?.5*U:0;for(let n=0;n<i;n++){const r=e+.7*z*(n-(i-1)/2),s=Math.min(Math.max(r/T,0),1);S.fill(S.lerpColor(_,C,s));for(let e=t+.5*U;e<A;e+=U){const t=L(e,r),n=t/255;if(n<h)continue;const i=L(e-.4*U,r),s=L(e+.4*U,r),a=1-c*(Math.abs(t-i)+Math.abs(t-s))/510,o=S.lerp(0,V,n)*Math.max(0,a);o>.35&&P(e,r,o,z)}}}}},S.windowResized=()=>{const e=E();G(e),D(A,Math.max(T,2));const t=g?e:T*v,{lines:n,ts:r,lineGap:i,desiredH:s}=I(t,j);Math.abs(s-T)>1&&(T=s,D(A,T)),R(n,r,i)}}),E.current=new ResizeObserver(()=>{S.current?.windowResized&&S.current.windowResized()}),E.current.observe(w.current),()=>{E.current?.disconnect(),S.current?.remove(),S.current=null}},[e,t,n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b]),(0,sg.jsx)("div",{ref:w,className:x,style:{position:"relative",width:"100%",lineHeight:1,..._},"aria-label":e,role:"img"})}function OD(){const{pathname:e}=sS();return(0,sg.jsx)(sg.Fragment,{children:(0,sg.jsx)(bS,{})})}function BD({className:e,style:t,isOpen:n=!1,onClick:r}){const i=(0,M.useRef)(null),s=(0,M.useRef)(null),a=(0,M.useRef)(null);return(0,M.useEffect)(()=>{if(!ag)return;const e=["M 30,35 Q 50,35 70,35","M 30,35 Q 50,45 70,35","M 30,35 Q 50,30 70,35","M 30,35 Q 50,40 70,35","M 30,35 Q 50,33 70,35","M 30,35 Q 50,37 70,35","M 30,35 Q 50,34 70,35","M 30,35 Q 50,36 70,35","M 30,35 Q 50,35 70,35","M 30,35 Q 60,35 70,35","M 30,35 Q 40,35 70,35","M 30,35 Q 60,35 70,35","M 30,35 Q 40,35 70,35","M 30,35 Q 60,35 70,35","M 30,35 Q 40,35 70,35","M 30,35 Q 60,35 70,35","M 30,35 Q 40,35 70,35"],t=["M 30,50 Q 50,50 70,50","M 30,50 Q 50,60 70,50","M 30,50 Q 50,45 70,50","M 30,50 Q 50,55 70,50","M 30,50 Q 50,48 70,50","M 30,50 Q 50,52 70,50","M 30,50 Q 50,49 70,50","M 30,50 Q 50,51 70,50","M 30,50 Q 50,50 70,50","M 30,50 Q 60,50 70,50","M 30,50 Q 40,50 70,50","M 30,50 Q 60,50 70,50","M 30,50 Q 40,50 70,50","M 30,50 Q 60,50 70,50","M 30,50 Q 40,50 70,50","M 30,50 Q 60,50 70,50","M 30,50 Q 40,50 70,50"],n=["M 30,65 Q 50,65 70,65","M 30,65 Q 50,75 70,65","M 30,65 Q 50,60 70,65","M 30,65 Q 50,70 70,65","M 30,65 Q 50,63 70,65","M 30,65 Q 50,67 70,65","M 30,65 Q 50,64 70,65","M 30,65 Q 50,66 70,65","M 30,65 Q 50,65 70,65","M 30,65 Q 60,65 70,65","M 30,65 Q 40,65 70,65","M 30,65 Q 60,65 70,65","M 30,65 Q 40,65 70,65","M 30,65 Q 60,65 70,65","M 30,65 Q 40,65 70,65","M 30,65 Q 60,65 70,65","M 30,65 Q 40,65 70,65"],r=e.length;let o=0;const l=setInterval(()=>{const l=i.current,u=s.current,c=a.current;if(!l||!u||!c)return;l.setAttribute("d",e[o]);const h=(o+1)%r,d=(o+2)%r;u.setAttribute("d",t[h]),c.setAttribute("d",n[d]),o=(o+1)%r},1500/r);return()=>clearInterval(l)},[]),(0,sg.jsx)("button",{type:"button",onClick:r,className:e?`elastic-menu-button ${e}`:"elastic-menu-button",style:t,"aria-label":n?"Close menu":"Open menu",children:(0,sg.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"25 25 50 50",children:[(0,sg.jsx)("g",{className:"elastic-line elastic-line-top"+(n?" is-open":""),children:(0,sg.jsx)("path",{ref:i,d:"M 30,35 Q 50,35 70,35",stroke:"#A5A5A5",strokeWidth:"2",strokeLinecap:"round",fill:"none",children:!ag&&(0,sg.jsx)("animate",{attributeName:"d",dur:"1.5s",begin:"1s",repeatCount:"indefinite",values:"\n                  M 30,35 Q 50,35 70,35;\n                  M 30,35 Q 50,45 70,35;\n                  M 30,35 Q 50,30 70,35;\n                  M 30,35 Q 50,40 70,35;\n                  M 30,35 Q 50,33 70,35;\n                  M 30,35 Q 50,37 70,35;\n                  M 30,35 Q 50,34 70,35;\n                  M 30,35 Q 50,36 70,35;\n                  M 30,35 Q 50,35 70,35;\n                  M 30,35 Q 60,35 70,35;\n                  M 30,35 Q 40,35 70,35;\n                  M 30,35 Q 60,35 70,35;\n                  M 30,35 Q 40,35 70,35;\n                  M 30,35 Q 60,35 70,35;\n                  M 30,35 Q 40,35 70,35;\n                  M 30,35 Q 60,35 70,35;\n                  M 30,35 Q 40,35 70,35;\n                ",fill:"freeze"})})}),(0,sg.jsx)("g",{className:"elastic-line elastic-line-middle"+(n?" is-open":""),children:(0,sg.jsx)("path",{ref:s,d:"M 30,50 Q 50,50 70,50",stroke:"#A5A5A5",strokeWidth:"2",strokeLinecap:"round",fill:"none",children:!ag&&(0,sg.jsx)("animate",{attributeName:"d",dur:"1.5s",begin:"1.1s",repeatCount:"indefinite",values:"\n                  M 30,50 Q 50,50 70,50;\n                  M 30,50 Q 50,60 70,50;\n                  M 30,50 Q 50,45 70,50;\n                  M 30,50 Q 50,55 70,50;\n                  M 30,50 Q 50,48 70,50;\n                  M 30,50 Q 50,52 70,50;\n                  M 30,50 Q 50,49 70,50;\n                  M 30,50 Q 50,51 70,50;\n                  M 30,50 Q 50,50 70,50;\n                  M 30,50 Q 60,50 70,50;\n                  M 30,50 Q 40,50 70,50;\n                  M 30,50 Q 60,50 70,50;\n                  M 30,50 Q 40,50 70,50;\n                  M 30,50 Q 60,50 70,50;\n                  M 30,50 Q 40,50 70,50;\n                  M 30,50 Q 60,50 70,50;\n                  M 30,50 Q 40,50 70,50;\n                ",fill:"freeze"})})}),(0,sg.jsx)("g",{className:"elastic-line elastic-line-bottom"+(n?" is-open":""),children:(0,sg.jsx)("path",{ref:a,d:"M 30,65 Q 50,65 70,65",stroke:"#A5A5A5",strokeWidth:"2",strokeLinecap:"round",fill:"none",children:!ag&&(0,sg.jsx)("animate",{attributeName:"d",dur:"1.5s",begin:"1.2s",repeatCount:"indefinite",values:"\n                  M 30,65 Q 50,65 70,65;\n                  M 30,65 Q 50,75 70,65;\n                  M 30,65 Q 50,60 70,65;\n                  M 30,65 Q 50,70 70,65;\n                  M 30,65 Q 50,63 70,65;\n                  M 30,65 Q 50,67 70,65;\n                  M 30,65 Q 50,64 70,65;\n                  M 30,65 Q 50,66 70,65;\n                  M 30,65 Q 50,65 70,65;\n                  M 30,65 Q 60,65 70,65;\n                  M 30,65 Q 40,65 70,65;\n                  M 30,65 Q 60,65 70,65;\n                  M 30,65 Q 40,65 70,65;\n                  M 30,65 Q 60,65 70,65;\n                  M 30,65 Q 40,65 70,65;\n                  M 30,65 Q 60,65 70,65;\n                  M 30,65 Q 40,65 70,65;\n                ",fill:"freeze"})})})]})})}function UD(){const[e,t]=(0,M.useState)(!1);return(0,M.useEffect)(()=>{const e=()=>{t(window.innerWidth<=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,sg.jsxs)("section",{id:"about",className:"about-section",children:[(0,sg.jsx)("svg",{width:"0",height:"0",style:{position:"absolute"},children:(0,sg.jsx)("defs",{children:(0,sg.jsxs)("filter",{id:"filter",children:[(0,sg.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0 .007",numOctaves:"1",seed:"1",stitchTiles:"stitch",result:"turbulence1",children:(0,sg.jsx)("animate",{attributeName:"baseFrequency",dur:"1s",values:"0 .005; 0 .010; 0 .005",repeatCount:"indefinite"})}),(0,sg.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"turbulence1",scale:"10",xChannelSelector:"R",yChannelSelector:"A",result:"displacementMap2"}),(0,sg.jsx)("feColorMatrix",{type:"saturate",values:"5",in:"displacementMap2",result:"colormatrix4"})]})})}),(0,sg.jsx)("div",{className:"about-title",children:(0,sg.jsx)("iframe",{src:e?"./SmearTextWork.html?text=ABOUT&scale=2.7":"./SmearTextWork.html?text=ABOUT&scale=3.7",title:"Squishy Letters",className:"about-i-frame"})}),(0,sg.jsx)("div",{className:"about-blurb",children:(0,sg.jsx)("div",{children:"Holland Blumer is a creative technologist and computer scientist in Brooklyn focused on building online experiences that are intentional, design-driven, and interactive. She studied Manufacturing & Design Engineering at Northwestern University, where she joined the robotics team and began taking on design projects for friends. She later earned a graduate degree in Computer Engineering at Dartmouth College, serving as the full-stack developer on a six-month ChargePoint project alongside her studies. She now helps clients communicate clearly and stand out online."})})]})}function zD({texts:e=[],className:t=""}){const n=(0,M.useRef)(null),r=(0,M.useRef)(null),i=(0,M.useId)(),s=(0,M.useMemo)(()=>e&&e.length?e.reduce((e,t)=>t.length>e.length?t:e):"",[e]);return(0,M.useEffect)(()=>{if(!e||e.length<2)return;const t=n.current,i=r.current;if(!t||!i)return;let s,a=e.length-1,o=new Date,l=0,u=.25;function c(){l-=u,u=0;let n=l/1;n>1&&(u=.25,n=1),function(n){i.style.filter=`blur(${Math.min(8/n-8,100)}px)`,i.style.opacity=100*Math.pow(n,.4)+"%",n=1-n,t.style.filter=`blur(${Math.min(8/n-8,100)}px)`,t.style.opacity=100*Math.pow(n,.4)+"%",t.textContent=e[a%e.length],i.textContent=e[(a+1)%e.length]}(n)}return t.textContent=e[a%e.length],i.textContent=e[(a+1)%e.length],function e(){s=requestAnimationFrame(e);const n=new Date,r=(n-o)/1e3;o=n;const h=u>0;u-=r,u<=0?(h&&a++,c()):(l=0,i.style.filter="",i.style.opacity="100%",t.style.filter="",t.style.opacity="0%")}(),()=>{s&&cancelAnimationFrame(s)}},[e]),(0,sg.jsxs)(sg.Fragment,{children:[(0,sg.jsx)("svg",{width:"0",height:"0","aria-hidden":"true",focusable:"false",children:(0,sg.jsx)("defs",{children:(0,sg.jsx)("filter",{id:i,children:(0,sg.jsx)("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:"\n                1 0 0 0 0\n                0 1 0 0 0\n                0 0 1 0 0\n                0 0 0 255 -140\n              "})})})}),(0,sg.jsxs)("span",{className:`morph-text ${t}`,style:{filter:`url(#${i}) blur(0.6px)`},children:[(0,sg.jsx)("span",{className:"morph-sizer",children:s}),(0,sg.jsx)("span",{ref:n,className:"morph-layer morph-layer-1"}),(0,sg.jsx)("span",{ref:r,className:"morph-layer morph-layer-2"})]})]})}
/**
* @license
* Copyright 2010-2025 Three.js Authors
* SPDX-License-Identifier: MIT
*/function VD(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Av[255&e]+Av[e>>8&255]+Av[e>>16&255]+Av[e>>24&255]+"-"+Av[255&t]+Av[t>>8&255]+"-"+Av[t>>16&15|64]+Av[t>>24&255]+"-"+Av[63&n|128]+Av[n>>8&255]+"-"+Av[n>>16&255]+Av[n>>24&255]+Av[255&r]+Av[r>>8&255]+Av[r>>16&255]+Av[r>>24&255]).toLowerCase()}function jD(e,t,n){return Math.max(t,Math.min(n,e))}function GD(e,t,n){return(1-n)*e+n*t}function HD(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function WD(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}function $D(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function qD(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function XD(){const e=qD("canvas");return e.style.display="block",e}function YD(e){e in Pv||(Pv[e]=!0,console.warn(e))}function ZD(){const e={enabled:!0,workingColorSpace:xv,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?("srgb"===this.spaces[t].transfer&&(e.r=KD(e.r),e.g=KD(e.g),e.b=KD(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),"srgb"===this.spaces[n].transfer&&(e.r=QD(e.r),e.g=QD(e.g),e.b=QD(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return""===e?_v:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return YD("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return YD("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[xv]:{primaries:t,whitePoint:r,transfer:_v,toXYZ:Ov,fromXYZ:Bv,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:bv},outputColorSpaceConfig:{drawingBufferColorSpace:bv}},[bv]:{primaries:t,whitePoint:r,transfer:wv,toXYZ:Ov,fromXYZ:Bv,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:bv}}}),e}function KD(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function QD(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function JD(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Vv.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function ek(e,t,n,r,i){for(let s=0,a=e.length-3;s<=a;s+=3){hy.fromArray(e,s);const a=i.x*Math.abs(hy.x)+i.y*Math.abs(hy.y)+i.z*Math.abs(hy.z),o=t.dot(hy),l=n.dot(hy),u=r.dot(hy);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>a)return!1}return!0}function tk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function nk(e,t,n,r,i,s,a,o,l,u){e.getVertexPosition(o,Ub),e.getVertexPosition(l,zb),e.getVertexPosition(u,Vb);const c=function(e,t,n,r,i,s,a,o){let l;if(l=1===t.side?r.intersectTriangle(a,s,i,!0,o):r.intersectTriangle(i,s,a,0===t.side,o),null===l)return null;Wb.copy(o),Wb.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(Wb);return u<n.near||u>n.far?null:{distance:u,point:Wb.clone(),object:e}}(e,t,n,r,Ub,zb,Vb,Hb);if(c){const e=new Nv;hb.getBarycoord(Hb,Ub,zb,Vb,e),i&&(c.uv=hb.getInterpolatedAttribute(i,o,l,u,e,new Dv)),s&&(c.uv1=hb.getInterpolatedAttribute(s,o,l,u,e,new Dv)),a&&(c.normal=hb.getInterpolatedAttribute(a,o,l,u,e,new Nv),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const t={a:o,b:l,c:u,normal:new Nv,materialIndex:0};hb.getNormal(Ub,zb,Vb,t.normal),c.face=t,c.barycoord=e}return c}function rk(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ik(e){const t={};for(let n=0;n<e.length;n++){const r=rk(e[n]);for(const e in r)t[e]=r[e]}return t}function sk(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Uv.workingColorSpace}function ak(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function ok(e,t,n,r){const i=function(e){switch(e){case gg:case vg:return{byteLength:1,components:1};case bg:case yg:case Sg:return{byteLength:2,components:1};case Eg:case Cg:return{byteLength:2,components:4};case _g:case xg:case wg:return{byteLength:4,components:1};case Ag:case Tg:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case Mg:return e*t;case Fg:case Ig:return e*t/i.components*i.byteLength;case Rg:case Lg:return e*t*2/i.components*i.byteLength;case Dg:return e*t*3/i.components*i.byteLength;case kg:case Pg:return e*t*4/i.components*i.byteLength;case Og:case Bg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ug:case zg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case jg:case Hg:return Math.max(e,16)*Math.max(t,8)/4;case Vg:case Gg:return Math.max(e,8)*Math.max(t,8)/2;case Wg:case $g:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case qg:case Xg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Yg:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Zg:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Kg:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Qg:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Jg:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case ev:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case tv:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case nv:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case rv:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case iv:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case sv:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case av:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case ov:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case lv:case uv:case cv:return Math.ceil(e/4)*Math.ceil(t/4)*16;case hv:case dv:return Math.ceil(e/4)*Math.ceil(t/4)*8;case pv:case fv:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function lk(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function uk(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,s=r.byteLength,a=e.createBuffer();let o;if(e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if("undefined"!=typeof Float16Array&&r instanceof Float16Array)o=e.HALF_FLOAT;else if(r instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:s}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,s=n.updateRanges;if(e.bindBuffer(r,t),0===s.length)e.bufferSubData(r,0,i);else{s.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<s.length;e++){const n=s[t],r=s[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,s[t]=r)}s.length=t+1;for(let n=0,a=s.length;n<a;n++){const t=s[n];e.bufferSubData(r,t.start*i.BYTES_PER_ELEMENT,i,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}function ck(e,t,n,r,i,s,a){const o=new mb(0);let l,u,c=!0===s?0:1,h=null,d=0,p=null;function f(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function m(t,n){t.getRGB($x,sk(e)),r.buffers.color.setClear($x.r,$x.g,$x.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),c=t,m(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,m(o,c)},render:function(t){let n=!1;const i=f(t);null===i?m(o,c):i&&i.isColor&&(m(i,1),n=!0);const s=e.xr.getEnvironmentBlendMode();"additive"===s?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===s&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=f(n);r&&(r.isCubeTexture||306===r.mapping)?(void 0===u&&(u=new $b(new qb(1,1,1),new Yb({name:"BackgroundCubeMaterial",uniforms:rk(Wx.backgroundCube.uniforms),vertexShader:Wx.backgroundCube.vertexShader,fragmentShader:Wx.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),qx.copy(n.backgroundRotation),qx.x*=-1,qx.y*=-1,qx.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(qx.y*=-1,qx.z*=-1),u.material.uniforms.envMap.value=r,u.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Xx.makeRotationFromEuler(qx)),u.material.toneMapped=Uv.getTransfer(r.colorSpace)!==wv,h===r&&d===r.version&&p===e.toneMapping||(u.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new $b(new bx(2,2),new Yb({name:"BackgroundMaterial",uniforms:rk(Wx.background.uniforms),vertexShader:Wx.background.vertexShader,fragmentShader:Wx.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Uv.getTransfer(r.colorSpace)!==wv,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==u&&(u.geometry.dispose(),u.material.dispose(),u=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function hk(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=u(null);let s=i,a=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function u(e){const t=[],r=[],i=[];for(let s=0;s<n;s++)t[s]=0,r[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function c(){const e=s.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=s.newAttributes,i=s.enabledAttributes,a=s.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){const t=s.newAttributes,n=s.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function f(t,n,r,i,s,a,o){!0===o?e.vertexAttribIPointer(t,n,r,s,a):e.vertexAttribPointer(t,n,r,i,s,a)}function m(){g(),a=!0,s!==i&&(s=i,o(s.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const s=!0===i.wireframe;let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let o=a[n.id];void 0===o&&(o={},a[n.id]=o);let l=o[s];return void 0===l&&(l=u(e.createVertexArray()),o[s]=l),l}(m,l,i);s!==y&&(s=y,o(s.object)),v=function(e,t,n,r){const i=s.attributes,a=t.attributes;let o=0;const l=n.getAttributes();for(const s in l)if(l[s].location>=0){const t=i[s];let n=a[s];if(void 0===n&&("instanceMatrix"===s&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===s&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}return s.attributesNum!==o||s.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},a=t.attributes;let o=0;const l=n.getAttributes();for(const s in l)if(l[s].location>=0){let t=a[s];void 0===t&&("instanceMatrix"===s&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===s&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[s]=n,o++}s.attributes=i,s.attributesNum=o,s.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||a)&&(a=!1,function(n,r,i,s){c();const a=s.attributes,o=i.getAttributes(),l=r.defaultAttributeValues;for(const u in o){const r=o[u];if(r.location>=0){let i=a[u];if(void 0===i&&("instanceMatrix"===u&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===u&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const a=i.normalized,o=i.itemSize,l=t.get(i);if(void 0===l)continue;const u=l.buffer,c=l.type,p=l.bytesPerElement,m=c===e.INT||c===e.UNSIGNED_INT||1013===i.gpuType;if(i.isInterleavedBufferAttribute){const t=i.data,l=t.stride,g=i.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)f(r.location+e,o/r.locationSize,c,a,l*p,(g+o/r.locationSize*e)*p,m)}else{if(i.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)f(r.location+e,o/r.locationSize,c,a,o*p,o/r.locationSize*e*p,m)}}else if(void 0!==l){const t=l[u];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:c,enableAttribute:h,disableUnusedAttributes:p}}function dk(e,t,n){let r;function i(t,i,s){0!==s&&(e.drawArraysInstanced(r,t,i,s),n.update(i,r,s))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,s);let a=0;for(let t=0;t<s;t++)a+=i[t];n.update(a,r,1)},this.renderMultiDrawInstances=function(e,s,a,o){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],s[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,s,0,o,0,a);let t=0;for(let e=0;e<a;e++)t+=s[e]*o[e];n.update(t,r,1)}}}function pk(e,t,n,r){let i;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const o=s(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=!0===n.logarithmicDepthBuffer,u=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,textureFormatReadable:function(t){return 1023===t||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=1016===n&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(1009!==n&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&1015!==n&&!i)},precision:a,logarithmicDepthBuffer:l,reversedDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function fk(e){const t=this;let n=null,r=0,i=!1,s=!1;const a=new dx,o=new Rv,l={value:null,needsUpdate:!1};function u(e,n,r,i){const s=null!==e?e.length:0;let u=null;if(0!==s){if(u=l.value,!0!==i||null===u){const t=r+4*s,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let n=0,l=r;n!==s;++n,l+=4)a.copy(e[n]).applyMatrix4(i,o),a.normal.toArray(u,l),u[l+3]=a.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(a,o,c){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!i||null===h||0===h.length||s&&!p)s?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=s?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,o,t,c);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function mk(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping;if(303===s||304===s){if(t.has(i))return n(t.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const a=new ix(s.height);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function gk(e,t,n){const r=new Yv(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vk(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function yk(){return new Yb({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function bk(){return new Yb({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function xk(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,a=303===s||304===s,o=301===s||302===s;if(a||o){let s=t.get(i);const l=void 0!==s?s.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new l_(e)),s=a?n.fromEquirectangular(i,s):n.fromCubemap(i,s),s.texture.pmremVersion=i.pmremVersion,t.set(i,s),s.texture;if(void 0!==s)return s.texture;{const l=i.image;return a&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new l_(e)),s=a?n.fromEquirectangular(i):n.fromCubemap(i),s.texture.pmremVersion=i.pmremVersion,t.set(i,s),i.addEventListener("dispose",r),s.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function _k(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&YD("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function wk(e,t,n,r){const i={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete i[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{if(void 0===i)return;{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const o=new($D(n)?Cb:Eb)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const i in r)t.update(r[i],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Sk(e,t,n){let r,i,s;function a(t,a,o){0!==o&&(e.drawElementsInstanced(r,a,i,t*s,o),n.update(a,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,s=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*s),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,s,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,s,0,i,e,0,a);let o=0;for(let t=0;t<a;t++)o+=s[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,u){if(0===l)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)a(e[t]/s,o[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(r,o,0,i,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*u[e];n.update(t,r,1)}}}function Ek(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Ck(e,t,n){const r=new WeakMap,i=new qv;return{update:function(s,a,o){const l=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,c=void 0!==u?u.length:0;let h=r.get(a);if(void 0===h||h.count!==c){void 0!==h&&h.texture.dispose();const d=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,f=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let b=a.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const _=new Float32Array(b*x*4*c),w=new Zv(_,b,x,c);w.type=wg,w.needsUpdate=!0;const S=4*y;for(let C=0;C<c;C++){const A=m[C],T=g[C],M=v[C],D=b*x*4*C;for(let k=0;k<A.count;k++){const N=k*S;!0===d&&(i.fromBufferAttribute(A,k),_[D+N+0]=i.x,_[D+N+1]=i.y,_[D+N+2]=i.z,_[D+N+3]=0),!0===p&&(i.fromBufferAttribute(T,k),_[D+N+4]=i.x,_[D+N+5]=i.y,_[D+N+6]=i.z,_[D+N+7]=0),!0===f&&(i.fromBufferAttribute(M,k),_[D+N+8]=i.x,_[D+N+9]=i.y,_[D+N+10]=i.z,_[D+N+11]=4===M.itemSize?i.w:1)}}function E(){w.dispose(),r.delete(a),a.removeEventListener("dispose",E)}h={count:c,texture:w,size:new Dv(b,x)},r.set(a,h),a.addEventListener("dispose",E)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)o.getUniforms().setValue(e,"morphTexture",s.morphTexture,n);else{let F=0;for(let R=0;R<l.length;R++)F+=l[R];const I=a.morphTargetsRelative?1:1-F;o.getUniforms().setValue(e,"morphTargetBaseInfluence",I),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function Ak(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=r.render.frame,l=a.geometry,u=t.get(a,l);if(i.get(u)!==o&&(t.update(u),i.set(u,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),i.get(a)!==o&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),i.set(a,o))),a.isSkinnedMesh){const e=a.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return u},dispose:function(){i=new WeakMap}}}function Tk(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=f_[i];if(void 0===s&&(s=new Float32Array(i),f_[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function Mk(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Dk(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function kk(e,t){let n=m_[t];void 0===n&&(n=new Int32Array(t),m_[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Nk(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Fk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Mk(n,t))return;e.uniform2fv(this.addr,t),Dk(n,t)}}function Ik(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Mk(n,t))return;e.uniform3fv(this.addr,t),Dk(n,t)}}function Rk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Mk(n,t))return;e.uniform4fv(this.addr,t),Dk(n,t)}}function Lk(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Mk(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Dk(n,t)}else{if(Mk(n,r))return;y_.set(r),e.uniformMatrix2fv(this.addr,!1,y_),Dk(n,r)}}function Pk(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Mk(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Dk(n,t)}else{if(Mk(n,r))return;v_.set(r),e.uniformMatrix3fv(this.addr,!1,v_),Dk(n,r)}}function Ok(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Mk(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Dk(n,t)}else{if(Mk(n,r))return;g_.set(r),e.uniformMatrix4fv(this.addr,!1,g_),Dk(n,r)}}function Bk(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Uk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Mk(n,t))return;e.uniform2iv(this.addr,t),Dk(n,t)}}function zk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Mk(n,t))return;e.uniform3iv(this.addr,t),Dk(n,t)}}function Vk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Mk(n,t))return;e.uniform4iv(this.addr,t),Dk(n,t)}}function jk(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Gk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Mk(n,t))return;e.uniform2uiv(this.addr,t),Dk(n,t)}}function Hk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Mk(n,t))return;e.uniform3uiv(this.addr,t),Dk(n,t)}}function Wk(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Mk(n,t))return;e.uniform4uiv(this.addr,t),Dk(n,t)}}function $k(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let s;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(c_.compareFunction=515,s=c_):s=u_,n.setTexture2D(t||s,i)}function qk(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||d_,i)}function Xk(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||p_,i)}function Yk(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||h_,i)}function Zk(e,t){e.uniform1fv(this.addr,t)}function Kk(e,t){const n=Tk(t,this.size,2);e.uniform2fv(this.addr,n)}function Qk(e,t){const n=Tk(t,this.size,3);e.uniform3fv(this.addr,n)}function Jk(e,t){const n=Tk(t,this.size,4);e.uniform4fv(this.addr,n)}function eN(e,t){const n=Tk(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tN(e,t){const n=Tk(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function nN(e,t){const n=Tk(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function rN(e,t){e.uniform1iv(this.addr,t)}function iN(e,t){e.uniform2iv(this.addr,t)}function sN(e,t){e.uniform3iv(this.addr,t)}function aN(e,t){e.uniform4iv(this.addr,t)}function oN(e,t){e.uniform1uiv(this.addr,t)}function lN(e,t){e.uniform2uiv(this.addr,t)}function uN(e,t){e.uniform3uiv(this.addr,t)}function cN(e,t){e.uniform4uiv(this.addr,t)}function hN(e,t,n){const r=this.cache,i=t.length,s=kk(n,i);Mk(r,s)||(e.uniform1iv(this.addr,s),Dk(r,s));for(let a=0;a!==i;++a)n.setTexture2D(t[a]||u_,s[a])}function dN(e,t,n){const r=this.cache,i=t.length,s=kk(n,i);Mk(r,s)||(e.uniform1iv(this.addr,s),Dk(r,s));for(let a=0;a!==i;++a)n.setTexture3D(t[a]||d_,s[a])}function pN(e,t,n){const r=this.cache,i=t.length,s=kk(n,i);Mk(r,s)||(e.uniform1iv(this.addr,s),Dk(r,s));for(let a=0;a!==i;++a)n.setTextureCube(t[a]||p_,s[a])}function fN(e,t,n){const r=this.cache,i=t.length,s=kk(n,i);Mk(r,s)||(e.uniform1iv(this.addr,s),Dk(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(t[a]||h_,s[a])}function mN(e,t){e.seq.push(t),e.map[t.id]=t}function gN(e,t,n){const r=e.name,i=r.length;for(w_.lastIndex=0;;){const s=w_.exec(r),a=w_.lastIndex;let o=s[1];const l="]"===s[2],u=s[3];if(l&&(o|=0),void 0===u||"["===u&&a+2===i){mN(n,void 0===u?new b_(o,e,t):new x_(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new __(o),mN(n,e)),n=e}}}function vN(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function yN(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=(e.getShaderInfoLog(t)||"").trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=i;a<s;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function bN(e,t){const n=function(e){Uv._getMatrix(A_,Uv.workingColorSpace,e);const t=`mat3( ${A_.elements.map(e=>e.toFixed(4))} )`;switch(Uv.getTransfer(e)){case _v:return[t,"LinearTransferOETF"];case wv:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function xN(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function _N(){return Uv.getLuminanceCoefficients(T_),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${T_.x.toFixed(4)}, ${T_.y.toFixed(4)}, ${T_.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function wN(e){return""!==e}function SN(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function EN(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function CN(e){return e.replace(M_,AN)}function AN(e,t){let n=Gx[t];if(void 0===n){const e=D_.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Gx[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return CN(n)}function TN(e){return e.replace(k_,MN)}function MN(e,t,n,r){let i="";for(let s=parseInt(t);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function DN(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function kN(e,t,n,r){const i=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&302===e.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(wN).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(wN).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(wN).join("\n"),v.length>0&&(v+="\n")):(g=[DN(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(wN).join("\n"),v=[DN(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Gx.tonemapping_pars_fragment:"",0!==n.toneMapping?xN("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Gx.colorspace_pars_fragment,bN("linearToOutputTexel",n.outputColorSpace),_N(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(wN).join("\n")),a=CN(a),a=SN(a,n),a=EN(a,n),o=CN(o),o=SN(o,n),o=EN(o,n),a=TN(a),o=TN(o),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+a,x=y+v+o,_=vN(i,i.VERTEX_SHADER,b),w=vN(i,i.FRAGMENT_SHADER,x);function S(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m)||"",r=i.getShaderInfoLog(_)||"",s=i.getShaderInfoLog(w)||"",a=n.trim(),o=r.trim(),l=s.trim();let u=!0,c=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(u=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,m,_,w);else{const e=yN(i,_,"vertex"),n=yN(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+a+"\n"+e+"\n"+n)}else""!==a?console.warn("THREE.WebGLProgram: Program Info Log:",a):""!==o&&""!==l||(c=!1);c&&(t.diagnostics={runnable:u,programLog:a,vertexShader:{log:o,prefix:g},fragmentShader:{log:l,prefix:v}})}i.deleteShader(_),i.deleteShader(w),E=new S_(i,m),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(i,m)}let E,C;i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===C&&S(this),C};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=i.getProgramParameter(m,E_)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=C_++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}function NN(e,t,n,r,i,s,a){const o=new Ly,l=new F_,u=new Set,c=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return u.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(s,o,c,g,v){const y=g.fog,b=v.geometry,x=s.isMeshStandardMaterial?g.environment:null,_=(s.isMeshStandardMaterial?n:t).get(s.envMap||x),w=_&&306===_.mapping?_.image.height:null,S=f[s.type];null!==s.precision&&(p=i.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,C=void 0!==E?E.length:0;let A,T,M,D,k=0;if(void 0!==b.morphAttributes.position&&(k=1),void 0!==b.morphAttributes.normal&&(k=2),void 0!==b.morphAttributes.color&&(k=3),S){const e=Wx[S];A=e.vertexShader,T=e.fragmentShader}else A=s.vertexShader,T=s.fragmentShader,l.update(s),M=l.getVertexShaderID(s),D=l.getFragmentShaderID(s);const N=e.getRenderTarget(),F=e.state.buffers.depth.getReversed(),I=!0===v.isInstancedMesh,R=!0===v.isBatchedMesh,L=!!s.map,P=!!s.matcap,O=!!_,B=!!s.aoMap,U=!!s.lightMap,z=!!s.bumpMap,V=!!s.normalMap,j=!!s.displacementMap,G=!!s.emissiveMap,H=!!s.metalnessMap,W=!!s.roughnessMap,$=s.anisotropy>0,q=s.clearcoat>0,X=s.dispersion>0,Y=s.iridescence>0,Z=s.sheen>0,K=s.transmission>0,Q=$&&!!s.anisotropyMap,J=q&&!!s.clearcoatMap,ee=q&&!!s.clearcoatNormalMap,te=q&&!!s.clearcoatRoughnessMap,ne=Y&&!!s.iridescenceMap,re=Y&&!!s.iridescenceThicknessMap,ie=Z&&!!s.sheenColorMap,se=Z&&!!s.sheenRoughnessMap,ae=!!s.specularMap,oe=!!s.specularColorMap,le=!!s.specularIntensityMap,ue=K&&!!s.transmissionMap,ce=K&&!!s.thicknessMap,he=!!s.gradientMap,de=!!s.alphaMap,pe=s.alphaTest>0,fe=!!s.alphaHash,me=!!s.extensions;let ge=0;s.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:S,shaderType:s.type,shaderName:s.name,vertexShader:A,fragmentShader:T,defines:s.defines,customVertexShaderID:M,customFragmentShaderID:D,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,batching:R,batchingColor:R&&null!==v._colorsTexture,instancing:I,instancingColor:I&&null!==v.instanceColor,instancingMorph:I&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===N?e.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:xv,alphaToCoverage:!!s.alphaToCoverage,map:L,matcap:P,envMap:O,envMapMode:O&&_.mapping,envMapCubeUVHeight:w,aoMap:B,lightMap:U,bumpMap:z,normalMap:V,displacementMap:d&&j,emissiveMap:G,normalMapObjectSpace:V&&1===s.normalMapType,normalMapTangentSpace:V&&0===s.normalMapType,metalnessMap:H,roughnessMap:W,anisotropy:$,anisotropyMap:Q,clearcoat:q,clearcoatMap:J,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:X,iridescence:Y,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:Z,sheenColorMap:ie,sheenRoughnessMap:se,specularMap:ae,specularColorMap:oe,specularIntensityMap:le,transmission:K,transmissionMap:ue,thicknessMap:ce,gradientMap:he,opaque:!1===s.transparent&&1===s.blending&&!1===s.alphaToCoverage,alphaMap:de,alphaTest:pe,alphaHash:fe,combine:s.combine,mapUv:L&&m(s.map.channel),aoMapUv:B&&m(s.aoMap.channel),lightMapUv:U&&m(s.lightMap.channel),bumpMapUv:z&&m(s.bumpMap.channel),normalMapUv:V&&m(s.normalMap.channel),displacementMapUv:j&&m(s.displacementMap.channel),emissiveMapUv:G&&m(s.emissiveMap.channel),metalnessMapUv:H&&m(s.metalnessMap.channel),roughnessMapUv:W&&m(s.roughnessMap.channel),anisotropyMapUv:Q&&m(s.anisotropyMap.channel),clearcoatMapUv:J&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:se&&m(s.sheenRoughnessMap.channel),specularMapUv:ae&&m(s.specularMap.channel),specularColorMapUv:oe&&m(s.specularColorMap.channel),specularIntensityMapUv:le&&m(s.specularIntensityMap.channel),transmissionMapUv:ue&&m(s.transmissionMap.channel),thicknessMapUv:ce&&m(s.thicknessMap.channel),alphaMapUv:de&&m(s.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(V||$),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(L||de),fog:!!y,useFog:!0===s.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===s.flatShading&&!1===s.wireframe,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:h,reversedDepthBuffer:F,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:C,morphTextureStride:k,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:L&&!0===s.map.isVideoTexture&&"srgb"===Uv.getTransfer(s.map.colorSpace),decodeVideoTextureEmissive:G&&!0===s.emissiveMap.isVideoTexture&&"srgb"===Uv.getTransfer(s.emissiveMap.colorSpace),premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:me&&!0===s.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===s.extensions.multiDraw||R)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return ve.vertexUv1s=u.has(1),ve.vertexUv2s=u.has(2),ve.vertexUv3s=u.has(3),u.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0),t.instancing&&o.enable(1),t.instancingColor&&o.enable(2),t.instancingMorph&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),t.alphaHash&&o.enable(18),t.batching&&o.enable(19),t.dispersion&&o.enable(20),t.batchingColor&&o.enable(21),t.gradientMap&&o.enable(22),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.reversedDepthBuffer&&o.enable(4),t.skinning&&o.enable(5),t.morphTargets&&o.enable(6),t.morphNormals&&o.enable(7),t.morphColors&&o.enable(8),t.premultipliedAlpha&&o.enable(9),t.shadowMapEnabled&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),t.decodeVideoTexture&&o.enable(19),t.decodeVideoTextureEmissive&&o.enable(20),t.alphaToCoverage&&o.enable(21),e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Wx[t];n=Xb.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new kN(e,n,t,s),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function FN(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function IN(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function RN(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function LN(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,o,l,u){const c=s(e,t,a,o,l,u);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(e,t,a,o,l,u){const c=s(e,t,a,o,l,u);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||IN),r.length>1&&r.sort(t||RN),i.length>1&&i.sort(t||RN)}}}function PN(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new LN,e.set(t,[i])):n>=r.length?(i=new LN,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function ON(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Nv,color:new mb};break;case"SpotLight":n={position:new Nv,direction:new Nv,color:new mb,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Nv,color:new mb,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Nv,skyColor:new mb,groundColor:new mb};break;case"RectAreaLight":n={color:new mb,position:new Nv,halfWidth:new Nv,halfHeight:new Nv}}return e[t.id]=n,n}}}function BN(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function UN(e){const t=new ON,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dv};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Dv,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)r.probe.push(new Nv);const i=new Nv,s=new Ey,a=new Ey;return{setup:function(i){let s=0,a=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,u=0,c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0;i.sort(BN);for(let e=0,x=i.length;e<x;e++){const b=i[e],x=b.color,_=b.intensity,w=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)s+=x.r*_,a+=x.g*_,o+=x.b*_;else if(b.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(b.sh.coefficients[e],_);y++}else if(b.isDirectionalLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=S,r.directionalShadowMatrix[l]=b.shadow.matrix,p++}r.directional[l]=e,l++}else if(b.isSpotLight){const e=t.get(b);e.position.setFromMatrixPosition(b.matrixWorld),e.color.copy(x).multiplyScalar(_),e.distance=w,e.coneCos=Math.cos(b.angle),e.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),e.decay=b.decay,r.spot[c]=e;const i=b.shadow;if(b.map&&(r.spotLightMap[g]=b.map,g++,i.updateMatrices(b),b.castShadow&&v++),r.spotLightMatrix[c]=i.matrix,b.castShadow){const e=n.get(b);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[c]=e,r.spotShadowMap[c]=S,m++}c++}else if(b.isRectAreaLight){const e=t.get(b);e.color.copy(x).multiplyScalar(_),e.halfWidth.set(.5*b.width,0,0),e.halfHeight.set(0,.5*b.height,0),r.rectArea[h]=e,h++}else if(b.isPointLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),e.distance=b.distance,e.decay=b.decay,b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[u]=t,r.pointShadowMap[u]=S,r.pointShadowMatrix[u]=b.shadow.matrix,f++}r.point[u]=e,u++}else if(b.isHemisphereLight){const e=t.get(b);e.skyColor.copy(b.color).multiplyScalar(_),e.groundColor.copy(b.groundColor).multiplyScalar(_),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Hx.LTC_FLOAT_1,r.rectAreaLTC2=Hx.LTC_FLOAT_2):(r.rectAreaLTC1=Hx.LTC_HALF_1,r.rectAreaLTC2=Hx.LTC_HALF_2)),r.ambient[0]=s,r.ambient[1]=a,r.ambient[2]=o;const b=r.hash;b.directionalLength===l&&b.pointLength===u&&b.spotLength===c&&b.rectAreaLength===h&&b.hemiLength===d&&b.numDirectionalShadows===p&&b.numPointShadows===f&&b.numSpotShadows===m&&b.numSpotMaps===g&&b.numLightProbes===y||(r.directional.length=l,r.spot.length=c,r.rectArea.length=h,r.point.length=u,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,b.directionalLength=l,b.pointLength=u,b.spotLength=c,b.rectAreaLength=h,b.hemiLength=d,b.numDirectionalShadows=p,b.numPointShadows=f,b.numSpotShadows=m,b.numSpotMaps=g,b.numLightProbes=y,r.version=R_++)},setupView:function(e,t){let n=0,o=0,l=0,u=0,c=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),s.copy(t.matrixWorld),s.premultiply(h),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),u++}else if(t.isPointLight){const e=r.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o++}else if(t.isHemisphereLight){const e=r.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),c++}}},state:r}}function zN(e){const t=new UN(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function VN(e){let t=new WeakMap;return{get:function(n,r=0){const i=t.get(n);let s;return void 0===i?(s=new zN(e),t.set(n,[s])):r>=i.length?(s=new zN(e),i.push(s)):s=i[r],s},dispose:function(){t=new WeakMap}}}function jN(e,t,n){let r=new gx;const i=new Dv,s=new Dv,a=new qv,o=new _x({depthPacking:yv}),l=new wx,u={},c=n.maxTextureSize,h={0:1,1:0,2:2},d=new Yb({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Dv},radius:{value:4}},vertexShader:L_,fragmentShader:P_}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Rb;f.setAttribute("position",new Sb(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new $b(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function y(n,r){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Yv(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,p,m,null)}function b(t,n,r,i){let s=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=s.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=s.clone(),r[t]=i,n.addEventListener("dispose",_)),s=i}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=3===i?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=r),s}function x(n,i,s,a,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let u=0,c=t.length;u<c;u++){const c=t[u],h=l[c.materialIndex];if(h&&h.visible){const t=b(n,h,a,o);n.onBeforeShadow(e,n,i,s,r,t,c),e.renderBufferDirect(s,null,r,t,n,c),n.onAfterShadow(e,n,i,s,r,t,c)}}}else if(l.visible){const t=b(n,l,a,o);n.onBeforeShadow(e,n,i,s,r,t,null),e.renderBufferDirect(s,null,r,t,n,null),n.onAfterShadow(e,n,i,s,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,s,a,o)}function _(e){e.target.removeEventListener("dispose",_);for(const t in u){const n=u[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),!0===d.buffers.depth.getReversed()?d.buffers.color.setClear(0,0,0,0):d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=3!==v&&3===this.type,f=3===v&&3!==this.type;for(let m=0,g=t.length;m<g;m++){const l=t[m],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const h=u.getFrameExtents();if(i.multiply(h),s.copy(u.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/h.x),i.x=s.x*h.x,u.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/h.y),i.y=s.y*h.y,u.mapSize.y=s.y)),null===u.map||!0===p||!0===f){const e=3!==this.type?{minFilter:cg,magFilter:cg}:{};null!==u.map&&u.map.dispose(),u.map=new Yv(i.x,i.y,e),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),u.updateMatrices(l,e),r=u.getFrustum(),x(n,o,u.camera,l,this.type)}!0!==u.isPointLightShadow&&3===this.type&&y(u,o),u.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function GN(e,t){const n=new function(){let t=!1;const n=new qv;let r=null;const i=new qv(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,a,o){!0===o&&(t*=a,r*=a,s*=a),n.set(t,r,s,a),!1===i.equals(n)&&(e.clearColor(t,r,s,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,s=null,a=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const i=a;a=null,this.setClear(i)}},getReversed:function(){return r},setTest:function(t){t?z(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=O_[t]),s!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}s=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(r&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,i=null,s=null,a=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,u=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&s===a||(e.stencilFunc(t,n,a),r=t,i=n,s=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,u=null}}},s=new WeakMap,a=new WeakMap;let o={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,b=null,x=new mb(0,0,0),_=0,w=!1,S=null,E=null,C=null,A=null,T=null;const M=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,k=0;const N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(N)[1]),D=k>=1):-1!==N.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),D=k>=2);let F=null,I={};const R=e.getParameter(e.SCISSOR_BOX),L=e.getParameter(e.VIEWPORT),P=(new qv).fromArray(R),O=(new qv).fromArray(L);function B(t,n,r,i){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const U={};function z(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function V(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}U[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),z(e.DEPTH_TEST),r.setFunc(3),W(!1),$(1),z(e.CULL_FACE),H(0);const j={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};j[103]=e.MIN,j[104]=e.MAX;const G={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function H(t,n,r,i,s,a,o,l,u,c){if(0!==t){if(!1===d&&(z(e.BLEND),d=!0),5===t)s=s||n,a=a||r,o=o||i,n===f&&s===v||(e.blendEquationSeparate(j[n],j[s]),f=n,v=s),r===m&&i===g&&a===y&&o===b||(e.blendFuncSeparate(G[r],G[i],G[a],G[o]),m=r,g=i,y=a,b=o),!1!==l.equals(x)&&u===_||(e.blendColor(l.r,l.g,l.b,u),x.copy(l),_=u),p=t,w=!1;else if(t!==p||c!==w){if(100===f&&100===v||(e.blendEquation(e.FUNC_ADD),f=100,v=100),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case 3:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case 4:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,b=null,x.set(0,0,0),_=0,p=t,w=c}}else!0===d&&(V(e.BLEND),d=!1)}function W(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function $(t){0!==t?(z(e.CULL_FACE),t!==E&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),E=t}function q(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),A===n&&T===r||(e.polygonOffset(n,r),A=n,T=r)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:z,disable:V,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=c,i=!1;if(t){r=u.get(n),void 0===r&&(r=[],u.set(n,r));const s=t.textures;if(r.length!==s.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=s.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=s.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:H,setMaterial:function(t,s){2===t.side?V(e.CULL_FACE):z(e.CULL_FACE);let a=1===t.side;s&&(a=!a),W(a),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;i.setTest(o),o&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:$,setLineWidth:function(t){t!==C&&(D&&e.lineWidth(t),C=t)},setPolygonOffset:q,setScissorTest:function(t){t?z(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+M-1),F!==t&&(e.activeTexture(t),F=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===F?e.TEXTURE0+M-1:F);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===t&&i.texture===n||(F!==r&&(e.activeTexture(r),F=r),e.bindTexture(t,n||U[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=I[F];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=a.get(n);void 0===r&&(r=new WeakMap,a.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=a.get(n).get(t);s.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===P.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),P.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},F=null,I={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,b=null,x=new mb(0,0,0),_=0,w=!1,S=null,E=null,C=null,A=null,T=null,P.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function HN(e,t,n,r,i,s,a){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new Dv,c=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function f(e,t){return p?new OffscreenCanvas(e,t):qD("canvas")}function m(e,t,n){let r=1;const i=G(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),s=Math.floor(r*i.height);void 0===h&&(h=f(n,s));const a=t?f(n,s):h;return a.width=n,a.height=s,a.getContext("2d").drawImage(e,0,0,n,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function b(n,r,i,s,a=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(i===e.FLOAT&&(o=e.R32F),i===e.HALF_FLOAT&&(o=e.R16F),i===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.R8UI),i===e.UNSIGNED_SHORT&&(o=e.R16UI),i===e.UNSIGNED_INT&&(o=e.R32UI),i===e.BYTE&&(o=e.R8I),i===e.SHORT&&(o=e.R16I),i===e.INT&&(o=e.R32I)),r===e.RG&&(i===e.FLOAT&&(o=e.RG32F),i===e.HALF_FLOAT&&(o=e.RG16F),i===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RG8UI),i===e.UNSIGNED_SHORT&&(o=e.RG16UI),i===e.UNSIGNED_INT&&(o=e.RG32UI),i===e.BYTE&&(o=e.RG8I),i===e.SHORT&&(o=e.RG16I),i===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGB8UI),i===e.UNSIGNED_SHORT&&(o=e.RGB16UI),i===e.UNSIGNED_INT&&(o=e.RGB32UI),i===e.BYTE&&(o=e.RGB8I),i===e.SHORT&&(o=e.RGB16I),i===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),i===e.UNSIGNED_INT&&(o=e.RGBA32UI),i===e.BYTE&&(o=e.RGBA8I),i===e.SHORT&&(o=e.RGBA16I),i===e.INT&&(o=e.RGBA32I)),r===e.RGB&&(i===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),i===e.UNSIGNED_INT_10F_11F_11F_REV&&(o=e.R11F_G11F_B10F)),r===e.RGBA){const t=a?_v:Uv.getTransfer(s);i===e.FLOAT&&(o=e.RGBA32F),i===e.HALF_FLOAT&&(o=e.RGBA16F),i===e.UNSIGNED_BYTE&&(o="srgb"===t?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function x(t,n){let r;return t?null===n||1014===n||1020===n?r=e.DEPTH24_STENCIL8:1015===n?r=e.DEPTH32F_STENCIL8:1012===n&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||1014===n||1020===n?r=e.DEPTH_COMPONENT24:1015===n?r=e.DEPTH_COMPONENT32F:1012===n&&(r=e.DEPTH_COMPONENT16),r}function _(e,t){return!0===g(e)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&c.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let s=0,o=i.length;s<o;s++){const t=r.get(i[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(i[s])}r.remove(t)}(n)}function E(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],a.memory.textures--}let C=0;function A(t,i){const s=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;c.get(e)!==t&&(c.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(s,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(s.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+i)}const T={[og]:e.REPEAT,[lg]:e.CLAMP_TO_EDGE,[ug]:e.MIRRORED_REPEAT},M={[cg]:e.NEAREST,[hg]:e.NEAREST_MIPMAP_NEAREST,[dg]:e.NEAREST_MIPMAP_LINEAR,[pg]:e.LINEAR,[fg]:e.LINEAR_MIPMAP_NEAREST,[mg]:e.LINEAR_MIPMAP_LINEAR},D={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function k(n,s){if(1015!==s.type||!1!==t.has("OES_texture_float_linear")||1006!==s.magFilter&&1007!==s.magFilter&&1005!==s.magFilter&&1008!==s.magFilter&&1006!==s.minFilter&&1007!==s.minFilter&&1005!==s.minFilter&&1008!==s.minFilter||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,T[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[s.minFilter]),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,D[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(1003===s.magFilter)return;if(1005!==s.minFilter&&1008!==s.minFilter)return;if(1015===s.type&&!1===t.has("OES_texture_float_linear"))return;if(s.anisotropy>1||r.get(s).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy}}}function N(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const i=n.source;let s=d.get(i);void 0===s&&(s={},d.set(i,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),s[o].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&E(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return r}function F(e,t,n){return Math.floor(Math.floor(e/n)/t)}function I(t,a,o){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const u=N(t,a),c=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const h=r.get(c);if(c.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+o);const t=Uv.getPrimaries(Uv.workingColorSpace),r=""===a.colorSpace?null:Uv.getPrimaries(a.colorSpace),d=""===a.colorSpace||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(a.image,!1,i.maxTextureSize);p=j(a,p);const f=s.convert(a.format,a.colorSpace),y=s.convert(a.type);let w,S=b(a.internalFormat,f,y,a.colorSpace,a.isVideoTexture);k(l,a);const E=a.mipmaps,C=!0!==a.isVideoTexture,A=void 0===h.__version||!0===u,T=c.dataReady,M=_(a,p);if(a.isDepthTexture)S=x(a.format===Ng,a.type),A&&(C?n.texStorage2D(e.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,f,y,null));else if(a.isDataTexture)if(E.length>0){C&&A&&n.texStorage2D(e.TEXTURE_2D,M,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,y,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,f,y,w.data);a.generateMipmaps=!1}else C?(A&&n.texStorage2D(e.TEXTURE_2D,M,S,p.width,p.height),T&&function(t,r,i,s){const a=t.updateRanges;if(0===a.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,i,s,r.data);else{a.sort((e,t)=>e.start-t.start);let o=0;for(let e=1;e<a.length;e++){const t=a[o],n=a[e],i=t.start+t.count,s=F(n.start,r.width,4),l=F(t.start,r.width,4);n.start<=i+1&&s===l&&F(n.start+n.count-1,r.width,4)===s?t.count=Math.max(t.count,n.start+n.count-t.start):(++o,a[o]=n)}a.length=o+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),u=e.getParameter(e.UNPACK_SKIP_PIXELS),c=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width);for(let t=0,h=a.length;t<h;t++){const o=a[t],l=Math.floor(o.start/4),u=Math.ceil(o.count/4),c=l%r.width,h=Math.floor(l/r.width),d=u,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,h),n.texSubImage2D(e.TEXTURE_2D,0,c,h,d,p,i,s,r.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,u),e.pixelStorei(e.UNPACK_SKIP_ROWS,c)}}(a,p,f,y)):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,f,y,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,S,E[0].width,E[0].height,p.depth);for(let t=0,r=E.length;t<r;t++)if(w=E[t],1023!==a.format)if(null!==f)if(C){if(T)if(a.layerUpdates.size>0){const r=ok(w.width,w.height,a.format,a.type);for(const i of a.layerUpdates){const s=w.data.subarray(i*r/w.data.BYTES_PER_ELEMENT,(i+1)*r/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,w.width,w.height,1,f,s)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,f,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,f,y,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,f,y,w.data)}else{C&&A&&n.texStorage2D(e.TEXTURE_2D,M,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],1023!==a.format?null!==f?C?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,f,y,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,f,y,w.data)}else if(a.isDataArrayTexture)if(C){if(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,S,p.width,p.height,p.depth),T)if(a.layerUpdates.size>0){const t=ok(p.width,p.height,a.format,a.type);for(const r of a.layerUpdates){const i=p.data.subarray(r*t/p.data.BYTES_PER_ELEMENT,(r+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,f,y,i)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,f,y,p.data);else if(a.isData3DTexture)C?(A&&n.texStorage3D(e.TEXTURE_3D,M,S,p.width,p.height,p.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)):n.texImage3D(e.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,f,y,p.data);else if(a.isFramebufferTexture){if(A)if(C)n.texStorage2D(e.TEXTURE_2D,M,S,p.width,p.height);else{let t=p.width,r=p.height;for(let i=0;i<M;i++)n.texImage2D(e.TEXTURE_2D,i,S,t,r,0,f,y,null),t>>=1,r>>=1}}else if(E.length>0){if(C&&A){const t=G(E[0]);n.texStorage2D(e.TEXTURE_2D,M,S,t.width,t.height)}for(let t=0,r=E.length;t<r;t++)w=E[t],C?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,y,w):n.texImage2D(e.TEXTURE_2D,t,S,f,y,w);a.generateMipmaps=!1}else if(C){if(A){const t=G(p);n.texStorage2D(e.TEXTURE_2D,M,S,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,y,p)}else n.texImage2D(e.TEXTURE_2D,0,S,f,y,p);g(a)&&v(l),h.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function R(t,i,a,l,u,c){const h=s.convert(a.format,a.colorSpace),d=s.convert(a.type),p=b(a.internalFormat,h,d,a.colorSpace),f=r.get(i),m=r.get(a);if(m.__renderTarget=i,!f.__hasExternalTextures){const t=Math.max(1,i.width>>c),r=Math.max(1,i.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,p,t,r,i.depth,0,h,d,null):n.texImage2D(u,c,p,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),V(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,u,m.__webglTexture,0,z(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,u,m.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,s=i&&i.isDepthTexture?i.type:null,a=x(n.stencilBuffer,s),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=z(n);V(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const a=t[i],l=s.convert(a.format,a.colorSpace),u=s.convert(a.type),c=b(a.internalFormat,l,u,a.colorSpace),h=z(n);r&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,c,n.width,n.height):V(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function P(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const s=r.get(i.depthTexture);s.__renderTarget=i,s.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);const a=s.__webglTexture,l=z(i);if(1026===i.depthTexture.format)V(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");V(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function O(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?P(i.__webglFramebuffer[0],t):P(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),L(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,s=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,s),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,s)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),L(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const B=[],U=[];function z(e){return Math.min(i.maxSamples,e.samples)}function V(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||"srgb-linear"!==n&&""!==n&&("srgb"===Uv.getTransfer(n)?1023===r&&1009===i||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function G(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(u.width=e.naturalWidth||e.width,u.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(u.width=e.displayWidth,u.height=e.displayHeight):(u.width=e.width,u.height=e.height),u}this.allocateTextureUnit=function(){const e=C;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=A,this.setTexture2DArray=function(t,i){const s=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version?I(s,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const s=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version?I(s,t,i):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,a){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,a,o){if(6!==a.image.length)return;const l=N(t,a),u=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const c=r.get(u);if(u.version!==c.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=Uv.getPrimaries(Uv.workingColorSpace),r=""===a.colorSpace?null:Uv.getPrimaries(a.colorSpace),h=""===a.colorSpace||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?a.image[e].image:a.image[e]:m(a.image[e],!0,i.maxCubemapSize),f[e]=j(a,f[e]);const y=f[0],x=s.convert(a.format,a.colorSpace),w=s.convert(a.type),S=b(a.internalFormat,x,w,a.colorSpace),E=!0!==a.isVideoTexture,C=void 0===c.__version||!0===l,A=u.dataReady;let T,M=_(a,y);if(k(e.TEXTURE_CUBE_MAP,a),d){E&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,M,S,y.width,y.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let r=0;r<T.length;r++){const i=T[r];1023!==a.format?null!==x?E?A&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,w,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,i.width,i.height,0,x,w,i.data)}}}else{if(T=a.mipmaps,E&&C){T.length>0&&M++;const t=G(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,M,S,t.width,t.height)}for(let t=0;t<6;t++)if(p){E?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,x,w,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,f[t].width,f[t].height,0,x,w,f[t].data);for(let r=0;r<T.length;r++){const i=T[r].image[t].image;E?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,x,w,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,i.width,i.height,0,x,w,i.data)}}else{E?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x,w,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,x,w,f[t]);for(let r=0;r<T.length;r++){const i=T[r];E?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,x,w,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,x,w,i.image[t])}}}g(a)&&v(e.TEXTURE_CUBE_MAP),c.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(o,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,i){const s=r.get(t);void 0!==n&&R(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const i=t.texture,o=r.get(t),l=r.get(i);t.addEventListener("dispose",S);const u=t.textures,c=!0===t.isWebGLCubeRenderTarget,h=u.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,a.memory.textures++),c){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=u.length;t<n;t++){const n=r.get(u[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===V(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){const r=u[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const i=s.convert(r.format,r.colorSpace),a=s.convert(r.type),l=b(r.internalFormat,i,a,r.colorSpace,!0===t.isXRRenderTarget),c=z(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),L(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),k(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)R(o.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else R(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,s=u.length;i<s;i++){const s=u[i],a=r.get(s);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,a.__webglTexture),k(l,s),R(o.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+i,l,0),g(s)&&v(l)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),k(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)R(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else R(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,s=t.length;i<s;i++){const s=t[i];if(g(s)){const t=y(e),i=r.get(s).__webglTexture;n.bindTexture(t,i),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===V(t)){const i=t.textures,s=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer);const d=t.texture.mipmaps;d&&d.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),!0===l&&(B.length=0,U.length=0,B.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(B.push(u),U.push(u),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,U)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,B))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=R,this.useMultisampledRTT=V}function WN(e,t){return{convert:function(n,r=""){let i;const s=Uv.getTransfer(r);if(1009===n)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===n)return e.UNSIGNED_INT_5_9_9_9_REV;if(35899===n)return e.UNSIGNED_INT_10F_11F_11F_REV;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(1014===n)return e.UNSIGNED_INT;if(1015===n)return e.FLOAT;if(1016===n)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(1023===n)return e.RGBA;if(1026===n)return e.DEPTH_COMPONENT;if(1027===n)return e.DEPTH_STENCIL;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(33776===n||33777===n||33778===n||33779===n)if("srgb"===s){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(33776===n)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(33776===n)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n||37492===n||37496===n){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(36196===n||37492===n)return"srgb"===s?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(37808===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return"srgb"===s?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n||36494===n||36495===n){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(36492===n)return"srgb"===s?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(36283===n)return i.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===n?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}function $N(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,1===r.side&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),1===r.side&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),s=i.envMap,a=i.envMapRotation;s&&(e.envMap.value=s,z_.copy(a),z_.x*=-1,z_.y*=-1,z_.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(z_.y*=-1,z_.z*=-1),e.envMapRotation.value.setFromMatrix4(V_.makeRotationFromEuler(z_)),e.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,sk(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,s,a,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform)),e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate())),t.dispersion>0&&(e.dispersion.value=t.dispersion),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,o)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,s,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function qN(e,t,n,r){let i={},s={},a=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,s=t+"_"+n;if(void 0===r[s])return r[s]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[s];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[s]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function u(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){const n=t.target;n.removeEventListener("dispose",c);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(e){const t=e.uniforms;let n=0;const r=16;for(let s=0,a=t.length;s<a;s++){const e=Array.isArray(t[s])?t[s]:[t[s]];for(let t=0,i=e.length;t<i;t++){const i=e[t],s=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=s.length;e<t;e++){const t=u(s[e]),a=n%r,o=a%t.boundary,l=a+o;n+=o,0!==l&&r-l<t.storage&&(n+=r-l),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i),e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,a=r.length;i<a;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,s)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let s=0;s<n.length;s++){const a=n[s],o=u(a);"number"==typeof a||"boolean"==typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},s={}}}}function XN(){const e=(0,M.useRef)(null);return(0,M.useEffect)(()=>{const t=e.current;if(!t)return;const n=new j_({canvas:t,antialias:!1,alpha:!0});n.setClearColor(0,0);const r=new lx;r.background=new mb(8421504);const i=new Fx(-1,1,1,-1,0,1),s=new K_(n);s.addPass(new Q_(r,i));const a=new ew(.26,.24,648,!1);s.addPass(a),s.addPass(new nw);const o=()=>{const e=Math.min(window.devicePixelRatio||1,1.5);n.setPixelRatio(e),n.setSize(window.innerWidth,window.innerHeight,!1),s.setSize(window.innerWidth,window.innerHeight)};let l;window.addEventListener("resize",o),o();const u=()=>{s.render(),l=requestAnimationFrame(u)};return u(),()=>{cancelAnimationFrame(l),window.removeEventListener("resize",o),s.dispose(),n.dispose()}},[]),(0,sg.jsx)("canvas",{id:"filmLayer",ref:e,style:{position:"fixed",inset:0,zIndex:0,pointerEvents:"none",mixBlendMode:"soft-light",opacity:1}})}function YN({show:e=!0}){const t=(0,M.useId)().replace(/:/g,"");return e?(0,sg.jsx)("div",{className:"preload",role:"status","aria-label":"Loading",children:(0,sg.jsxs)("svg",{className:"goo",viewBox:"0 0 300 140","aria-hidden":"true",children:[(0,sg.jsxs)("defs",{children:[(0,sg.jsxs)("filter",{id:`cellMorph-${t}`,children:[(0,sg.jsx)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),(0,sg.jsx)("feColorMatrix",{in:"blur",mode:"matrix",values:"\n                1 0 0 0 0\n                0 1 0 0 0\n                0 0 1 0 0\n                0 0 0 19 -9\n              ",result:"morph"}),(0,sg.jsx)("feComposite",{in:"SourceGraphic",in2:"morph",operator:"atop"})]}),(0,sg.jsxs)("filter",{id:`blobNoise-${t}`,x:"-40%",y:"-40%",width:"180%",height:"180%",children:[(0,sg.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0.015",numOctaves:"1",seed:"8",result:"noise",children:(0,sg.jsx)("animate",{attributeName:"baseFrequency",dur:"3.5s",values:"0.012;0.02;0.012",repeatCount:"indefinite"})}),(0,sg.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"18",xChannelSelector:"R",yChannelSelector:"G"})]}),(0,sg.jsxs)("linearGradient",{id:`blobGrad-${t}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,sg.jsx)("stop",{offset:"0%",stopColor:"#f7eaac"}),(0,sg.jsx)("stop",{offset:"100%",stopColor:"#f7eaac"})]})]}),(0,sg.jsxs)("g",{className:"cell",filter:`url(#cellMorph-${t})`,children:[(0,sg.jsx)("rect",{x:"0",y:"0",width:"300",height:"140",fill:"transparent",opacity:"0"}),(0,sg.jsxs)("g",{transform:"translate(150 70)",children:[(0,sg.jsx)("g",{className:"blob blob-a",children:(0,sg.jsx)("circle",{cx:"0",cy:"0",r:"50",fill:`url(#blobGrad-${t})`,filter:`url(#blobNoise-${t})`})}),(0,sg.jsx)("g",{className:"blob blob-b",children:(0,sg.jsx)("circle",{cx:"0",cy:"0",r:"50",fill:`url(#blobGrad-${t})`,filter:`url(#blobNoise-${t})`})})]})]})]})}):null}function ZN(){const{hash:e}=sS(),[t,n]=(0,M.useState)(!1),[r,i]=(0,M.useState)(!1),[s,a]=(0,M.useState)(!0),o=(0,M.useRef)(Date.now());(0,M.useEffect)(()=>{"#about"===e&&requestAnimationFrame(()=>{document.getElementById("about")?.scrollIntoView({behavior:"smooth"})})},[e]),(0,M.useEffect)(()=>{const e=()=>{i(window.innerWidth<=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const l=r?"./SquishyYellowMobileHolland.html":"./SquishyYellow.html";return(0,M.useEffect)(()=>{o.current=Date.now(),a(!0)},[l]),(0,M.useEffect)(()=>(document.body.style.overflow=s?"hidden":"",()=>{document.body.style.overflow=""}),[s]),(0,sg.jsxs)(sg.Fragment,{children:[(0,sg.jsx)(YN,{show:s}),(0,sg.jsx)(XN,{}),(0,sg.jsxs)("main",{className:"home-container",children:[(0,sg.jsxs)("section",{className:"left-column",children:[(0,sg.jsx)("div",{className:"menu-wrapper",children:(0,sg.jsx)(BD,{isOpen:t,onClick:()=>n(e=>!e)})}),(0,sg.jsx)("svg",{width:"0",height:"0",children:(0,sg.jsxs)("filter",{id:"blur-melt",children:[(0,sg.jsx)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blur",children:(0,sg.jsx)("animate",{attributeName:"stdDeviation",values:"2; 2; 2; 2",keyTimes:"0; 0.3; 0.7; 1",dur:"2s",repeatCount:"indefinite"})}),(0,sg.jsx)("feComponentTransfer",{children:(0,sg.jsx)("feFuncA",{type:"linear",slope:"30",intercept:"-12"})})]})}),(0,sg.jsxs)("div",{id:"full-paragraph-container",className:"full-paragraph intro-text mobile-text-offset",children:[(0,sg.jsx)(zD,{texts:["CREATIVE","COMPUTER","SOFTWARE","WEBSITE"],className:"morph-word"})," ",(0,sg.jsx)(zD,{texts:["TECHNOLOGIST","SCIENTIST","ENGINEER","DESIGNER"],className:"morph-word"}),(0,sg.jsx)("div",{className:"location-line",children:"based in Brooklyn "})]}),(0,sg.jsxs)("div",{className:"desktop-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsxs)("div",{className:"mobile-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]})]}),(0,sg.jsx)("section",{className:"right-column",children:(0,sg.jsx)("iframe",{src:l,title:"Squishy Letters",className:"squishy-frame",onLoad:()=>{const e=Date.now()-o.current,t=Math.max(3e3-e,0);setTimeout(()=>{a(!1)},t)},onError:()=>a(!1)},l)}),t&&(0,sg.jsx)("div",{className:"slideout-backdrop",onClick:()=>n(!1)}),(0,sg.jsx)("aside",{className:"slideout-menu "+(t?"open":""),children:(0,sg.jsxs)("ul",{children:[(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"/work",onClick:()=>n(!1),children:"Work"})}),(0,sg.jsxs)("li",{children:[(0,sg.jsx)("a",{href:"/home#about",onClick:()=>n(!1),children:"About"})," "]}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"mailto:hollandblumer6@icloud.com?subject=Website%20Inquiry&body=Hi%20Holland!",onClick:()=>n(!1),children:"Contact"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"/templates",onClick:()=>n(!1),children:"Templates"})})]})})]}),(0,sg.jsx)(UD,{})]})}function KN(){return(0,sg.jsxs)("main",{className:"page",children:[(0,sg.jsx)("h1",{children:"Resume"}),(0,sg.jsx)("p",{children:"PDF link, highlights, skills, tools."})]})}function QN(){const[e,t]=(0,M.useState)(!1),[n,r]=(0,M.useState)("featured"),[i,s]=(0,M.useState)(!0),a=(0,M.useRef)(Date.now()),o=(0,M.useRef)(null),l=(0,M.useMemo)(()=>`${iw("SmearTextWork.html")}?text=WORK&scale=3.7`,[]);(0,M.useEffect)(()=>(a.current=Date.now(),s(!0),o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{s(!1)},6500),()=>{o.current&&window.clearTimeout(o.current),o.current=null}),[l]),(0,M.useEffect)(()=>(document.body.style.overflow=i?"hidden":"",()=>{document.body.style.overflow=""}),[i]);const u=(0,M.useMemo)(()=>rw.filter(e=>"all"===n||e.categories.includes(n)),[n]),c=(0,M.useCallback)((e,t)=>{t||e.currentTarget.play?.().catch?.(()=>{})},[]),h=(0,M.useCallback)((e,t)=>{if(t)return;const n=e.currentTarget;n.pause?.();try{n.currentTime=0}catch{}},[]);return(0,sg.jsxs)(sg.Fragment,{children:[(0,sg.jsx)(YN,{show:i}),(0,sg.jsx)(XN,{}),(0,sg.jsxs)("main",{className:"projects-section page",children:[(0,sg.jsxs)("div",{className:"mobile-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsxs)("div",{className:"work-nav",children:[(0,sg.jsx)("div",{className:"work-menu-wrapper",children:(0,sg.jsx)(BD,{isOpen:e,onClick:()=>t(e=>!e)})})," ",(0,sg.jsxs)("div",{className:"work-desktop-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsx)("aside",{className:"slideout-menu "+(e?"open":""),children:(0,sg.jsxs)("ul",{children:[(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/work",onClick:()=>t(!1),children:"Work"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/home#about",onClick:()=>t(!1),children:"About"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/templates",onClick:()=>t(!1),children:"Templates"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"mailto:hollandblumer6@icloud.com?subject=Website%20Inquiry&body=Hi%20Holland!",onClick:()=>t(!1),children:"Contact"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"/home",onClick:()=>t(!1),children:"Home"})})]})})]}),(0,sg.jsxs)("div",{className:"projects-header",children:[(0,sg.jsx)("iframe",{src:l,title:"Squishy Letters",className:"work-frame "+(i?"is-hidden":""),loading:"eager",onLoad:()=>{const e=Date.now()-a.current,t=Math.max(1200-e,0);window.setTimeout(()=>s(!1),t)},onError:()=>s(!1)},l),(0,sg.jsx)("div",{style:{width:"100%",maxWidth:1e3,margin:"0 auto"}}),(0,sg.jsx)("div",{className:"filter-menu",children:["featured","for clients","research","creative"].map(e=>(0,sg.jsx)("button",{className:"filter-button "+(n===e?"active":""),onClick:()=>r(e),children:e.toUpperCase()},e))})]}),(0,sg.jsx)("div",{className:"projects-grid",children:u.map((e,t)=>{const n="partana"===e.slug?"/templates":`/work/${e.slug}`,r=t<4&&"video"===e.type;return(0,sg.jsxs)(le,{to:n,className:"project-card-link",children:[(0,sg.jsx)("div",{className:"media-frame",children:"video"===e.type?(0,sg.jsx)("video",{src:e.videoSrc,poster:e.posterSrc,muted:!0,loop:!0,playsInline:!0,preload:r?"metadata":"none",autoPlay:r,onMouseEnter:e=>c(e,r),onMouseLeave:e=>h(e,r),onTouchStart:e=>c(e,r),controls:!1}):(0,sg.jsx)("img",{src:e.imageSrc,alt:e.title,loading:"lazy"})}),(0,sg.jsx)("h3",{className:"project-title",children:e.title})]},e.id)})})]})]})}function JN({imageUrl:e}){const t=(e,t={})=>{uw.default.event(e,{category:"smear_effect",...t})},n=(0,M.useRef)(null),r=(0,M.useRef)(null),i=(0,M.useRef)(null),s=(0,M.useRef)(null),a=(0,M.useRef)(null),o=(0,M.useRef)({width:0,height:0}),[l,u]=(0,M.useState)(!1),[c,h]=(0,M.useState)(""),[d,p]=(0,M.useState)({width:0,height:0}),[f,m]=(0,M.useState)(cw),[g,v]=(0,M.useState)(hw),[y,b]=(0,M.useState)(dw),[x,_]=(0,M.useState)(pw),[w,S]=(0,M.useState)(fw),[E,C]=(0,M.useState)(mw),[A,T]=(0,M.useState)(gw),[D,k]=(0,M.useState)(vw),[N,F]=(0,M.useState)(yw),[I,R]=(0,M.useState)(xw),[L,P]=(0,M.useState)(null),O=(0,M.useRef)(null),[B,U]=(0,M.useState)(null),z=(0,M.useRef)(null),V=(0,M.useRef)([]),j=(0,M.useRef)(null),[G,H]=(0,M.useState)(!1),[W,$]=(0,M.useState)(_w),q=L||e||ww;function X(){const e=n.current,t=a.current;if(!e||!t)return;const{width:r,height:l}=o.current,u=e.getContext("2d");s.current=performance.now(),cancelAnimationFrame(i.current),i.current=requestAnimationFrame(function e(n){const a=n-(s.current??n),o=bw,c=I,h=Math.max(0,a-o),d=Math.min(h/c,1),p=l*(D/100),m=l*(N/100),g=Math.floor(function(e,t,n){return e+(t-e)*n}(p,m,d)),v=a/1e3*1.2,b=u.createImageData(r,l),_=b.data;if(_.set(t),"up"===A){const e=l-1,n=e-g+1;if(n>0)for(let i=g;i<=e;i++){const e=(i-g)/n;for(let n=0;n<r;n++){const s=Math.sin(i*E+v)*y*f*e,a=Math.sin(n*w+.1*i+.6*v)*x*f*e;let o=Math.floor(n+s+a);o=Math.max(0,Math.min(o,r-1));const l=4*(i*r+n),u=4*(i*r+o);_[l]=t[u],_[l+1]=t[u+1],_[l+2]=t[u+2],_[l+3]=255}}}else{const e=0,n=g-e+1;if(n>0)for(let i=e;i<=g;i++){const e=(g-i)/n;for(let n=0;n<r;n++){const s=Math.sin(i*E+v)*y*f*e,a=Math.sin(n*w+.1*i+.6*v)*x*f*e;let o=Math.floor(n+s+a);o=Math.max(0,Math.min(o,r-1));const l=4*(i*r+n),u=4*(i*r+o);_[l]=t[u],_[l+1]=t[u+1],_[l+2]=t[u+2],_[l+3]=255}}}u.putImageData(b,0,0),i.current=requestAnimationFrame(e)})}function Y(e){U(t=>t===e?null:e)}(0,M.useEffect)(()=>{if(!q)return;const e=new Image;return e.crossOrigin="anonymous",e.src=q,e.onload=()=>{r.current=e,u(!0),h(""),function(e){const t=n.current;if(!t||!e)return;const r=t.getContext("2d"),i=e.width||800,s=e.height||1169,l="undefined"!=typeof window?window.innerWidth:1200,u="undefined"!=typeof window?window.innerHeight:800,c=Math.min(800,l-40),h=u-200,d=Math.min(c/i,h/s),f=Math.round(i*d),m=Math.round(s*d);t.width=f,t.height=m,o.current={width:f,height:m},p({width:f,height:m}),r.clearRect(0,0,f,m),r.drawImage(e,0,0,f,m);const g=r.getImageData(0,0,f,m);a.current=new Uint8ClampedArray(g.data)}(e),X()},e.onerror=()=>{h("Could not load image"),u(!1)},()=>{cancelAnimationFrame(i.current)}},[q,f,y,x,w,E,A,D,N,I]),(0,M.useEffect)(()=>()=>{O.current&&URL.revokeObjectURL(O.current),j.current&&clearTimeout(j.current),z.current&&"recording"===z.current.state&&z.current.stop(),cancelAnimationFrame(i.current)},[]);const Z=d.height*(1-g),K=Array.from({length:13},(e,t)=>t+3);return(0,sg.jsxs)("section",{className:"smear-wrapper",children:[(0,sg.jsxs)("div",{className:"smear-step smear-step-1",children:[(0,sg.jsx)("h2",{className:"smear-step-title",children:"Step 1: Choose an image and set the size"}),(0,sg.jsxs)("div",{className:"smear-row",children:[(0,sg.jsxs)("label",{className:"smear-control smear-control-inline",children:[(0,sg.jsx)("div",{className:"smear-label-row",children:(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Upload image"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("upload"),children:"i"}),"upload"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Pick your own image instead of the default one."})]})}),(0,sg.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){const n=e.target.files?.[0];if(!n)return;t("smear_choose_file",{file_type:n.type||"unknown",file_size_kb:Math.round((n.size||0)/1024)}),O.current&&URL.revokeObjectURL(O.current);const r=URL.createObjectURL(n);O.current=r,P(r)}})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Image scale"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("imageScale"),children:"i"}),"imageScale"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Zoom the whole image in or out."})]}),(0,sg.jsx)("span",{className:"smear-value",children:g.toFixed(2)})]}),(0,sg.jsx)("input",{type:"range",min:"0.3",max:"1.5",step:"0.1",value:g,onChange:e=>v(parseFloat(e.target.value))})]})]})]}),(0,sg.jsxs)("div",{className:"smear-step smear-step-2",children:[(0,sg.jsx)("h2",{className:"smear-step-title",children:"Step 2: Edit smear settings"}),(0,sg.jsxs)("details",{className:"smear-group",children:[(0,sg.jsx)("summary",{className:"smear-group-title",children:"Smear style (wiggles & wobble)"}),(0,sg.jsxs)("div",{className:"smear-row smear-row-spaced",children:[(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Smear scale"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("smearScale"),children:"i"}),"smearScale"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Overall strength of the smear warp."})]}),(0,sg.jsx)("span",{className:"smear-value",children:f.toFixed(2)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"3",step:"0.1",value:f,onChange:e=>m(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Base wave"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("baseWave"),children:"i"}),"baseWave"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Big, slow side-to-side wobble."})]}),(0,sg.jsx)("span",{className:"smear-value",children:y.toFixed(0)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"150",step:"1",value:y,onChange:e=>b(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Fine wave"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("fineWave"),children:"i"}),"fineWave"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Smaller detailed wiggles inside the smear."})]}),(0,sg.jsx)("span",{className:"smear-value",children:x.toFixed(0)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"60",step:"1",value:x,onChange:e=>_(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"freqX"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("freqX"),children:"i"}),"freqX"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"How tight the wiggles are left-to-right."})]}),(0,sg.jsx)("span",{className:"smear-value",children:w.toFixed(3)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"0.2",step:"0.005",value:w,onChange:e=>S(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"freqY"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("freqY"),children:"i"}),"freqY"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"How tight the waves are top-to-bottom."})]}),(0,sg.jsx)("span",{className:"smear-value",children:E.toFixed(3)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:E,onChange:e=>C(parseFloat(e.target.value))})]})]})]}),(0,sg.jsxs)("details",{className:"smear-group",children:[(0,sg.jsx)("summary",{className:"smear-group-title",children:"Smear span & flow direction"}),(0,sg.jsxs)("div",{className:"smear-row",children:[(0,sg.jsxs)("label",{className:"smear-control smear-control-inline",children:[(0,sg.jsx)("div",{className:"smear-label-row",children:(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Direction"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("direction"),children:"i"}),"direction"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Choose if the smear moves up or down."})]})}),(0,sg.jsxs)("select",{className:"smear-select",value:A,onChange:e=>T(e.target.value),children:[(0,sg.jsx)("option",{value:"up",children:"Up"}),(0,sg.jsx)("option",{value:"down",children:"Down"})]})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Start %"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("startPercent"),children:"i"}),"startPercent"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Where the smear band begins (0% top, 100% bottom)."})]}),(0,sg.jsxs)("span",{className:"smear-value",children:[D.toFixed(0),"%"]})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"100",step:"1",value:D,onChange:e=>k(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"End %"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("endPercent"),children:"i"}),"endPercent"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"Where the smear band ends over time."})]}),(0,sg.jsxs)("span",{className:"smear-value",children:[N.toFixed(0),"%"]})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"100",step:"1",value:N,onChange:e=>F(parseFloat(e.target.value))})]}),(0,sg.jsxs)("label",{className:"smear-control",children:[(0,sg.jsxs)("div",{className:"smear-label-row",children:[(0,sg.jsxs)("span",{className:"smear-info-wrap",children:[(0,sg.jsx)("span",{className:"smear-label",children:"Travel time"}),(0,sg.jsx)("button",{type:"button",className:"smear-info-icon",onClick:()=>Y("duration"),children:"i"}),"duration"===B&&(0,sg.jsx)("div",{className:"smear-info-tooltip",children:"How long the smear takes to move from start to end."})]}),(0,sg.jsxs)("span",{className:"smear-value",children:[(I/1e3).toFixed(1),"s"]})]}),(0,sg.jsx)("input",{type:"range",min:"2",max:"30",step:"1",value:I/1e3,onChange:e=>R(1e3*parseFloat(e.target.value))})]})]})]}),(0,sg.jsx)("div",{className:"smear-row smear-row-bottom",children:(0,sg.jsx)("button",{type:"button",className:"smear-reset-button",onClick:function(){t("smear_reset_all"),m(cw),v(hw),b(dw),_(pw),S(fw),C(mw),T(gw),k(vw),F(yw),R(xw),O.current&&(URL.revokeObjectURL(O.current),O.current=null),P(null),U(null),cancelAnimationFrame(i.current),X()},children:"Reset all settings"})})]}),(0,sg.jsxs)("div",{className:"smear-canvas-wrapper",children:[(0,sg.jsx)("h3",{className:"smear-preview-title",children:"Preview"}),(0,sg.jsx)("div",{className:"smear-canvas-inner",style:{width:`${d.width}px`,height:`${d.height}px`,transform:`scale(${g})`,transformOrigin:"top center"},children:(0,sg.jsx)("canvas",{ref:n})}),!l&&!c&&(0,sg.jsx)("p",{className:"smear-status",children:"Loading template previewâ€¦"}),c&&(0,sg.jsx)("p",{className:"smear-status error",children:c})]}),(0,sg.jsx)("h2",{className:"smear-step-title",style:{marginTop:`-${Z}px`},children:"Step 3: Save your work"}),(0,sg.jsxs)("div",{className:"smear-export-controls",children:[(0,sg.jsx)("button",{type:"button",className:"smear-export-button",onClick:function(){t("smear_capture_image");const e=n.current;if(!e)return;const r=document.createElement("a");r.href=e.toDataURL("image/png"),r.download="smear-frame.png",r.click()},children:"Save frame as image"}),(0,sg.jsxs)("div",{className:"smear-record-row",children:[(0,sg.jsx)("button",{type:"button",className:"smear-export-button",onClick:function(){t("smear_record_start",{duration_s:W}),cancelAnimationFrame(i.current),X();const e=Math.round(1e3*W);requestAnimationFrame(()=>function(e){if(G)return;const r=n.current;if(!r)return;j.current&&(clearTimeout(j.current),j.current=null);const i=r.captureStream(30),s=new MediaRecorder(i,{mimeType:"video/webm;codecs=vp9"});V.current=[],s.ondataavailable=e=>{e.data.size>0&&V.current.push(e.data)},s.onstop=()=>{t("smear_record_complete",{duration_s:Math.round(e/1e3)}),H(!1);const n=new Blob(V.current,{type:"video/webm"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="smear-clip.webm",i.click(),URL.revokeObjectURL(r)},z.current=s,s.start(),H(!0),j.current=setTimeout(()=>{z.current&&"recording"===z.current.state&&z.current.stop()},e)}(e))},disabled:G,children:G?`Recording ${W}sâ€¦`:"Record Video"}),(0,sg.jsxs)("label",{className:"smear-record-duration",children:[(0,sg.jsx)("span",{className:"smear-record-label",children:"Duration"}),(0,sg.jsx)("select",{className:"smear-select",value:W,onChange:e=>$(parseInt(e.target.value,10)),disabled:G,children:K.map(e=>(0,sg.jsxs)("option",{value:e,children:[e,"s"]},e))})]})]})]})]})}function eF({className:e,style:t,textPx:n=120,autoResponsive:r=!0,desktopPx:i=110,text:s="loading",topColor:a="#F7EAAC",botColor:o="#F7EAAC",edgeThresh:l=.05,autoHeight:u=!0,heightScale:c=1.6,minHeightPx:h=240,ipadBp:d=1024,mobileBp:p=700,ipadScale:f=.7,mobileScale:m=.6,breathe:g=!0,breathWMaxDesign:v=32,breathWMinDesign:y=20,breathPeriodMs:b=600,breathEasing:x="sin",fps:_=30,subRows:w=3,rowHBase:S=6,colWBase:E=9,diamondHBase:C=3.2,stagger:A=!0}){const T=(0,M.useRef)(null),D=(0,M.useRef)(null),k=(0,M.useRef)(null);return(0,M.useEffect)(()=>{const e=T.current;if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return D.current=new xs(e=>{let t,M,D,k,N,F,I,R,L,P,O,B=[],U=0;const z=()=>r?i:n,V=()=>{const e=t/100;M=S*e,D=E*e,k=w,N=C*e,F=A,I=v*e,R=y*e};function j(){L=e.createGraphics(e.width,e.height),L.clear(),L.pixelDensity(1),L.textAlign(e.CENTER,e.BASELINE),L.textFont("'Times New Roman', Times, serif"),L.textSize(t);const n=L.textAscent(),r=L.textDescent(),i=n+r,a=e.height/2+(n-i/2),o=T.current;o&&(o.style.setProperty("--title-baseline",`${a}px`),o.style.setProperty("--title-capline",a-n+"px"),o.style.setProperty("--title-bottom",`${a+r}px`)),L.fill(255),L.text(s,e.width/2,a),L.loadPixels()}function G(t,n){let r=0;for(let i=-1;i<=1;i++)for(let s=-1;s<=1;s++){const a=e.constrain(Math.floor(t+s),0,e.width-1),o=e.constrain(Math.floor(n+i),0,e.height-1),l=L.pixels[4*(o*e.width+a)+3]/255;l>r&&(r=l)}return r}const H=(e,t)=>{const n=43758.5453*Math.sin(12.9898*e+78.233*t);return n-Math.floor(n)};function W(){B.length=0;for(let t=.5*M;t<e.height;t+=M){const n=F&&Math.floor(t/M)%2==1?.5*D:0;for(let r=0;r<k;r++){const i=t+.7*N*(r-(k-1)/2);for(let t=n+.5*D;t<e.width;t+=D){const e=G(t,i);if(e>=l){const n=H(t,i)*Math.PI*2;B.push({x:t,y:i,a:e,phase:n})}}}}}const $=e=>e<=p?m:e<=d?f:1;function q(e){return.5*Math.sin(e)+.5}e.setup=()=>{const n=T.current,r=Math.max(1,Math.floor(n.clientWidth)),i=Math.max(1,Math.floor(n.clientHeight||300)),s=$(r);let l=z()*s;const d=Math.max(Math.floor(h*s),120),p=u?Math.max(d,Math.floor(l*c)):i;u||(l=Math.min(l,Math.floor(p/Math.max(1e-6,c)))),t=l,V();const f=u?p:i;u&&(n.style.height=`${f}px`),e.pixelDensity(1),e.createCanvas(r,f),e.clear(),P=e.color(a),O=e.color(o),j(),W(),e.frameRate(_),U=e.millis(),g?e.loop():e.noLoop()},e.draw=()=>{e.clear();const t=(e.millis()-U)/b*Math.PI*2;for(let n=0;n<B.length;n++){const r=B[n];let i;if(g){const n=t+r.phase,s="cos"===x?-.5*Math.cos(n)+.5:q(n);i=e.lerp(R,I,s)*r.a}else i=I*r.a;const s=N,a=e.constrain(r.y/e.height,0,1),o=e.lerpColor(P,O,a);o.setAlpha(255),e.fill(o),e.noStroke(),e.beginShape(),e.vertex(r.x,r.y-s/2),e.vertex(r.x+i/2,r.y),e.vertex(r.x,r.y+s/2),e.vertex(r.x-i/2,r.y),e.endShape(e.CLOSE)}},e.onResizeHost=()=>{const n=T.current;if(!n)return;const r=Math.max(1,Math.floor(n.clientWidth)),i=Math.max(1,Math.floor(n.clientHeight||300)),s=$(r);let a=z()*s;const o=Math.max(Math.floor(h*s),120),l=u?Math.max(o,Math.floor(a*c)):i;u||(a=Math.min(a,Math.floor(l/Math.max(1e-6,c)))),t=a,V();const d=u?l:i;u&&(n.style.height=`${d}px`),e.resizeCanvas(r,d,!1),j(),W(),e.redraw()}},e),k.current=new ResizeObserver(()=>{D.current?.onResizeHost&&D.current.onResizeHost()}),k.current.observe(e),()=>{k.current?.disconnect(),k.current=null,D.current&&(D.current.remove(),D.current=null)}}},[n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_,w,S,E,C,A]),(0,sg.jsx)("div",{ref:T,className:e,style:{position:"relative",width:"100%",height:u?void 0:"300px",overflow:"visible",...t}})}function tF(){const e=(e,t={})=>{Sw.default.event(e,{category:"ikat_text",...t})},[t,n]=(0,M.useState)(Ew),[r,i]=(0,M.useState)(Cw),[s,a]=(0,M.useState)(Tw),[o,l]=(0,M.useState)(Aw),[u,c]=(0,M.useState)(Mw),[h,d]=(0,M.useState)(Dw),[p,f]=(0,M.useState)(!0),[m,g]=(0,M.useState)(kw),[v,y]=(0,M.useState)(Nw),[b,x]=(0,M.useState)(!0),[_,w]=(0,M.useState)(!0),[S,E]=(0,M.useState)(7),[C,A]=(0,M.useState)(!1),T=(0,M.useRef)(null),D=(0,M.useMemo)(()=>t.replace(/\r\n/g,"\n").split("\n"),[t]),k=()=>T.current?Array.from(T.current.querySelectorAll("canvas")):[],N=(e=h)=>{const t=k().filter(Boolean);if(0===t.length)return null;const n=t.map(e=>({w:e.width||Math.max(1,Math.floor(e.getBoundingClientRect().width)),h:e.height||Math.max(1,Math.floor(e.getBoundingClientRect().height))})),r=Math.max(...n.map(e=>e.w)),i=n.reduce((e,t)=>e+t.h,0)+Math.max(0,t.length-1)*Math.max(0,e),s=document.createElement("canvas");s.width=Math.max(1,r),s.height=Math.max(1,i);const a=s.getContext("2d");if(!a)return null;let o=0;return t.forEach((i,s)=>{const{w:l,h:u}=n[s],c=Math.floor((r-l)/2);a.drawImage(i,0,0,l,u,c,o,l,u),o+=u+(s===t.length-1?0:Math.max(0,e))}),s},F=(0,M.useRef)([]),[I,R]=(0,M.useState)(0);(0,M.useLayoutEffect)(()=>{if(h>20)return void R(0);const e=F.current.filter(Boolean);if(e.length<2)return void R(0);const t=e.map(e=>e.getBoundingClientRect().height),n=t.reduce((e,t)=>e+t,0)/t.length,i=1*r,s=Math.max(0,n-i),a=0===h?.9:.6,o=Math.round(s*a);R(Math.max(0,Math.min(o,Math.round(.8*r))))},[D.length,s,r,h,p,m,v]);const L={fontSize:`${r}px`},P=(e,t)=>{const n=`${t}-${e}`;return"animated"===s?(0,sg.jsx)(eF,{text:e||" ",autoResponsive:!1,textPx:r,autoHeight:!0,heightScale:.2,topColor:o,botColor:o,breathe:p,breathPeriodMs:m},n):(0,sg.jsx)(PD,{text:e||" ",letterSpacing:u,baselinePx:60,tightPadPx:30,fitToCssFont:!0,topColor:o,botColor:o,fadeEdge:v,style:L},n)};return(0,sg.jsxs)("section",{className:"ikat-text-effect-wrapper",children:[(0,sg.jsxs)("div",{className:"ikat-controls",children:[(0,sg.jsxs)("div",{className:"ikat-step ikat-step-1",children:[(0,sg.jsx)("h1",{className:"ikat-step-title",children:"Step 1: Select which look you want"}),(0,sg.jsxs)("div",{className:"ikat-row ikat-look-row",children:[(0,sg.jsx)("button",{type:"button",className:"ikat-look-option"+("animated"===s?" ikat-look-option--active":""),onClick:()=>{e("ikat_select_look",{look:"animated"}),a("animated")},children:(0,sg.jsx)("div",{className:"ikat-look-preview",children:(0,sg.jsx)(eF,{text:"LOOK 1",autoResponsive:!1,textPx:120,autoHeight:!0,heightScale:1,topColor:"#F7EAAC",botColor:"#F7EAAC",breathe:!0,breathPeriodMs:kw})})}),(0,sg.jsx)("button",{type:"button",className:"ikat-look-option"+("dense"===s?" ikat-look-option--active":""),onClick:()=>{e("ikat_select_look",{look:"dense"}),a("dense")},children:(0,sg.jsx)("div",{className:"ikat-look-preview",style:{fontSize:"60px"},children:(0,sg.jsx)(PD,{text:"LOOK 2",letterSpacing:10,baselinePx:60,tightPadPx:30,fitToCssFont:!0,topColor:"#F7EAAC",botColor:"#F7EAAC"})})})]})]}),(0,sg.jsxs)("div",{className:"ikat-step ikat-step-2",children:[(0,sg.jsx)("h1",{className:"ikat-step-title",children:"Step 2: Add your text "}),(0,sg.jsx)("div",{className:"ikat-row",children:(0,sg.jsxs)("label",{className:"ikat-control ikat-control-wide",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Text (Enter adds a new line)"}),(0,sg.jsx)("textarea",{rows:3,value:t,onChange:e=>n(e.target.value)})]})})]}),(0,sg.jsxs)("div",{className:"ikat-step ikat-step-3",children:[(0,sg.jsx)("h1",{className:"ikat-step-title",children:"Step 3: Edit letter settings"}),(0,sg.jsxs)("button",{type:"button",className:"ikat-step-title ikat-step-title--dropdown",onClick:()=>x(e=>!e),children:[(0,sg.jsx)("span",{className:"ikat-step-caret"+(b?" ikat-step-caret--open":""),children:"â–¾"}),(0,sg.jsx)("span",{className:"ikat-dropdown-title",children:"Text size + letter spacing"})]}),b&&(0,sg.jsxs)("div",{className:"ikat-row ikat-dropdown-body",children:[(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Text size (px)"}),(0,sg.jsx)("span",{className:"ikat-value",children:r})]}),(0,sg.jsx)("input",{type:"range",min:"50",max:"200",step:"5",value:r,onChange:e=>i(parseInt(e.target.value,10))})]}),(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Letter spacing (px)"}),(0,sg.jsx)("span",{className:"ikat-value",children:u})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"50",step:"1",value:u,onChange:e=>c(parseInt(e.target.value,10))})]}),(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Line spacing (px)"}),(0,sg.jsx)("span",{className:"ikat-value",children:h})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"80",step:"1",value:h,onChange:e=>d(parseInt(e.target.value,10))}),I>0&&(0,sg.jsxs)("span",{className:"ikat-helper",children:["Auto-tightening: overlapping ",I,"px to remove canvas padding."]})]})]}),(0,sg.jsxs)("button",{type:"button",className:"ikat-step-title ikat-step-title--dropdown",onClick:()=>w(e=>!e),children:[(0,sg.jsx)("span",{className:"ikat-step-caret"+(_?" ikat-step-caret--open":""),children:"â–¾"}),(0,sg.jsx)("span",{className:"ikat-dropdown-title",children:"animated"===s?"Look 1 motion settings":"Look 2 density settings"})]}),_&&(0,sg.jsx)("div",{className:"ikat-dropdown-body",children:"animated"===s?(0,sg.jsxs)("div",{className:"ikat-row",children:[(0,sg.jsxs)("label",{className:"ikat-control ikat-control-inline",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Breathing"}),(0,sg.jsx)("input",{type:"checkbox",checked:p,onChange:e=>f(e.target.checked)})]}),(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Breath period (ms)"}),(0,sg.jsx)("span",{className:"ikat-value",children:m})]}),(0,sg.jsx)("input",{type:"range",min:"500",max:"4000",step:"50",value:m,onChange:e=>g(parseInt(e.target.value,10))})]})]}):(0,sg.jsx)("div",{className:"ikat-row",children:(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Edge fade factor"}),(0,sg.jsx)("span",{className:"ikat-value",children:v.toFixed(2)})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:v,onChange:e=>y(parseFloat(e.target.value))})]})})})]}),(0,sg.jsxs)("div",{className:"ikat-step ikat-step-4 ikat-step--highlight",children:[(0,sg.jsx)("h1",{className:"ikat-step-title",children:"Step 4: Pick a color"}),(0,sg.jsx)("div",{className:"ikat-row",children:(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Main color"}),(0,sg.jsx)("input",{type:"color",value:o,onChange:t=>{const n=t.target.value;e("ikat_color_change",{color:n}),l(n)}})]})})]}),(0,sg.jsx)("div",{className:"ikat-row ikat-reset-row",children:(0,sg.jsx)("button",{className:"ikat-reset-button",type:"button",onClick:()=>{e("ikat_reset_all"),n(Ew),i(Cw),a(Tw),l(Aw),c(Mw),d(Dw),f(!0),g(kw),y(Nw),E(7)},children:"Reset all settings"})})]}),(0,sg.jsxs)("div",{className:"ikat-display-area",ref:T,children:[(0,sg.jsx)("div",{className:"ikat-multiline",children:D.map((e,t)=>{const n=t===D.length-1?0:Math.max(0,h-I);return(0,sg.jsx)("div",{className:"ikat-line",ref:e=>F.current[t]=e,style:{marginBottom:n},children:P(e,t)},t)})}),(0,sg.jsx)("div",{className:"ikat-preview-tools",children:(0,sg.jsxs)("div",{className:"ikat-row",children:[(0,sg.jsx)("button",{type:"button",className:"ikat-action-button",onClick:()=>{if(e("ikat_capture_image"),0!==k().length)try{const e=N(h);if(!e)return;const t=e.toDataURL("image/png"),n=document.createElement("a");n.href=t,n.download="ikat-text.png",n.click()}catch{alert("Capture failed (often cross-origin asset tainting).")}else alert("No canvas found to capture.")},children:"Capture image"}),(0,sg.jsx)("button",{type:"button",className:"ikat-action-button",onClick:async()=>{if(e("ikat_record_start",{duration:S}),0===k().length)return void alert("No canvas found to record.");const t=1e3*Math.max(0,Math.min(20,S));if(0===t)return void alert("Set a duration above 0s to record.");const n=N(h);if(!n)return;const r=n.getContext("2d");if(!r||!n.captureStream)return;let i=null,s=!1;const a=()=>{if(s)return;const e=k().filter(Boolean);if(0===e.length)return void(i=requestAnimationFrame(a));const t=Math.max(0,h),o=e.map(e=>({w:e.width||Math.max(1,Math.floor(e.getBoundingClientRect().width)),h:e.height||Math.max(1,Math.floor(e.getBoundingClientRect().height))})),l=Math.max(...o.map(e=>e.w)),u=o.reduce((e,t)=>e+t.h,0)+Math.max(0,e.length-1)*t;n.width!==l||n.height!==u?(n.width=Math.max(1,l),n.height=Math.max(1,u)):r.clearRect(0,0,n.width,n.height);let c=0;e.forEach((n,i)=>{const{w:s,h:a}=o[i],u=Math.floor((l-s)/2);r.drawImage(n,0,0,s,a,u,c,s,a),c+=a+(i===e.length-1?0:t)}),i=requestAnimationFrame(a)};a();const o=n.captureStream(60),l=[];let u;try{u=new MediaRecorder(o,{mimeType:"video/webm"})}catch{u=new MediaRecorder(o)}u.ondataavailable=e=>{e.data&&e.data.size>0&&l.push(e.data)},u.onstop=()=>{e("ikat_record_complete",{duration:S}),s=!0,i&&cancelAnimationFrame(i),o.getTracks().forEach(e=>e.stop());const t=new Blob(l,{type:"video/webm"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="ikat-text.webm",r.click(),URL.revokeObjectURL(n),A(!1)},A(!0),u.start(),setTimeout(()=>u.stop(),t)},disabled:C,children:C?"Recording...":"Record"}),(0,sg.jsxs)("label",{className:"ikat-control",children:[(0,sg.jsxs)("div",{className:"ikat-label-row",children:[(0,sg.jsx)("span",{className:"ikat-label",children:"Record duration (s)"}),(0,sg.jsx)("span",{className:"ikat-value",children:S})]}),(0,sg.jsx)("input",{type:"range",min:"0",max:"20",step:"1",value:S,onChange:e=>E(parseInt(e.target.value,10))})]})]})})]})]})}function nF(){const[e,t]=(0,M.useState)(!1),[n,r]=(0,M.useState)("smear-effect"),[i,s]=(0,M.useState)(!1);(0,M.useEffect)(()=>{const e=()=>{s(window.innerWidth<=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const a=i?"./SmearTextWork.html?text=TEMPLATES&scale=1.2":"./SmearTextWork.html?text=TEMPLATES&scale=3.0";return(0,sg.jsxs)(sg.Fragment,{children:[(0,sg.jsxs)("div",{className:"mobile-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsxs)("div",{className:"work-nav",children:[(0,sg.jsx)("div",{className:"work-menu-wrapper",children:(0,sg.jsx)(BD,{isOpen:e,onClick:()=>t(e=>!e)})}),(0,sg.jsxs)("div",{className:"work-desktop-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsx)("aside",{className:"slideout-menu "+(e?"open":""),children:(0,sg.jsxs)("ul",{children:[(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/work",onClick:()=>t(!1),children:"Work"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/home#about",onClick:()=>t(!1),children:"About"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/templates",onClick:()=>t(!1),children:"Templates"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"mailto:hollandblumer6@icloud.com?subject=Website%20Inquiry&body=Hi%20Holland!",onClick:()=>t(!1),children:"Contact"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"/home",onClick:()=>t(!1),children:"Home"})})]})})]}),(0,sg.jsxs)("main",{className:"templates-page page",children:[(0,sg.jsxs)("div",{className:"projects-header",children:[(0,sg.jsx)("iframe",{src:a,title:"Squishy Letters",className:"template-i-frame"}),(0,sg.jsx)("div",{style:{width:"100%",maxWidth:1e3,margin:"0 auto"}}),(0,sg.jsx)("div",{className:"filter-menu",children:Fw.map(e=>{const t=Iw(e);return(0,sg.jsx)("button",{className:"filter-button "+(t===n?"active":""),onClick:()=>r(t),children:e.toUpperCase()},t)})})]}),(0,sg.jsx)("div",{className:"single-template-container",children:(()=>{switch(n){case"smear-effect":return(0,sg.jsx)(JN,{imageUrl:"https://assets.codepen.io/9259849/Screenshot%202025-11-26%20at%202.51.05%E2%80%AFPM.png",freqX:.05,freqY:.1,baseWaveAmp:80,fineWaveAmp:15,initialMeltYRatio:.75,meltDurationMs:2e4});case"ikat-text":return(0,sg.jsx)(tF,{});default:return(0,sg.jsx)(JN,{})}})()})]})]})}function rF(){return(0,sg.jsxs)("main",{className:"page",children:[(0,sg.jsx)("h1",{children:"Contact"}),(0,sg.jsx)("p",{children:"Email, form, socials."})]})}function iF({videoSrc:e,className:t=""}){return e?(0,sg.jsx)("div",{style:{position:"relative",width:"100%",paddingBottom:"133%"},children:(0,sg.jsx)("video",{className:t,src:e,muted:!0,loop:!0,playsInline:!0,autoPlay:!0,preload:"auto",style:{position:"absolute",inset:0,width:"100%",height:"100%",display:"block",objectFit:"cover"}})}):null}function sF(){const[e,t]=(0,M.useState)(!1),[n,r]=(0,M.useState)("featured"),[i,s]=(0,M.useState)(!0),a=(0,M.useRef)(Date.now()),o="./SmearTextHollandBlumer.html?text=HOLLAND%20BLUMER&scale=3.7";(0,M.useEffect)(()=>{a.current=Date.now(),s(!0)},[o]),(0,M.useEffect)(()=>(document.body.style.overflow=i?"hidden":"",()=>{document.body.style.overflow=""}),[i]);const l=Lw.filter(e=>"all"===n||e.categories.includes(n));return(0,sg.jsxs)(sg.Fragment,{children:[(0,sg.jsx)(YN,{show:i}),(0,sg.jsx)(XN,{}),(0,sg.jsxs)("main",{className:"projects-section page",children:[(0,sg.jsxs)("div",{className:"mobile-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsxs)("div",{className:"work-nav",children:[(0,sg.jsx)("div",{className:"work-menu-wrapper",children:(0,sg.jsx)(BD,{isOpen:e,onClick:()=>t(e=>!e)})})," ",(0,sg.jsxs)("div",{className:"work-desktop-social-icons",children:[(0,sg.jsx)("a",{href:"https://instagram.com/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-instagram"})}),(0,sg.jsx)("a",{href:"https://linkedin.com/in/hollandblumer",target:"_blank",rel:"noopener noreferrer",children:(0,sg.jsx)("i",{className:"fa-brands fa-linkedin"})})]}),(0,sg.jsx)("aside",{className:"slideout-menu "+(e?"open":""),children:(0,sg.jsxs)("ul",{children:[(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/work",onClick:()=>t(!1),children:"Work"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/home#about",onClick:()=>t(!1),children:"About"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)(le,{to:"/templates",onClick:()=>t(!1),children:"Templates"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"mailto:hollandblumer6@icloud.com?subject=Website%20Inquiry&body=Hi%20Holland!",onClick:()=>t(!1),children:"Contact"})}),(0,sg.jsx)("li",{children:(0,sg.jsx)("a",{href:"/home",onClick:()=>t(!1),children:"Home"})})]})})]}),(0,sg.jsxs)("div",{className:"projects-header",children:[(0,sg.jsx)("iframe",{src:o,title:"Squishy Letters",className:"work-frame",onLoad:()=>{const e=Date.now()-a.current,t=Math.max(3e3-e,0);setTimeout(()=>{s(!1)},t)},onError:()=>s(!1)},o),(0,sg.jsx)("div",{style:{width:"100%",maxWidth:1e3,margin:"0 auto"}}),(0,sg.jsx)("div",{className:"filter-menu",children:["featured","for clients","creative"].map(e=>(0,sg.jsx)("button",{className:"filter-button "+(n===e?"active":""),onClick:()=>r(e),children:e.toUpperCase()},e))})]}),(0,sg.jsx)("div",{className:"projects-grid",children:l.map(e=>{const t="partana"===e.slug?"/templates":`/work/${e.slug}`;return"video"===e.type?(0,sg.jsx)(le,{to:t,className:"project-card-link",children:(0,sg.jsx)(iF,{videoSrc:e.videoSrc,title:e.title,posterSrc:e.posterSrc,children:(0,sg.jsx)("p",{className:"project-desc",children:e.description})})},e.id):null})})]})]})}function aF({className:e,style:t,textPx:n=120,autoResponsive:r=!0,desktopPx:i=110,wordA:s="loading",wordB:a="HOLLAND",holdMs:o=2e3,morphMs:l=1200,postHoldMs:u=400,returnMs:c=800,growMs:h=0,growOvershoot:d=1.6,fillLeadMs:p=250,fillExtendMs:f=200,topColor:m="#A74D00",botColor:g="#A74D00",edgeThresh:v=.05,autoHeight:y=!0,heightScale:b=1.6,minHeightPx:x=240,ipadBp:_=1024,mobileBp:w=700,ipadScale:S=.7,mobileScale:E=.6,seedGrowMs:C=700,seedGrowFrom:A=.25}){const T=(0,M.useRef)(null),D=(0,M.useRef)(null),k=(0,M.useRef)(null);return(0,M.useEffect)(()=>{if(T.current)return D.current=new xs(e=>{let t,M=!1;const D=()=>r?i:n;let k,N,F,I,R,L,P,O,B,U,z,V=[],j=0;const G=()=>{const e=t/180;F=6*e,I=9*e,R=3,L=3.2*e,P=!0,O=32*e,B=28*e};function H(){U=e.createGraphics(e.width,e.height),z=e.createGraphics(e.width,e.height),W(U,s),W(z,a)}function W(n,r){n.clear(),n.pixelDensity(1),n.textAlign(e.CENTER,e.BASELINE),n.textFont("'Times New Roman', Times, serif"),n.textSize(t);const i=n.textAscent(),s=n.textDescent(),a=i+s,o=e.height/2+(i-a/2),l=T.current;l&&(l.style.setProperty("--title-baseline",`${o}px`),l.style.setProperty("--title-capline",o-i+"px"),l.style.setProperty("--title-bottom",`${o+s}px`)),n.fill(255),n.text(r,e.width/2,o),n.loadPixels()}function $(t,n,r){let i=0;for(let s=-1;s<=1;s++)for(let a=-1;a<=1;a++){const o=e.constrain(Math.floor(n+a),0,e.width-1),l=e.constrain(Math.floor(r+s),0,e.height-1),u=t.pixels[4*(l*e.width+o)+3]/255;u>i&&(i=u)}return i}function q(){V.length=0;const t=[],n=[];for(let a=.5*F;a<e.height;a+=F){const r=P&&Math.floor(a/F)%2==1?.5*I:0;for(let i=0;i<R;i++){const s=a+.7*L*(i-(R-1)/2);for(let i=r+.5*I;i<e.width;i+=I){const e=$(U,i,s),r=$(z,i,s);e>=v&&t.push({x:i,y:s,w:O*e}),r>=v&&n.push({x:i,y:s,w:O*r})}}}const r=(e,t)=>e.x===t.x?e.y-t.y:e.x-t.x;t.sort(r),n.sort(r);const i=t.length,s=n.length;for(let a=0;a<s;a++){const r=n[a],s=i?t[a%i]:{x:e.width/2,y:e.height/2,w:0},o=a>=i,l=o?e.random(.25*-I,.25*I):0,u=o?e.random(.25*-F,.25*F):0,c=(o?.15*s.w:s.w)/O,h=r.w/O;V.push({sx:s.x+l,sy:s.y+u,tx:r.x,ty:r.y,wA_norm:c,wB_norm:h})}}function X(t){return(t=e.constrain(t,0,1))<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}function Y(t){return t=e.constrain(t,0,1),1-Math.pow(1-t,3)}const Z=e=>e<=w?E:e<=_?S:1;e.setup=()=>{const n=T.current,r=Math.max(1,Math.floor(n.clientWidth)),i=Math.max(1,Math.floor(n.clientHeight||300)),s=Z(r);let a=D()*s;const o=Math.max(Math.floor(x*s),120),l=y?Math.max(o,Math.floor(a*b)):i;y||(a=Math.min(a,Math.floor(l/Math.max(1e-6,b)))),t=a,G();const u=y?l:i;y&&(n.style.height=`${u}px`),e.pixelDensity(1),e.createCanvas(r,u),e.clear(),e.noStroke(),k=e.color(m),N=e.color(g),H(),q(),j=e.millis()},e.draw=()=>{e.clear();const t=e.millis()-j,n=o,r=o+l,i=Math.max(0,n-Math.max(0,p)),s=l+Math.max(0,f),a=i+s,m=Math.min(C,Math.max(0,o)),g=m>0?Y(e.constrain(t/m,0,1)):1,v=Math.min(h,o),y=v>0?Y(e.constrain(t/v,0,1)):1;let b=0;t>n&&(b=X((t-n)/l)),t>=r&&(b=1);let x,_=0;if(t>=i&&(_=X((t-i)/s),t>=a&&(_=1)),t<i)if(m>0){const t=O*A;if(v>0){const n=O*d,r=e.lerp(t,n,g),i=e.lerp(n,O,y),s=Math.max(g,y);x=e.lerp(r,i,s)}else x=e.lerp(t,O,g)}else x=v>0?e.lerp(O*d,O,y):O;else if(t<a)x=e.lerp(O,B,_);else{const n=t-a;if(M||(M=!0,window.dispatchEvent(new CustomEvent("loading:title:ready"))),n<=u)x=B;else if(n<=u+c){const t=X((n-u)/c);x=e.lerp(B,O,t)}else x=O,e.noLoop()}for(let o=0;o<V.length;o++){const t=V[o],n=e.lerp(t.sx,t.tx,b),r=e.lerp(t.sy,t.ty,b),i=e.lerp(t.wA_norm,t.wB_norm,b)*x,s=L,a=e.constrain(r/e.height,0,1),l=e.lerpColor(k,N,a);l.setAlpha(255),e.fill(l),e.beginShape(),e.vertex(n,r-s/2),e.vertex(n+i/2,r),e.vertex(n,r+s/2),e.vertex(n-i/2,r),e.endShape(e.CLOSE)}},e.onResizeHost=()=>{const n=T.current;if(!n)return;const r=Math.max(1,Math.floor(n.clientWidth)),i=Math.max(1,Math.floor(n.clientHeight||300)),s=Z(r);let a=D()*s;const o=Math.max(Math.floor(x*s),120),l=y?Math.max(o,Math.floor(a*b)):i;y||(a=Math.min(a,Math.floor(l/Math.max(1e-6,b)))),t=a,G();const u=y?l:i;y&&(n.style.height=`${u}px`),e.resizeCanvas(r,u,!1),H(),q(),j=e.millis(),M=!1,e.loop()}},T.current),k.current=new ResizeObserver(()=>{D.current&&D.current.onResizeHost&&D.current.onResizeHost()}),k.current.observe(T.current),()=>{k.current&&k.current.disconnect(),D.current&&D.current.remove()}},[n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_,w,S,E,C,A]),(0,sg.jsx)("div",{ref:T,className:e,style:{position:"relative",width:"100%",height:y?void 0:"300px",overflow:"visible",...t}})}function oF({text:e,sizePx:t=32,rows:n=3,skewDeg:r=-4,offsetsPx:i=[-1.5,1,-.5],italic:s=!0,weight:a=700,letterSpacing:o=0,shardColor:l="#921B00",rowColors:u=null,strokeColor:c="#3a2a21",strokeWidth:h=1.4,offsetScale:d=.2,autoOffsets:p=!0,offsetMaxPx:f,offsetCurve:m=.2,yOffsetScale:g=.25,className:v="",style:y={},title:b}){const x=100/n,_=b||e,w=(0,M.useMemo)(()=>{if(!p)return new Array(n).fill(0).map((e,t)=>({x:(i[t%i.length]||0)*d,y:(i[t%i.length]||0)*g*d}));const e=f??Math.max(8,.18*t);return new Array(n).fill(0).map((t,r)=>{const i=n<=1?1:r/(n-1),s=(a=Math.max(i,1-i),o=m,Math.pow(a,o));var a,o;const l=r%2==0?-1:1;return{x:l*e*s*d,y:l*e*g*s*d*.6}})},[p,i,d,n,t,f,m,g]),S=(0,M.useMemo)(()=>new Array(n).fill(0).map((e,t)=>({"--clip-top":t*x+"%","--clip-bottom":100-(t+1)*x+"%","--tx":`${w[t].x}px`,"--ty":`${w[t].y}px`,__rowIndex:t})),[n,x,w]);return(0,sg.jsxs)("span",{"aria-label":_,className:`shard-wrap ${v}`,style:{fontFamily:'"Times New Roman", Times, serif',fontWeight:a,fontStyle:s?"italic":"normal",fontSize:`${t}px`,lineHeight:1,whiteSpace:"nowrap",position:"relative",display:"inline-block","--shard-color":l,"--skew":`${r}deg`,"--ls":`${o}px`,...y},children:[(0,sg.jsx)("span",{className:"shard-base",style:{position:"relative",color:"transparent",letterSpacing:"var(--ls)",userSelect:"none"},children:e}),(0,sg.jsx)("span",{className:"shard-stage","aria-hidden":"true",style:{position:"absolute",inset:0,pointerEvents:"none"},children:S.map((t,n)=>{const r=u?.[n%u.length]??l;return(0,sg.jsx)("span",{className:"shard-slice",style:{position:"absolute",inset:0,color:r,letterSpacing:"var(--ls)",clipPath:"inset(var(--clip-top,0%) 0 var(--clip-bottom,0%) 0)",transform:"translateX(var(--tx,0)) translateY(var(--ty,0)) skewX(var(--skew)) translateZ(0)",willChange:"transform",WebkitTextStroke:`${h}px ${c}`,paintOrder:"stroke fill",...t},children:e},n)})})]})}function lF({desktopPx:e=22,gapPx:t=6,lineHeight:n=1.35,waitForTitleReady:r=!1,delayMs:i=0,fallbackShowAfterMs:s=2e3,textColor:a="#342B29",shardColor:o="#dedede",leftTextA:l="is a",shardTextA:u="creative technologist",leftTextB:c="based in",shardTextB:h="brooklyn ny",rowColorsA:d=["#FFB400","#FFB400","#FFB400"],rowColorsB:p=["#FFB400","#FFB400","#FFB400"],strokeColor:f="#ed6a1eff",strokeWidth:m=1.25,offsetScale:g=.3,autoOffsets:v=!0,offsetMaxPx:y,offsetCurve:b=1.2,yOffsetScale:x=.3,className:_="",style:w={}}){const S=e,[E,C]=(0,M.useState)(!r);(0,M.useEffect)(()=>{if(!r){const e=setTimeout(()=>C(!0),Math.max(0,i));return()=>clearTimeout(e)}let e=!1,t=null;const n=()=>{e||(e=!0,t=setTimeout(()=>C(!0),Math.max(0,i)))},a=setTimeout(()=>{e||n()},s);return window.addEventListener("loading:title:ready",n),()=>{window.removeEventListener("loading:title:ready",n),clearTimeout(a),t&&clearTimeout(t)}},[r,i,s]);const A={fontFamily:"'Manrope', system-ui, sans-serif",fontWeight:400,fontSize:.84*S+"px",lineHeight:n,letterSpacing:"0.3px",whiteSpace:"nowrap",color:a};return(0,sg.jsxs)("div",{className:_,style:{opacity:E?1:0,transition:"opacity 0.9s ease",background:"transparent",display:"inline-flex",alignItems:"baseline",gap:`${t}px`,flexWrap:"nowrap",margin:0,padding:0,width:"max-content",...w},children:[(0,sg.jsx)("span",{style:A,children:l}),(0,sg.jsx)(oF,{text:u,sizePx:S,rows:3,skewDeg:-4,autoOffsets:v,offsetScale:g,offsetMaxPx:y,offsetCurve:b,yOffsetScale:x,shardColor:o,rowColors:d,strokeColor:f,strokeWidth:m,italic:!0,weight:700,letterSpacing:0}),(0,sg.jsx)("span",{style:A,children:c}),(0,sg.jsx)(oF,{text:h,sizePx:S,rows:3,skewDeg:-4,autoOffsets:v,offsetScale:g,offsetMaxPx:y,offsetCurve:b,yOffsetScale:x,shardColor:o,rowColors:p,strokeColor:f,strokeWidth:m,italic:!0,weight:700,letterSpacing:0})]})}function uF(){return(0,sg.jsxs)("div",{className:"loading-hero",style:{width:"100vw",height:"100vh",display:"grid",placeItems:"center",background:"#9e8e27ff",overflow:"hidden",position:"relative"},children:[(0,sg.jsxs)("div",{className:"loading-stack",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,position:"relative",zIndex:1},children:[(0,sg.jsx)(aF,{autoResponsive:!0,desktopPx:240,ipadBp:1024,mobileBp:600,ipadScale:.45,mobileScale:.33,autoHeight:!0,heightScale:1.35}),(0,sg.jsx)("div",{className:"subtitle-overlay",style:{position:"relative",zIndex:2,color:"#ff7a00","--shard-color":"#ff7a00"},children:(0,sg.jsx)(lF,{desktopPx:40,gapPx:8,delayMs:0})})]}),(0,sg.jsx)("div",{style:{position:"absolute",inset:0,pointerEvents:"none",outline:"1px dashed #bbb"}})]})}function cF({url:e}){const[t,n]=(0,M.useState)(null);return(0,M.useEffect)(()=>{let t=!1;const r=`https://www.linkedin.com/oembed?url=${encodeURIComponent(e)}&format=json`;return fetch(r).then(e=>e.json()).then(e=>{t||n(e)}).catch(()=>{t||n({fallback:!0})}),()=>{t=!0}},[e]),!t||t.fallback?(0,sg.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:"Read the LinkedIn article"}):(0,sg.jsxs)("a",{className:"linkedin-embed",href:e,target:"_blank",rel:"noopener noreferrer","aria-label":`Open LinkedIn article: ${t.title}`,children:[t.thumbnail_url&&(0,sg.jsx)("img",{src:t.thumbnail_url,alt:t.title,className:"linkedin-embed-thumb"}),(0,sg.jsxs)("div",{className:"linkedin-embed-meta",children:[(0,sg.jsx)("h4",{className:"linkedin-embed-title",children:t.title}),t.author_name&&(0,sg.jsx)("p",{className:"linkedin-embed-author",children:t.author_name})]})]})}function hF(){const{slug:e}=function(){let{matches:e}=M.useContext(X),t=e[e.length-1];return t?t.params:{}}(),t=oS();(0,M.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e]);const n=(0,M.useMemo)(()=>Array.isArray(Pw)?Pw.find(t=>t.slug===e):Pw&&"object"==typeof Pw?Pw[e]:null,[e]);if(!n)return(0,sg.jsxs)("main",{className:"page not-found",children:[(0,sg.jsx)("h1",{children:"Not found"}),(0,sg.jsxs)("p",{children:["This project doesnâ€™t exist. ",(0,sg.jsx)(le,{to:"/work",children:"Back to Work"})]})]});const{title:r,tagLine:i,hero:s,palette:a={},sections:o=[]}=n,l=a.bg||"#fff",u=a.ink||"#222";return(0,sg.jsxs)("main",{className:"project-page page",style:{background:l,color:u,lineHeight:1.7},children:[(0,sg.jsxs)("header",{className:"project-hero",children:[(0,sg.jsx)("div",{className:"project-close-wrapper",children:(0,sg.jsx)(BD,{isOpen:!0,onClick:()=>t(-1)})}),(0,sg.jsxs)("div",{className:"hero",children:[(0,sg.jsxs)("div",{className:"hero-text",children:[(0,sg.jsx)("h1",{children:r}),(i||n.tagLink)&&(0,sg.jsxs)("p",{className:"tagline",children:[i,i&&n.tagLink?" ":null,n.tagLink?(0,sg.jsx)("a",{href:n.tagLink.href,target:"_blank",rel:"noopener noreferrer",children:n.tagLink.label}):null]})]}),"instagram"===s?.type&&s.embed&&(0,sg.jsx)("div",{className:"hero-embed",children:(0,sg.jsx)("iframe",{src:`https://www.instagram.com/p/${s.embed.split("/p/")[1].split("/")[0]}/embed`,width:"100%",height:"480",frameBorder:"0",scrolling:"no",allowTransparency:!0,allow:"encrypted-media",title:s.alt||r})}),s?.image&&!s?.type&&(0,sg.jsx)("img",{src:s.image,alt:s.alt||r,className:"hero-img"})]})]}),(0,sg.jsx)("section",{className:"project-content",children:o.map((e,t)=>{switch(e.type){case"text":const n=e.content.split(/(\*\*.*?\*\*)/g);return(0,sg.jsx)("div",{className:"text-block",children:n.map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,sg.jsx)("h2",{className:"project-section-heading",children:e.slice(2,-2)},t):e.trim()?(0,sg.jsx)("p",{children:e.trim()},t):null)},t);case"image":return(0,sg.jsxs)("figure",{className:"image-block",children:[(0,sg.jsx)("img",{src:e.src,alt:e.alt||""}),e.caption&&(0,sg.jsx)("figcaption",{children:e.caption})]},t);case"video":return(0,sg.jsxs)("figure",{className:"video-block",children:[(0,sg.jsx)("video",{src:e.src,playsInline:!0,autoPlay:!0,loop:e.loop??!0,muted:!0,controls:!0}),e.caption&&(0,sg.jsx)("figcaption",{children:e.caption})]},t);case"imageGrid":return(0,sg.jsxs)("div",{className:"image-grid",children:[e.title&&(0,sg.jsx)("h3",{children:e.title}),(0,sg.jsx)("div",{className:"grid",children:e.images.map((e,t)=>(0,sg.jsx)("img",{src:e.src,alt:e.alt||""},t))}),e.caption&&(0,sg.jsx)("p",{className:"caption",children:(0,sg.jsx)("em",{children:e.caption})})]},t);case"link":const r=Ow(e.href),i="link"===o[t+1]?.type;return e.href.includes("linkedin.com/pulse")||e.href.includes("/posts/")?(0,sg.jsx)(cF,{url:e.href},t):(0,sg.jsxs)("span",{className:"link-inline-wrapper",children:[(0,sg.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",children:r}),i?", ":". "]},t);default:return null}})}),(0,sg.jsx)("footer",{className:"project-footer",children:(0,sg.jsx)(le,{to:"/work",className:"cta",children:"â† Back to all projects"})})]})}function dF({children:e}){const t=sS();return(0,M.useEffect)(()=>{const e=t.pathname+t.search;console.log("Tracking page view:",e),Bw.default.send({hitType:"pageview",page:e,title:document.title})},[t]),e}function pF(){return(0,sg.jsx)(dF,{children:(0,sg.jsxs)(wS,{children:[(0,sg.jsx)(xS,{path:"/loading",element:(0,sg.jsx)(uF,{})}),(0,sg.jsxs)(xS,{element:(0,sg.jsx)(OD,{}),children:[(0,sg.jsx)(xS,{path:"/",element:(0,sg.jsx)(yS,{to:"/work",replace:!0})}),(0,sg.jsx)(xS,{path:"/home",element:(0,sg.jsx)(ZN,{})}),(0,sg.jsx)(xS,{path:"/resume",element:(0,sg.jsx)(KN,{})}),(0,sg.jsx)(xS,{path:"/work",element:(0,sg.jsx)(QN,{})}),(0,sg.jsx)(xS,{path:"/work/:slug",element:(0,sg.jsx)(hF,{})}),(0,sg.jsx)(xS,{path:"/work/:slug/:page",element:(0,sg.jsx)(hF,{})}),(0,sg.jsx)(xS,{path:"/templates",element:(0,sg.jsx)(nF,{})}),(0,sg.jsx)(xS,{path:"/contact",element:(0,sg.jsx)(rF,{})}),(0,sg.jsx)(xS,{path:"/home2",element:(0,sg.jsx)(sF,{})})]})]})})}return{setters:[function(e){r=e},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){}],execute:function(){(i=document.createElement("style")).textContent='@import "https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap";@import "https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap";@import "https://fonts.googleapis.com/css2?family=Gelasio:ital,wght@0,400..700;1,400..700&display=swap";@import "https://fonts.googleapis.com/css2?family=Momo+Trust+Display&display=swap";@import "https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap";@import "https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap";@import "https://fonts.googleapis.com/css2?family=Marcellus&display=swap";@import "https://fonts.googleapis.com/css2?family=Prata&display=swap";@import "https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap";@import "https://fonts.googleapis.com/css2?family=Quantico:ital,wght@0,400;0,700;1,400;1,700&display=swap";@import "https://fonts.googleapis.com/css2?family=Nata+Sans:wght@100..900&display=swap";@import "https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap";@import "https://fonts.googleapis.com/css2?family=Spinnaker&display=swap";@import "https://fonts.googleapis.com/css2?family=Shippori+Antique&display=swap";@import "https://fonts.googleapis.com/css2?family=Gabarito:wght@400..900&display=swap";@import "https://fonts.googleapis.com/css2?family=Ranchers&display=swap";@import "https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap";.heroNavXL{font-size:45px;display:inline-block}@media (max-width:800px){.heroNavXL{transform-origin:50%;font-size:24px}}.nav-item{width:120px}nav{justify-content:space-between;align-items:center;width:100%;display:flex}.projects-section{margin:0 auto;padding:80px 40px}.projects-header{flex-flow:column wrap;justify-content:space-between;align-items:center;margin-bottom:40px;display:flex}.projects-header h2{margin:0 0 16px;font-size:max(24px,min(3vw,32px));font-weight:600}.filter-menu{flex-wrap:wrap;justify-content:center;gap:20px;display:flex}.filter-button{color:#888;cursor:pointer;text-transform:uppercase;letter-spacing:.05em;background:0 0;border:none;padding:4px 10px;font-size:14px;font-weight:500}.filter-button.active{color:#000;text-decoration:underline}.projects-grid{grid-template-columns:repeat(3,1fr);gap:60px 20px;display:grid}@media (max-width:980px){.projects-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:620px){.projects-grid{grid-template-columns:repeat(2,1fr);gap:32px}}.project-card-link{color:inherit;flex-direction:column;align-items:center;gap:12px;font-family:Arial,Helvetica,sans-serif;text-decoration:none;display:flex}.project-card-link:hover,.project-card-link:focus{color:inherit;text-decoration:none}.project-title{color:#111;text-align:center;width:100%;max-width:320px;margin:4px 0 0;font-size:15px;font-weight:600}.project-desc{color:#888;text-align:center;width:100%;max-width:320px;margin:0;font-size:14px;line-height:1.4}.media-frame{aspect-ratio:3/4;background:#f0f0f0;width:100%;overflow:hidden}.media-frame video,.media-frame img{object-fit:cover;border:none;width:100%;height:100%;display:block}.project img{width:100%;height:auto;margin-bottom:0;display:block}.project h3{margin:0 0 4px;font-size:16px;font-weight:500}.project p{color:#555;margin:0;font-size:14px;line-height:1.6}.project-frame{height:auto;padding-bottom:0;position:relative;overflow:visible}.project-frame img,.project-frame iframe{object-fit:cover;width:100%;height:auto;position:static}.work-nav{box-sizing:border-box;flex-direction:row;justify-content:space-between;align-items:center;width:100vw;height:100px;padding:0 40px;display:flex;position:absolute;top:0;left:0}.work-desktop-social-icons{z-index:2000;color:#8b8b8b;justify-content:space-between;align-items:center;width:80px;height:40px;font-size:35px;display:flex}.work-desktop-social-icons a{color:inherit;text-decoration:none}.work-desktop-social-icons a:hover,.work-desktop-social-icons a:focus{color:inherit}.work-menu-wrapper{z-index:2000;width:55px;height:100px}@media (max-width:768px){.work-desktop-social-icons{display:none}}.work-frame{border:none;outline:none}.projectGrid{flex-direction:column;gap:48px;width:100%;max-width:1200px;margin:0 auto 64px;padding:0 24px;display:flex}.projectGrid .block.project-thumb{color:inherit;grid-template-columns:minmax(0,2fr) minmax(0,1fr);column-gap:32px;text-decoration:none;display:grid}.projectGrid .block.project-thumb:hover h2{text-decoration:underline}.projectGrid .col.thumb{width:100%}.ratio-1-1{width:100%;padding-top:100%;position:relative;overflow:hidden}.ratio-1-1 iframe,.ratio-1-1 img{border:0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}.ratio-1-1 iframe{object-fit:cover;pointer-events:none}.ratio-1-1 img{object-fit:cover;display:block}.block-info{font-family:Lettera,system-ui,-apple-system,BlinkMacSystemFont,sans-serif}.block-info .sticky{position:sticky;top:80px}.block-info h2{margin:0 0 8px;font-size:max(20px,min(2.2vw,28px));font-weight:500}.block-info p{margin:0;font-size:15px;line-height:1.4}.projectGridFooter{border-top:1px solid #ddd;justify-content:space-between;gap:16px;padding:24px 24px 0;font-size:14px;display:flex}.projectGridFooter a{color:inherit;text-decoration:none}.projectGridFooter a:hover{text-decoration:underline}@media (max-width:1024px){.projectGrid{gap:40px;padding:0 20px}.projectGrid .block.project-thumb{column-gap:24px}.block-info .sticky{top:64px}}@media (max-width:768px){.projectGrid{gap:32px;padding:0 16px}.projectGrid .block.project-thumb{grid-template-columns:1fr;row-gap:16px}.block-info .sticky{position:static}.projectGridFooter{flex-direction:column;align-items:flex-start;padding-left:16px;padding-right:16px}}.work-frame.is-hidden{opacity:0;pointer-events:none}.work-frame{opacity:1;transition:opacity .25s}html,body,#root{height:100%;margin:0}.loading-page{align-items:center;width:100vw;height:100svh;display:flex}.loading-hero{place-items:center;width:100%;height:100svh;display:grid;overflow:hidden}.loading-stack{z-index:1;place-items:center;width:100%;height:100%;margin-top:0;display:grid;position:relative}:root{--sub-scale:1;--sub-top:calc(50% + 140px)}@media (max-width:1024px){:root{--sub-scale:.7;--sub-top:calc(50% + 56px)}}@media (max-width:700px){:root{--sub-scale:.44;--sub-top:calc(50% + 54px)}}.subtitle-overlay{top:var(--sub-top);transform:translateX(-50%)scale(var(--sub-scale));transform-origin:top;pointer-events:none;position:absolute;left:50%}.preloader-overlay{z-index:9999;opacity:1;visibility:visible;background:0 0;width:100vw;height:100svh;transition:opacity .42s,visibility .42s;position:fixed;top:0;bottom:0;left:0;right:0}.preloader-overlay.preloader--fade{opacity:0;visibility:hidden}.painter-layer{z-index:0;pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0}.painter-host{width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}.shard-slice{will-change:transform;animation:2.4s ease-in-out infinite alternate shard-wiggle}@keyframes shard-wiggle{0%{transform:translateX(var(--tx))skewX(var(--skew))}to{transform:translateX(calc(var(--tx)*-1))skewX(var(--skew))}}.project-page{text-align:left;margin:0 auto;padding:100px;font-family:Arial,Helvetica,sans-serif;font-size:1.1rem}.text-block{text-align:left;max-width:900px;margin:2.5rem auto;font-size:1.15rem}.text-block-heading{text-align:left;margin-top:3rem;margin-bottom:1rem;font-size:1.6rem;font-weight:800;display:block}.text-content{margin-bottom:1.5rem}.image-block figcaption,.video-block figcaption,.image-grid .caption{text-align:center;margin-top:10px;font-size:.95rem;font-style:italic}.project-hero img{width:100%;margin-bottom:2rem}.hero-text{text-align:center;margin-bottom:3rem;font-size:medium;font-weight:700}.image-block{max-width:900px;margin:3rem auto}.image-block img,.video-block video{width:100%}.image-grid{background:#f8f8f8;margin:3rem 0;padding:1.5rem}.image-grid .grid{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;display:grid}.image-grid img{border-radius:8px;width:100%}.project-close-wrapper{z-index:10;justify-content:center;align-items:center;width:55px;height:100px;display:flex;position:absolute;top:0;left:40px}@media (max-width:768px){.project-page{padding:60px 20px;font-size:1rem}.text-block{margin:1.5rem 0;font-size:1rem}.text-block-heading{margin-top:2rem;font-size:1.3rem}.project-close-wrapper{left:10px}.project-page .hero-text h1{font-size:2rem}}.project-card .project-media{aspect-ratio:1;width:100%;position:relative;overflow:hidden;padding-bottom:0!important}.project-card .project-media .image-cloth-instance,.project-card .project-media .cloth-video{width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}.projects-grid>.project-card-link{height:100%;display:flex}.project-card{flex-direction:column;align-items:stretch;width:100%;height:100%;display:flex}.project-card .project-media{aspect-ratio:3/4;width:100%;position:relative;overflow:hidden}.project-title{margin-top:14px;font-size:16px;font-weight:600}.project-desc{margin-top:6px;font-size:14px;line-height:1.4}.project-card-link{color:inherit;font-family:Arial,Helvetica,sans-serif;text-decoration:none}.hero-embed{width:100%;max-width:540px;margin:0 auto;overflow:visible}.hero-embed iframe{border:0;border-radius:6px;height:760px;min-height:760px;display:block;overflow:visible;width:100%!important}@media (max-width:768px){.hero-embed iframe{height:640px;min-height:640px}}.tagline{font-size:1.15rem;font-weight:500}.navtext{text-align:center;align-items:center;width:200px}html{scroll-behavior:smooth}.hero-fullbleed{width:100vw;max-width:100vw;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);padding-left:0!important;padding-right:0!important}.hero-canvas{z-index:0;position:absolute;top:0;bottom:0;left:0;right:0}.navtext{z-index:50;pointer-events:auto;user-select:none;cursor:pointer;will-change:transform,left,top;width:max(120px,12vw);position:absolute;top:0;left:0;transform:translate(-50%,-50%)}.navtext button{cursor:pointer;background:0 0;border:0;padding:0;position:absolute;top:0;bottom:0;left:0;right:0}.socialchip{z-index:55;letter-spacing:.02em;user-select:none;border-radius:999px;place-items:center;width:44px;height:44px;font-weight:800;transition:opacity .25s;display:grid;position:absolute;top:0;left:0;transform:translate(-50%,-50%);box-shadow:0 4px 10px rgba(0,0,0,.15)}.socialchip a{border-radius:999px;position:absolute;top:0;bottom:0;left:0;right:0}.socialchip span{pointer-events:none;color:#fff;font-size:14px}.cover{z-index:30;backdrop-filter:blur(6px);background:rgba(168,62,12,.86);transition:transform .42s cubic-bezier(.22,.61,.36,1);position:fixed;top:0;bottom:0;left:0;right:0;transform:translate(100%)}.cover.open{transform:translate(0)}.cover-inner{color:#403326;width:min(520px,92vw);padding:20px 22px;position:absolute;top:0;bottom:0;right:0;overflow:auto}.menu-btn{z-index:60;color:#e9f259;letter-spacing:.02em;cursor:pointer;background:#403326;border:none;border-radius:999px;padding:.6rem .9rem;font-weight:700;position:fixed;top:16px;right:16px}.restart-pad{z-index:20;position:fixed;bottom:12px;left:12px}.restart-pad button{color:#e9f259;cursor:pointer;opacity:.95;background:#403326;border:0;border-radius:14px;width:56px;height:56px;font-size:22px;font-weight:900}.restart-pad button:active{transform:translateY(1px)}.about-section{background:#c5c5c5;flex-direction:column;justify-content:center;align-items:flex-start;padding:60px;display:flex}.about-blurb{color:#888;box-sizing:border-box;width:100%;font-family:Outfit;font-size:28px;line-height:1.4}@media (max-width:900px){.about-section{padding:10px;background:#c5c5c5;flex-direction:column;justify-content:center;align-items:flex-start;padding:30px;display:flex}.about-inner{text-align:center;flex-direction:column;align-items:center;gap:30px}.about-blurb{text-align:left;font-size:18px}}.abouttext-container{filter:url(#about-threshold)blur(.6px);width:100%;height:70px;margin-bottom:10px;position:relative}@media (max-width:900px){.abouttext-span{text-align:center}.about-title{width:100%;height:100px}}.abouttext-filter-svg{pointer-events:none;width:0;height:0;position:absolute}.inline-iframe{vertical-align:middle;pointer-events:none;border:none}.about-title{text-align:center;justify-content:center;align-items:center;width:100%;height:200px;display:flex}.about-i-frame{text-align:center;border:none;outline:none;justify-content:center;align-items:center;width:530px;height:180px;display:flex}.wavy-role{filter:url(#filter);font-weight:500;display:inline-block}html,body{background:#c5c5c5;min-height:100vh;margin:0}.home-container{color:#3f3d3c;z-index:1;background:0 0;flex-direction:row;height:100vh;font-family:Instrument Serif,serif;display:flex;position:relative;overflow:hidden}.left-column{flex-direction:column;flex:50%;justify-content:center;padding:60px;display:flex;position:relative}.top-left-panel{z-index:100;align-items:center;gap:15px;display:flex;position:fixed;top:20px;left:20px}.menu-wrapper{z-index:2000;width:55px;height:100px;position:absolute;top:30px;left:40px}.templates-out-now-mobile{display:none}.templates-out-now-desktop{z-index:100;color:#f3e4a2;font-family:Arial,Helvetica,sans-serif;font-size:25pt;position:absolute;top:70px;right:70px}.intro-text{max-width:550px;font-size:42px;line-height:1.25}.italic,.location{font-style:italic}.right-column{flex:50%;justify-content:center;align-items:center;min-height:0;display:flex}.right-column canvas{width:100%!important;height:100%!important}.squishy-frame{border:none;width:100%;height:100%;overflow:hidden}@media (max-width:900px){.home-container{flex-direction:column;height:auto;min-height:100vh;overflow-x:hidden;overflow-y:auto}.left-column{order:1;padding:30px 25px}.menu-wrapper{margin-bottom:20px;top:0;left:25px}.right-column{order:2;justify-content:center;align-items:center;margin-top:20px;display:flex}.squishy-frame{width:100%;height:500px}.templates-out-now-desktop{display:none}.templates-out-now-mobile{z-index:100;color:#f3e4a2;font-size:15pt;display:block;position:absolute;top:35px;left:100px}}.squishy-canvas-container{background-color:#2c1914;justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}canvas{touch-action:none}.full-paragraph{color:#f7e9aa;text-align:left;font-family:Inter,sans-serif;font-size:55px;font-weight:800;line-height:1.2;display:block}.no-break-word{white-space:nowrap;margin-right:15px;display:inline-block}.rotated-char{filter:url(#blur-melt);letter-spacing:-1px;margin-left:-2px;margin-right:-2px;display:inline-block;position:relative;top:5px}.normal-text-style{filter:none;letter-spacing:normal;color:#a5a5a5;font-weight:700}.desktop-social-icons{color:#a5a5a5;z-index:2000;gap:20px;font-size:32px;display:flex;position:absolute;bottom:60px;left:60px}.desktop-social-icons a{color:#a5a5a5;text-decoration:none;transition:opacity .25s}.desktop-social-icons a:hover{opacity:.6}@media (max-width:1023px){.desktop-social-icons{display:none}}.mobile-social-icons{z-index:3000;gap:18px;height:50px;font-size:32px;display:none;position:absolute;top:30px;right:30px}.mobile-social-icons a{color:#a5a5a5;text-decoration:none;transition:opacity .25s}.mobile-social-icons a:hover{opacity:.6}@media (max-width:900px){.mobile-social-icons{display:flex}.full-paragraph{color:#f7e9aa;text-align:left;font-size:37.5px;font-weight:800;line-height:1;display:block}}@media (max-width:820px){.mobile-text-offset{margin-top:8rem}.left-column{padding-top:2rem}}.elastic-menu-button{-webkit-tap-highlight-color:transparent;background:0 0;border:none;outline:none;width:100%;height:100%;margin:0;padding:0;display:block}.elastic-line{transform-origin:50px 50px;transition:transform .35s cubic-bezier(.22,.61,.36,1),opacity .25s}.elastic-line-top.is-open{transform:translateY(15px)rotate(45deg)}.elastic-line-middle.is-open{opacity:0;transform:scale(.5)}.elastic-line-bottom.is-open{transform:translateY(-5px)rotate(-45deg)}.slideout-backdrop{z-index:900;background:rgba(0,0,0,.2);position:fixed;top:0;bottom:0;left:0;right:0}.slideout-menu{color:#f7e9aa;-webkit-backdrop-filter:blur(18px);z-index:999;background:rgba(204,202,202,.714);justify-content:center;align-items:center;width:100vw;height:100vh;transition:transform .4s cubic-bezier(.22,.61,.36,1);display:flex;position:fixed;top:0;left:0;transform:translate(-100%)}.slideout-menu.open{transform:translate(0)}.slideout-menu ul{text-align:center;width:max-content;margin:0 auto;padding:0;list-style:none}.slideout-menu li+li{text-align:center;margin-top:18px}.slideout-menu a{color:inherit;font-family:Inter,sans-serif;font-size:28px;font-weight:700;text-decoration:none}.morph-title-container{display:inline-block;position:relative}.morph-title-span{white-space:nowrap;position:absolute;top:0;left:0}.morph-title-span:first-child{opacity:0}.morph-text{white-space:nowrap;display:inline-block;position:relative}.morph-sizer{visibility:hidden;white-space:nowrap}.morph-layer{white-space:nowrap;user-select:none;display:inline-block;position:absolute;top:0;left:0}.morph-word{letter-spacing:.04em;font-weight:700}.smear-wrapper{flex-direction:column;align-items:center;gap:28px;display:flex}.smear-controls{flex-direction:column;gap:54px;display:flex}.smear-row{flex-wrap:wrap;justify-content:center;gap:24px;display:flex}.smear-row-spaced{margin-top:4px}.smear-row-bottom{justify-content:center;margin-top:48px}.smear-group{margin-top:8px}.smear-group .smear-row{gap:32px;margin-top:10px}.smear-control{text-transform:uppercase;letter-spacing:.08em;flex-direction:column;align-items:stretch;gap:8px;min-width:170px;max-width:240px;font-size:.75rem;display:flex}.smear-control-inline{align-items:flex-start;max-width:240px}.smear-label-row{justify-content:space-between;align-items:center;display:flex}.smear-label{font-weight:500}.smear-value{opacity:.8;font-size:.75rem;font-weight:600}.smear-control input[type=range]{accent-color:#f7e9a9;width:100%}.smear-control input[type=file]{font-size:.7rem}.smear-select{background:#f6f6f6;border:1px solid #a5a5a5;border-radius:999px;margin-top:4px;padding:4px 8px;font-size:.8rem}.smear-reset-button,.smear-export-button{letter-spacing:.08em;text-transform:uppercase;cursor:pointer;background:#f9f9f9;border:1px solid #a5a5a5;border-radius:999px;font-size:.8rem}.smear-reset-button{padding:9px 22px}.smear-export-button{padding:8px 16px}.smear-export-button:disabled{opacity:.6;cursor:default}.smear-info-wrap{align-items:center;gap:4px;display:inline-flex;position:relative}.smear-info-icon{cursor:pointer;background:#f9f9f9;border:1px solid #a5a5a5;border-radius:50%;justify-content:center;align-items:center;width:16px;height:16px;padding:0;font-size:.65rem;line-height:1;display:inline-flex}.smear-info-tooltip{z-index:10;color:#333;background:rgba(255,255,255,.96);border-radius:10px;width:220px;padding:8px 10px;font-size:.72rem;line-height:1.4;position:absolute;top:140%;left:0;box-shadow:0 8px 24px rgba(0,0,0,.12)}.smear-canvas-wrapper{text-align:center;z-index:1;width:100%;margin:0 auto;position:relative}.smear-canvas-inner{transform-origin:top;margin:0 auto;display:block}.smear-canvas-wrapper canvas{width:100%;height:auto;display:block}.smear-status{color:#a5a5a5;pointer-events:none;justify-content:center;align-items:center;font-size:.9rem;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.smear-status.error{color:#f66}.smear-canvas-inner,.smear-canvas-inner canvas{pointer-events:none}.smear-export-controls{z-index:5;flex-wrap:wrap;justify-content:center;gap:12px;display:flex;position:relative}.smear-export-note{text-align:center;opacity:.8;z-index:5;font-size:.8rem;position:relative}.smear-export-note span{font-weight:600}.smear-record-row{align-items:center;gap:12px;display:flex}.smear-record-duration{align-items:center;gap:6px;display:flex}.smear-record-label{opacity:.7;font-size:12px}.templates-page{background:#c5c5c5;margin:0 auto;padding:80px 10px}.templates-title{min-width:20ch;font-size:90px;display:inline-block}.template-i-frame{border:none;outline:none;width:100%}@media (max-width:700px){.template-i-frame{height:140px;margin-top:-40px;margin-left:4px}}.single-template-container{padding:0 20px;font-family:Arial,Helvetica,sans-serif}.ikat-text-effect-wrapper{flex-direction:column;align-items:center;gap:28px;width:100%;display:flex}.ikat-controls{flex-direction:column;gap:54px;width:100%;max-width:960px;display:flex}.ikat-row{flex-wrap:wrap;justify-content:center;gap:24px;display:flex}.ikat-row-spaced{margin-top:4px}.ikat-row-bottom{justify-content:center;margin-top:48px}.ikat-group{margin-top:8px}.ikat-group .ikat-row{gap:32px;margin-top:10px}.ikat-control{text-transform:uppercase;letter-spacing:.08em;flex-direction:column;align-items:stretch;gap:8px;min-width:170px;max-width:240px;font-size:.75rem;display:flex}.ikat-control-inline{align-items:flex-start;max-width:240px}.ikat-control-wide{min-width:100%;max-width:none}.ikat-label-row{justify-content:space-between;align-items:center;display:flex}.ikat-label{font-weight:500}.ikat-value{opacity:.8;font-size:.75rem;font-weight:600}.ikat-helper{text-transform:none;opacity:.75;font-size:.72rem}.ikat-control input[type=range]{accent-color:#f7e9a9;width:100%}.ikat-control input[type=color]{height:30px;padding:2px}.ikat-controls textarea,.ikat-controls input[type=text],.ikat-controls .ikat-select{text-transform:none;letter-spacing:normal;background:#f6f6f6;border:1px solid #a5a5a5;border-radius:999px;margin-top:4px;padding:4px 8px;font-size:.8rem}.ikat-controls textarea{resize:vertical;border-radius:8px;min-height:64px}.ikat-reset-button,.ikat-export-button,.ikat-action-button{letter-spacing:.08em;text-transform:uppercase;cursor:pointer;background:#f9f9f9;border:1px solid #a5a5a5;border-radius:999px;font-size:.8rem}.ikat-reset-button{padding:9px 22px}.ikat-export-button,.ikat-action-button{padding:8px 16px}.ikat-action-button:disabled,.ikat-export-button:disabled{opacity:.6;cursor:default}.ikat-look-preview{text-align:center;border:1px solid #a5a5a5;justify-content:center;align-items:center;margin:0 auto;display:flex}.ikat-look-option--active .ikat-look-preview{transform:translateY(-1px)}.ikat-step-title--dropdown{cursor:pointer;text-transform:uppercase;letter-spacing:.08em;color:#333;text-align:center;background:0 0;border:none;justify-content:center;align-items:center;gap:10px;width:100%;padding:0;font-size:.85rem;font-weight:600;display:inline-flex}.ikat-step-caret{justify-content:center;width:18px;transition:transform .18s;display:inline-flex}.ikat-step-caret--open{transform:rotate(180deg)}.ikat-dropdown-title{text-transform:none;letter-spacing:normal;font-weight:600}.ikat-display-area{text-align:center;z-index:1;width:100%;max-width:960px;margin:0 auto;position:relative}.ikat-canvas-inner{transform-origin:top;max-width:100%;margin:0 auto;display:inline-block}.ikat-display-area canvas{width:100%;height:auto;margin:0 auto;display:block}.ikat-multiline{flex-direction:column;justify-content:center;align-items:center;gap:8px;display:flex}.ikat-line{justify-content:center;width:100%;display:flex}.ikat-status{color:#a5a5a5;pointer-events:none;justify-content:center;align-items:center;font-size:.9rem;display:flex;position:absolute;top:0;bottom:0;left:0;right:0}.ikat-status.error{color:#f66}.ikat-export-controls{z-index:5;flex-wrap:wrap;justify-content:center;gap:12px;margin-top:18px;display:flex;position:relative}.ikat-export-note{text-align:center;opacity:.8;z-index:5;font-size:.8rem;position:relative}.ikat-export-note span{font-weight:600}.ikat-record-row{align-items:center;gap:12px;display:flex}.ikat-record-duration{align-items:center;gap:6px;display:flex}.ikat-record-label{opacity:.7;font-size:12px}.ikat-look-row{flex-direction:column;align-items:center;gap:14px}.ikat-look-option{cursor:pointer;background:0 0;border:none;width:100%;max-width:420px;padding:0;display:block}.ikat-look-preview{background:0 0;border:1px solid #a5a5a5;border-radius:999px;justify-content:center;align-items:center;width:100%;height:72px;transition:border-color .16s,transform .16s,background-color .16s;display:flex}.ikat-look-option:hover .ikat-look-preview{border-color:#666}.ikat-look-option--active .ikat-look-preview{background:0 0;border-color:#111}.ikat-look-option:focus-visible .ikat-look-preview{outline-offset:4px;outline:2px solid #111}.ikat-look-preview>*{align-items:center;max-height:100%;display:flex}.ikat-step-title{text-align:center}.ikat-dropdown-body{margin-top:18px;margin-bottom:22px;padding-top:6px}.ikat-step-title--dropdown{padding-bottom:10px}html,body{height:100%;margin:0}:root{--bez:cubic-bezier(.77,0,.175,1);--blobBase:.85;--blobApart:.65}.preload{z-index:9999;background:#c5c5c5;position:fixed;top:0;bottom:0;left:0;right:0}.goo{width:220px;height:110px;position:absolute;top:50%;left:50%;overflow:visible;transform:translate(-50%,-50%)}.cell{transform-box:view-box;transform-origin:150px 70px;animation:rotation 4s var(--bez)infinite}.blob{transform-box:fill-box;transform-origin:50%}.blob-a{animation:cell-1 3s var(--bez)infinite}.blob-b{animation:cell-2 3s var(--bez)infinite}@keyframes cell-1{0%{transform:scale(var(--blobBase))translate3d(0,0,0)}33.33%{transform:scale(var(--blobApart))translate3d(-125px,0,0)}66.66%{transform:scale(var(--blobApart))translate3d(-125px,0,0)}to{transform:scale(var(--blobBase))translate3d(0,0,0)}}@keyframes cell-2{0%{transform:scale(var(--blobBase))translate3d(0,0,0)}33.33%{transform:scale(var(--blobApart))translate3d(125px,0,0)}66.66%{transform:scale(var(--blobApart))translate3d(125px,0,0)}to{transform:scale(var(--blobBase))translate3d(0,0,0)}}@keyframes rotation{0%{transform:rotate(0)}33.33%{transform:rotate(0)}66.66%{transform:rotate(180deg)}to{transform:rotate(180deg)}}\n/*$vite$:1*/',document.head.appendChild(i),s=Object.create,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,h=(e,t)=>function(){return e&&(t=(0,e[l(e)[0]])(e=0)),t},d=(e,t)=>function(){return t||(0,e[l(e)[0]])((t={exports:{}}).exports,t),t.exports},p=e=>{let t={};for(var n in e)a(t,n,{get:e[n],enumerable:!0});return t},f=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(var i,s=l(t),u=0,h=s.length;u<h;u++)i=s[u],c.call(e,i)||i===n||a(e,i,{get:(e=>t[e]).bind(null,i),enumerable:!(r=o(t,i))||r.enumerable});return e},m=(e,t,n)=>(n=null!=e?s(u(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)),g=e=>f(a({},"__esModule",{value:!0}),e),function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),v=d({"node_modules/react/cjs/react.production.js":e=>{var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray;function w(){}var S={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function C(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:void 0!==i?i:null,props:r}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var T=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function D(e,r,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case t:case n:c=!0;break;case h:return D((c=e._init)(e._payload),r,i,s,a)}}if(c)return a=a(e),c=""===s?"."+M(e,0):s,_(a)?(i="",null!=c&&(i=c.replace(T,"$&/")+"/"),D(a,r,i,"",function(e){return e})):null!=a&&(A(a)&&(l=a,u=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+c,a=C(l.type,u,l.props)),r.push(a)),1;c=0;var d,f=""===s?".":s+":";if(_(e))for(var m=0;m<e.length;m++)c+=D(s=e[m],r,i,o=f+M(s,m),a);else if("function"==typeof(m=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)c+=D(s=s.value,r,i,o=f+M(s,m++),a);else if("object"===o){if("function"==typeof e.then)return D(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),r,i,s,a);throw r=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}function k(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},I={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};e.Activity=d,e.Children=I,e.Component=v,e.Fragment=r,e.Profiler=s,e.PureComponent=b,e.StrictMode=i,e.Suspense=u,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!E.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return C(e.type,i,r)},e.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},e.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return C(e,s,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:l,render:e}},e.isValidElement=A,e.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},e.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(w,F)}catch(s){F(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version="19.2.1"}}),y=d({"node_modules/react/index.js":(e,t)=>{t.exports=v()}}),b=d({"node_modules/scheduler/cjs/scheduler.production.js":e=>{function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>i(l,n))u<s&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<s&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,p=!1,f=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function _(e){if(m=!1,x(e),!f)if(null!==n(l))f=!0,S||(S=!0,w());else{var t=n(u);null!==t&&N(_,t.startTime-e)}}var w,S=!1,E=-1,C=5,A=-1;function T(){return!(!g&&e.unstable_now()-A<C)}function M(){if(g=!1,S){var t=e.unstable_now();A=t;var i=!0;try{e:{f=!1,m&&(m=!1,y(E),E=-1),p=!0;var s=d;try{t:{for(x(t),h=n(l);null!==h&&!(h.expirationTime>t&&T());){var a=h.callback;if("function"==typeof a){h.callback=null,d=h.priorityLevel;var o=a(h.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){h.callback=o,x(t),i=!0;break t}h===n(l)&&r(l),x(t)}else r(l);h=n(l)}if(null!==h)i=!0;else{var c=n(u);null!==c&&N(_,c.startTime-t),i=!1}}break e}finally{h=null,d=s,p=!1}i=void 0}}finally{i?w():S=!1}}}if("function"==typeof b)w=function(){b(M)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,k=D.port2;D.port1.onmessage=M,w=function(){k.postMessage(null)}}else w=function(){v(M,0)};function N(t,n){E=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(u,r),null===n(l)&&r===n(u)&&(m?(y(E),E=-1):m=!0,N(_,s-a))):(r.sortIndex=o,t(l,r),f||p||(f=!0,S||(S=!0,w()))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}}),x=d({"node_modules/scheduler/index.js":(e,t)=>{t.exports=b()}}),_=d({"node_modules/react-dom/cjs/react-dom.production.js":e=>{var t=y();function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal"),a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},e.flushSync=function(e){var t=a.T,n=i.p;try{if(a.T=null,i.p=2,e)return e()}finally{a.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,i.d.C(e,t))},e.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},e.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=o(n,t.crossOrigin),s="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},e.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=o(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=o(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},e.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=o(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return a.H.useFormState(e,t,n)},e.useFormStatus=function(){return a.H.useHostTransitionStatus()},e.version="19.2.1"}}),w=d({"node_modules/react-dom/index.js":(e,t)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),t.exports=_()}}),S=d({"node_modules/react-dom/cjs/react-dom-client.production.js":e=>{var t=x(),n=y(),r=w();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function o(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function l(e){if(s(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var c=Object.assign,h=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),b=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N=Symbol.for("react.client.reference");function F(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===N?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case b:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return F(e(t))}catch(n){}}return null}var I=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},O=[],B=-1;function U(e){return{current:e}}function z(e){0>B||(e.current=O[B],O[B]=null,B--)}function V(e,t){B++,O[B]=e.current,e.current=t}var j,G,H=U(null),W=U(null),$=U(null),q=U(null);function X(e,t){switch(V($,t),V(W,e),V(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yh(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),V(H,e)}function Y(){z(H),z(W),z($)}function Z(e){null!==e.memoizedState&&V(q,e);var t=H.current,n=yh(t,e.type);t!==n&&(V(W,e),V(H,n))}function K(e){W.current===e&&(z(H),z(W)),q.current===e&&(z(q),cd._currentValue=P)}function Q(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||"",G=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+j+e+G}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"==typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),u=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Q(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Q("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ie=t.unstable_scheduleCallback,se=t.unstable_cancelCallback,ae=t.unstable_shouldYield,oe=t.unstable_requestPaint,le=t.unstable_now,ue=t.unstable_getCurrentPriorityLevel,ce=t.unstable_ImmediatePriority,he=t.unstable_UserBlockingPriority,de=t.unstable_NormalPriority,pe=t.unstable_LowPriority,fe=t.unstable_IdlePriority,me=t.log,ge=t.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"==typeof me&&ge(e),ye&&"function"==typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(_e(e)/we|0)|0},_e=Math.log,we=Math.LN2,Se=256,Ee=262144,Ce=4194304;function Ae(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=Ae(r):0!==(a&=o)?i=Ae(a):n||0!==(n=o&~e)&&(i=Ae(n)):0!==(o=r&~s)?i=Ae(o):0!==a?i=Ae(a):n||0!==(n=r&~e)&&(i=Ae(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&4194048&n)?t:i}function Me(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function De(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=Ce;return!(62914560&(Ce<<=1))&&(Ce=4194304),e}function Ne(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=42&n?1:Pe(n))&(e.suspendedLanes|t))?0:n}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Be(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Ed(e.type)}function Ue(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var ze=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ze,je="__reactProps$"+ze,Ge="__reactContainer$"+ze,He="__reactEvents$"+ze,We="__reactListeners$"+ze,$e="__reactHandles$"+ze,qe="__reactResources$"+ze,Xe="__reactMarker$"+ze;function Ye(e){delete e[Ve],delete e[je],delete e[He],delete e[We],delete e[$e]}function Ze(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ge]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ph(e);null!==e;){if(n=e[Ve])return n;e=Ph(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[Ve]||e[Ge]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Je(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Xe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(at,i)&&(st.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?xt(e,a,ht(t)):null!=n?xt(e,a,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+ht(o):e.removeAttribute("name")}function bt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return void pt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a),pt(e)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(I(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??="",t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function At(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&At(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&At(e,a,t[a])}function Mt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ft(){}var It=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Pt=null;function Ot(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[je]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[je]||null;if(!s)throw Error(i(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Bt=!1;function Ut(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Lt||null!==Pt)&&(Ju(),Lt&&(t=Lt,e=Pt,Pt=Lt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[je]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Vt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),jt=!1;if(Vt)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch(Yd){jt=!1}var Ht=null,Wt=null,$t=null;function qt(){if($t)return $t;var e,t,n=Wt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Zt(){return!1}function Kt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:Zt,this.isPropagationStopped=Zt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Qt,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Kt(tn),rn=c({},tn,{view:0,detail:0}),sn=Kt(rn),an=c({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Qt=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=Qt=0,en=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=Kt(an),ln=Kt(c({},an,{dataTransfer:0})),un=Kt(c({},rn,{relatedTarget:0})),cn=Kt(c({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Kt(c({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Kt(c({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Kt(c({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Kt(c({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Kt(c({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),_n=Kt(c({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Kt(c({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Kt(c({},tn,{newState:0,oldState:0})),En=[9,13,27,32],Cn=Vt&&"CompositionEvent"in window,An=null;Vt&&"documentMode"in document&&(An=document.documentMode);var Tn=Vt&&"TextEvent"in window&&!An,Mn=Vt&&(!Cn||An&&8<An&&11>=An),Dn=String.fromCharCode(32),kn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1,Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Pn(e,t,n,r){Lt?Pt?Pt.push(r):Pt=[r]:Lt=r,0<(t=rh(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Bn=null;function Un(e){Yc(e,0)}function zn(e){if(ft(Qe(e)))return e}function Vn(e,t){if("change"===e)return t}var jn=!1;if(Vt){var Gn;if(Vt){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"==typeof Wn.oninput}Gn=Hn}else Gn=!1;jn=Gn&&(!document.documentMode||9<document.documentMode)}function $n(){On&&(On.detachEvent("onpropertychange",qn),Bn=On=null)}function qn(e){if("value"===e.propertyName&&zn(Bn)){var t=[];Pn(t,Bn,e,Rt(e)),Ut(Un,t)}}function Xn(e,t,n){"focusin"===e?($n(),Bn=n,(On=t).attachEvent("onpropertychange",qn)):"focusout"===e&&$n()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(Bn)}function Zn(e,t){if("click"===e)return zn(t)}function Kn(e,t){if("input"===e||"change"===e)return zn(t)}var Qn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Jn(e,t){if(Qn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Vt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,ur=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==ar||ar!==mt(r)||(r="selectionStart"in(r=ar)&&ir(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Jn(lr,r)||(lr=r,0<(r=rh(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pr={},fr={};function mr(e){if(pr[e])return pr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Vt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),br=mr("transitionrun"),xr=mr("transitionstart"),_r=mr("transitioncancel"),wr=mr("transitionend"),Sr=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Sr.set(e,t),rt(t,[e])}Er.push("scrollEnd");var Ar="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Mr=0,Dr=0;function kr(){for(var e=Mr,t=Dr=Mr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var s=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function Nr(e,t,n,r){Tr[Mr++]=e,Tr[Mr++]=t,Tr[Mr++]=n,Tr[Mr++]=r,Dr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Fr(e,t,n,r){return Nr(e,t,n,r),Lr(e)}function Ir(e,t){return Nr(e,null,null,t),Lr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-xe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<Hu)throw Hu=0,Wu=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(e,t,n,r){return new Or(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Br(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,r,s,a){var o=0;if(r=e,"function"==typeof e)Ur(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Br(31,n,t,s)).elementType=T,e.lanes=a,e;case f:return Gr(n.children,s,a,t);case m:o=8,s|=24;break;case g:return(e=Br(12,n,t,2|s)).elementType=g,e.lanes=a,e;case S:return(e=Br(13,n,t,s)).elementType=S,e.lanes=a,e;case E:return(e=Br(19,n,t,s)).elementType=E,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:o=10;break e;case v:o=9;break e;case _:o=11;break e;case C:o=14;break e;case A:o=16,r=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Br(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Gr(e,t,n,r){return(e=Br(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Br(6,e,null,t)).lanes=n,e}function Wr(e){var t=Br(18,null,null,0);return t.stateNode=e,t}function $r(e,t,n){return(t=Br(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Xr(e,t){if("object"==typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Zr=0,Kr=null,Qr=0,Jr=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Yr[Zr++]=Qr,Yr[Zr++]=Kr,Kr=e,Qr=t}function si(e,t,n){Jr[ei++]=ni,Jr[ei++]=ri,Jr[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-xe(r)-1;r&=~(1<<i),n+=1;var s=32-xe(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ni=1<<32-xe(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function ai(e){null!==e.return&&(ii(e,1),si(e,1,0))}function oi(e){for(;e===Kr;)Kr=Yr[--Zr],Yr[Zr]=null,Qr=Yr[--Zr],Yr[Zr]=null;for(;e===ti;)ti=Jr[--ei],Jr[ei]=null,ri=Jr[--ei],Jr[ei]=null,ni=Jr[--ei],Jr[ei]=null}function li(e,t){Jr[ei++]=ni,Jr[ei++]=ri,Jr[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ui=null,ci=null,hi=!1,di=null,pi=!1,fi=Error(i(519));function mi(e){throw _i(Xr(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ve]=e,t[je]=r,n){case"dialog":Zc("cancel",t),Zc("close",t);break;case"iframe":case"object":case"embed":Zc("load",t);break;case"video":case"audio":for(n=0;n<qc.length;n++)Zc(qc[n],t);break;case"source":Zc("error",t);break;case"img":case"image":case"link":Zc("error",t),Zc("load",t);break;case"details":Zc("toggle",t);break;case"input":Zc("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Zc("invalid",t);break;case"textarea":Zc("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||uh(t.textContent,n)?(null!=r.popover&&(Zc("beforetoggle",t),Zc("toggle",t)),null!=r.onScroll&&Zc("scroll",t),null!=r.onScrollEnd&&Zc("scrollend",t),null!=r.onClick&&(t.onclick=Ft),t=!0):t=!1,t||mi(e,!0)}function vi(e){for(ui=e.return;ui;)switch(ui.tag){case 5:case 31:case 13:return void(pi=!1);case 27:case 3:return void(pi=!0);default:ui=ui.return}}function yi(e){if(e!==ui)return!1;if(!hi)return vi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bh(e.type,e.memoizedProps)),t=!t),t&&ci&&mi(e),vi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ci=Lh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));ci=Lh(e)}else 27===n?(n=ci,Ah(e.type)?(e=Rh,Rh=null,ci=e):ci=n):ci=ui?Ih(e.stateNode.nextSibling):null;return!0}function bi(){ci=ui=null,hi=!1}function xi(){var e=di;return null!==e&&(null===ku?ku=e:ku.push.apply(ku,e),di=null),e}function _i(e){null===di?di=[e]:di.push(e)}var wi=U(null),Si=null,Ei=null;function Ci(e,t,n){V(wi,t._currentValue),t._currentValue=n}function Ai(e){e._currentValue=wi.current,z(wi)}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mi(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=s;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ti(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ti(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Di(e,t,n,r){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(524288&s.flags)a=!0;else if(262144&s.flags)break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=s.type;Qn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===q.current){if(null===(o=s.alternate))throw Error(i(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(cd):e=[cd])}s=s.return}null!==e&&Mi(t,e,n,r),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ni(e){Si=e,Ei=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Fi(e){return Ri(Si,e)}function Ii(e,t){return null===Si&&Ni(e),Ri(e,t)}function Ri(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ei){if(null===e)throw Error(i(308));Ei=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ei=Ei.next=t;return n}var Li="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pi=t.unstable_scheduleCallback,Oi=t.unstable_NormalPriority,Bi={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ui(){return{controller:new Li,data:new Map,refCount:0}}function zi(e){e.refCount--,0===e.refCount&&Pi(Oi,function(){e.controller.abort()})}var Vi=null,ji=0,Gi=0,Hi=null;function Wi(){if(0===--ji&&null!==Vi){null!==Hi&&(Hi.status="fulfilled");var e=Vi;Vi=null,Gi=0,Hi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var $i=R.S;R.S=function(e,t){Iu=le(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Vi){var n=Vi=[];ji=0,Gi=jc(),Hi={status:"pending",value:void 0,then:function(e){n.push(e)}}}ji++,t.then(Wi,Wi)}(0,t),null!==$i&&$i(e,t)};var qi=U(null);function Xi(){var e=qi.current;return null!==e?e:fu.pooledCache}function Yi(e,t){V(qi,null===t?qi.current:t.pool)}function Zi(){var e=Xi();return null===e?null:{parent:Bi._currentValue,pool:e}}var Ki=Error(i(460)),Qi=Error(i(474)),Ji=Error(i(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ft,Ft),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ft,Ft);else{if(null!==(e=fu)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw is=t,Ki}}function rs(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw is=t,Ki;throw t}}var is=null;function ss(){if(null===is)throw Error(i(459));var e=is;return is=null,e}function as(e){if(e===Ki||e===Ji)throw Error(i(483))}var os=null,ls=0;function us(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function cs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===h)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ds(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===f?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===A&&rs(i)===t.type)?(cs(t=s(t,n.props),n),t.return=e,t):(cs(t=jr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Gr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return cs(n=jr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=$r(t,e.mode,n)).return=e,t;case A:return m(e,t=rs(t),n)}if(I(t)||k(t))return(t=Gr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,us(t),n);if(t.$$typeof===b)return m(e,Ii(e,t),n);hs(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===i?u(e,t,n,r):null;case p:return n.key===i?c(e,t,n,r):null;case A:return g(e,t,n=rs(n),r)}if(I(n)||k(n))return null!==i?null:h(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,us(n),r);if(n.$$typeof===b)return g(e,t,Ii(e,n),r);hs(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return v(e,t,n,r=rs(r),i)}if(I(r)||k(r))return h(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return v(e,t,n,us(r),i);if(r.$$typeof===b)return v(e,t,n,Ii(t,r),i);hs(t,r)}return null}function y(l,u,c,h){if("object"==typeof c&&null!==c&&c.type===f&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case d:e:{for(var x=c.key;null!==u;){if(u.key===x){if((x=c.type)===f){if(7===u.tag){n(l,u.sibling),(h=s(u,c.props.children)).return=l,l=h;break e}}else if(u.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===A&&rs(x)===u.type){n(l,u.sibling),cs(h=s(u,c.props),c),h.return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===f?((h=Gr(c.props.children,l.mode,h,c.key)).return=l,l=h):(cs(h=jr(c.type,c.key,c.props,null,l.mode,h),c),h.return=l,l=h)}return o(l);case p:e:{for(x=c.key;null!==u;){if(u.key===x){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(h=s(u,c.children||[])).return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}(h=$r(c,l.mode,h)).return=l,l=h}return o(l);case A:return y(l,u,c=rs(c),h)}if(I(c))return function(i,s,o,l){for(var u=null,c=null,h=s,d=s=0,p=null;null!==h&&d<o.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var f=g(i,h,o[d],l);if(null===f){null===h&&(h=p);break}e&&h&&null===f.alternate&&t(i,h),s=a(f,s,d),null===c?u=f:c.sibling=f,c=f,h=p}if(d===o.length)return n(i,h),hi&&ii(i,d),u;if(null===h){for(;d<o.length;d++)null!==(h=m(i,o[d],l))&&(s=a(h,s,d),null===c?u=h:c.sibling=h,c=h);return hi&&ii(i,d),u}for(h=r(h);d<o.length;d++)null!==(p=v(h,i,d,o[d],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?d:p.key),s=a(p,s,d),null===c?u=p:c.sibling=p,c=p);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,d),u}(l,u,c,h);if(k(c)){if("function"!=typeof(x=k(c)))throw Error(i(150));return function(s,o,l,u){if(null==l)throw Error(i(151));for(var c=null,h=null,d=o,p=o=0,f=null,y=l.next();null!==d&&!y.done;p++,y=l.next()){d.index>p?(f=d,d=null):f=d.sibling;var b=g(s,d,y.value,u);if(null===b){null===d&&(d=f);break}e&&d&&null===b.alternate&&t(s,d),o=a(b,o,p),null===h?c=b:h.sibling=b,h=b,d=f}if(y.done)return n(s,d),hi&&ii(s,p),c;if(null===d){for(;!y.done;p++,y=l.next())null!==(y=m(s,y.value,u))&&(o=a(y,o,p),null===h?c=y:h.sibling=y,h=y);return hi&&ii(s,p),c}for(d=r(d);!y.done;p++,y=l.next())null!==(y=v(d,s,p,y.value,u))&&(e&&null!==y.alternate&&d.delete(null===y.key?p:y.key),o=a(y,o,p),null===h?c=y:h.sibling=y,h=y);return e&&d.forEach(function(e){return t(s,e)}),hi&&ii(s,p),c}(l,u,c=x.call(c),h)}if("function"==typeof c.then)return y(l,u,us(c),h);if(c.$$typeof===b)return y(l,u,Ii(l,c),h);hs(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(h=s(u,c)).return=l,l=h):(n(l,u),(h=Hr(c,l.mode,h)).return=l,l=h),o(l)):n(l,u)}return function(e,t,n,r){try{ls=0;var i=y(e,t,n,r);return os=null,i}catch(a){if(a===Ki||a===Ji)throw a;var s=Br(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var ps=ds(!0),fs=ds(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ys(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&pu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),Rr(e,null,n),t}return Nr(e,r,t,n),Lr(e)}function xs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function _s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ws=!1;function Ss(){if(ws&&null!==Hi)throw Hi}function Es(e,t,n,r){ws=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var h=e.alternate;null!==h&&(o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l)}if(null!==s){var d=i.baseState;for(a=0,h=u=l=null,o=s;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(gu&p)===p:(r&p)===p){0!==p&&p===Gi&&(ws=!0),null!==h&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;p=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(v,d,p):m))break e;d=c({},d,p);break e;case 2:ms=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,a|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===h&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null===s&&(i.shared.lanes=0),Eu|=a,e.lanes=a,e.memoizedState=d}}function Cs(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function As(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Cs(n[e],t)}var Ts=U(null),Ms=U(0);function Ds(e,t){V(Ms,e=wu),V(Ts,t),wu=e|t.baseLanes}function ks(){V(Ms,wu),V(Ts,Ts.current)}function Ns(){wu=Ms.current,z(Ts),z(Ms)}var Fs=U(null),Is=null;function Rs(e){var t=e.alternate;V(Us,1&Us.current),V(Fs,e),null===Is&&(null===t||null!==Ts.current||null!==t.memoizedState)&&(Is=e)}function Ls(e){V(Us,Us.current),V(Fs,e),null===Is&&(Is=e)}function Ps(e){22===e.tag?(V(Us,Us.current),V(Fs,e),null===Is&&(Is=e)):Os()}function Os(){V(Us,Us.current),V(Fs,Fs.current)}function Bs(e){z(Fs),Is===e&&(Is=null),z(Us)}var Us=U(0);function zs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Nh(n)||Fh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vs=0,js=null,Gs=null,Hs=null,Ws=!1,$s=!1,qs=!1,Xs=0,Ys=0,Zs=null,Ks=0;function Qs(){throw Error(i(321))}function Js(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){return Vs=s,js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?go:vo,qs=!1,s=n(r,i),qs=!1,$s&&(s=na(t,n,r,i)),ta(e),s}function ta(e){R.H=mo;var t=null!==Gs&&null!==Gs.next;if(Vs=0,Hs=Gs=js=null,Ws=!1,Ys=0,Zs=null,t)throw Error(i(300));null===e||Io||null!==(e=e.dependencies)&&ki(e)&&(Io=!0)}function na(e,t,n,r){js=e;var s=0;do{if($s&&(Zs=null),Ys=0,$s=!1,25<=s)throw Error(i(301));if(s+=1,Hs=Gs=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}R.H=yo,a=t(n,r)}while($s);return a}function ra(){var e=R.H,t=e.useState()[0];return t="function"==typeof t.then?ua(t):t,e=e.useState()[0],(null!==Gs?Gs.memoizedState:null)!==e&&(js.flags|=1024),t}function ia(){var e=0!==Xs;return Xs=0,e}function sa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(Ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ws=!1}Vs=0,Hs=Gs=js=null,$s=!1,Ys=Xs=0,Zs=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Hs?js.memoizedState=Hs=e:Hs=Hs.next=e,Hs}function la(){if(null===Gs){var e=js.alternate;e=null!==e?e.memoizedState:null}else e=Gs.next;var t=null===Hs?js.memoizedState:Hs.next;if(null!==t)Hs=t,Gs=e;else{if(null===e){if(null===js.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Gs=e).memoizedState,baseState:Gs.baseState,baseQueue:Gs.baseQueue,queue:Gs.queue,next:null},null===Hs?js.memoizedState=Hs=e:Hs=Hs.next=e}return Hs}function ua(e){var t=Ys;return Ys+=1,null===Zs&&(Zs=[]),e=ns(Zs,e,t),t=js,null===(null===Hs?t.memoizedState:Hs.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?go:vo),e}function ca(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ua(e);if(e.$$typeof===b)return Fi(e)}throw Error(i(438,String(e)))}function ha(e){var t=null,n=js.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=js.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(t??={data:[],index:0},null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=M;return t.index++,n}function da(e,t){return"function"==typeof t?t(e):t}function pa(e){return fa(la(),Gs,e)}function fa(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var l=o=null,u=null,c=t=s.next,h=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(gu&d)===d:(Vs&d)===d){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Gi&&(h=!0);else{if((Vs&p)===p){c=c.next,p===Gi&&(h=!0);continue}d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,o=a):u=u.next=d,js.lanes|=p,Eu|=p}d=c.action,qs&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else p={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,o=a):u=u.next=p,js.lanes|=d,Eu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=l,!Qn(a,e.memoizedState)&&(Io=!0,h&&null!==(n=Hi)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=u,r.lastRenderedState=a}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ma(e){var t=la(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);Qn(a,t.memoizedState)||(Io=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ga(e,t,n){var r=js,s=la(),a=hi;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!Qn((Gs||s).memoizedState,n);if(o&&(s.memoizedState=n,Io=!0),s=s.queue,Va(ba.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Hs&&1&Hs.memoizedState.tag){if(r.flags|=2048,Pa(9,{destroy:void 0},ya.bind(null,r,s,n,t),null),null===fu)throw Error(i(349));a||127&Vs||va(r,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=js.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ya(e,t,n,r){t.value=n,t.getSnapshot=r,xa(t)&&_a(e)}function ba(e,t,n){return n(function(){xa(t)&&_a(e)})}function xa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function _a(e){var t=Ir(e,2);null!==t&&Xu(t,0,2)}function wa(e){var t=oa();if("function"==typeof e){var n=e;if(e=n(),qs){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t}function Sa(e,t,n,r){return e.baseState=n,fa(e,Gs,"function"==typeof r?r:da)}function Ea(e,t,n,r,s){if(ho(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==R.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Ca(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Ca(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=R.T,a={};R.T=a;try{var o=n(i,r),l=R.S;null!==l&&l(a,o),Aa(e,t,o)}catch(u){Ma(e,t,u)}finally{null!==s&&null!==a.types&&(s.types=a.types),R.T=s}}else try{Aa(e,t,s=n(i,r))}catch(c){Ma(e,t,c)}}function Aa(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ta(e,t,n)},function(n){return Ma(e,t,n)}):Ta(e,t,n)}function Ta(e,t,n){t.status="fulfilled",t.value=n,Da(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ca(e,n)))}function Ma(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Da(t),t=t.next}while(t!==r)}e.action=null}function Da(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ka(e,t){return t}function Na(e,t){if(hi){var n=fu.formState;if(null!==n){e:{var r=js;if(hi){if(ci){t:{for(var i=ci,s=pi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Ih(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ci=Ih(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},n.queue=r,n=lo.bind(null,js,r),r.dispatch=n,r=wa(!1),s=co.bind(null,js,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=i,n=Ea.bind(null,js,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Fa(e){return Ia(la(),Gs,e)}function Ia(e,t,n){if(t=fa(e,t,ka)[0],e=pa(da)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ua(t)}catch(a){if(a===Ki)throw Ji;throw a}else r=t;var i=(t=la()).queue,s=i.dispatch;return n!==t.memoizedState&&(js.flags|=2048,Pa(9,{destroy:void 0},Ra.bind(null,i,n),null)),[r,s,e]}function Ra(e,t){e.action=t}function La(e){var t=la(),n=Gs;if(null!==n)return Ia(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=js.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oa(){return la().memoizedState}function Ba(e,t,n,r){var i=oa();js.flags|=e,i.memoizedState=Pa(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ua(e,t,n,r){var i=la();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Gs&&null!==r&&Js(r,Gs.memoizedState.deps)?i.memoizedState=Pa(t,s,n,r):(js.flags|=e,i.memoizedState=Pa(1|t,s,n,r))}function za(e,t){Ba(8390656,8,e,t)}function Va(e,t){Ua(2048,8,e,t)}function ja(e){var t=la().memoizedState;return function(e){js.flags|=4;var t=js.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&pu)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Ga(e,t){return Ua(4,2,e,t)}function Ha(e,t){return Ua(4,4,e,t)}function Wa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function $a(e,t,n){n=null!=n?n.concat([e]):null,Ua(4,4,Wa.bind(null,t,e),n)}function qa(){}function Xa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Js(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ya(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Js(t,r[1]))return r[0];if(r=e(),qs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Za(e,t,n){return void 0===n||1073741824&Vs&&!(261930&gu)?e.memoizedState=t:(e.memoizedState=n,e=qu(),js.lanes|=e,Eu|=e,n)}function Ka(e,t,n,r){return Qn(n,t)?n:null!==Ts.current?(e=Za(e,n,r),Qn(e,t)||(Io=!0),e):42&Vs&&(!(1073741824&Vs)||261930&gu)?(e=qu(),js.lanes|=e,Eu|=e,t):(Io=!0,e.memoizedState=n)}function Qa(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var a,o,l,u=R.T,c={};R.T=c,co(e,!1,t,n);try{var h=i(),d=R.S;null!==d&&d(c,h),null!==h&&"object"==typeof h&&"function"==typeof h.then?uo(e,t,(a=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},h.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<o.length;e++)(0,o[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),$u()):uo(e,t,r,$u())}catch(p){uo(e,t,{then:function(){},status:"rejected",reason:p},$u())}finally{L.p=s,null!==u&&null!==c.types&&(u.types=c.types),R.T=u}}function Ja(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(i(476));var s=to(e).queue;Qa(e,s,t,P,null===n?Ja:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:P},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},$u())}function ro(){return Fi(cd)}function io(){return la().memoizedState}function so(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=$u(),r=bs(t,e=ys(n),n);return null!==r&&(Xu(r,0,n),xs(r,t,n)),t={cache:Ui()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=$u();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?po(t,n):null!==(n=Fr(e,t,n,r))&&(Xu(n,0,r),fo(n,t,r))}function lo(e,t,n){uo(e,t,n,$u())}function uo(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))po(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Qn(o,a))return Nr(e,t,i,0),null===fu&&kr(),!1}catch(l){}if(null!==(n=Fr(e,t,i,r)))return Xu(n,0,r),fo(n,t,r),!0}return!1}function co(e,t,n,r){if(r={lane:2,revertLane:jc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(i(479))}else null!==(t=Fr(e,n,r,2))&&Xu(t,0,2)}function ho(e){var t=e.alternate;return e===js||null!==t&&t===js}function po(e,t){$s=Ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fo(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var mo={readContext:Fi,use:ca,useCallback:Qs,useContext:Qs,useEffect:Qs,useImperativeHandle:Qs,useLayoutEffect:Qs,useInsertionEffect:Qs,useMemo:Qs,useReducer:Qs,useRef:Qs,useState:Qs,useDebugValue:Qs,useDeferredValue:Qs,useTransition:Qs,useSyncExternalStore:Qs,useId:Qs,useHostTransitionStatus:Qs,useFormState:Qs,useActionState:Qs,useOptimistic:Qs,useMemoCache:Qs,useCacheRefresh:Qs};mo.useEffectEvent=Qs;var go={readContext:Fi,use:ca,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Fi,useEffect:za,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Ba(4194308,4,Wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){Ba(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(qs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var i=n(t);if(qs){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,js,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=wa(e)).queue,n=lo.bind(null,js,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qa,useDeferredValue:function(e,t){return Za(oa(),e,t)},useTransition:function(){var e=wa(!1);return e=Qa.bind(null,js,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=js,s=oa();if(hi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===fu)throw Error(i(349));127&gu||va(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,za(ba.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,{destroy:void 0},ya.bind(null,r,a,n,t),null),n},useId:function(){var e=oa(),t=fu.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-xe(ni)-1)).toString(32)+n),0<(n=Xs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ks++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Na,useActionState:Na,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=co.bind(null,js,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,js)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(2&pu)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Fi,use:ca,useCallback:Xa,useContext:Fi,useEffect:Va,useImperativeHandle:$a,useInsertionEffect:Ga,useLayoutEffect:Ha,useMemo:Ya,useReducer:pa,useRef:Oa,useState:function(){return pa(da)},useDebugValue:qa,useDeferredValue:function(e,t){return Ka(la(),Gs.memoizedState,e,t)},useTransition:function(){var e=pa(da)[0],t=la().memoizedState;return["boolean"==typeof e?e:ua(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:Fa,useActionState:Fa,useOptimistic:function(e,t){return Sa(la(),0,e,t)},useMemoCache:ha,useCacheRefresh:so};vo.useEffectEvent=ja;var yo={readContext:Fi,use:ca,useCallback:Xa,useContext:Fi,useEffect:Va,useImperativeHandle:$a,useInsertionEffect:Ga,useLayoutEffect:Ha,useMemo:Ya,useReducer:ma,useRef:Oa,useState:function(){return ma(da)},useDebugValue:qa,useDeferredValue:function(e,t){var n=la();return null===Gs?Za(n,e,t):Ka(n,Gs.memoizedState,e,t)},useTransition:function(){var e=ma(da)[0],t=la().memoizedState;return["boolean"==typeof e?e:ua(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=la();return null!==Gs?Sa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:so};function bo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yo.useEffectEvent=ja;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$u(),i=ys(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Xu(t,0,r),xs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$u(),i=ys(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Xu(t,0,r),xs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$u(),r=ys(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Xu(t,0,n),xs(t,e,n))}};function _o(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!(t.prototype&&t.prototype.isPureReactComponent&&Jn(n,r)&&Jn(i,s))}function wo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function So(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=c({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Eo(e){Ar(e)}function Co(e){console.error(e)}function Ao(e){Ar(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Mo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Do(e,t,n){return(n=ys(n)).tag=3,n.payload={element:null},n.callback=function(){To(e,t)},n}function ko(e){return(e=ys(e)).tag=3,e}function No(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Mo(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Mo(t,n,r),"function"!=typeof i&&(null===Pu?Pu=new Set([this]):Pu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Fo=Error(i(461)),Io=!1;function Ro(e,t,n,r){t.child=null===e?fs(t,null,n,r):ps(t,e.child,n,r)}function Lo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ni(t),r=ea(e,t,n,a,s,i),o=ia(),null===e||Io?(hi&&o&&ai(t),t.flags|=1,Ro(e,t,r,i),t.child):(sa(e,t,i),il(e,t,i))}function Po(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ur(s)||void 0!==s.defaultProps||null!==n.compare?((e=jr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Oo(e,t,s,r,i))}if(s=e.child,!sl(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=zr(s,r)).ref=t.ref,e.return=t,t.child=e}function Oo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(Io=!1,t.pendingProps=r=s,!sl(e,i))return t.lanes=e.lanes,il(e,t,i);131072&e.flags&&(Io=!0)}}return Ho(e,t,n,r,i)}function Bo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return zo(e,t,s,n,r)}if(!(536870912&n))return r=t.lanes=536870912,zo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==s?s.cachePool:null),null!==s?Ds(t,s):ks(),Ps(t)}else null!==s?(Yi(0,s.cachePool),Ds(t,s),Os(),t.memoizedState=null):(null!==e&&Yi(0,null),ks(),Os());return Ro(e,t,i,n),t.child}function Uo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zo(e,t,n,r,i){var s=Xi();return s=null===s?null:{parent:Bi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Yi(0,null),ks(),Ps(t),null!==e&&Di(e,t,r,!0),t.childLanes=i,null}function Vo(e,t){return(t=Jo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function jo(e,t,n){return ps(t,e.child,null,n),(e=Vo(t,t.pendingProps)).flags|=2,Bs(t),t.memoizedState=null,e}function Go(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ho(e,t,n,r,i){return Ni(t),n=ea(e,t,n,r,void 0,i),r=ia(),null===e||Io?(hi&&r&&ai(t),t.flags|=1,Ro(e,t,n,i),t.child):(sa(e,t,i),il(e,t,i))}function Wo(e,t,n,r,i,s){return Ni(t),t.updateQueue=null,n=na(t,r,n,i),ta(e),r=ia(),null===e||Io?(hi&&r&&ai(t),t.flags|=1,Ro(e,t,n,s),t.child):(sa(e,t,s),il(e,t,s))}function $o(e,t,n,r,i){if(Ni(t),null===t.stateNode){var s=Pr,a=n.contextType;"object"==typeof a&&null!==a&&(s=Fi(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=xo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},gs(t),a=n.contextType,s.context="object"==typeof a&&null!==a?Fi(a):Pr,s.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(bo(t,n,a,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(a=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&xo.enqueueReplaceState(s,s.state,null),Es(t,r,s,i),Ss(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=So(n,o);s.props=l;var u=s.context,c=n.contextType;a=Pr,"object"==typeof c&&null!==c&&(a=Fi(c));var h=n.getDerivedStateFromProps;c="function"==typeof h||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||u!==a)&&wo(t,s,r,a),ms=!1;var d=t.memoizedState;s.state=d,Es(t,r,s,i),Ss(),u=t.memoizedState,o||d!==u||ms?("function"==typeof h&&(bo(t,n,h,r),u=t.memoizedState),(l=ms||_o(t,n,l,r,d,u,a))?(c||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=a,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vs(e,t),c=So(n,a=t.memoizedProps),s.props=c,h=t.pendingProps,d=s.context,u=n.contextType,l=Pr,"object"==typeof u&&null!==u&&(l=Fi(u)),(u="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&wo(t,s,r,l),ms=!1,d=t.memoizedState,s.state=d,Es(t,r,s,i),Ss();var p=t.memoizedState;a!==h||d!==p||ms||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"==typeof o&&(bo(t,n,o,r),p=t.memoizedState),(c=ms||_o(t,n,c,r,d,p,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Go(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ps(t,e.child,null,i),t.child=ps(t,null,n,i)):Ro(e,t,n,i),t.memoizedState=s.state,e=t.child):e=il(e,t,i),e}function qo(e,t,n,r){return bi(),t.flags|=256,Ro(e,t,n,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:Zi()}}function Zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tu),e}function Ko(e,t,n){var r,s=t.pendingProps,a=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&Us.current)),r&&(a=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(hi){if(a?Rs(t):Os(),(e=ci)?null!==(e=null!==(e=kh(e,pi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ui=t,ci=null):e=null,null===e)throw mi(t);return Fh(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(Os(),l=Jo({mode:"hidden",children:l},a=t.mode),s=Gr(s,a,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Yo(n),s.childLanes=Zo(e,r,n),t.memoizedState=Xo,Uo(null,s)):(Rs(t),Qo(t,l))}var u=e.memoizedState;if(null!==u&&null!==(l=u.dehydrated)){if(o)256&t.flags?(Rs(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Os(),t.child=e.child,t.flags|=128,t=null):(Os(),l=s.fallback,a=t.mode,s=Jo({mode:"visible",children:s.children},a),(l=Gr(l,a,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,ps(t,e.child,null,n),(s=t.child).memoizedState=Yo(n),s.childLanes=Zo(e,r,n),t.memoizedState=Xo,t=Uo(null,s));else if(Rs(t),Fh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var c=r.dgst;r=c,(s=Error(i(419))).stack="",s.digest=r,_i({value:s,source:null,stack:null}),t=el(e,t,n)}else if(Io||Di(e,t,n,!1),r=0!==(n&e.childLanes),Io||r){if(null!==(r=fu)&&0!==(s=Le(r,n))&&s!==u.retryLane)throw u.retryLane=s,Ir(e,s),Xu(r,0,s),Fo;Nh(l)||ac(),t=el(e,t,n)}else Nh(l)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,ci=Ih(l.nextSibling),ui=t,hi=!0,di=null,pi=!1,null!==e&&li(t,e),(t=Qo(t,s.children)).flags|=4096);return t}return a?(Os(),l=s.fallback,a=t.mode,c=(u=e.child).sibling,(s=zr(u,{mode:"hidden",children:s.children})).subtreeFlags=65011712&u.subtreeFlags,null!==c?l=zr(c,l):(l=Gr(l,a,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Uo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Yo(n):(null!==(a=l.cachePool)?(u=Bi._currentValue,a=a.parent!==u?{parent:u,pool:u}:a):a=Zi(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Zo(e,r,n),t.memoizedState=Xo,Uo(e.child,s)):(Rs(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Qo(e,t){return(t=Jo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Jo(e,t){return(e=Br(22,e,null,t)).lanes=0,e}function el(e,t,n){return ps(t,e.child,null,n),(e=Qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function nl(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Us.current,o=!!(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,V(Us,a),Ro(e,t,r,n),r=hi?Qr:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===zs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===zs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Eu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Di(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Io=!0;else{if(!(sl(e,n)||128&t.flags))return Io=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),Ci(0,Bi,e.memoizedState.cache),bi();break;case 27:case 5:Z(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:Ci(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ls(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Rs(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ko(e,t,n):(Rs(t),null!==(e=il(e,t,n))?e.sibling:null);Rs(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Di(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(Us,Us.current),r)break;return null;case 22:return t.lanes=0,Bo(e,t,n,t.pendingProps);case 24:Ci(0,Bi,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Io=!!(131072&e.flags)}else Io=!1,hi&&1048576&t.flags&&si(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var s=e.$$typeof;if(s===_){t.tag=11,t=Lo(null,t,e,r,n);break e}if(s===C){t.tag=14,t=Po(null,t,e,r,n);break e}}throw t=F(e)||e,Error(i(306,t,""))}Ur(e)?(r=So(e,r),t.tag=1,t=$o(null,t,e,r,n)):(t.tag=0,t=Ho(null,t,e,r,n))}return t;case 0:return Ho(e,t,t.type,t.pendingProps,n);case 1:return $o(e,t,r=t.type,s=So(r,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,vs(e,t),Es(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ci(0,Bi,r),r!==a.cache&&Mi(t,[Bi],n,!0),Ss(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=qo(e,t,r,n);break e}if(r!==s){_i(s=Xr(Error(i(424)),t)),t=qo(e,t,r,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,ci=Ih(e.firstChild),ui=t,hi=!0,di=null,pi=!0,n=fs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),r===s){t=il(e,t,n);break e}Ro(e,t,r,n)}t=t.child}return t;case 26:return Go(e,t),null===e?(n=Wh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=gh($.current).createElement(n))[Ve]=t,r[je]=e,dh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Wh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&hi&&(r=t.stateNode=Oh(t.type,t.pendingProps,$.current),ui=t,pi=!0,s=ci,Ah(t.type)?(Rh=s,ci=Ih(r.firstChild)):ci=s),Ro(e,t,t.pendingProps.children,n),Go(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((s=r=ci)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Ih(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pi))?(t.stateNode=r,ui=t,ci=Ih(r.firstChild),pi=!1,s=!0):s=!1),s||mi(t)),Z(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,bh(s,a)?r=null:null!==o&&bh(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ea(e,t,ra,null,null,n),cd._currentValue=s),Go(e,t),Ro(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ci)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}(n,t.pendingProps,pi))?(t.stateNode=n,ui=t,ci=null,e=!0):e=!1),e||mi(t)),null;case 13:return Ko(e,t,n);case 4:return X(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ps(t,null,r,n):Ro(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Ro(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ro(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ci(0,t.type,r.value),Ro(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ni(t),r=r(s=Fi(s)),t.flags|=1,Ro(e,t,r,n),t.child;case 14:return Po(e,t,t.type,t.pendingProps,n);case 15:return Oo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=!!(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=Vo(t,r),t.lanes=536870912,Uo(null,e);if(Ls(t),(e=ci)?null!==(e=null!==(e=kh(e,pi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ui=t,ci=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return Vo(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Ls(t),s)if(256&t.flags)t.flags&=-257,t=jo(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Io||Di(e,t,n,!1),s=0!==(n&e.childLanes),Io||s){if(null!==(r=fu)&&0!==(o=Le(r,n))&&o!==a.retryLane)throw a.retryLane=o,Ir(e,o),Xu(r,0,o),Fo;ac(),t=jo(e,t,n)}else e=a.treeContext,ci=Ih(o.nextSibling),ui=t,hi=!0,di=null,pi=!1,null!==e&&li(t,e),(t=Vo(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bo(e,t,n,t.pendingProps);case 24:return Ni(t),r=Fi(Bi),null===e?(null===(s=Xi())&&(s=fu,a=Ui(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},gs(t),Ci(0,Bi,s)):(0!==(e.lanes&n)&&(vs(e,t),Es(t,null,null,n),Ss()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),Ci(0,Bi,r)):(r=a.cache,Ci(0,Bi,r),r!==s.cache&&Mi(t,[Bi],n,!0))),Ro(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!rc())throw is=es,Qi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!id(t)){if(!rc())throw is=es,Qi;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,Mu|=t)}function hl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ai(Bi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,xi())),dl(t),null;case 26:var s=t.type,a=t.memoizedState;return null===e?(ol(t),null!==a?(dl(t),ul(t,a)):(dl(t),ll(t,s,0,0,n))):a?a!==e.memoizedState?(ol(t),dl(t),ul(t,a)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),dl(t),ll(t,s,0,0,n)),null;case 27:if(K(t),n=$.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return dl(t),null}e=H.current,yi(t)?gi(t):(e=Oh(s,r,n),t.stateNode=e,ol(t))}return dl(t),null;case 5:if(K(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return dl(t),null}if(a=H.current,yi(t))gi(t);else{var o=gh($.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"==typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}a[Ve]=t,a[je]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(dh(a,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=$.current,yi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=ui))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||uh(e.nodeValue,n)))||mi(t,!0)}else(e=gh(e).createTextNode(r))[Ve]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=yi(t),null!==n){if(null===e){if(!r)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[Ve]=t}else bi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Bs(t),t):(Bs(t),null);if(128&t.flags)throw Error(i(558))}return dl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=yi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[Ve]=t}else bi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),s=!1}else s=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Bs(t),t):(Bs(t),null)}return Bs(t),128&t.flags?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),cl(t,t.updateQueue),dl(t),null);case 4:return Y(),null===e&&Jc(t.stateNode.containerInfo),dl(t),null;case 10:return Ai(t.type),dl(t),null;case 19:if(z(Us),null===(r=t.memoizedState))return dl(t),null;if(s=!!(128&t.flags),null===(a=r.rendering))if(s)hl(r,!1);else{if(0!==Su||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=zs(e))){for(t.flags|=128,hl(r,!1),e=a.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return V(Us,1&Us.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Ru&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=zs(a))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!hi)return dl(t),null}else 2*le()-r.renderingStartTime>Ru&&536870912!==n&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Us.current,V(Us,s?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(dl(t),null);case 22:case 23:return Bs(t),Ns(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&cl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ai(Bi),dl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function fl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ai(Bi),Y(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if(Bs(t),null===t.alternate)throw Error(i(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Bs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(Us),null;case 4:return Y(),null;case 10:return Ai(t.type),null;case 22:case 23:return Bs(t),Ns(),null!==e&&z(qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ai(Bi),null;default:return null}}function ml(e,t){switch(oi(t),t.tag){case 3:Ai(Bi),Y();break;case 26:case 27:case 5:K(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Bs(t);break;case 13:Bs(t);break;case 19:z(Us);break;case 10:Ai(t.type);break;case 22:case 23:Bs(t),Ns(),null!==e&&z(qi);break;case 24:Ai(Bi)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){Sc(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,u=o;try{u()}catch(c){Sc(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){Sc(t,t.return,c)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{As(t,n)}catch(r){Sc(e,e.return,r)}}}function bl(e,t,n){n.props=So(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Sc(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Sc(e,t,i)}}function _l(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){Sc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){Sc(e,t,s)}else n.current=null}function wl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Sc(e,e.return,i)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,u=null,c=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(f)||ch(e,t,f,null,r,d)}}for(var p in r){var f=r[p];if(d=n[p],r.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":a=f;break;case"name":s=f;break;case"checked":c=f;break;case"defaultChecked":h=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==d&&ch(e,t,p,f,r,d)}}return void yt(e,o,l,u,c,h,a,s);case"select":for(a in f=o=l=p=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":f=u;default:r.hasOwnProperty(a)||ch(e,t,a,null,r,u)}for(s in r)if(a=r[s],u=n[s],r.hasOwnProperty(s)&&(null!=a||null!=u))switch(s){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==u&&ch(e,t,s,a,r,u)}return t=l,n=o,r=f,void(null!=p?_t(e,!!n,p,!1):!!r!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ch(e,t,l,null,r,s)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":p=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==a&&ch(e,t,o,s,r,a)}return void wt(e,p,f);case"option":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m)&&("selected"===m?e.selected=!1:ch(e,t,m,null,r,p));for(u in r)p=r[u],f=n[u],!r.hasOwnProperty(u)||p===f||null==p&&null==f||("selected"===u?e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p:ch(e,t,u,p,r,f));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&ch(e,t,g,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:ch(e,t,c,p,r,f)}return;default:if(Mt(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&hh(e,t,v,void 0,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||hh(e,t,h,p,r,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&ch(e,t,y,null,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||null==p&&null==f||ch(e,t,d,p,r,f)}(r,e.type,n,t),r[je]=t}catch(s){Sc(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ah(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ah(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ft));else if(4!==r&&(27===r&&Ah(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ah(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Ml(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);dh(t,r,n),t[Ve]=e,t[je]=n}catch(s){Sc(e,e.return,s)}}var Dl=!1,kl=!1,Nl=!1,Fl="function"==typeof WeakSet?WeakSet:Set,Il=null;function Rl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Xl(e,n),4&r&&gl(5,n);break;case 1:if(Xl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Sc(n,n.return,a)}else{var i=So(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Sc(n,n.return,o)}}64&r&&yl(n),512&r&&xl(n,n.return);break;case 3:if(Xl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{As(e,t)}catch(a){Sc(n,n.return,a)}}break;case 27:null===t&&4&r&&Ml(n);case 26:case 5:Xl(e,n),null===t&&4&r&&wl(n),512&r&&xl(n,n.return);break;case 12:Xl(e,n);break;case 31:Xl(e,n),4&r&&zl(e,n);break;case 13:Xl(e,n),4&r&&Vl(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tc.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||Dl)){t=null!==t&&null!==t.memoizedState||kl,i=Dl;var s=kl;Dl=r,(kl=t)&&!s?Zl(e,n,!!(8772&n.subtreeFlags)):Xl(e,n),Dl=i,kl=s}break;case 30:break;default:Xl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Ye(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pl=null,Ol=!1;function Bl(e,t,n){for(n=n.child;null!==n;)Ul(e,t,n),n=n.sibling}function Ul(e,t,n){if(ye&&"function"==typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(s){}switch(n.tag){case 26:kl||_l(n,t),Bl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kl||_l(n,t);var r=Pl,i=Ol;Ah(n.type)&&(Pl=n.stateNode,Ol=!1),Bl(e,t,n),Bh(n.stateNode),Pl=r,Ol=i;break;case 5:kl||_l(n,t);case 6:if(r=Pl,i=Ol,Pl=null,Bl(e,t,n),Ol=i,null!==(Pl=r))if(Ol)try{(9===Pl.nodeType?Pl.body:"HTML"===Pl.nodeName?Pl.ownerDocument.body:Pl).removeChild(n.stateNode)}catch(a){Sc(n,t,a)}else try{Pl.removeChild(n.stateNode)}catch(a){Sc(n,t,a)}break;case 18:null!==Pl&&(Ol?(Th(9===(e=Pl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),jd(e)):Th(Pl,n.stateNode));break;case 4:r=Pl,i=Ol,Pl=n.stateNode.containerInfo,Ol=!0,Bl(e,t,n),Pl=r,Ol=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),kl||vl(4,n,t),Bl(e,t,n);break;case 1:kl||(_l(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Bl(e,t,n);break;case 21:Bl(e,t,n);break;case 22:kl=(r=kl)||null!==n.memoizedState,Bl(e,t,n),kl=r;break;default:Bl(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{jd(e)}catch(n){Sc(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{jd(e)}catch(n){Sc(t,t.return,n)}}function jl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Fl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Fl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Mc.bind(null,e,t);t.then(r,r)}})}function Gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Ah(l.type)){Pl=l.stateNode,Ol=!1;break e}break;case 5:Pl=l.stateNode,Ol=!1;break e;case 3:case 4:Pl=l.stateNode.containerInfo,Ol=!0;break e}l=l.return}if(null===Pl)throw Error(i(160));Ul(a,o,s),Pl=null,Ol=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var Hl=null;function Wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gl(t,e),$l(e),4&r&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Gl(t,e),$l(e),512&r&&(kl||null===n||_l(n,n.return)),64&r&&Dl&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var s=Hl;if(Gl(t,e),$l(e),512&r&&(kl||null===n||_l(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(a=s.getElementsByTagName("title")[0])||a[Xe]||a[Ve]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),dh(a,r,n),a[Ve]=e,et(a),r=a;break e;case"link":var o=nd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}dh(a=s.createElement(r),r,n),s.head.appendChild(a);break;case"meta":if(o=nd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}dh(a=s.createElement(r),r,n),s.head.appendChild(a);break;default:throw Error(i(468,r))}a[Ve]=e,et(a),r=a}e.stateNode=r}else rd(s,e.type,e.stateNode);else e.stateNode=Kh(s,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rd(s,e.type,e.stateNode):Kh(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Gl(t,e),$l(e),512&r&&(kl||null===n||_l(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Gl(t,e),$l(e),512&r&&(kl||null===n||_l(n,n.return)),32&e.flags){s=e.stateNode;try{Et(s,"")}catch(m){Sc(e,e.return,m)}}4&r&&null!=e.stateNode&&Sl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Nl=!0);break;case 6:if(Gl(t,e),$l(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Sc(e,e.return,m)}}break;case 3:if(td=null,s=Hl,Hl=Vh(t.containerInfo),Gl(t,e),Hl=s,$l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jd(t.containerInfo)}catch(m){Sc(e,e.return,m)}Nl&&(Nl=!1,ql(e));break;case 4:r=Hl,Hl=Vh(e.stateNode.containerInfo),Gl(t,e),$l(e),Hl=r;break;case 12:default:Gl(t,e),$l(e);break;case 31:case 19:Gl(t,e),$l(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r));break;case 13:Gl(t,e),$l(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Fu=le()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r));break;case 22:s=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=Dl,h=kl;if(Dl=c||s,kl=h||u,Gl(t,e),kl=h,Dl=c,$l(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||u||Dl||kl||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,s)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,p=null!=d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(m){Sc(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(m){Sc(u,u.return,m)}}}else if(18===t.tag){if(null===n){u=t;try{var f=u.stateNode;s?Mh(f,!0):Mh(u.stateNode,!1)}catch(m){Sc(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,jl(e,n));case 30:case 21:}}function $l(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;Tl(e,Cl(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(Et(a,""),n.flags&=-33),Tl(e,Cl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Al(e,Cl(e),o);break;default:throw Error(i(161))}}catch(l){Sc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Rl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Yl(t);break;case 1:_l(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&bl(t,t.return,n),Yl(t);break;case 27:Bh(t.stateNode);case 26:case 5:_l(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Zl(i,s,n),gl(4,s);break;case 1:if(Zl(i,s,n),"function"==typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){Sc(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Cs(l[i],o)}catch(u){Sc(r,r.return,u)}}n&&64&a&&yl(s),xl(s,s.return);break;case 27:Ml(s);case 26:case 5:Zl(i,s,n),n&&null===r&&4&a&&wl(s),xl(s,s.return);break;case 12:Zl(i,s,n);break;case 31:Zl(i,s,n),n&&4&a&&zl(i,s);break;case 13:Zl(i,s,n),n&&4&a&&Vl(i,s);break;case 22:null===s.memoizedState&&Zl(i,s,n),xl(s,s.return);break;case 30:break;default:Zl(i,s,n)}t=t.sibling}}function Kl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zi(n))}function Ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)eu(e,t,n,r),t=t.sibling}function eu(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&i&&gl(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e)));break;case 12:if(2048&i){Jl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Sc(t,t.return,l)}}else Jl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?Jl(e,t,n,r):nu(e,t):2&s._visibility?Jl(e,t,n,r):(s._visibility|=2,tu(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&i&&Kl(a,t);break;case 24:Jl(e,t,n,r),2048&i&&Ql(t.alternate,t)}}function tu(e,t,n,r,i){for(i=i&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:tu(s,a,o,l,i),gl(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?tu(s,a,o,l,i):nu(s,a):(c._visibility|=2,tu(s,a,o,l,i)),i&&2048&u&&Kl(a.alternate,a);break;case 24:tu(s,a,o,l,i),i&&2048&u&&Ql(a.alternate,a);break;default:tu(s,a,o,l,i)}t=t.sibling}}function nu(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nu(n,r),2048&i&&Kl(r.alternate,r);break;case 24:nu(n,r),2048&i&&Ql(r.alternate,r);break;default:nu(n,r)}t=t.sibling}}var ru=8192;function iu(e,t,n){if(e.subtreeFlags&ru)for(e=e.child;null!==e;)su(e,t,n),e=e.sibling}function su(e,t,n){switch(e.tag){case 26:iu(e,t,n),e.flags&ru&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var i=$h(r.href),s=t.querySelector(qh(i));if(s)return null!==(t=s._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Xh(r),(i=Uh.get(i))&&Jh(r,i),et(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),dh(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:default:iu(e,t,n);break;case 3:case 4:var r=Hl;Hl=Vh(e.stateNode.containerInfo),iu(e,t,n),Hl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ru,ru=16777216,iu(e,t,n),ru=r):iu(e,t,n))}}function au(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ou(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,cu(r,e)}au(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lu(e),e=e.sibling}function lu(e){switch(e.tag){case 0:case 11:case 15:ou(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:ou(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uu(e)):ou(e)}}function uu(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,cu(r,e)}au(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uu(t));break;default:uu(t)}e=e.sibling}}function cu(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Il=r;else e:for(n=e;null!==Il;){var i=(r=Il).sibling,s=r.return;if(Ll(r),r===n){Il=null;break e}if(null!==i){i.return=s,Il=i;break e}Il=s}}}var hu={getCacheForType:function(e){var t=Fi(Bi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Fi(Bi).controller.signal}},du="function"==typeof WeakMap?WeakMap:Map,pu=0,fu=null,mu=null,gu=0,vu=0,yu=null,bu=!1,xu=!1,_u=!1,wu=0,Su=0,Eu=0,Cu=0,Au=0,Tu=0,Mu=0,Du=null,ku=null,Nu=!1,Fu=0,Iu=0,Ru=1/0,Lu=null,Pu=null,Ou=0,Bu=null,Uu=null,zu=0,Vu=0,ju=null,Gu=null,Hu=0,Wu=null;function $u(){return 2&pu&&0!==gu?gu&-gu:null!==R.T?jc():Be()}function qu(){if(0===Tu)if(536870912&gu&&!hi)Tu=536870912;else{var e=Ee;!(3932160&(Ee<<=1))&&(Ee=262144),Tu=e}return null!==(e=Fs.current)&&(e.flags|=32),Tu}function Xu(e,t,n){(e!==fu||2!==vu&&9!==vu)&&null===e.cancelPendingCommit||(tc(e,0),Qu(e,gu,Tu,!1)),Fe(e,n),2&pu&&e===fu||(e===fu&&(!(2&pu)&&(Cu|=n),4===Su&&Qu(e,gu,Tu,!1)),Lc(e))}function Yu(e,t,n){if(6&pu)throw Error(i(327));for(var r=!n&&!(127&t)&&0===(t&e.expiredLanes)||Me(e,t),s=r?function(e,t){var n=pu;pu|=2;var r=ic(),s=sc();fu!==e||gu!==t?(Lu=null,Ru=le()+500,tc(e,t)):xu=Me(e,t);e:for(;;)try{if(0!==vu&&null!==mu){t=mu;var a=yu;t:switch(vu){case 1:vu=0,yu=null,dc(e,t,a,1);break;case 2:case 9:if(ts(a)){vu=0,yu=null,hc(t);break}t=function(){2!==vu&&9!==vu||fu!==e||(vu=7),Lc(e)},a.then(t,t);break e;case 3:vu=7;break e;case 4:vu=5;break e;case 7:ts(a)?(vu=0,yu=null,hc(t)):(vu=0,yu=null,dc(e,t,a,7));break;case 5:var o=null;switch(mu.tag){case 26:o=mu.memoizedState;case 5:case 27:var l=mu;if(o?id(o):l.stateNode.complete){vu=0,yu=null;var u=l.sibling;if(null!==u)mu=u;else{var c=l.return;null!==c?(mu=c,pc(c)):mu=null}break t}}vu=0,yu=null,dc(e,t,a,5);break;case 6:vu=0,yu=null,dc(e,t,a,6);break;case 8:ec(),Su=6;break e;default:throw Error(i(462))}}uc();break}catch(h){nc(e,h)}return Ei=Si=null,R.H=r,R.A=s,pu=n,null!==mu?0:(fu=null,gu=0,kr(),Su)}(e,t):oc(e,t,!0),a=r;;){if(0===s){xu&&!r&&Qu(e,t,0,!1);break}if(n=e.current.alternate,!a||Ku(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=Du;var u=l.current.memoizedState.isDehydrated;if(u&&(tc(l,o).flags|=256),2!==(o=oc(l,o,!1))){if(_u&&!u){l.errorRecoveryDisabledLanes|=a,Cu|=a,s=4;break e}a=ku,ku=s,null!==a&&(null===ku?ku=a:ku.push.apply(ku,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){tc(e,0),Qu(e,t,0,!0);break}e:{switch(r=e,a=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Qu(r,t,Tu,!bu);break e;case 2:ku=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=Fu+300-le())){if(Qu(r,t,Tu,!bu),0!==Te(r,0,!0))break e;zu=t,r.timeoutHandle=_h(Zu.bind(null,r,n,ku,Lu,Nu,t,Tu,Cu,Mu,bu,a,"Throttled",-0,0),s)}else Zu(r,n,ku,Lu,Nu,t,Tu,Cu,Mu,bu,a,null,-0,0)}break}s=oc(e,t,!1),a=!1}Lc(e)}function Zu(e,t,n,r,i,s,a,o,l,u,c,h,d,p){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||!(16785408&~h)){su(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft});var f=(62914560&s)===s?Fu-le():(4194048&s)===s?Iu-le():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sd&&(sd=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&ph(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],u=l.startTime;if(u>o)break;var c=l.transferSize,h=l.initiatorType;c&&ph(h)&&(a+=c*((l=l.responseEnd)<o?1:(o-u)/(l-u)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,f)))return zu=s,e.cancelPendingCommit=f(mc.bind(null,e,t,s,n,r,i,a,o,l,c,h,null,d,p)),void Qu(e,s,a,!u)}mc(e,t,s,n,r,i,a,o,l)}function Ku(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qu(e,t,n,r){t&=~Au,t&=~Cu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-xe(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Ie(e,n,t)}function Ju(){return!!(6&pu)||(Pc(0,!1),!1)}function ec(){if(null!==mu){if(0===vu)var e=mu.return;else Ei=Si=null,aa(e=mu),os=null,ls=0,e=mu;for(;null!==e;)ml(e.alternate,e),e=e.return;mu=null}}function tc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,wh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zu=0,ec(),fu=e,mu=n=zr(e.current,null),gu=t,vu=0,yu=null,bu=!1,xu=Me(e,t),_u=!1,Mu=Tu=Au=Cu=Eu=Su=0,ku=Du=null,Nu=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-xe(r),s=1<<i;t|=e[i],r&=~s}return wu=t,kr(),n}function nc(e,t){js=null,R.H=mo,t===Ki||t===Ji?(t=ss(),vu=3):t===Qi?(t=ss(),vu=4):vu=t===Fo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,yu=t,null===mu&&(Su=1,To(e,Xr(t,e.current)))}function rc(){var e=Fs.current;return null===e||((4194048&gu)===gu?null===Is:!!((62914560&gu)===gu||536870912&gu)&&e===Is)}function ic(){var e=R.H;return R.H=mo,null===e?mo:e}function sc(){var e=R.A;return R.A=hu,e}function ac(){Su=4,bu||(4194048&gu)!==gu&&null!==Fs.current||(xu=!0),!(134217727&Eu)&&!(134217727&Cu)||null===fu||Qu(fu,gu,Tu,!1)}function oc(e,t,n){var r=pu;pu|=2;var i=ic(),s=sc();fu===e&&gu===t||(Lu=null,tc(e,t)),t=!1;var a=Su;e:for(;;)try{if(0!==vu&&null!==mu){var o=mu,l=yu;switch(vu){case 8:ec(),a=6;break e;case 3:case 2:case 9:case 6:null===Fs.current&&(t=!0);var u=vu;if(vu=0,yu=null,dc(e,o,l,u),n&&xu){a=0;break e}break;default:u=vu,vu=0,yu=null,dc(e,o,l,u)}}lc(),a=Su;break}catch(c){nc(e,c)}return t&&e.shellSuspendCounter++,Ei=Si=null,pu=r,R.H=i,R.A=s,null===mu&&(fu=null,gu=0,kr()),a}function lc(){for(;null!==mu;)cc(mu)}function uc(){for(;null!==mu&&!ae();)cc(mu)}function cc(e){var t=al(e.alternate,e,wu);e.memoizedProps=e.pendingProps,null===t?pc(e):mu=t}function hc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wo(n,t,t.pendingProps,t.type,void 0,gu);break;case 11:t=Wo(n,t,t.pendingProps,t.type.render,t.ref,gu);break;case 5:aa(t);default:ml(n,t),t=al(n,t=mu=Vr(t,wu),wu)}e.memoizedProps=e.pendingProps,null===t?pc(e):mu=t}function dc(e,t,n,r){Ei=Si=null,aa(t),os=null,ls=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Di(t,n,s,!0),null!==(n=Fs.current)){switch(n.tag){case 31:case 13:return null===Is?ac():null===n.alternate&&0===Su&&(Su=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Ec(e,r,s)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Ec(e,r,s)),!1}throw Error(i(435,n.tag))}return Ec(e,r,s),ac(),!1}if(hi)return null!==(t=Fs.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==fi&&_i(Xr(e=Error(i(422),{cause:r}),n))):(r!==fi&&_i(Xr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Xr(r,n),_s(e,s=Do(e.stateNode,r,s)),4!==Su&&(Su=2)),!1;var a=Error(i(520),{cause:r});if(a=Xr(a,n),null===Du?Du=[a]:Du.push(a),4!==Su&&(Su=2),null===t)return!0;r=Xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,_s(n,e=Do(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Pu&&Pu.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,No(s=ko(s),e,n,r),_s(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,gu))return Su=1,To(e,Xr(n,e.current)),void(mu=null)}catch(a){if(null!==s)throw mu=s,a;return Su=1,To(e,Xr(n,e.current)),void(mu=null)}32768&t.flags?(hi||1===r?e=!0:xu||536870912&gu?e=!1:(bu=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=Fs.current)&&13===r.tag&&(r.flags|=16384)),fc(t,e)):pc(t)}function pc(e){var t=e;do{if(32768&t.flags)return void fc(t,bu);e=t.return;var n=pl(t.alternate,t,wu);if(null!==n)return void(mu=n);if(null!==(t=t.sibling))return void(mu=t);mu=t=e}while(null!==t);0===Su&&(Su=5)}function fc(e,t){do{var n=fl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mu=e);mu=e=n}while(null!==e);Su=6,mu=null}function mc(e,t,n,r,s,a,o,l,u){e.cancelPendingCommit=null;do{xc()}while(0!==Ou);if(6&pu)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-xe(n),h=1<<c;o[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var p=d[c];null!==p&&(p.lane&=-536870913)}n&=~h}0!==r&&Ie(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,a|=Dr,o,l,u),e===fu&&(mu=fu=null,gu=0),Uu=t,Bu=e,zu=n,Vu=a,ju=s,Gu=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return _c(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=R.T,R.T=null,s=L.p,L.p=2,o=pu,pu|=4;try{!function(e,t){if(e=e.containerInfo,fh=vd,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===s&&(l=o),p===a&&++h===r&&(u=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},vd=!1,Il=t;null!==Il;)if(e=(t=Il).child,1028&t.subtreeFlags&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(a=(t=Il).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=So(n.type,s);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Sc(n,n.return,v)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Dh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dh(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{pu=o,L.p=s,R.T=r}}Ou=1,gc(),vc(),yc()}}function gc(){if(1===Ou){Ou=0;var e=Bu,t=Uu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=R.T,R.T=null;var r=L.p;L.p=2;var i=pu;pu|=4;try{Wl(t,e);var s=mh,a=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(a=g,g=m,m=a);var v=tr(o,m),y=tr(o,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=h.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(h=[],p=o;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<h.length;o++){var x=h[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}vd=!!fh,mh=fh=null}finally{pu=i,L.p=r,R.T=n}}e.current=t,Ou=2}}function vc(){if(2===Ou){Ou=0;var e=Bu,t=Uu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=R.T,R.T=null;var r=L.p;L.p=2;var i=pu;pu|=4;try{Rl(e,t.alternate,t)}finally{pu=i,L.p=r,R.T=n}}Ou=3}}function yc(){if(4===Ou||3===Ou){Ou=0,oe();var e=Bu,t=Uu,n=zu,r=Gu;10256&t.subtreeFlags||10256&t.flags?Ou=5:(Ou=0,Uu=Bu=null,bc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Pu=null),Oe(n),t=t.stateNode,ye&&"function"==typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=R.T,i=L.p,L.p=2,R.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{R.T=t,L.p=i}}3&zu&&xc(),Lc(e),i=e.pendingLanes,261930&n&&42&i?e===Wu?Hu++:(Hu=0,Wu=e):Hu=0,Pc(0,!1)}}function bc(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,zi(t))}function xc(){return gc(),vc(),yc(),_c()}function _c(){if(5!==Ou)return!1;var e=Bu,t=Vu;Vu=0;var n=Oe(zu),r=R.T,s=L.p;try{L.p=32>n?32:n,R.T=null,n=ju,ju=null;var a=Bu,o=zu;if(Ou=0,Uu=Bu=null,zu=0,6&pu)throw Error(i(331));var l=pu;if(pu|=4,lu(a.current),eu(a,a.current,o,n),pu=l,Pc(0,!1),ye&&"function"==typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(u){}return!0}finally{L.p=s,R.T=r,bc(e,t)}}function wc(e,t,n){t=Xr(n,t),null!==(e=bs(e,t=Do(e.stateNode,t,2),2))&&(Fe(e,2),Lc(e))}function Sc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Pu||!Pu.has(r))){e=Xr(n,e),null!==(r=bs(t,n=ko(2),2))&&(No(n,r,t,e),Fe(r,2),Lc(r));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(_u=!0,i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fu===e&&(gu&n)===n&&(4===Su||3===Su&&(62914560&gu)===gu&&300>le()-Fu?!(2&pu)&&tc(e,0):Au|=n,Mu===gu&&(Mu=0)),Lc(e)}function Ac(e,t){0===t&&(t=ke()),null!==(e=Ir(e,t))&&(Fe(e,t),Lc(e))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ac(e,n)}var Dc=null,kc=null,Nc=!1,Fc=!1,Ic=!1,Rc=0;function Lc(e){e!==kc&&null===e.next&&(null===kc?Dc=kc=e:kc=kc.next=e),Fc=!0,Nc||(Nc=!0,Eh(function(){6&pu?ie(ce,Oc):Bc()}))}function Pc(e,t){if(!Ic&&Fc){Ic=!0;do{for(var n=!1,r=Dc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-xe(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Vc(r,s))}else s=gu,!(3&(s=Te(r,r===fu?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Me(r,s)||(n=!0,Vc(r,s));r=r.next}}while(n);Ic=!1}}function Oc(){Bc()}function Bc(){Fc=Nc=!1;var e,t=0;0!==Rc&&((e=window.event)&&"popstate"===e.type?e!==xh&&(xh=e,1):(xh=null,0))&&(t=Rc);for(var n=le(),r=null,i=Dc;null!==i;){var s=i.next,a=Uc(i,n);0===a?(i.next=null,null===r?Dc=s:r.next=s,null===s&&(kc=r)):(r=i,(0!==t||3&a)&&(Fc=!0)),i=s}0!==Ou&&5!==Ou||Pc(t,!1),0!==Rc&&(Rc=0)}function Uc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-xe(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=De(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=gu,n=Te(e,e===(t=fu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vu||9===vu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Me(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Oe(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=fe}return r=zc.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function zc(e,t){if(0!==Ou&&5!==Ou)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=gu;return 0===(r=Te(e,e===fu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yu(e,r,t),Uc(e,le()),null!=e.callbackNode&&e.callbackNode===n?zc.bind(null,e):null)}function Vc(e,t){if(xc())return null;Yu(e,t,!0)}function jc(){if(0===Rc){var e=Gi;0===e&&(e=Se,!(261888&(Se<<=1))&&(Se=256)),Rc=e}return Rc}function Gc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Nt(""+e)}function Hc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wc=0;Wc<Er.length;Wc++){var $c=Er[Wc];Cr($c.toLowerCase(),"on"+($c[0].toUpperCase()+$c.slice(1)))}Cr(gr,"onAnimationEnd"),Cr(vr,"onAnimationIteration"),Cr(yr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(br,"onTransitionRun"),Cr(xr,"onTransitionStart"),Cr(_r,"onTransitionCancel"),Cr(wr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function Yc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(c){Ar(c)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(c){Ar(c)}i.currentTarget=null,s=l}}}}function Zc(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(eh(t,e,2,!1),n.add(r))}function Kc(e,t,n){var r=0;t&&(r|=4),eh(n,e,r,t)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[Qc]){e[Qc]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Xc.has(t)||Kc(t,!1,e),Kc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qc]||(t[Qc]=!0,Kc("selectionchange",!1,t))}}function eh(e,t,n,r){switch(Ed(t)){case 2:var i=yd;break;case 8:i=bd;break;default:i=xd}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function th(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==l;){if(null===(o=Ze(l)))return;if(5===(u=o.tag)||6===u||26===u||27===u){r=a=o;continue e}l=l.parentNode}}r=r.return}Ut(function(){var r=a,i=Rt(n),o=[];e:{var l=Sr.get(e);if(void 0!==l){var u=nn,c=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":u=yn;break;case"focusin":c="focus",u=un;break;case"focusout":c="blur",u=un;break;case"beforeblur":case"afterblur":u=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=xn;break;case gr:case vr:case yr:u=cn;break;case wr:u=_n;break;case"scroll":case"scrollend":u=sn;break;case"wheel":u=wn;break;case"copy":case"cut":case"paste":u=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=bn;break;case"toggle":case"beforetoggle":u=Sn}var h=!!(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==l?l+"Capture":null:l;h=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=zt(m,p))&&h.push(nh(m,g,f)),d)break;m=m.return}0<h.length&&(l=new u(l,c,null,n,i),o.push({event:l,listeners:h}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(c=n.relatedTarget||n.fromElement)||!Ze(c)&&!c[Ge])&&(u||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ze(c):null)&&(d=s(c),h=c.tag,c!==d||5!==h&&27!==h&&6!==h)&&(c=null)):(u=null,c=r),u!==c)){if(h=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=bn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==u?l:Qe(u),f=null==c?l:Qe(c),(l=new h(g,m+"leave",u,n,i)).target=d,l.relatedTarget=f,g=null,Ze(i)===r&&((h=new h(p,m+"enter",c,n,i)).target=f,h.relatedTarget=d,g=h),d=g,u&&c)e:{for(h=ih,m=c,f=0,g=p=u;g;g=h(g))f++;g=0;for(var v=m;v;v=h(v))g++;for(;0<f-g;)p=h(p),f--;for(;0<g-f;)m=h(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){h=p;break e}p=h(p),m=h(m)}h=null}else h=null;null!==u&&sh(o,l,u,h,!1),null!==c&&null!==d&&sh(o,d,c,h,!0)}if("select"===(u=(l=r?Qe(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var y=Vn;else if(Ln(l))if(jn)y=Kn;else{y=Yn;var b=Xn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Mt(r.elementType)&&(y=Vn):y=Zn;switch(y&&(y=y(e,r))?Pn(o,y,n,i):(b&&b(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&xt(l,"number",l.value)),b=r?Qe(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(ar=b,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,cr(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":cr(o,n,i)}var x;if(Cn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else In?Nn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Mn&&"ko"!==n.locale&&(In||"onCompositionStart"!==_?"onCompositionEnd"===_&&In&&(x=qt()):(Wt="value"in(Ht=i)?Ht.value:Ht.textContent,In=!0)),0<(b=rh(r,_)).length&&(_=new dn(_,e,null,n,i),o.push({event:_,listeners:b}),(x||null!==(x=Fn(n)))&&(_.data=x))),(x=Tn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(kn=!0,Dn);case"textInput":return(e=t.data)===Dn&&kn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!Cn&&Nn(e,t)?(e=qt(),$t=Wt=Ht=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(_=rh(r,"onBeforeInput")).length&&(b=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:b,listeners:_}),b.data=x),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Gc((i[je]||null).action),a=r.submitter;a&&null!==(t=(t=a[je]||null)?Gc(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Rc){var e=a?Hc(i,a):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=a?Hc(i,a):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Yc(o,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=zt(e,n))&&r.unshift(nh(e,i,s)),null!=(i=zt(e,t))&&r.push(nh(e,i,s))),3===e.tag)return r;e=e.return}return[]}function ih(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sh(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===u||(l=u,i?null!=(u=zt(n,s))&&a.unshift(nh(n,u,l)):i||null!=(u=zt(n,s))&&a.push(nh(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ah=/\r\n?/g,oh=/\u0000|\uFFFD/g;function lh(e){return("string"==typeof e?e:""+e).replace(ah,"\n").replace(oh,"")}function uh(e,t){return t=lh(t),lh(e)===t}function ch(e,t,n,r,s,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ut(e,"class",r);break;case"tabIndex":ut(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,r);break;case"style":Tt(e,r,a);break;case"data":if("object"!==t){ut(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&ch(e,t,"name",s.name,s,null),ch(e,t,"formEncType",s.formEncType,s,null),ch(e,t,"formMethod",s.formMethod,s,null),ch(e,t,"formTarget",s.formTarget,s,null)):(ch(e,t,"encType",s.encType,s,null),ch(e,t,"method",s.method,s,null),ch(e,t,"target",s.target,s,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ft);break;case"onScroll":null!=r&&Zc("scroll",e);break;case"onScrollEnd":null!=r&&Zc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Zc("beforetoggle",e),Zc("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Dt.get(n)||n,r)}}function hh(e,t,n,r,s,a){switch(n){case"style":Tt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?Et(e,r):("number"==typeof r||"bigint"==typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Zc("scroll",e);break;case"onScrollEnd":null!=r&&Zc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"==typeof(a=null!=(a=e[je]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zc("error",e),Zc("load",e);var r,s=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ch(e,t,r,o,n,null)}}return a&&ch(e,t,"srcSet",n.srcSet,n,null),void(s&&ch(e,t,"src",n.src,n,null));case"input":Zc("invalid",e);var l=r=o=a=null,u=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(null!=h)switch(s){case"name":a=h;break;case"type":o=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:ch(e,t,s,h,n,null)}}return void bt(e,r,l,u,c,o,a,!1);case"select":for(a in Zc("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:ch(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?_t(e,!!s,t,!1):null!=n&&_t(e,!!s,n,!0));case"textarea":for(o in Zc("invalid",e),r=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:ch(e,t,o,l,n,null)}return void St(e,s,a,r);case"option":for(u in n)n.hasOwnProperty(u)&&null!=(s=n[u])&&("selected"===u?e.selected=s&&"function"!=typeof s&&"symbol"!=typeof s:ch(e,t,u,s,n,null));return;case"dialog":Zc("beforetoggle",e),Zc("toggle",e),Zc("cancel",e),Zc("close",e);break;case"iframe":case"object":Zc("load",e);break;case"video":case"audio":for(s=0;s<qc.length;s++)Zc(qc[s],e);break;case"image":Zc("error",e),Zc("load",e);break;case"details":Zc("toggle",e);break;case"embed":case"source":case"link":Zc("error",e),Zc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ch(e,t,c,s,n,null)}return;default:if(Mt(t)){for(h in n)n.hasOwnProperty(h)&&void 0!==(s=n[h])&&hh(e,t,h,s,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(s=n[l])&&ch(e,t,l,s,n,null)}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fh=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bh(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xh=null,_h="function"==typeof setTimeout?setTimeout:void 0,wh="function"==typeof clearTimeout?clearTimeout:void 0,Sh="function"==typeof Promise?Promise:void 0,Eh="function"==typeof queueMicrotask?queueMicrotask:void 0!==Sh?function(e){return Sh.resolve(null).then(e).catch(Ch)}:_h;function Ch(e){setTimeout(function(){throw e})}function Ah(e){return"head"===e}function Th(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void jd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Bh(e.ownerDocument.documentElement);else if("head"===n){Bh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Xe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&Bh(e.ownerDocument.body);n=i}while(n);jd(t)}function Mh(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Dh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Dh(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function kh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ih(e.nextSibling)))return null}return e}function Nh(e){return"$?"===e.data||"$~"===e.data}function Fh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ih(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Rh=null;function Lh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ih(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ph(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Oh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Bh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Uh=new Map,zh=new Set;function Vh(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jh=L.d;L.d={f:function(){var e=jh.f(),t=Ju();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?no(t):jh.r(e)},D:function(e){jh.D(e),Hh("dns-prefetch",e,null)},C:function(e,t){jh.C(e,t),Hh("preconnect",e,t)},L:function(e,t,n){jh.L(e,t,n);var r=Gh;if(r&&e&&t){var i='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+vt(n.imageSizes)+'"]')):i+='[href="'+vt(e)+'"]';var s=i;switch(t){case"style":s=$h(e);break;case"script":s=Yh(e)}Uh.has(s)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Uh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(qh(s))||"script"===t&&r.querySelector(Zh(s))||(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){jh.m(e,t);var n=Gh;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Yh(e)}if(!Uh.has(s)&&(e=c({rel:"modulepreload",href:e},t),Uh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zh(s)))return}dh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){jh.X(e,t);var n=Gh;if(n&&e){var r=Je(n).hoistableScripts,i=Yh(e),s=r.get(i);s||((s=n.querySelector(Zh(i)))||(e=c({src:e,async:!0},t),(t=Uh.get(i))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){jh.S(e,t,n);var r=Gh;if(r&&e){var i=Je(r).hoistableStyles,s=$h(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(qh(s)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Uh.get(s))&&Jh(e,n);var l=a=r.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Qh(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){jh.M(e,t);var n=Gh;if(n&&e){var r=Je(n).hoistableScripts,i=Yh(e),s=r.get(i);s||((s=n.querySelector(Zh(i)))||(e=c({src:e,async:!0,type:"module"},t),(t=Uh.get(i))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Gh="undefined"==typeof document?null:document;function Hh(e,t,n){var r=Gh;if(r&&"string"==typeof t&&t){var i=vt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),zh.has(i)||(zh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Wh(e,t,n,r){var s,a,o,l,u=(u=$.current)?Vh(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=$h(n.href),(r=(n=Je(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=$h(n.href);var c=Je(u).hoistableStyles,h=c.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=u.querySelector(qh(e)))&&!c._p&&(h.instance=c,h.state.loading=5),Uh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Uh.set(e,n),c||(s=u,a=e,o=n,l=h.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),dh(a,"link",o),et(a),s.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return h}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Yh(n),(r=(n=Je(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function $h(e){return'href="'+vt(e)+'"'}function qh(e){return'link[rel="stylesheet"]['+e+"]"}function Xh(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Yh(e){return'[src="'+vt(e)+'"]'}function Zh(e){return"script[async]"+e}function Kh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),dh(r,"style",s),Qh(r,n.precedence,e),t.instance=r;case"stylesheet":s=$h(n.href);var a=e.querySelector(qh(s));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Xh(n),(s=Uh.get(s))&&Jh(r,s),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(a,"link",r),t.state.loading|=4,Qh(a,n.precedence,e),t.instance=a;case"script":return a=Yh(n.src),(s=e.querySelector(Zh(a)))?(t.instance=s,et(s),s):(r=n,(s=Uh.get(a))&&ed(r=c({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),dh(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Qh(r,n.precedence,e));return t.instance}function Qh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jh(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function ed(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var td=null;function nd(e,t,n){if(null===td){var r=new Map,i=td=new Map;i.set(n,r)}else(r=(i=td).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Xe]||s[Ve]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function rd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function id(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var sd=0;function ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var od=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,od=new Map,t.forEach(ud,e),od=null,ad.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=od.get(e);if(n)var r=n.get(null);else{n=new Map,od.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var cd={$$typeof:b,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function hd(e,t,n,r,i,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,r,i,s){i=function(e){return e?e=Pr:Pr}(i),null===r.context?r.context=i:r.pendingContext=i,(r=ys(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Xu(n,0,t),xs(n,e,t))}function pd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function fd(e,t){pd(e,t),(e=e.alternate)&&pd(e,t)}function md(e){if(13===e.tag||31===e.tag){var t=Ir(e,67108864);null!==t&&Xu(t,0,67108864),fd(e,67108864)}}function gd(e){if(13===e.tag||31===e.tag){var t=$u(),n=Ir(e,t=Pe(t));null!==n&&Xu(n,0,t),fd(e,t)}}var vd=!0;function yd(e,t,n,r){var i=R.T;R.T=null;var s=L.p;try{L.p=2,xd(e,t,n,r)}finally{L.p=s,R.T=i}}function bd(e,t,n,r){var i=R.T;R.T=null;var s=L.p;try{L.p=8,xd(e,t,n,r)}finally{L.p=s,R.T=i}}function xd(e,t,n,r){if(vd){var i=_d(r);if(null===i)th(e,t,r,wd,n),Id(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ad=Rd(Ad,e,t,n,r,i),!0;case"dragenter":return Td=Rd(Td,e,t,n,r,i),!0;case"mouseover":return Md=Rd(Md,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dd.set(s,Rd(Dd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kd.set(s,Rd(kd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Id(e,r),4&t&&-1<Fd.indexOf(e)){for(;null!==i;){var s=Ke(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Ae(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-xe(a);o.entanglements[1]|=l,a&=~l}Lc(s),!(6&pu)&&(Ru=le()+500,Pc(0,!1))}}break;case 31:case 13:null!==(o=Ir(s,2))&&Xu(o,0,2),Ju(),fd(s,2)}if(null===(s=_d(r))&&th(e,t,r,wd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else th(e,t,r,null,n)}}function _d(e){return Sd(e=Rt(e))}var wd=null;function Sd(e){if(wd=null,null!==(e=Ze(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(31===n){if(null!==(e=o(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return wd=e,null}function Ed(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case ce:return 2;case he:return 8;case de:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ad=null,Td=null,Md=null,Dd=new Map,kd=new Map,Nd=[],Fd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Id(e,t){switch(e){case"focusin":case"focusout":Ad=null;break;case"dragenter":case"dragleave":Td=null;break;case"mouseover":case"mouseout":Md=null;break;case"pointerover":case"pointerout":Dd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(t.pointerId)}}function Rd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=Ke(t))&&md(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ld(e){var t=Ze(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void Ue(e.priority,function(){gd(n)})}else if(31===t){if(null!==(t=o(n)))return e.blockedOn=t,void Ue(e.priority,function(){gd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_d(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&md(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Od(e,t,n){Pd(e)&&n.delete(t)}function Bd(){Cd=!1,null!==Ad&&Pd(Ad)&&(Ad=null),null!==Td&&Pd(Td)&&(Td=null),null!==Md&&Pd(Md)&&(Md=null),Dd.forEach(Od),kd.forEach(Od)}function Ud(e,n){e.blockedOn===n&&(e.blockedOn=null,Cd||(Cd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bd)))}var zd=null;function Vd(e){zd!==e&&(zd=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zd===e&&(zd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===Sd(r||n))continue;break}var s=Ke(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function jd(e){function t(t){return Ud(t,e)}null!==Ad&&Ud(Ad,e),null!==Td&&Ud(Td,e),null!==Md&&Ud(Md,e),Dd.forEach(t),kd.forEach(t);for(var n=0;n<Nd.length;n++){var r=Nd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Nd.length&&null===(n=Nd[0]).blockedOn;)Ld(n),null===n.blockedOn&&Nd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[je]||null;if("function"==typeof s)a||Vd(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[je]||null)o=a.formAction;else if(null!==Sd(i))continue}else o=a.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Vd(n)}}}function Gd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Hd(e){this._internalRoot=e}function Wd(e){this._internalRoot=e}Wd.prototype.render=Hd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));dd(t.current,$u(),e,t,null,null)},Wd.prototype.unmount=Hd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dd(e.current,2,null,e,null,null),Ju(),t[Ge]=null}},Wd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nd.length&&0!==t&&t<Nd[n].priority;n++);Nd.splice(n,0,e),0===n&&Ld(e)}};var $d=n.version;if("19.2.1"!==$d)throw Error(i(527,$d,"19.2.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return l(a),e;if(o===r)return l(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var u=!1,c=a.child;c;){if(c===n){u=!0,n=a,r=o;break}if(c===r){u=!0,r=a,n=o;break}c=c.sibling}if(!u){for(c=o.child;c;){if(c===n){u=!0,n=o,r=a;break}if(c===r){u=!0,r=o,n=a;break}c=c.sibling}if(!u)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var qd={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{ve=Xd.inject(qd),ye=Xd}catch(Zd){}}e.createRoot=function(e,t){if(!(n=e)||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(i(299));var n,r=!1,s="",a=Eo,o=Co,l=Ao;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=function(e,t,n,r,i,s,a,o,l,u,c,h){return e=new hd(e,t,n,a,l,u,c,h,o),t=1,!0===s&&(t|=24),s=Br(3,null,null,t),e.current=s,s.stateNode=e,(t=Ui()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},gs(s),e}(e,1,!1,null,0,r,s,null,a,o,l,Gd),e[Ge]=t.current,Jc(e),new Hd(t)}}}),E=d({"node_modules/react-dom/client.js":(e,t)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),t.exports=S()}}),C=function(e){return"/"+e},A={},T=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=t.map(t=>{if((t=C(t))in A)return;A[t]=!0;const r=t.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(n)for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.href===t&&(!r||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script"),s.crossOrigin="",s.href=t,a&&s.setAttribute("nonce",a),document.head.appendChild(s),r?new Promise((e,n)=>{s.addEventListener("load",e),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),r=Promise.all(i.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var i;function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},M=m(y(),1),D="popstate",k=/^:[\w-]+$/,N=3,F=2,I=1,R=10,L=-2,P=e=>"*"===e,O=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",V=["POST","PUT","PATCH","DELETE"],new Set(V),j=["GET",...V],new Set(j),Symbol("ResetLoaderData"),(G=M.createContext(null)).displayName="DataRouter",(H=M.createContext(null)).displayName="DataRouterState",M.createContext(!1),(W=M.createContext({isTransitioning:!1})).displayName="ViewTransition",M.createContext(new Map).displayName="Fetchers",M.createContext(null).displayName="Await",($=M.createContext(null)).displayName="Navigation",(q=M.createContext(null)).displayName="Location",(X=M.createContext({outlet:null,matches:[],isDataRoute:!1})).displayName="Route",(Y=M.createContext(null)).displayName="RouteError",Z="You should call navigate() in a React.useEffect(), not when your component is first rendered.",K=M.createContext(null),Q=M.createElement(cS,null),J=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?M.createElement(X.Provider,{value:this.props.routeContext},M.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}},ee={},M.memo(vS),te="get",ne="application/x-www-form-urlencoded",re=null,ie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]),Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),Symbol("SingleFetchRedirect"),(se=M.createContext(void 0)).displayName="FrameworkContext",ae="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{ae&&(window.__reactRouterVersion="7.9.3")}catch(Rr){}US.displayName="unstable_HistoryRouter",oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,(le=M.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:a,target:o,to:l,preventScrollReset:u,viewTransition:c,...h},d){let p,{basename:f}=M.useContext($),m="string"==typeof l&&oe.test(l),g=!1;if("string"==typeof l&&m&&(p=l,ae))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=Jw(t.pathname,f);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:g=!0}catch(Rr){Vw(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e,{relative:t}={}){zw(iS(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext($),{hash:i,pathname:s,search:a}=lS(e,{relative:t}),o=s;return"/"!==n&&(o="/"===s?n:O([n,s])),r.createHref({pathname:o,search:a,hash:i})}(l,{relative:r}),[y,b,x]=function(e,t){let n=M.useContext(se),[r,i]=M.useState(!1),[s,a]=M.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=t,d=M.useRef(null);M.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return d.current&&e.observe(d.current),()=>{e.disconnect()}}},[e]),M.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},f=()=>{i(!1),a(!1)};return n?"intent"!==e?[s,d,{}]:[s,d,{onFocus:RS(o,p),onBlur:RS(l,f),onMouseEnter:RS(u,p),onMouseLeave:RS(c,f),onTouchStart:RS(h,p)}]:[!1,d,{}]}(n,h),_=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=oS(),l=sS(),u=lS(e,{relative:s});return M.useCallback(c=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(c,t)){c.preventDefault();let t=void 0!==n?n:Hw(l)===Hw(u);o(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,u,n,r,t,e,i,s,a])}(l,{replace:s,state:a,target:o,preventScrollReset:u,relative:r,viewTransition:c}),w=M.createElement("a",{...h,...x,href:p||v,onClick:g||i?e:function(t){e&&e(t),t.defaultPrevented||_(t)},ref:OS(d,b),target:o,"data-discover":m||"render"!==t?void 0:"true"});return y&&!m?M.createElement(M.Fragment,null,w,M.createElement(LS,{page:v})):w})).displayName="Link",M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:a,children:o,...l},u){let c=lS(s,{relative:l.relative}),h=sS(),d=M.useContext(H),{navigator:p,basename:f}=M.useContext($),m=null!=d&&function(e,{relative:t}={}){let n=M.useContext(W);zw(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jS("useViewTransitionState"),i=lS(e,{relative:t});if(!n.isTransitioning)return!1;let s=Jw(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Jw(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=Kw(i.pathname,a)||null!=Kw(i.pathname,s)}(c)&&!0===a,g=p.encodeLocation?p.encodeLocation(c).pathname:c.pathname,v=h.pathname,y=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(v=v.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&f&&(y=Jw(y,f)||y);const b="/"!==g&&g.endsWith("/")?g.length-1:g.length;let x,_=v===g||!r&&v.startsWith(g)&&"/"===v.charAt(b),w=null!=y&&(y===g||!r&&y.startsWith(g)&&"/"===y.charAt(g.length)),S={isActive:_,isPending:w,isTransitioning:m},E=_?e:void 0;x="function"==typeof n?n(S):[n,_?"active":null,w?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof i?i(S):i;return M.createElement(le,{...l,"aria-current":E,className:x,ref:u,style:C,to:s,viewTransition:a},"function"==typeof o?o(S):o)}).displayName="NavLink",M.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=te,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...d},p)=>{let f=GS(),m=function(e,{relative:t}={}){let{basename:n}=M.useContext($),r=M.useContext(X);zw(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...lS(e||".",{relative:t})},a=sS();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?`?${n}`:""}}return e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),"/"!==n&&(s.pathname="/"===s.pathname?n:O([n,s.pathname])),Hw(s)}(o,{relative:u}),g="get"===a.toLowerCase()?"get":"post",v="string"==typeof o&&oe.test(o);return M.createElement("form",{ref:p,method:g,action:m,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=r?.getAttribute("formmethod")||a;f(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:h})},...d,"data-discover":v||"render"!==e?void 0:"true"})}).displayName="Form",zS.displayName="ScrollRestoration",ue=0,ce=()=>`__${String(++ue)}__`,he="react-router-scroll-positions",de={},pe=m(E()),fe=Math.PI,me="2.1.1",ge="webgl",ve="webgl2",ye="default",be="simple",xe="full",_e="crosshair",we="pointer",Se="move",Ee="text",Ce="wait",Ae=fe/2,Te=fe,Me=fe/4,De=2*fe,ke=2*fe,Ne=fe/180,Fe=180/fe,Ie="corner",Re="radius",Le="left",Pe="center",Oe="alphabetic",Be="quads",Ue="quad_strip",ze="close",Ve="open",je="chord",Ge="round",He="auto",We="source-over",$e="destination-out",qe="lighter",Xe="darken",Ye="lighten",Ze="subtract",Ke="exclusion",Qe="multiply",Je="screen",et="copy",tt="threshold",nt="gray",rt="opaque",it="invert",st="posterize",at="dilate",ot="erode",lt="blur",ut="normal",ct="WORD",ht="fill",dt="texture",pt="image",ft="clamp",mt="flat",gt="#000000",vt="#FFFFFF",yt="unsigned-byte",bt="unsigned-int",xt="float",_t=Symbol("include"),wt=Symbol("exclude"),St=Symbol("join"),Et=Object.freeze({__proto__:null,ADD:qe,ALT:"Alt",ARROW:ye,AUTO:He,AXES:"axes",BACKSPACE:"Backspace",BASELINE:Oe,BEVEL:"bevel",BEZIER:"bezier",BLEND:We,BLUR:lt,BOLD:"bold",BOLDITALIC:"bold italic",BOTTOM:"bottom",BURN:"color-burn",CENTER:Pe,CHAR:"CHAR",CHORD:je,CLAMP:ft,CLOSE:ze,CONTAIN:"contain",CONTROL:"Control",CORNER:Ie,CORNERS:"corners",COVER:"cover",CROSS:_e,CURVE:"curve",DARKEST:Xe,DEG_TO_RAD:Ne,DELETE:"Delete",DIFFERENCE:"difference",DILATE:at,DODGE:"color-dodge",DOWN_ARROW:"ArrowDown",EMPTY_PATH:7,ENTER:"Enter",ERODE:ot,ESCAPE:"Escape",EXCLUDE:wt,EXCLUSION:Ke,FALLBACK:"fallback",FILL:ht,FLAT:mt,FLOAT:xt,FULL:xe,GRAY:nt,GRID:"grid",HALF_FLOAT:"half-float",HALF_PI:Ae,HAND:we,HARD_LIGHT:"hard-light",IMAGE:pt,IMMEDIATE:"immediate",INCLUDE:_t,INVERT:it,ITALIC:"italic",JOIN:St,LABEL:"label",LANDSCAPE:"landscape",LEFT:Le,LEFT_ARROW:"ArrowLeft",LIGHTEST:Ye,LINEAR:"linear",LINES:1,LINE_LOOP:2,LINE_STRIP:3,MIRROR:"mirror",MITER:"miter",MOVE:Se,MULTIPLY:Qe,NEAREST:"nearest",NORMAL:ut,OPAQUE:rt,OPEN:Ve,OPTION:"Alt",OVERLAY:"overlay",P2D:"p2d",P2DHDR:"p2d-hdr",PATH:8,PI:Te,PIE:"pie",POINTS:0,PORTRAIT:"portrait",POSTERIZE:st,PROJECT:"square",QUADRATIC:"quadratic",QUADS:Be,QUAD_STRIP:Ue,QUARTER_PI:Me,RADIUS:Re,RAD_TO_DEG:Fe,REMOVE:$e,REPEAT:"repeat",REPLACE:et,RETURN:"Enter",RIGHT:"right",RIGHT_ARROW:"ArrowRight",ROUND:Ge,SCREEN:Je,SHIFT:"Shift",SIMPLE:be,SMOOTH:"smooth",SOFT_LIGHT:"soft-light",SQUARE:"butt",STROKE:"stroke",SUBTRACT:Ze,TAB:"Tab",TAU:De,TESS:"tess",TEXT:Ee,TEXTURE:dt,THRESHOLD:tt,TOP:"top",TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TWO_PI:ke,UNSIGNED_BYTE:yt,UNSIGNED_INT:bt,UP_ARROW:"ArrowUp",VERSION:me,WAIT:Ce,WEBGL:ge,WEBGL2:ve,WORD:ct,_CTX_MIDDLE:"middle",_DEFAULT_FILL:vt,_DEFAULT_LEADMULT:1.25,_DEFAULT_STROKE:gt,_DEFAULT_TEXT_FILL:"#000000"}),"undefined"!=typeof p5&&WS(p5,p5.prototype),"undefined"!=typeof p5&&$S(p5,p5.prototype),"undefined"!=typeof p5&&qS(p5,p5.prototype),Ct={deg:1,grad:.9,rad:180/Math.PI,turn:360},At=class{add(e,t,n){if("string"==typeof arguments[0])(Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)},this);else for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1])}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}},Tt=new At,Mt=Tt,Dt={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]},kt={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!=="production"?.toLowerCase(),warn:function(e){this.verbose&&globalThis?.console?.warn?.(e)}},Nt=new Set(["<number>","<percentage>","<angle>"]),Ft=class e{constructor(t){this.id=t.id,this.name=t.name,this.base=t.base?e.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let n=t.coords??this.base.coords;for(let e in n)"name"in n[e]||(n[e].name=e);this.coords=n;let r=t.white??this.base.white??"D65";this.white=sE(r),this.formats=t.formats??{};for(let e in this.formats){let t=this.formats[e];t.type||="function",t.name||=e}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:e.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(e,t)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:cE(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Mt.run("colorspace-init-end",this)}inGamut(e,{epsilon:t=75e-6}={}){if(!this.equals(this.gamutSpace))return e=this.to(this.gamutSpace,e),this.gamutSpace.inGamut(e,{epsilon:t});let n=Object.values(this.coords);return e.every((e,r)=>{let i=n[r];if("angle"!==i.type&&i.range){if(Number.isNaN(e))return!0;let[n,r]=i.range;return(void 0===n||e>=n-t)&&(void 0===r||e<=r+t)}return!0})}get isUnbounded(){return Object.values(this.coords).every(e=>!("range"in e))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let e in this.coords)if("angle"===this.coords[e].type)return!0;return!1}getFormat(e){if("object"==typeof e)return e=hE(e,this);let t;return t="default"===e?Object.values(this.formats)[0]:this.formats[e],t?(t=hE(t,this),t):null}equals(e){return!!e&&(this===e||this.id===e||this.id===e.id)}to(t,n){if(1===arguments.length){const e=uE(t);[t,n]=[e.space,e.coords]}if(t=e.get(t),this.equals(t))return n;n=n.map(e=>Number.isNaN(e)?0:e);let r,i,s=this.path,a=t.path;for(let e=0;e<s.length&&s[e].equals(a[e]);e++)r=s[e],i=e;if(!r)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let e=s.length-1;e>i;e--)n=s[e].toBase(n);for(let e=i+1;e<a.length;e++)n=a[e].fromBase(n);return n}from(t,n){if(1===arguments.length){const e=uE(t);[t,n]=[e.space,e.coords]}return(t=e.get(t)).to(this,n)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let t in this.coords){let n=this.coords[t],r=n.range||n.refRange;e.push(r?.min??0)}return e}static registry={};static get all(){return[...new Set(Object.values(e.registry))]}static register(e,t){if(1===arguments.length&&(e=(t=arguments[0]).id),t=this.get(t),this.registry[e]&&this.registry[e]!==t)throw new Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=t,1===arguments.length&&t.aliases)for(let n of t.aliases)this.register(n,t);return t}static get(t,...n){if(!t||t instanceof e)return t;if("string"===ZS(t)){let n=e.registry[t.toLowerCase()];if(!n)throw new TypeError(`No color space found with id = "${t}"`);return n}if(n.length)return e.get(...n);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,n){let r,i,s=ZS(t);if("string"===s?t.includes(".")?[r,i]=t.split("."):[r,i]=[,t]:Array.isArray(t)?[r,i]=t:(r=t.space,i=t.coordId),r=e.get(r),r||(r=n),!r)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(s=ZS(i),"number"===s||"string"===s&&i>=0){let e=Object.entries(r.coords)[i];if(e)return{space:r,id:e[0],index:i,...e[1]}}r=e.get(r);let a=i.toLowerCase(),o=0;for(let e in r.coords){let t=r.coords[e];if(e.toLowerCase()===a||t.name?.toLowerCase()===a)return{space:r,id:e,index:o,...t};o++}throw new TypeError(`No "${i}" coordinate found in ${r.name}. Its coordinates are: ${Object.keys(r.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}},It=new Ft({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Rt=class extends Ft{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=It),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=t=>{let n=XS(e.toXYZ_M,t);return this.white!==this.base.white&&(n=aE(this.white,this.base.white,n)),n},e.fromBase??=t=>(t=aE(this.base.white,this.white,t),XS(e.fromXYZ_M,t))),e.referred??="display",super(e)}},fE.returns="color",mE.returns="color",Lt=new Ft({id:"xyz-d50",name:"XYZ D50",white:"D50",base:It,fromBase:e=>aE(It.white,"D50",e),toBase:e=>aE("D50",It.white,e)}),Pt=216/24389,Ot=24/116,Bt=24389/27,Ut=Dt.D50,zt=new Ft({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Ut,base:Lt,fromBase(e){let t=e.map((e,t)=>e/Ut[t]).map(e=>e>Pt?Math.cbrt(e):(Bt*e+16)/116);return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(e){let t=[];return t[1]=(e[0]+16)/116,t[0]=e[1]/500+t[1],t[2]=t[1]-e[2]/200,[t[0]>Ot?Math.pow(t[0],3):(116*t[0]-16)/Bt,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/Bt,t[2]>Ot?Math.pow(t[2],3):(116*t[2]-16)/Bt].map((e,t)=>e*Ut[t])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Vt=new Ft({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:zt,fromBase(e){let t,[n,r,i]=e;return t=Math.abs(r)<.02&&Math.abs(i)<.02?NaN:180*Math.atan2(i,r)/Math.PI,[n,Math.sqrt(r**2+i**2),gE(t)]},toBase(e){let[t,n,r]=e;return n<0&&(n=0),isNaN(r)&&(r=0),[t,n*Math.cos(r*Math.PI/180),n*Math.sin(r*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}}),jt=25**7,Gt=Math.PI,Ht=180/Gt,Wt=Gt/180,$t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],qt=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],Xt=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],Yt=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],Zt=new Ft({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:It,fromBase(e){let t=XS($t,e).map(e=>Math.cbrt(e));return XS(Xt,t)},toBase(e){let t=XS(Yt,e).map(e=>e**3);return XS(qt,t)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Kt=75e-6,Qt=Math.PI/180,Jt=new Ft({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:It,fromBase:e=>e.map(e=>Math.max(203*e,0)),toBase:e=>e.map(e=>Math.max(e/203,0))}),en=1.15,tn=.66,nn=2610/16384,rn=16384/2610,sn=.8359375,an=2413/128,on=18.6875,ln=1.7*2523/32,un=32/(1.7*2523),cn=-.56,hn=16295499532821565e-27,dn=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],pn=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],mn=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],gn=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]],vn=new Ft({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:Jt,fromBase(e){let[t,n,r]=e,i=XS(dn,[en*t-(en-1)*r,tn*n-(tn-1)*t,r]).map(function(e){return((sn+an*(e/1e4)**nn)/(1+on*(e/1e4)**nn))**ln}),[s,a,o]=XS(mn,i);return[(1+cn)*s/(1+cn*s)-hn,a,o]},toBase(e){let[t,n,r]=e,i=XS(gn,[(t+hn)/(1+cn-cn*(t+hn)),n,r]).map(function(e){return 1e4*((sn-e**un)/(on*e**un-an))**rn}),[s,a,o]=XS(pn,i),l=(s+(en-1)*o)/en;return[l,(a+(tn-1)*l)/tn,o]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),yn=new Ft({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:vn,fromBase(e){let t,[n,r,i]=e;const s=2e-4;return t=Math.abs(r)<s&&Math.abs(i)<s?NaN:180*Math.atan2(i,r)/Math.PI,[n,Math.sqrt(r**2+i**2),gE(t)]},toBase:e=>[e[0],e[1]*Math.cos(e[2]*Math.PI/180),e[1]*Math.sin(e[2]*Math.PI/180)]}),bn=.8359375,xn=2413/128,_n=18.6875,wn=2610/16384,Sn=2523/32,En=16384/2610,Cn=32/2523,An=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],Tn=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Mn=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],Dn=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]],kn=new Ft({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Jt,fromBase:e=>function(e){let t=e.map(function(e){return((bn+xn*(e/1e4)**wn)/(1+_n*(e/1e4)**wn))**Sn});return XS(Tn,t)}(XS(An,e)),toBase(e){let t=function(e){return XS(Mn,e).map(function(e){return 1e4*(Math.max(e**Cn-bn,0)/(xn-_n*e**Cn))**En})}(e);return XS(Dn,t)}}),Nn=Dt.D65,In=1/(Fn=.42),Rn=2*Math.PI,Ln=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],Pn=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],On=[[460,451,288],[460,-891,-261],[460,-220,-6300]],Bn={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},Un={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},zn=180/Math.PI,Vn=Math.PI/180,jn=TE(Nn,64/Math.PI*.2,20,"average",!1),new Ft({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:It,fromBase(e){const t=DE(e,jn);return[t.J,t.M,t.h]},toBase:e=>ME({J:e[0],M:e[1],h:e[2]},jn)}),Gn=Dt.D65,Hn=216/24389,Wn=24389/27,$n=TE(Gn,200/Math.PI*kE(50),100*kE(50),"average",!1),qn=new Ft({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:It,fromBase:e=>NE(e),toBase:e=>function(e,t){let[n,r,i]=e,s=[],a=0;if(0===i)return[0,0,0];let o=kE(i);a=i>0?.00379058511492914*i**2+.608983189401032*i+.9155088574762233:9514440756550361e-21*i**2+.08693057439788597*i-21.928975842194614;let l=0,u=1/0;for(;l<=15;){s=ME({J:a,C:r,h:n},t);const e=Math.abs(s[1]-o);if(e<u){if(e<=2e-12)return s;u=e}a-=(s[1]-o)*a/(2*s[1]),l+=1}return ME({J:a,C:r,h:n},t)}(e,$n),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Math.PI,Xn=Math.PI/180,Yn=[1,.007,.0228],Zn={deltaE76:wE,deltaECMC:SE,deltaE2000:yE,deltaEJz:EE,deltaEITP:CE,deltaEOK:bE,deltaEHCT:IE},Kn={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}},RE.returns="color",Qn={WHITE:{space:Zt,coords:[1,0,0]},BLACK:{space:Zt,coords:[0,0,0]}},LE.returns="color",Jn=new Rt({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),er=new Rt({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]]}),tr={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]},nr=Array(3).fill("<percentage> | <number>[0, 255]"),rr=Array(3).fill("<number>[0, 255]"),ir=new Rt({id:"srgb",name:"sRGB",base:er,fromBase:e=>e.map(e=>{let t=e<0?-1:1,n=e*t;return n>.0031308?t*(1.055*n**(1/2.4)-.055):12.92*e}),toBase:e=>e.map(e=>{let t=e<0?-1:1,n=e*t;return n<=.04045?e/12.92:t*((n+.055)/1.055)**2.4}),formats:{rgb:{coords:nr},rgb_number:{name:"rgb",commas:!0,coords:rr,noAlpha:!0},color:{},rgba:{coords:nr,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:rr},hex:{type:"custom",toGamut:!0,test:e=>/^#([a-f0-9]{3,4}){1,2}$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let t=[];return e.replace(/[a-f0-9]{2}/gi,e=>{t.push(parseInt(e,16)/255)}),{spaceId:"srgb",coords:t.slice(0,3),alpha:t.slice(3)[0]}},serialize:(e,t,{collapse:n=!0}={})=>{t<1&&e.push(t),e=e.map(e=>Math.round(255*e));let r=n&&e.every(e=>e%17==0);return"#"+e.map(e=>r?(e/17).toString(16):e.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){let t={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(e=e.toLowerCase())?(t.coords=tr.black,t.alpha=0):t.coords=tr[e],t.coords)return t}}}}),sr=new Rt({id:"p3",cssId:"display-p3",name:"P3",base:Jn,fromBase:ir.fromBase,toBase:ir.toBase}),ar=.56,or=.57,lr=.62,ur=.65,cr=.022,hr=1.414,dr=.1,pr=5e-4,fr=1.14,mr=.027,gr=1.14,kt.interpolationSpace="lab",vr=new Ft({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:ir,fromBase:e=>{let t=Math.max(...e),n=Math.min(...e),[r,i,s]=e,[a,o,l]=[NaN,0,(n+t)/2],u=t-n;if(0!==u){switch(o=0===l||1===l?0:(t-l)/Math.min(l,1-l),t){case r:a=(i-s)/u+(i<s?6:0);break;case i:a=(s-r)/u+2;break;case s:a=(r-i)/u+4}a*=60}return o<0&&(a+=180,o=Math.abs(o)),a>=360&&(a-=360),[a,100*o,100*l]},toBase:e=>{let[t,n,r]=e;function i(e){let i=(e+t/30)%12,s=n*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(i-3,9-i,1))}return t%=360,t<0&&(t+=360),n/=100,r/=100,[i(0),i(8),i(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),yr=new Ft({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:vr,fromBase(e){let[t,n,r]=e;n/=100,r/=100;let i=r+n*Math.min(r,1-r);return[t,0===i?0:200*(1-r/i),100*i]},toBase(e){let[t,n,r]=e;n/=100,r/=100;let i=r*(1-n/2);return[t,0===i||1===i?0:(r-i)/Math.min(i,1-i)*100,100*i]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),br=new Ft({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:yr,fromBase(e){let[t,n,r]=e;return[t,r*(100-n)/100,100-r]},toBase(e){let[t,n,r]=e;n/=100,r/=100;let i=n+r;if(i>=1)return[t,0,n/i*100];let s=1-r;return[t,100*(0===s?0:1-n/s),100*s]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),xr=new Ft({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Zt,fromBase(e){let t,[n,r,i]=e;const s=2e-4;return t=Math.abs(r)<s&&Math.abs(i)<s?NaN:180*Math.atan2(i,r)/Math.PI,[n,Math.sqrt(r**2+i**2),gE(t)]},toBase(e){let t,n,[r,i,s]=e;return isNaN(s)?(t=0,n=0):(t=i*Math.cos(s*Math.PI/180),n=i*Math.sin(s*Math.PI/180)),[r,t,n]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}}),_r=new Ft({id:"hsb",name:"HSB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},b:{range:[0,100],name:"Brightness"}},base:ir,fromBase:e=>{const t=Math.max(...e),n=t-Math.min(...e);let r,i,[s,a,o]=e;return 0===n?(r=0,i=0):(i=n/t,s===t?r=(a-o)/n:a===t?r=2+(o-s)/n:o===t&&(r=4+(s-a)/n),r<0?r+=6:r>=6&&(r-=6)),[r/6*360,100*i,100*t]},toBase:jE,formats:{default:{type:"custom",serialize:(e,t)=>{const n=jE(e);let r=`rgb(${Math.round(100*n[0]*100)/100}% ${Math.round(100*n[1]*100)/100}% ${Math.round(100*n[2]*100)/100}%`;return t<1&&(r+=` / ${t}`),r+=")",r}},hsb:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsba:{coords:["<number> | <angle>","<percentage>","<percentage>"],commans:!0,lastAlpha:!0}}}),wr=(e,t,n,r,i,s)=>{let a=(e-t)/(n-t)*(i-r)+r;return s&&(a=Math.max(a,Math.min(r,i)),a=Math.min(a,Math.max(r,i))),a},Sr={},Er=class e{_color;mode;static colorMap={};static#e={};static#t={};static addColorMode(t,n){Ft.register(n),e.colorMap[t]=n.id,e.#e[t]=Object.values(n.coords).reduce((e,t)=>(e.push(t.refRange||t.range),e),[]),e.#e[t].push([0,1]),e.#t[t]=n.fromGray}constructor(t,n,r,{clamp:i=!1}={}){if(this.mode=n||"rgb",t instanceof e){const r=n?e.colorMap[n]:e.colorMap[t.mode];this._color=LE(t._color,r),this.mode=r}else if("object"!=typeof t||Array.isArray(t)||null===t)if("string"==typeof t[0])try{this._color=lE(t[0]);const[n]=Object.entries(e.colorMap).find(([e,t])=>t===this._color.spaceId);this.mode=n,this._color=LE(this._color,this._color.spaceId)}catch(s){throw new Error("Invalid color string")}else{let n;if(r)if(4===t.length)n=e.mapColorRange(t,this.mode,r,i);else if(3===t.length)n=e.mapColorRange([t[0],t[1],t[2]],this.mode,r,i),n.push(1);else if(2===t.length){n=e.#t[this.mode]?e.#t[this.mode](t[0],r,i):e.mapColorRange([t[0],t[0],t[0]],this.mode,r,i);const s=Array.isArray(r[r.length-1])?r[r.length-1]:[0,r[r.length-1]];n.push(wr(t[1],s[0],s[1],0,1,i))}else{if(1!==t.length)throw new Error("Invalid color");n=e.#t[this.mode]?e.#t[this.mode](t[0],r,i):e.mapColorRange([t[0],t[0],t[0]],this.mode,r,i),n.push(1)}else n=t;const s=e.colorMap[this.mode]||console.error("Invalid color mode"),a={space:s,coords:n.slice(0,3),alpha:n[3]};this._color=LE(a,s)}else{const r=n?e.colorMap[n]:t.spaceId;this._color=LE(t,r),this.mode=n||Object.entries(e.colorMap).find(([e,t])=>t===this._color.spaceId)}}static mapColorRange(t,n,r,i){const s=r.map(e=>Array.isArray(e)?e:[0,e]),a=e.#e[n];return t.map((e,t)=>wr(e,s[t][0],s[t][1],a[t][0],a[t][1],i))}static unmapColorRange(t,n,r){const i=r.map(e=>Array.isArray(e)?e:[0,e]),s=e.#e[n];return t.map((e,t)=>wr(e,s[t][0],s[t][1],i[t][0],i[t][1]))}#n(t){return new e(this._color,t)}get _array(){return this._getRGBA()}array(){return this._array}lerp(t,n,r){let i=-1;for(;(i+1<this._color.space.path.length||i+1<t._color.space.path.length)&&this._color.space.path[i+1]===t._color.space.path[i+1];)i+=1;if(-1===i)throw new Error("Cannot lerp colors. No common color space found");const s=VE(this._color,t._color,{space:this._color.space.path[i].id})(n);return new e(s,r||this.mode)}toString(e){const t=`${this._color.space.id}-${this._color.coords.join(",")}-${this._color.alpha}-${e}`;let n=Sr[t];return n||(n=function(e,{precision:t=kt.precision,format:n="default",inGamut:r=!0,...i}={}){let s,a=n;n=(e=uE(e)).space.getFormat(n)??e.space.getFormat("default")??Ft.DEFAULT_FORMAT;let o=e.coords.slice();if(r||=n.toGamut,r&&!xE(e)&&(o=RE(_E(e),!0===r?void 0:r).coords),"custom"===n.type){if(i.precision=t,!n.serialize)throw new TypeError(`format ${a} can only be used to parse colors, not for serialization`);s=n.serialize(o,e.alpha,i)}else{let r=n.name||"color";n.serializeCoords?o=n.serializeCoords(o,t):null!==t&&(o=o.map(e=>KS(e,{precision:t})));let i=[...o];if("color"===r){let t=n.id||n.ids?.[0]||e.space.id;i.unshift(t)}let a=e.alpha;null!==t&&(a=KS(a,{precision:t}));let l=e.alpha>=1||n.noAlpha?"":`${n.commas?",":" /"} ${a}`;s=`${r}(${i.join(n.commas?", ":" ")}${l})`}return s}(this._color,{format:e}),Sr[t]=n),n}contrast(e,t="WCAG21"){if("all"!==t){let n,r;switch(t){case"WCAG21":n=OE(this._color,e._color),r=4.5;break;case"APCA":n=Math.abs(zE(this._color,e._color)),r=75;break;default:return null}return n>=r}{const t=OE(this._color,e._color),n=zE(this._color,e._color);return{WCAG21:{value:t,passedMinimum:t>=4.5,passedAAA:t>=7},APCA:{value:n,passedMinimum:Math.abs(n)>=75}}}}setRed(t,n=[0,1]){Array.isArray(n)||(n=[0,n]);const r=e.#e.rgb[0],i=wr(t,n[0],n[1],r[0],r[1]);if("rgb"===this.mode||"rgbhdr"===this.mode)this._color.coords[0]=i;else{const e=this._color.space.id,t=LE(this._color,"srgb");t.coords[0]=i,this._color=LE(t,e)}}setGreen(t,n=[0,1]){Array.isArray(n)||(n=[0,n]);const r=e.#e.rgb[1],i=wr(t,n[0],n[1],r[0],r[1]);if("rgb"===this.mode||"rgbhdr"===this.mode)this._color.coords[1]=i;else{const e=this._color.space.id,t=LE(this._color,"srgb");t.coords[1]=i,this._color=LE(t,e)}}setBlue(t,n=[0,1]){Array.isArray(n)||(n=[0,n]);const r=e.#e.rgb[2],i=wr(t,n[0],n[1],r[0],r[1]);if("rgb"===this.mode||"rgbhdr"===this.mode)this._color.coords[2]=i;else{const e=this._color.space.id,t=LE(this._color,"srgb");t.coords[2]=i,this._color=LE(t,e)}}setAlpha(t,n=[0,1]){Array.isArray(n)||(n=[0,n]);const r=e.#e[this.mode][3],i=wr(t,n[0],n[1],r[0],r[1]);this._color.alpha=i}_getRGBA(t=[1,1,1,1]){const n=e.#e.rgb;let r=structuredClone(LE(this._color,"srgb").coords);r.push(this._color.alpha);const i=t.map(e=>Array.isArray(e)?e:[0,e]);return r=r.map((e,t)=>wr(e,n[t][0],n[t][1],i[t][0],i[t][1])),r}_getMode(){return this.mode}_getRed(t=[0,1]){if(Array.isArray(t)||(t=[0,t]),"rgb"===this.mode||"rgbhdr"===this.mode){const n=e.#e[this.mode][0];return wr(this._color.coords[0],n[0],n[1],t[0],t[1])}{const n=e.#e.rgb[0];return wr(LE(this._color,"srgb").coords[0],n[0],n[1],t[0],t[1])}}_getGreen(t=[0,1]){if(Array.isArray(t)||(t=[0,t]),"rgb"===this.mode||"rgbhdr"===this.mode){const n=e.#e[this.mode][1];return wr(this._color.coords[1],n[0],n[1],t[0],t[1])}{const n=e.#e.rgb[1];return wr(LE(this._color,"srgb").coords[1],n[0],n[1],t[0],t[1])}}_getBlue(t=[0,1]){if(Array.isArray(t)||(t=[0,t]),"rgb"===this.mode||"rgbhdr"===this.mode){const n=e.#e[this.mode][2];return wr(this._color.coords[2],n[0],n[1],t[0],t[1])}{const n=e.#e.rgb[2];return wr(LE(this._color,"srgb").coords[2],n[0],n[1],t[0],t[1])}}_getAlpha(t=[0,1]){Array.isArray(t)||(t=[0,t]);const n=e.#e[this.mode][3];return wr(this._color.alpha,n[0],n[1],t[0],t[1])}_getHue(t=[0,360]){if(Array.isArray(t)||(t=[0,t]),"hsb"===this.mode||"hsl"===this.mode){const n=e.#e[this.mode][0];return wr(this._color.coords[0],n[0],n[1],t[0],t[1])}{const n=e.#e.hsl[0];return wr(LE(this._color,"hsl").coords[0],n[0],n[1],t[0],t[1])}}_getSaturation(t=[0,100]){if(Array.isArray(t)||(t=[0,t]),"hsb"===this.mode||"hsl"===this.mode){const n=e.#e[this.mode][1];return wr(this._color.coords[1],n[0],n[1],t[0],t[1])}{const n=e.#e.hsl[1];return wr(LE(this._color,"hsl").coords[1],n[0],n[1],t[0],t[1])}}_getBrightness(t=[0,100]){if(Array.isArray(t)||(t=[0,t]),"hsb"===this.mode){const n=e.#e[this.mode][2];return wr(this._color.coords[2],n[0],n[1],t[0],t[1])}{const n=e.#e.hsb[2];return wr(LE(this._color,"hsb").coords[2],n[0],n[1],t[0],t[1])}}_getLightness(t=[0,100]){if(Array.isArray(t)||(t=[0,t]),"hsl"===this.mode){const n=e.#e[this.mode][2];return wr(this._color.coords[2],n[0],n[1],t[0],t[1])}{const n=e.#e.hsl[2];return wr(LE(this._color,"hsl").coords[2],n[0],n[1],t[0],t[1])}}},"undefined"!=typeof p5&&GE(p5,p5.prototype),Cr="rgbhdr",Ar="oklab",Tr="oklch",Mr="rgba","undefined"!=typeof p5&&HE(p5,p5.prototype),Dr=class e{constructor(e){this.DOM=e||document.implementation.createDocument(null,"doc").createElement("root")}getParent(){return new e(this.DOM.parentElement)}getName(){return this.DOM.tagName}setName(e){const t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(let i=0;i<n.length;i++)r.setAttribute(n[i].nodeName,n[i].nodeValue);this.DOM=r}hasChildren(){return this.DOM.children.length>0}listChildren(){const e=[];for(let t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e}getChildren(e){return WE(e?this.DOM.getElementsByTagName(e):this.DOM.children)}getChild(t){if("string"!=typeof t)return new e(this.DOM.children[t]);for(const n of this.DOM.children)if(n.tagName===t)return new e(n)}addChild(t){t instanceof e&&this.DOM.appendChild(t.DOM)}removeChild(e){let t=-1;if("string"==typeof e){for(let n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])}getAttributeCount(){return this.DOM.attributes.length}listAttributes(){const e=[];for(const t of this.DOM.attributes)e.push(t.nodeName);return e}hasAttribute(e){const t={};for(const n of this.DOM.attributes)t[n.nodeName]=n.nodeValue;return!!t[e]}getNum(e,t){const n={};for(const r of this.DOM.attributes)n[r.nodeName]=r.nodeValue;return Number(n[e])||t||0}getString(e,t){const n={};for(const r of this.DOM.attributes)n[r.nodeName]=r.nodeValue;return n[e]?String(n[e]):t||null}setAttribute(e,t){this.DOM.setAttribute(e,t)}getContent(e){let t;return t=this.DOM.textContent,t=t.replace(/\s\s+/g,","),t||e||null}setContent(e){this.DOM.children.length||(this.DOM.textContent=e)}serialize(){return(new XMLSerializer).serializeToString(this.DOM)}},"undefined"!=typeof p5&&$E(p5,p5.prototype),kr=class e{constructor(e,t){this.file=e,this._pInst=t;const n=e.type.split("/");this.type=n[0],this.subtype=n[1],this.name=e.name,this.size=e.size,this.data=void 0}static _createLoader(t,n){const r=new FileReader;return r.onload=function(r){const i=new e(t);if("application/json"===i.file.type)i.data=JSON.parse(r.target.result);else if("text/xml"===i.file.type){const e=(new DOMParser).parseFromString(r.target.result,"text/xml");i.data=new Dr(e.documentElement)}else i.data=r.target.result;n(i)},r}static _load(t,n){if(/^text\//.test(t.type)||"application/json"===t.type)e._createLoader(t,n).readAsText(t);else if(/^(video|audio)\//.test(t.type)){const r=new e(t);r.data=URL.createObjectURL(t),n(r)}else e._createLoader(t,n).readAsDataURL(t)}},"undefined"!=typeof p5&&qE(p5,p5.prototype),Nr=class e{width;height;elt;constructor(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}remove(){if(this.stop){this.stop();const e=this.elt.srcObject;null!==e&&e.getTracks().forEach(e=>{e.stop()})}let e=this._pInst;if(e&&!e._elements&&e._pInst&&(e=e._pInst),e&&e._elements){const t=e._elements.indexOf(this);-1!==t&&e._elements.splice(t,1)}for(let t in this._events)this.elt.removeEventListener(t,this._events[t]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)}parent(t){return void 0===t?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof e&&(t=t.elt),t.appendChild(this.elt),this)}child(t){return void 0===t?this.elt.childNodes:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof e&&(t=t.elt),t instanceof HTMLElement&&this.elt.appendChild(t),this)}html(...e){return 0===e.length?this.elt.innerHTML:e[1]?(this.elt.insertAdjacentHTML("beforeend",e[0]),this):(this.elt.innerHTML=e[0],this)}id(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}class(e){return void 0===e?this.elt.className:(this.elt.className=e,this)}addClass(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this}removeClass(e){return this.elt.classList.remove(e),this}hasClass(e){return this.elt.classList.contains(e)}toggleClass(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this}center(e){const t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,i={x:this.elt.offsetLeft,y:this.elt.offsetTop};n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0);const s=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(s/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===e?this.position(s/2+this.parent().offsetLeft,i.y):"vertical"===e&&this.position(i.x,a/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this}position(...e){if(0===e.length)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};{let t="absolute";return"static"!==e[2]&&"fixed"!==e[2]&&"relative"!==e[2]&&"sticky"!==e[2]&&"initial"!==e[2]&&"inherit"!==e[2]||(t=e[2]),this.elt.style.position=t,this.elt.style.left=e[0]+"px",this.elt.style.top=e[1]+"px",this.x=e[0],this.y=e[1],this}}show(){return this.elt.style.display="block",this}hide(){return this.elt.style.display="none",this}size(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};{let n=e,r=t;const i=He;if(n!==i||r!==i){if(n===i?n=t*this.width/this.height:r===i&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){const e={},t=this.elt.getContext("2d");let i;for(i in t)e[i]=t[i];for(i in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),e)this.elt.getContext("2d")[i]=e[i]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=n,this.height=r,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst.width=n,this._pInst.height=r)}return this}}style(e,t){const n=this;if(t instanceof Er&&(t=t.toString()),void 0===t){if(-1===e.indexOf(":"))return window.getComputedStyle(n.elt).getPropertyValue(e);{const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");n[0]&&n[1]&&(this.elt.style[n[0].trim()]=n[1].trim())}}}else if(this.elt.style[e]=t,"width"===e||"height"===e||"left"===e||"top"===e){let t=window.getComputedStyle(n.elt).getPropertyValue(e).replace(/[^\d.]/g,"");this[e]=Math.round(parseFloat(t,10))}return this}_translate(...e){this.elt.style.position="absolute";let t="";return this.elt.style.transform&&(t=this.elt.style.transform.replace(/translate3d\(.*\)/g,""),t=t.replace(/translate[X-Z]?\(.*\)/g,"")),2===e.length?this.elt.style.transform="translate("+e[0]+"px, "+e[1]+"px)":e.length>2&&(this.elt.style.transform="translate3d("+e[0]+"px,"+e[1]+"px,"+e[2]+"px)",3===e.length?this.elt.parentElement.style.perspective="1000px":this.elt.parentElement.style.perspective=e[3]+"px"),this.elt.style.transform+=t,this}_rotate(...e){let t="";return this.elt.style.transform&&(t=this.elt.style.transform.replace(/rotate3d\(.*\)/g,""),t=t.replace(/rotate[X-Z]?\(.*\)/g,"")),1===e.length?this.elt.style.transform="rotate("+e[0]+"deg)":2===e.length?this.elt.style.transform="rotate("+e[0]+"deg, "+e[1]+"deg)":3===e.length&&(this.elt.style.transform="rotateX("+e[0]+"deg)",this.elt.style.transform+="rotateY("+e[1]+"deg)",this.elt.style.transform+="rotateZ("+e[2]+"deg)"),this.elt.style.transform+=t,this}attribute(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(let n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)}removeAttribute(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(let t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this}value(...e){return e.length>0?(this.elt.value=e[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value}mousePressed(t){return e._adjustListener("pointerdown",function(e){return this._pInst.mouseIsPressed=!0,this._pInst._activePointers.set(e.pointerId,e),this._pInst._setMouseButton(e),this._pInst._updatePointerCoords(e),t.call(this,e)},this),this}doubleClicked(t){return e._adjustListener("dblclick",t,this),this}mouseWheel(t){return e._adjustListener("wheel",t,this),this}mouseReleased(t){return e._adjustListener("pointerup",t,this),this}mouseClicked(t){return e._adjustListener("click",t,this),this}mouseMoved(t){return e._adjustListener("pointermove",t,this),this}mouseOver(t){return e._adjustListener("pointerover",t,this),this}mouseOut(t){return e._adjustListener("pointerout",t,this),this}dragOver(t){return e._adjustListener("dragover",t,this),this}dragLeave(t){return e._adjustListener("dragleave",t,this),this}changed(t){return e._adjustListener("change",t,this),this}input(t){return e._adjustListener("input",t,this),this}drop(t,n){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;const e=function(e){e.preventDefault()};this.elt.addEventListener("dragover",e),this.elt.addEventListener("dragleave",e)}e._attachListener("drop",function(e){e.preventDefault(),"function"==typeof n&&n.call(this,e);const r=e.dataTransfer.files;for(const n of r)kr._load(n,t)},this)}else console.log("The File APIs are not fully supported in this browser.");return this}draggable(e){let t,n="ontouchstart"in window,r=0,i=0,s=0,a=0,o=n?"touchstart":"mousedown",l=n?"touchend":"mouseup",u=n?"touchmove":"mousemove";function c(t){if(t=t||window.event,n){const e=t.changedTouches;r=s-parseInt(e[0].clientX),i=a-parseInt(e[0].clientY),s=parseInt(e[0].clientX),a=parseInt(e[0].clientY)}else r=s-parseInt(t.clientX),i=a-parseInt(t.clientY),s=parseInt(t.clientX),a=parseInt(t.clientY);e.style.left=e.offsetLeft-r+"px",e.style.top=e.offsetTop-i+"px"}function h(){document.removeEventListener(l,h,!1),document.removeEventListener(u,c,!1)}return void 0===e?t=e=this.elt:e!==this.elt&&e.elt!==this.elt&&(e=e.elt,t=this.elt),t.addEventListener(o,function(e){if(e=e||window.event,n){const t=e.changedTouches;s=parseInt(t[0].clientX),a=parseInt(t[0].clientY)}else s=parseInt(e.clientX),a=parseInt(e.clientY);return document.addEventListener(l,h,!1),document.addEventListener(u,c,!1),!1},!1),t.style.cursor="move",this}static _adjustListener(t,n,r){return!1===n?e._detachListener(t,r):e._attachListener(t,n,r),this}static _attachListener(t,n,r){r._events[t]&&e._detachListener(t,r);const i=n.bind(r);r.elt.addEventListener(t,i,{capture:!1,signal:r._pInst._removeSignal}),r._events[t]=i}static _detachListener(e,t){const n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null}},"undefined"!=typeof p5&&XE(p5,p5.prototype),Fr={_toPixels(e){if(e instanceof ImageData)return e.data;if(e.getContext("2d"))return e.getContext("2d").getImageData(0,0,e.width,e.height).data;if(e.getContext("webgl")){const t=e.getContext("webgl"),n=t.drawingBufferWidth*t.drawingBufferHeight*4,r=new Uint8Array(n);return t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),r}},_getARGB(e,t){const n=4*t;return e[n+3]<<24&4278190080|e[n]<<16&16711680|e[n+1]<<8&65280|255&e[n+2]},_setPixels(e,t){let n=0;for(let r=0,i=e.length;r<i;r++)n=4*r,e[n+0]=(16711680&t[r])>>>16,e[n+1]=(65280&t[r])>>>8,e[n+2]=255&t[r],e[n+3]=(4278190080&t[r])>>>24},_toImageData:e=>e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height),_createImageData(e,t){return Fr._tmpCanvas=document.createElement("canvas"),Fr._tmpCtx=Fr._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply(e,t,n){const r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),s=t(i,n);s instanceof ImageData?r.putImageData(s,0,0,0,0,e.width,e.height):r.putImageData(i,0,0,0,0,e.width,e.height)},threshold(e,t=.5){const n=Fr._toPixels(e),r=Math.floor(255*t);for(let i=0;i<n.length;i+=4){let e;e=.2126*n[i]+.7152*n[i+1]+.0722*n[i+2]>=r?255:0,n[i]=n[i+1]=n[i+2]=e}},gray(e){const t=Fr._toPixels(e);for(let n=0;n<t.length;n+=4){const e=.2126*t[n]+.7152*t[n+1]+.0722*t[n+2];t[n]=t[n+1]=t[n+2]=e}},opaque(e){const t=Fr._toPixels(e);for(let n=0;n<t.length;n+=4)t[n+3]=255;return t},invert(e){const t=Fr._toPixels(e);for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},posterize(e,t=4){const n=Fr._toPixels(e);if(t<2||t>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");const r=t-1;for(let i=0;i<n.length;i+=4){const e=n[i],s=n[i+1],a=n[i+2];n[i]=255*(e*t>>8)/r,n[i+1]=255*(s*t>>8)/r,n[i+2]=255*(a*t>>8)/r}},dilate(e){const t=Fr._toPixels(e);let n=0;const r=t.length?t.length/4:0,i=new Int32Array(r);let s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_;for(;n<r;)for(s=n,a=n+e.width;n<a;)o=l=Fr._getARGB(t,n),h=n-1,c=n+1,d=n-e.width,p=n+e.width,h<s&&(h=n),c>=a&&(c=n),d<0&&(d=0),p>=r&&(p=n),g=Fr._getARGB(t,d),m=Fr._getARGB(t,h),v=Fr._getARGB(t,p),f=Fr._getARGB(t,c),u=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),b=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g),_=77*(v>>16&255)+151*(v>>8&255)+28*(255&v),b>u&&(l=m,u=b),y>u&&(l=f,u=y),x>u&&(l=g,u=x),_>u&&(l=v,u=_),i[n++]=l;Fr._setPixels(t,i)},erode(e){const t=Fr._toPixels(e);let n=0;const r=t.length?t.length/4:0,i=new Int32Array(r);let s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_;for(;n<r;)for(s=n,a=n+e.width;n<a;)o=l=Fr._getARGB(t,n),h=n-1,c=n+1,d=n-e.width,p=n+e.width,h<s&&(h=n),c>=a&&(c=n),d<0&&(d=0),p>=r&&(p=n),g=Fr._getARGB(t,d),m=Fr._getARGB(t,h),v=Fr._getARGB(t,p),f=Fr._getARGB(t,c),u=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),b=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g),_=77*(v>>16&255)+151*(v>>8&255)+28*(255&v),b<u&&(l=m,u=b),y<u&&(l=f,u=y),x<u&&(l=g,u=x),_<u&&(l=v,u=_),i[n++]=l;Fr._setPixels(t,i)},blur(e,t){YE(e,t)}},Or=function(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this},Br=function(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this},Ur=class e{constructor(...e){let t=e;"function"==typeof e[0]&&(this.isPInst=!0,this._fromRadians=e[0],this._toRadians=e[1],t=e.slice(2));let n=t.length;0===n?(this.dimensions=2,this._values=[0,0,0]):(this.dimensions=n,this._values=t)}get values(){return this._values}set values(e){let t=e.length;0===t?(this.dimensions=2,this._values=[0,0,0]):(this.dimensions=t,this._values=e.slice())}get x(){return this._values[0]||0}getValue(e){if(e<this._values.length)return this._values[e];p5._friendlyError("The index parameter is trying to set a value outside the bounds of the vector","p5.Vector.setValue")}setValue(e,t){e<this._values.length?this._values[e]=t:p5._friendlyError("The index parameter is trying to set a value outside the bounds of the vector","p5.Vector.setValue")}get y(){return this._values[1]||0}get z(){return this._values[2]||0}get w(){return this._values[3]||0}set x(e){this._values.length>1&&(this._values[0]=e)}set y(e){this._values.length>1&&(this._values[1]=e)}set z(e){this._values.length>2&&(this._values[2]=e)}set w(e){this._values.length>3&&(this._values[3]=e)}toString(){return`vector[${this._values.join(", ")}]`}set(...t){return t[0]instanceof e?this._values=t[0].values.slice():Array.isArray(t[0])?this._values=t[0].map(e=>e||0):this._values=t.map(e=>e||0),this.dimensions=this._values.length,this}copy(){return this.isPInst?new e(this._fromRadians,this._toRadians,...this._values):new e(...this._values)}add(...t){return t[0]instanceof e?t=t[0].values:Array.isArray(t[0])&&(t=t[0]),t.forEach((e,t)=>{this._values[t]=(this._values[t]||0)+(e||0)}),this}rem(t,n,r){if(t instanceof e){if([t.x,t.y,t.z].every(Number.isFinite)){const e=parseFloat(t.x),n=parseFloat(t.y),r=parseFloat(t.z);return Br.call(this,e,n,r)}}else if(Array.isArray(t)){if(t.every(e=>Number.isFinite(e))){if(2===t.length)return Or.call(this,t[0],t[1]);if(3===t.length)return Br.call(this,t[0],t[1],t[2])}}else if(1===arguments.length){if(Number.isFinite(arguments[0])&&0!==arguments[0])return this.x=this.x%arguments[0],this.y=this.y%arguments[0],this.z=this.z%arguments[0],this}else if(2===arguments.length){const e=[...arguments];if(e.every(e=>Number.isFinite(e))&&2===e.length)return Or.call(this,e[0],e[1])}else if(3===arguments.length){const e=[...arguments];if(e.every(e=>Number.isFinite(e))&&3===e.length)return Br.call(this,e[0],e[1],e[2])}}sub(...t){return t[0]instanceof e?t[0].values.forEach((e,t)=>{this._values[t]-=e||0}):Array.isArray(t[0])?t[0].forEach((e,t)=>{this._values[t]-=e||0}):t.forEach((e,t)=>{this._values[t]-=e||0}),this}mult(...t){if(1===t.length&&t[0]instanceof e){const e=t[0],n=Math.min(this._values.length,e.values.length);for(let t=0;t<n;t++){if(!Number.isFinite(e.values[t])||"number"!=typeof e.values[t])return console.warn("p5.Vector.prototype.mult:","v contains components that are either undefined or not finite numbers"),this;this._values[t]*=e.values[t]}}else if(1===t.length&&Array.isArray(t[0])){const e=t[0],n=Math.min(this._values.length,e.length);for(let t=0;t<n;t++){if(!Number.isFinite(e[t])||"number"!=typeof e[t])return console.warn("p5.Vector.prototype.mult:","arr contains elements that are either undefined or not finite numbers"),this;this._values[t]*=e[t]}}else if(1===t.length&&"number"==typeof t[0]&&Number.isFinite(t[0]))for(let e=0;e<this._values.length;e++)this._values[e]*=t[0];return this}div(...t){if(0===t.length)return this;if(1===t.length&&t[0]instanceof e){const e=t[0];if(e._values.every(e=>Number.isFinite(e)&&"number"==typeof e)){if(e._values.some(e=>0===e))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this._values=this._values.map((t,n)=>t/e._values[n])}else console.warn("p5.Vector.prototype.div:","vector contains components that are either undefined or not finite numbers");return this}if(1===t.length&&Array.isArray(t[0])){const e=t[0];if(e.every(e=>Number.isFinite(e)&&"number"==typeof e)){if(e.some(e=>0===e))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this._values=this._values.map((t,n)=>t/e[n])}else console.warn("p5.Vector.prototype.div:","array contains components that are either undefined or not finite numbers");return this}if(t.every(e=>Number.isFinite(e)&&"number"==typeof e)){if(t.some(e=>0===e))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this._values=this._values.map((e,n)=>e/t[0])}else console.warn("p5.Vector.prototype.div:","arguments contain components that are either undefined or not finite numbers");return this}mag(){return Math.sqrt(this.magSq())}magSq(){return this._values.reduce((e,t)=>e+t*t,0)}dot(...t){return t[0]instanceof e?this.dot(...t[0]._values):this._values.reduce((e,n,r)=>e+n*(t[r]||0),0)}cross(t){const n=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return this.isPInst?new e(this._fromRadians,this._toRadians,n,r,i):new e(n,r,i)}dist(e){return e.copy().sub(this).mag()}normalize(){const e=this.mag();return 0!==e&&this.mult(1/e),this}limit(e){const t=this.magSq();return t>e*e&&this.div(Math.sqrt(t)).mult(e),this}setMag(e){return this.normalize().mult(e)}heading(){const e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e}setHeading(e){this.isPInst&&(e=this._toRadians(e));let t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this}rotate(e){let t=this.heading()+e;this.isPInst&&(t=this._toRadians(t));const n=this.mag();return this.x=Math.cos(t)*n,this.y=Math.sin(t)*n,this}angleBetween(e){if(this.magSq()*e.magSq()===0)return NaN;const t=this.cross(e);let n=Math.atan2(t.mag(),this.dot(e))*Math.sign(t.z||1);return this.isPInst&&(n=this._fromRadians(n)),n}lerp(t,n,r,i){return t instanceof e?this.lerp(t.x,t.y,t.z,n):(this.x+=(t-this.x)*i||0,this.y+=(n-this.y)*i||0,this.z+=(r-this.z)*i||0,this)}slerp(e,t){if(0===t)return this;if(1===t)return this.set(e);const n=this.mag(),r=e.mag();if(n*r===0)return this.mult(1-t).add(e.x*t,e.y*t,e.z*t),this;const i=this.cross(e),s=i.mag(),a=Math.atan2(s,this.dot(e));if(s>0)i.x/=s,i.y/=s,i.z/=s;else{if(a<.5*Math.PI)return this.mult(1-t).add(e.x*t,e.y*t,e.z*t),this;0===this.z&&0===e.z?i.set(0,0,1):0!==this.x?i.set(this.y,-this.x,0).normalize():i.set(1,0,0)}const o=i.cross(this),l=1-t+t*r/n,u=l*Math.cos(t*a),c=l*Math.sin(t*a);return this.x=this.x*u+o.x*c,this.y=this.y*u+o.y*c,this.z=this.z*u+o.z*c,this}reflect(t){const n=e.normalize(t);return this.sub(n.mult(2*this.dot(n)))}array(){return[this.x||0,this.y||0,this.z||0]}equals(...t){let n;n=t[0]instanceof e?t[0]._values:Array.isArray(t[0])?t[0]:t;for(let e=0;e<this._values.length;e++)if(this._values[e]!==(n[e]||0))return!1;return!0}clampToZero(){for(let e=0;e<this._values.length;e++)this._values[e]=this._clampToZero(this._values[e]);return this}_clampToZero(e){return Math.abs((e||0)-0)<=Number.EPSILON?0:e}static fromAngle(t,n){return void 0===n&&(n=1),new e(n*Math.cos(t),n*Math.sin(t))}static fromAngles(t,n,r){void 0===r&&(r=1);const i=Math.cos(n),s=Math.sin(n),a=Math.cos(t),o=Math.sin(t);return new e(r*o*s,-r*a,r*o*i)}static random2D(){return this.fromAngle(Math.random()*ke)}static random3D(){const t=Math.random()*ke,n=2*Math.random()-1,r=Math.sqrt(1-n*n),i=r*Math.cos(t),s=r*Math.sin(t);return new e(i,s,n)}static copy(e){return e.copy(e)}static add(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n}static rem(t,n){if(t instanceof e&&n instanceof e){let e=t.copy();return e.rem(n),e}}static sub(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n}static mult(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n}static rotate(t,n,r){return 2===arguments.length?r=t.copy():(r instanceof e||p5._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),r.set(t)),r.rotate(n),r}static div(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n}static dot(e,t){return e.dot(t)}static cross(e,t){return e.cross(t)}static dist(e,t){return e.dist(t)}static lerp(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r}static slerp(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&p5._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),r.slerp(t,n),r}static mag(e){return e.mag()}static magSq(e){return e.magSq()}static normalize(t,n){return arguments.length<2?n=t.copy():(n instanceof e||p5._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),n.set(t)),n.normalize()}static limit(t,n,r){return arguments.length<3?r=t.copy():(r instanceof e||p5._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),r.set(t)),r.limit(n)}static setMag(t,n,r){return arguments.length<3?r=t.copy():(r instanceof e||p5._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),r.set(t)),r.setMag(n)}static heading(e){return e.heading()}static angleBetween(e,t){return e.angleBetween(t)}static reflect(t,n,r){return arguments.length<3?r=t.copy():(r instanceof e||p5._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),r.set(t)),r.reflect(n)}static array(e){return e.array()}static equals(t,n){let r;return t instanceof e?r=t:t instanceof Array?r=(new e).set(t):p5._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),r.equals(n)}},"undefined"!=typeof p5&&ZE(p5,p5.prototype),zr=class{constructor(e){for(const[t,n]of Object.entries(e))this[t]=n}},Vr=class e{vertices;_shape=null;_primitivesIndex=null;_contoursIndex=null;isClosing=!1;constructor(...t){if(this.constructor===e)throw new Error("ShapePrimitive is an abstract class: it cannot be instantiated.");if(!(t.length>0))throw new Error("At least one vertex must be passed to the constructor.");this.vertices=t}get vertexCount(){return this.vertices.length}get vertexCapacity(){throw new Error("Getter vertexCapacity must be implemented.")}get _firstInterpolatedVertex(){return this.startVertex()}get canOverrideAnchor(){return!1}accept(e){throw new Error("Method accept() must be implemented.")}addToShape(e){let t=e.at(-1);if(0===t.primitives.length)t.primitives.push(this);else{let n,r,i=e.at(-1,-1),s=i instanceof this.constructor,a=i.vertexCapacity-i.vertexCount;s&&a>0?(n=this.vertices.splice(0,a),r=this.vertices,i.vertices.push(...n),r.length>0&&t.primitives.push(this)):t.primitives.push(this)}return this.vertices.length>0&&(this._primitivesIndex=e.at(-1).primitives.length-1,this._contoursIndex=e.contours.length-1,this._shape=e),e.at(-1,-1)}get _nextPrimitive(){return this._belongsToShape?this._shape.at(this._contoursIndex,this._primitivesIndex+1):null}get _belongsToShape(){return null!==this._shape}handlesClose(){return!1}close(e){throw new Error("Unimplemented!")}},jr=class{#r;primitives;constructor(e=8){this.#r=e,this.primitives=[]}get kind(){const e=0===this.primitives.length,t=8===this.#r;return e&&t?7:this.#r}accept(e){for(const t of this.primitives)t.accept(e)}},Gr=class extends Vr{#i=1;get vertexCapacity(){return this.#i}accept(e){e.visitAnchor(this)}getEndVertex(){return this.vertices[0]}},Hr=class e extends Vr{constructor(...t){if(super(...t),this.constructor===e)throw new Error("Segment is an abstract class: it cannot be instantiated.")}get _previousPrimitive(){return this._belongsToShape?this._shape.at(this._contoursIndex,this._primitivesIndex-1):null}getStartVertex(){return this._previousPrimitive.getEndVertex()}getEndVertex(){return this.vertices.at(-1)}},Wr=class extends Hr{#i=1;get vertexCapacity(){return this.#i}accept(e){e.visitLineSegment(this)}},$r=class extends Hr{#s;#i;constructor(e,...t){super(...t);let n=Array.isArray(e)?e[0]:e;this.#s=n,this.#i=n}get order(){return this.#s}get vertexCapacity(){return this.#i}#a;hullLength(){return void 0===this.#a&&(this.#a=KE([this.getStartVertex(),...this.vertices])),this.#a}accept(e){e.visitBezierSegment(this)}},qr=class extends Hr{#i=1/0;_splineProperties={ends:_t,tightness:0};get vertexCapacity(){return this.#i}accept(e){e.visitSplineSegment(this)}get _comesAfterSegment(){return this._previousPrimitive instanceof Hr}get canOverrideAnchor(){return this._splineProperties.ends===wt}get _firstInterpolatedVertex(){return this._splineProperties.ends===wt?this._comesAfterSegment?this.vertices[1]:this.vertices[0]:this.getStartVertex()}get _chainedToSegment(){if(this._belongsToShape&&this._comesAfterSegment){let e=this._firstInterpolatedVertex.position;return this.getStartVertex().position.equals(e)}return!1}addToShape(e){const t=super.addToShape(e);if(this._splineProperties.ends=e._splineProperties.ends,this._splineProperties.tightness=e._splineProperties.tightness,this._splineProperties.ends!==wt)return t;let n=!this._belongsToShape,r=e.at(-1,-1);if(n&&2===r.vertices.length&&r._comesAfterSegment&&!r._chainedToSegment){let e=r._firstInterpolatedVertex.position,t=r.getStartVertex().position;console.warn((i=e.array(),s=t.array(),`Spline does not start where previous path segment ends:\n      second spline vertex at (${i})\n      expected to be at (${s}).`))}var i,s;return t}getEndVertex(){return this._splineProperties.ends===_t?super.getEndVertex():this._splineProperties.ends===wt?this.vertices.at(-2):this.getStartVertex()}getControlPoints(){let e=[];this._comesAfterSegment&&e.push(this.getStartVertex()),e.push(this.getStartVertex());for(const n of this.vertices)e.push(n);const t=this.getStartVertex();return this._splineProperties.ends===_t?(e.unshift(t),e.push(this.vertices.at(-1))):this._splineProperties.ends===St&&(e.unshift(this.vertices.at(-1)),e.push(t,this.vertices.at(0))),e}handlesClose(){return!!this._belongsToShape&&2===this._shape.at(this._contoursIndex).primitives.length&&1===this._primitivesIndex}close(){this._splineProperties.ends=St}},Xr=class extends Vr{#i=1;get vertexCapacity(){return this.#i}accept(e){e.visitPoint(this)}},Yr=class extends Vr{#i=2;get vertexCapacity(){return this.#i}accept(e){e.visitLine(this)}},Zr=class extends Vr{#i=3;get vertexCapacity(){return this.#i}accept(e){e.visitTriangle(this)}},Kr=class extends Vr{#i=4;get vertexCapacity(){return this.#i}accept(e){e.visitQuad(this)}},Qr=class extends Vr{#i=1/0;get vertexCapacity(){return this.#i}accept(e){e.visitTriangleFan(this)}},Jr=class extends Vr{#i=1/0;get vertexCapacity(){return this.#i}accept(e){e.visitTriangleStrip(this)}},ei=class extends Vr{#i=1/0;get vertexCapacity(){return this.#i}accept(e){e.visitQuadStrip(this)}},ti=class{creators;constructor(){let e=new Map;e.set("vertex-7",(...e)=>new Gr(...e)),e.set("vertex-8",(...e)=>new Wr(...e)),e.set("vertex-0",(...e)=>new Xr(...e)),e.set("vertex-1",(...e)=>new Yr(...e)),e.set("vertex-4",(...e)=>new Zr(...e)),e.set(`vertex-${Be}`,(...e)=>new Kr(...e)),e.set("vertex-6",(...e)=>new Qr(...e)),e.set("vertex-5",(...e)=>new Jr(...e)),e.set(`vertex-${Ue}`,(...e)=>new ei(...e)),e.set("bezierVertex-7",(e,...t)=>new Gr(...t)),e.set("bezierVertex-8",(e,...t)=>new $r(e,...t)),e.set("splineVertex-7",(...e)=>new Gr(...e)),e.set("splineVertex-8",(...e)=>new qr(...e)),this.creators=e}get(e,t){const n=`${e}-${t}`;return this.creators.get(n)}set(e,t,n){const r=`${e}-${t}`;this.creators.set(r,n)}clear(){this.creators.clear()}},ni=class{#o;#l;#u;#c=3;kind=null;contours=[];_splineProperties={tightness:0,ends:_t};userVertexProperties=null;constructor(e,t=new ti){this.#l=e,this.#o=e,this.#u=t;for(const n in this.#o)"position"!==n&&"textureCoordinates"!==n&&(this[n]=function(e){this.#o[n]=e})}serializeToArray(e){if(null==e)return[];if(e instanceof Number)return[e];if(e instanceof Array)return e;if(e.array instanceof Function)return e.array();throw new Error(`Can't convert ${e} to array!`)}vertexToArray(e){const t=[];for(const n in this.#o){if(this.userVertexProperties&&n in this.userVertexProperties)continue;const r=e[n];t.push(...this.serializeToArray(r))}for(const n in this.userVertexProperties)n in e?t.push(...this.serializeToArray(e[n])):t.push(...new Array(this.userVertexProperties[n]).fill(0));return t}hydrateValue(e,t){if(null===t)return null;if(t instanceof Number)return e.shift();if(t instanceof Array){const n=[];for(let r=0;r<t.length;r++)n.push(e.shift());return n}if(t instanceof Ur)return new Ur(e.shift(),e.shift(),e.shift());if(t instanceof Er){const t=[e.shift(),e.shift(),e.shift(),e.shift()];return new Er(t)}}arrayToVertex(e){const t={},n=[...e];for(const r in this.#o){if(this.userVertexProperties&&r in this.userVertexProperties)continue;const e=this.#o[r];t[r]=this.hydrateValue(n,e)}for(const r in this.userVertexProperties){const e=this.#o[r];t[r]=this.hydrateValue(n,e)}return t}arrayScale(e,t){return e.map(e=>e*t)}arraySum(e,...t){return e.map((e,n)=>{let r=e;for(let i=0;i<t.length;i++)r+=t[i][n];return r})}arrayMinus(e,t){return e.map((e,n)=>e-t[n])}evaluateCubicBezier([e,t,n,r],i){return this.arraySum(this.arrayScale(e,Math.pow(1-i,3)),this.arrayScale(t,3*Math.pow(1-i,2)*i),this.arrayScale(n,3*(1-i)*Math.pow(i,2)),this.arrayScale(r,Math.pow(i,3)))}evaluateQuadraticBezier([e,t,n],r){return this.arraySum(this.arrayScale(e,Math.pow(1-r,2)),this.arrayScale(t,2*(1-r)*r),this.arrayScale(n,r*r))}catmullRomToBezier(e,t){let n=1-t,r=[];for(let i=0;i+3<e.length;i++){const[t,s,a,o]=e.slice(i,i+4),l=this.arraySum(s,this.arrayScale(this.arrayMinus(a,t),n/6)),u=this.arraySum(a,this.arrayScale(this.arrayMinus(s,o),n/6)),c=a;r.push([l,u,c])}return r}at(e,t,n){let r,i;switch(r=this.contours.at(e),arguments.length){case 1:return r;case 2:return r.primitives.at(t);case 3:return i=r.primitives.at(t),i.vertices.at(n)}}reset(){this.#o={...this.#l},this.kind=null,this.contours=[],this.userVertexProperties=null}vertexProperty(e,t){this.userVertexProperties=this.userVertexProperties||{};const n=this.vertexPropertyKey(e),r=Array.isArray(t)?t:[t];this.userVertexProperties[n]||(this.userVertexProperties[n]=r.length),this.#o[n]=r}vertexPropertyName(e){return e.replace(/Src$/,"")}vertexPropertyKey(e){return e+"Src"}bezierOrder(...e){this.#c=e}splineProperty(e,t){this._splineProperties[e]=t}splineProperties(e){if(!e)return this._splineProperties;for(const t in e)this.splineProperty(t,e[t])}#h(e,t){return this.#o.position=e,void 0!==t&&(this.#o.textureCoordinates=t),new zr(this.#o)}#d(e,t,...n){let r=this.#u.get(e,t);return"bezierVertex"===e?r(this.#c,...n):r(...n)}#p(e,t,n){let r=e,i=this.at(-1).kind,s=this.#h(t,n);return this.#d(r,i,s).addToShape(this)}vertex(e,t,{isClosing:n=!1}={}){this.#p("vertex",e,t).isClosing=n}bezierVertex(e,t){this.#p("bezierVertex",e,t)}splineVertex(e,t){this.#p("splineVertex",e,t)}arcVertex(e,t){this.#p("arcVertex",e,t)}beginContour(e=8){7===this.at(-1)?.kind&&this.contours.pop(),this.contours.push(new jr(e))}endContour(e=Ve,t=this.contours.length-1){const n=this.at(t);if("close"===e){const e=8===n.kind,r=this.at(t,0,0),i=Object.hasOwn(r,"position"),s=this.at(t,-1);if(e&&i)if(s.handlesClose())s.close(r);else{const e=this.contours.splice(t+1,this.contours.length-t-1),n=this.#o;this.#o={...n};for(const t in r)["position","textureCoordinates"].includes(t)||(this.#o[t]=r[t]);this.vertex(r.position,r.textureCoordinates,{isClosing:!0}),this.#o=n,this.contours.push(...e)}}}beginShape(e=8){this.kind=e,this.beginContour(e)}endShape(e=Ve){"close"===e&&this.endContour(e,0)}accept(e){for(const t of this.contours)t.accept(e)}},ri=class e{constructor(){if(this.constructor===e)throw new Error("PrimitiveVisitor is an abstract class: it cannot be instantiated.")}visitAnchor(e){throw new Error("Method visitAnchor() has not been implemented.")}visitLineSegment(e){throw new Error("Method visitLineSegment() has not been implemented.")}visitBezierSegment(e){throw new Error("Method visitBezierSegment() has not been implemented.")}visitSplineSegment(e){throw new Error("Method visitSplineSegment() has not been implemented.")}visitArcSegment(e){throw new Error("Method visitArcSegment() has not been implemented.")}visitPoint(e){throw new Error("Method visitPoint() has not been implemented.")}visitLine(e){throw new Error("Method visitLine() has not been implemented.")}visitTriangle(e){throw new Error("Method visitTriangle() has not been implemented.")}visitQuad(e){throw new Error("Method visitQuad() has not been implemented.")}visitTriangleFan(e){throw new Error("Method visitTriangleFan() has not been implemented.")}visitTriangleStrip(e){throw new Error("Method visitTriangleStrip() has not been implemented.")}visitQuadStrip(e){throw new Error("Method visitQuadStrip() has not been implemented.")}},ii=class extends ri{path=new Path2D;strokeWeight;constructor({strokeWeight:e}){super(),this.strokeWeight=e}visitAnchor(e){let t=e.getEndVertex();this.path.moveTo(t.position.x,t.position.y)}visitLineSegment(e){if(e.isClosing)this.path.closePath();else{let t=e.getEndVertex();this.path.lineTo(t.position.x,t.position.y)}}visitBezierSegment(e){let[t,n,r]=e.vertices;switch(e.order){case 2:this.path.quadraticCurveTo(t.position.x,t.position.y,n.position.x,n.position.y);break;case 3:this.path.bezierCurveTo(t.position.x,t.position.y,n.position.x,n.position.y,r.position.x,r.position.y)}}visitSplineSegment(e){const t=e._shape;if(e._splineProperties.ends===wt&&!e._comesAfterSegment){let t=e._firstInterpolatedVertex;this.path.moveTo(t.position.x,t.position.y)}const n=e.getControlPoints().map(e=>t.vertexToArray(e));let r=t.catmullRomToBezier(n,e._splineProperties.tightness).map(e=>e.map(e=>t.arrayToVertex(e)));for(const i of r){const e=i.flatMap(e=>[e.position.x,e.position.y]);this.path.bezierCurveTo(...e)}}visitPoint(e){const{x:t,y:n}=e.vertices[0].position;this.path.moveTo(t,n),this.path.lineTo(t+1e-5,n)}visitLine(e){const{x:t,y:n}=e.vertices[0].position,{x:r,y:i}=e.vertices[1].position;this.path.moveTo(t,n),this.path.lineTo(r,i)}visitTriangle(e){const[t,n,r]=e.vertices;this.path.moveTo(t.position.x,t.position.y),this.path.lineTo(n.position.x,n.position.y),this.path.lineTo(r.position.x,r.position.y),this.path.closePath()}visitQuad(e){const[t,n,r,i]=e.vertices;this.path.moveTo(t.position.x,t.position.y),this.path.lineTo(n.position.x,n.position.y),this.path.lineTo(r.position.x,r.position.y),this.path.lineTo(i.position.x,i.position.y),this.path.closePath()}visitTriangleFan(e){const[t,...n]=e.vertices;for(let r=0;r<n.length-1;r++){const e=n[r],i=n[r+1];this.path.moveTo(t.position.x,t.position.y),this.path.lineTo(e.position.x,e.position.y),this.path.lineTo(i.position.x,i.position.y),this.path.closePath()}}visitTriangleStrip(e){for(let t=0;t<e.vertices.length-2;t++){const n=e.vertices[t],r=e.vertices[t+1],i=e.vertices[t+2];this.path.moveTo(n.position.x,n.position.y),this.path.lineTo(r.position.x,r.position.y),this.path.lineTo(i.position.x,i.position.y),this.path.closePath()}}visitQuadStrip(e){for(let t=0;t<e.vertices.length-3;t+=2){const n=e.vertices[t],r=e.vertices[t+1],i=e.vertices[t+2],s=e.vertices[t+3];this.path.moveTo(n.position.x,n.position.y),this.path.lineTo(r.position.x,r.position.y),this.path.lineTo(s.position.x,s.position.y),this.path.lineTo(i.position.x,i.position.y),this.path.closePath()}}},si=class extends ri{contours=[];curveDetail;constructor({curveDetail:e=1}={}){super(),this.curveDetail=e}lastContour(){return this.contours[this.contours.length-1]}visitAnchor(e){this.contours.push([]);const t=e._nextPrimitive;t?.canOverrideAnchor?this.lastContour().push(t._firstInterpolatedVertex):this.lastContour().push(e.getEndVertex())}visitLineSegment(e){this.lastContour().push(e.getEndVertex())}visitBezierSegment(e){const t=this.lastContour(),n=Math.max(1,Math.ceil(e.hullLength()*this.curveDetail)),r=[e.getStartVertex(),...e.vertices].map(t=>e._shape.vertexToArray(t));for(let i=0;i<n;i++){const s=(i+1)/n;t.push(e._shape.arrayToVertex(3===e.order?e._shape.evaluateCubicBezier(r,s):e._shape.evaluateQuadraticBezier(r,s)))}}visitSplineSegment(e){const t=e._shape,n=this.lastContour(),r=e.getControlPoints().map(e=>t.vertexToArray(e));let i=t.catmullRomToBezier(r,e._splineProperties.tightness),s=t.vertexToArray(e._firstInterpolatedVertex);for(const a of i){const e=[s,...a],r=Math.max(1,Math.ceil(KE(e.map(e=>t.arrayToVertex(e)))*this.curveDetail));for(let i=0;i<r;i++){const s=(i+1)/r;n.push(t.arrayToVertex(t.evaluateCubicBezier(e,s)))}s=a[2]}}visitPoint(e){this.contours.push(e.vertices.slice())}visitLine(e){this.contours.push(e.vertices.slice())}visitTriangle(e){this.contours.push(e.vertices.slice())}visitQuad(e){this.contours.push(e.vertices.slice())}visitTriangleFan(e){this.contours.push(e.vertices.slice())}visitTriangleStrip(e){this.contours.push(e.vertices.slice())}visitQuadStrip(e){this.contours.push(e.vertices.slice())}},ai=class extends ri{constructor(){super()}},"undefined"!=typeof p5&&QE(p5,p5.prototype),oi=class{#f={};constructor(e){for(const t in e)this[t]=e[t]}setValue(e,t){e in this.#f||(this.#f[e]=this[e]),this[e]=t}getDiff(){const e=this.#f;return this.#f={},e}getModified(){return this.#f}applyDiff(e){for(const t in this.#f)this[t]=this.#f[t];this.#f=e}},ui=m((li=d({"node_modules/file-saver/FileSaver.js":(e,t)=>{/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var n=n||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,s=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,h){h||(t=u(t));var d,p=this,f="application/octet-stream"===t.type,m=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(s){o(s)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,i)return d=n().createObjectURL(t),void setTimeout(function(){var e,t;r.href=d,r.download=c,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),m(),l(d),p.readyState=p.DONE});!function(){if((a||f&&s)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,m()},r.readAsDataURL(t),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(t)),f?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),p.readyState=p.DONE,m(),l(d)}()},h=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||e.content);void 0!==t&&t.exports?t.exports.saveAs=n:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return n})}}))()),ci=class e{constructor(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelsState=this,this._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}pixelDensity(e){return void 0!==e?(e<=0&&(e=1),this._pixelDensity=e,this.width/=e,this.height/=e,this):this._pixelDensity}_animateGif(e){const t=this.gifProperties,n=e._lastRealFrameTime||window.performance.now();if(0===t.lastChangeTime&&(t.lastChangeTime=n),t.playing){t.timeDisplayed=n-t.lastChangeTime;const e=t.frames[t.displayIndex].delay;if(t.timeDisplayed>=e){const r=Math.floor(t.timeDisplayed/e);if(t.timeDisplayed=0,t.lastChangeTime=n,t.displayIndex+=r,t.loopCount=Math.floor(t.displayIndex/t.numFrames),null!==t.loopLimit&&t.loopCount>=t.loopLimit)t.playing=!1;else{const e=t.displayIndex%t.numFrames;this.drawingContext.putImageData(t.frames[e].image,0,0),t.displayIndex=e,this.setModified(!0)}}}}loadPixels(){const e=this._pixelsState,t=this._pixelDensity,n=this.width*t,r=this.height*t,i=this.drawingContext.getImageData(0,0,n,r);e.imageData=i,this.pixels=e.pixels=i.data,this.setModified(!0)}updatePixels(e,t,n,r){const i=this._pixelsState,s=this._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(e=0,t=0,n=this.width,r=this.height),e*=s,t*=s,n*=s,r*=s,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=i.imageData),this.drawingContext.putImageData(i.imageData,e,t,0,0,n,r),this.setModified(!0)}get(t,n,r,i){const s=this._pixelsState,a=this._pixelDensity,o=this.canvas;if(void 0===t&&void 0===n)t=n=0,r=s.width,i=s.height;else if(t*=a,n*=a,void 0===r&&void 0===i)return t<0||n<0||t>=o.width||n>=o.height?[0,0,0,0]:this._getPixel(t,n);const l=new e(r*a,i*a);return l.pixelDensity(a),l.canvas.getContext("2d").drawImage(o,t,n,r*a,i*a,0,0,r*a,i*a),l}_getPixel(e,t){let n,r;return n=this.drawingContext.getImageData(e,t,1,1).data,r=0,[n[0],n[1],n[2],n[3]]}set(t,n,r){t=Math.floor(t),n=Math.floor(n);const i=this._pixelsState;if(r instanceof e)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pixelDensity,this._pixelDensity),this.drawingContext.clearRect(t,n,r.width,r.height),this.drawingContext.drawImage(r.canvas,t,n),this.drawingContext.restore();else{let e=0,s=0,a=0,o=0,l=4*(n*this._pixelDensity*(this.width*this._pixelDensity)+t*this._pixelDensity);if(i.imageData||i.loadPixels(),"number"==typeof r)l<i.pixels.length&&(e=r,s=r,a=r,o=255);else if(Array.isArray(r)){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<i.pixels.length&&(e=r[0],s=r[1],a=r[2],o=r[3])}else r instanceof p5.Color&&l<i.pixels.length&&([e,s,a,o]=r._getRGBA([255,255,255,255]));for(let r=0;r<this._pixelDensity;r++)for(let u=0;u<this._pixelDensity;u++)l=4*((n*this._pixelDensity+u)*this.width*this._pixelDensity+(t*this._pixelDensity+r)),i.pixels[l]=e,i.pixels[l+1]=s,i.pixels[l+2]=a,i.pixels[l+3]=o}this.setModified(!0)}resize(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);const n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties){const n=this.gifProperties,r=(e,t)=>{let n=0;for(let r=0;r<t.height;r++)for(let i=0;i<t.width;i++){const s=Math.floor(i*e.width/t.width);let a=4*(Math.floor(r*e.height/t.height)*e.width+s);t.data[n++]=e.data[a++],t.data[n++]=e.data[a++],t.data[n++]=e.data[a++],t.data[n++]=e.data[a++]}};for(let i=0;i<n.numFrames;i++){const s=this.drawingContext.createImageData(e,t);r(n.frames[i].image,s),n.frames[i].image=s}}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),this.pixels.length>0&&this.loadPixels(),this.setModified(!0)}copy(...e){let t,n,r,i,s,a,o,l,u;if(9===e.length)t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];else{if(8!==e.length)throw new Error("Signature not supported");t=this,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7]}this._copyHelper(this,t,n,r,i,s,a,o,l,u)}_copyHelper(e,t,n,r,i,s,a,o,l,u){const c=t.canvas.width/t.width;let h=0,d=0;t._renderer&&t._renderer.isP3D&&(h=t.width/2,d=t.height/2),e._renderer&&e._renderer.isP3D?(e.push(),e.resetMatrix(),e.noLights(),e.blendMode(e.BLEND),e.imageMode(e.CORNER),e._renderer.image(t,n+h,r+d,i,s,a,o,l,u),e.pop()):e.drawingContext.drawImage(t.canvas,c*(n+h),c*(r+d),c*i,c*s,a,o,l,u)}mask(e){void 0===e&&(e=this);const t=this.drawingContext.globalCompositeOperation;let n=this._pixelDensity,r=1;e instanceof di&&(r=e._pInst._renderer._pixelDensity);const i=[e,0,0,r*e.width,r*e.height,0,0,n*this.width,n*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(let e=0;e<this.gifProperties.frames.length;e++)this.drawingContext.putImageData(this.gifProperties.frames[e].image,0,0),this.copy(...i),this.gifProperties.frames[e].image=this.drawingContext.getImageData(0,0,n*this.width,n*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy(...i);this.drawingContext.globalCompositeOperation=t,this.setModified(!0)}filter(e,t){Fr.apply(this.canvas,Fr[e],t),this.setModified(!0)}blend(...e){const t=this.drawingContext.globalCompositeOperation,n=e[e.length-1],r=Array.prototype.slice.call(e,0,e.length-1);this.drawingContext.globalCompositeOperation=n,this.copy(...r),this.drawingContext.globalCompositeOperation=t,this.setModified(!0)}setModified(e){this._modified=e}isModified(){return this._modified}save(e,t){if(this.gifProperties)!function(e,t){const n=e.gifProperties;let r=n.loopLimit;1===r?r=null:null===r&&(r=0);const i=new Uint8Array(e.width*e.height*n.numFrames),s=[],a={};for(let g=0;g<n.numFrames;g++){const t=new Set,r=n.frames[g].image.data,i=r.length,o=new Uint32Array(e.width*e.height);for(let e=0,n=0;e<i;e+=4,n++){const i=r[e+0]<<16|r[e+1]<<8|r[e+2];t.add(i),o[n]=i}const l=[...t].sort().toString();void 0===a[l]?a[l]={freq:1,frames:[g]}:(a[l].freq+=1,a[l].frames.push(g)),s.push(o)}let o=[];const l=Object.keys(a).sort(function(e,t){return a[t].freq-a[e].freq}),u=l[0].split(",").map(e=>parseInt(e));o=o.concat(a[u].frames);const c=new Set(u);for(let g=1;g<l.length;g++){const e=l[g].split(",").map(e=>parseInt(e)).filter(e=>!c.has(e));if(u.length+e.length<=256){for(let t=0;t<e.length;t++)u.push(e[t]),c.add(e[t]);o=o.concat(a[l[g]].frames)}}o=new Set(o);const h={};for(let g=0;g<u.length;g++)h[u[g]]||(h[u[g]]=g);let d=1;for(;d<u.length;)d<<=1;u.length=d;const p={loop:r,palette:new Uint32Array(u)},f=new omggif.GifWriter(i,e.width,e.height,p);let m={};for(let g=0;g<n.numFrames;g++){const t=!o.has(g),r=t?[]:u,i=new Uint8Array(e.width*e.height),a={},l=new Set;s[g].forEach((e,n)=>{t?(void 0===a[e]&&(a[e]=r.length,r.push(e)),i[n]=a[e]):i[n]=h[e],g>0&&s[g-1][n]!==e&&l.add(e)});const c={},d=r.filter(e=>!l.has(e));if(d.length>0){const e=d[0],n=t?a[e]:h[e];if(g>0){for(let e=0;e<s[g].length;e++)s[g-1][e]===s[g][e]&&(i[e]=n);c.transparent=n,m.frameOpts.disposal=1}}if(c.delay=n.frames[g].delay/10,t){let e=1;for(;e<r.length;)e<<=1;r.length=e,c.palette=new Uint32Array(r)}g>0&&f.addFrame(0,0,e.width,e.height,m.pixelPaletteIndex,m.frameOpts),m={pixelPaletteIndex:i,frameOpts:c}}m.frameOpts.disposal=1,f.addFrame(0,0,e.width,e.height,m.pixelPaletteIndex,m.frameOpts),JE(new Blob([i.slice(0,f.end())],{type:"image/gif"}),t,"gif")}(this,e);else{let n,r=this.canvas;switch(t=t||eC(e,t)[1]||"png"){default:n="image/png";break;case"webp":n="image/webp";break;case"jpeg":case"jpg":n="image/jpeg"}r.toBlob(n=>{JE(n,e,t)},n)}}async toBlob(){return new Promise(e=>{this.canvas.toBlob(e)})}reset(){if(this.gifProperties){const e=this.gifProperties;e.playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0)}}getCurrentFrame(){if(this.gifProperties){const e=this.gifProperties;return e.displayIndex%e.numFrames}}setFrame(e){if(this.gifProperties){const t=this.gifProperties;e<t.numFrames&&e>=0?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}}numFrames(){if(this.gifProperties)return this.gifProperties.numFrames}play(){this.gifProperties&&(this.gifProperties.playing=!0)}pause(){this.gifProperties&&(this.gifProperties.playing=!1)}delay(e,t){if(this.gifProperties){const n=this.gifProperties;if(t<n.numFrames&&t>=0)n.frames[t].delay=e;else for(const t of n.frames)t.delay=e}}},"undefined"!=typeof p5&&tC(p5,p5.prototype),hi=class e{constructor(e={}){for(const t in e)this[t]=e[t]}clone(){return new e(this)}},di=class e{static states={strokeColor:null,strokeSet:!1,fillColor:null,fillSet:!1,tint:null,imageMode:Ie,rectMode:Ie,ellipseMode:Pe,strokeWeight:1,textFont:{family:"sans-serif"},textLeading:15,leadingSet:!1,textSize:12,textAlign:Le,textBaseline:Oe,bezierOrder:3,splineProperties:new hi({ends:_t,tightness:0}),textWrap:ct,fontStyle:ut,fontStretch:ut,fontWeight:ut,lineHeight:ut,fontVariant:ut,direction:"inherit"};constructor(t,n,r,i){this._pInst=t,this._isMainCanvas=i,this.pixels=[],this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this.width=n,this.height=r,this._events={},i&&(this._isMainCanvas=!0),this.states=new oi(e.states),this.states.strokeColor=new Er([0,0,0]),this.states.fillColor=new Er([1,1,1]),this._pushPopStack=[],this._pushPopDepth=0,this._clipping=!1,this._clipInvert=!1,this._currentShape=void 0}get currentShape(){return this._currentShape||(this._currentShape=new ni(this.getCommonVertexProperties())),this._currentShape}remove(){}pixelDensity(e){let t;return"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),t=this,this.resize(this.width,this.height)):t=this._pixelDensity,t}push(){this._pushPopDepth++,this._pushPopStack.push(this.states.getDiff())}pop(){this._pushPopDepth--;const e=this._pushPopStack.pop()||{},t=this.states.getModified();this.states.applyDiff(e),this.updateShapeVertexProperties(t),this.updateShapeProperties(t)}bezierOrder(e){if(void 0===e)return this.states.bezierOrder;this.states.setValue("bezierOrder",e),this.updateShapeProperties()}bezierVertex(e,t,n=0,r=0,i=0){const s=new Ur(e,t,n),a=this.getSupportedIndividualVertexProperties().textureCoordinates?new Ur(r,i):void 0;this.currentShape.bezierVertex(s,a)}splineProperty(e,t){if(void 0===t)return this.states.splineProperties[e];this.states.setValue("splineProperties",this.states.splineProperties.clone()),this.states.splineProperties[e]=t,this.updateShapeProperties()}splineProperties(e){if(!e)return{...this.states.splineProperties};for(const t in e)this.splineProperty(t,e[t])}splineVertex(e,t,n=0,r=0,i=0){const s=new Ur(e,t,n),a=this.getSupportedIndividualVertexProperties().textureCoordinates?new Ur(r,i):void 0;this.currentShape.splineVertex(s,a)}curveDetail(e){if(void 0===e)return this.states.curveDetail;this.states.setValue("curveDetail",e)}beginShape(...e){this.currentShape.reset(),this.updateShapeVertexProperties(),this.currentShape.beginShape(...e)}endShape(...e){this.currentShape.endShape(...e),this.drawShape(this.currentShape)}beginContour(e){this.currentShape.beginContour(e)}endContour(e){this.currentShape.endContour(e)}drawShape(e,t){throw new Error("Unimplemented")}vertex(e,t,n=0,r=0,i=0){const s=new Ur(e,t,n),a=this.getSupportedIndividualVertexProperties().textureCoordinates?new Ur(r,i):void 0;this.currentShape.vertex(s,a)}bezier(e,t,n,r,i,s,a,o){const l=this._pInst.bezierOrder();return this._pInst.bezierOrder(l),this._pInst.beginShape(),this._pInst.bezierVertex(e,t),this._pInst.bezierVertex(n,r),this._pInst.bezierVertex(i,s),this._pInst.bezierVertex(a,o),this._pInst.endShape(),this}spline(...e){if(8===e.length){const[t,n,r,i,s,a,o,l]=e;this._pInst.beginShape(),this._pInst.splineVertex(t,n),this._pInst.splineVertex(r,i),this._pInst.splineVertex(s,a),this._pInst.splineVertex(o,l),this._pInst.endShape()}else if(12===e.length){const[t,n,r,i,s,a,o,l,u,c,h,d]=e;this._pInst.beginShape(),this._pInst.splineVertex(t,n,r),this._pInst.splineVertex(i,s,a),this._pInst.splineVertex(o,l,u),this._pInst.splineVertex(c,h,d),this._pInst.endShape()}return this}beginClip(e={}){if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=e.invert}endClip(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}resize(e,t){this.width=e,this.height=t}get(e,t,n,r){const i=this._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=this.width,r=this.height;else if(e*=i,t*=i,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);const a=new ci(n*i,r*i);return a.pixelDensity(i),a.canvas.getContext("2d").drawImage(s,e,t,n*i,r*i,0,0,n*i,r*i),a}scale(e,t){}fill(...e){this.states.setValue("fillSet",!0),this.states.setValue("fillColor",this._pInst.color(...e)),this.updateShapeVertexProperties()}noFill(){this.states.setValue("fillColor",null)}strokeWeight(e){if(void 0===e)return this.states.strokeWeight;this.states.setValue("strokeWeight",e)}stroke(...e){this.states.setValue("strokeSet",!0),this.states.setValue("strokeColor",this._pInst.color(...e)),this.updateShapeVertexProperties()}noStroke(){this.states.setValue("strokeColor",null)}getCommonVertexProperties(){return{}}getSupportedIndividualVertexProperties(){return{textureCoordinates:!1}}updateShapeProperties(e){if(!e||e.bezierOrder||e.splineProperties){const e=this.currentShape;e.bezierOrder(this.states.bezierOrder),e.splineProperty("ends",this.states.splineProperties.ends),e.splineProperty("tightness",this.states.splineProperties.tightness)}}updateShapeVertexProperties(e){const t=this.getCommonVertexProperties();if(!e||Object.keys(e).some(e=>e in t)){const e=this.currentShape;for(const n in t)e[n](t[n])}}_applyDefaults(){return this}},pi="video",fi="audio",mi=class{constructor(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r}},gi=class extends Nr{constructor(e,t){super(e,t);const n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],this.pixels=[],this._pixelsState=this,this._pixelDensity=1,this._modified=!1,this._frameOnCanvas=-1,Object.defineProperty(n,"src",{get(){const e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set(t){for(let e=0;e<n.elt.children.length;e++)n.elt.removeChild(n.elt.children[e]);const r=document.createElement("source");r.src=t,e.appendChild(r),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}}play(){let e;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.readyState>1||this.elt.load(),e=this.elt.play(),e&&e.catch&&e.catch(e=>{"NotAllowedError"===e.name?"undefined"==typeof IS_MINIFIED?p5._friendlyAutoplayError(this.src):console.error(e):console.error("Media play method encountered an unexpected error",e)}),this}stop(){return this.elt.pause(),this.elt.currentTime=0,this}pause(){return this.elt.pause(),this}loop(){return this.elt.setAttribute("loop",!0),this.play(),this}noLoop(){return this.elt.removeAttribute("loop"),this}_setupAutoplayFailDetection(){const t=setTimeout(()=>{"undefined"==typeof IS_MINIFIED?p5._friendlyAutoplayError(this.src):console.error(e)},500);this.elt.addEventListener("play",()=>clearTimeout(t),{passive:!0,once:!0})}autoplay(e){const t=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",e),e&&!t){const e=()=>this._setupAutoplayFailDetection();4===this.elt.readyState?e():this.elt.addEventListener("canplay",e,{passive:!0,once:!0})}return this}volume(e){if(void 0===e)return this.elt.volume;this.elt.volume=e}speed(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e}time(e){return void 0!==e&&(this.elt.currentTime=e),this.elt.currentTime}duration(){return this.elt.duration}_ensureCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));const e=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&e&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}loadPixels(...e){return this._ensureCanvas(),p5.Renderer2D.prototype.loadPixels.apply(this,e)}updatePixels(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),p5.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this}get(...e){return this._ensureCanvas(),p5.Renderer2D.prototype.get.apply(this,e)}_getPixel(...e){return this.loadPixels(),p5.Renderer2D.prototype._getPixel.apply(this,e)}set(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),p5.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))}copy(...e){this._ensureCanvas(),p5.prototype.copy.apply(this,e)}mask(...e){this.loadPixels(),this.setModified(!0),p5.Image.prototype.mask.apply(this,e)}isModified(){return this._modified}setModified(e){this._modified=e}onended(e){return this._onended=e,this}_getAudioContext(){}_getSoundOut(){}connect(e){let t,n;if(this._getAudioContext()&&this._getSoundOut())t=this._getAudioContext(),n=this._getSoundOut().input;else try{t=e.context,n=t.destination}catch(Rr){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)}disconnect(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}showControls(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}hideControls(){this.elt.controls=!1}addCue(e,t,n){const r=this._cueIDCounter++,i=new mi(t,e,r,n);return this._cues.push(i),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r}removeCue(e){for(let t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}clearCues(){this._cues=[],this.elt.ontimeupdate=null}_onTimeUpdate(){const e=this.time();for(let t=0;t<this._cues.length;t++){const n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e}},"undefined"!=typeof p5&&rC(p5,p5.prototype),vi={modeAdjust:iC},"undefined"!=typeof p5&&sC(p5,p5.prototype),"undefined"!=typeof p5&&aC(p5,p5.prototype),"undefined"!=typeof p5&&oC(p5,p5.prototype),"undefined"!=typeof p5&&lC(p5,p5.prototype),"undefined"!=typeof p5&&uC(p5,p5.prototype),yi=m(d({"node_modules/omggif/omggif.js":e=>{function t(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,o=a+1,l=i+1,u=(1<<l)-1,c=0,h=0,d=0,p=e[t++],f=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)h|=e[t++]<<c,c+=8,1===p?p=e[t++]:--p;if(c<l)break;var g=h&u;if(h>>=l,c-=l,g!==s){if(g===a)break;for(var v=g<o?g:m,y=0,b=v;b>s;)b=f[b]>>8,++y;var x=b;if(d+y+(v!==g?1:0)>r)return void console.log("Warning, gif stream longer than expected.");n[d++]=x;var _=d+=y;for(v!==g&&(n[d++]=x),b=v;y--;)b=f[b],n[--_]=255&b,b>>=8;null!==m&&o<4096&&(f[o++]=m<<8|x,o>=u+1&&l<12&&(++l,u=u<<1|1)),m=g}else o=a+1,u=(1<<(l=i+1))-1,m=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),n}try{e.GifWriter=function(e,t,n,r){var i=0,s=void 0===(r=void 0===r?{}:r).loop?null:r.loop,a=void 0===r.palette?null:r.palette;if(t<=0||n<=0||t>65535||n>65535)throw new Error("Width/Height invalid.");function o(e){var t=e.length;if(t<2||t>256||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97;var l=0,u=0;if(null!==a){for(var c=o(a);c>>=1;)++l;if(c=1<<l,--l,void 0!==r.background){if((u=r.background)>=c)throw new Error("Background index out of range.");if(0===u)throw new Error("Background index explicitly passed as 0.")}}if(e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=(null!==a?128:0)|l,e[i++]=u,e[i++]=0,null!==a)for(var h=0,d=a.length;h<d;++h){var p=a[h];e[i++]=p>>16&255,e[i++]=p>>8&255,e[i++]=255&p}if(null!==s){if(s<0||s>65535)throw new Error("Loop count invalid.");e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&s,e[i++]=s>>8&255,e[i++]=0}var f=!1;this.addFrame=function(t,n,r,s,l,u){if(!0===f&&(--i,f=!1),u=void 0===u?{}:u,t<0||n<0||t>65535||n>65535)throw new Error("x/y invalid.");if(r<=0||s<=0||r>65535||s>65535)throw new Error("Width/Height invalid.");if(l.length<r*s)throw new Error("Not enough pixels for the frame size.");var c=!0,h=u.palette;if(null==h&&(c=!1,h=a),null==h)throw new Error("Must supply either a local or global palette.");for(var d=o(h),p=0;d>>=1;)++p;d=1<<p;var m=void 0===u.delay?0:u.delay,g=void 0===u.disposal?0:u.disposal;if(g<0||g>3)throw new Error("Disposal out of range.");var v=!1,y=0;if(void 0!==u.transparent&&null!==u.transparent&&(v=!0,(y=u.transparent)<0||y>=d))throw new Error("Transparent color index.");if((0!==g||v||0!==m)&&(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=g<<2|(!0===v?1:0),e[i++]=255&m,e[i++]=m>>8&255,e[i++]=y,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&s,e[i++]=s>>8&255,e[i++]=!0===c?128|p-1:0,!0===c)for(var b=0,x=h.length;b<x;++b){var _=h[b];e[i++]=_>>16&255,e[i++]=_>>8&255,e[i++]=255&_}return i=function(e,t,n,r){e[t++]=n;var i=t++,s=1<<n,a=s-1,o=s+1,l=o+1,u=n+1,c=0,h=0;function d(n){for(;c>=n;)e[t++]=255&h,h>>=8,c-=8,t===i+256&&(e[i]=255,i=t++)}function p(e){h|=e<<c,c+=u,d(8)}var f=r[0]&a,m={};p(s);for(var g=1,v=r.length;g<v;++g){var y=r[g]&a,b=f<<8|y,x=m[b];if(void 0===x){for(h|=f<<c,c+=u;c>=8;)e[t++]=255&h,h>>=8,c-=8,t===i+256&&(e[i]=255,i=t++);4096===l?(p(s),l=o+1,u=n+1,m={}):(l>=1<<u&&++u,m[b]=l++),f=y}else f=x}return p(f),p(o),d(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0),t}(e,i,p<2?2:p,l),i},this.end=function(){return!1===f&&(e[i++]=59,f=!0),i},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(e){i=e}},e.GifReader=function(e){var n=0;if(71!==e[n++]||73!==e[n++]||70!==e[n++]||56!==e[n++]||56!=(e[n++]+1&253)||97!==e[n++])throw new Error("Invalid GIF 87a/89a header.");var r=e[n++]|e[n++]<<8,i=e[n++]|e[n++]<<8,s=e[n++],a=s>>7,o=1<<1+(7&s);e[n++],e[n++];var l=null,u=null;a&&(l=n,u=o,n+=3*o);var c=!0,h=[],d=0,p=null,f=0,m=null;for(this.width=r,this.height=i;c&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(11!==e[n]||78==e[n+1]&&69==e[n+2]&&84==e[n+3]&&83==e[n+4]&&67==e[n+5]&&65==e[n+6]&&80==e[n+7]&&69==e[n+8]&&50==e[n+9]&&46==e[n+10]&&48==e[n+11]&&3==e[n+12]&&1==e[n+13]&&0==e[n+16])n+=14,m=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((M=e[n++])>=0))throw Error("Invalid block size");if(0===M)break;n+=M}break;case 249:if(4!==e[n++]||0!==e[n+4])throw new Error("Invalid graphics extension block.");var g=e[n++];d=e[n++]|e[n++]<<8,p=e[n++],1&g||(p=null),f=g>>2&7,n++;break;case 254:for(;;){if(!((M=e[n++])>=0))throw Error("Invalid block size");if(0===M)break;n+=M}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var v=e[n++]|e[n++]<<8,y=e[n++]|e[n++]<<8,b=e[n++]|e[n++]<<8,x=e[n++]|e[n++]<<8,_=e[n++],w=_>>6&1,S=1<<1+(7&_),E=l,C=u,A=!1;_>>7&&(A=!0,E=n,C=S,n+=3*S);var T=n;for(n++;;){var M;if(!((M=e[n++])>=0))throw Error("Invalid block size");if(0===M)break;n+=M}h.push({x:v,y:y,width:b,height:x,has_local_palette:A,palette_offset:E,palette_size:C,data_offset:T,data_length:n-T,transparent_index:p,interlaced:!!w,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=h.length)throw new Error("Frame index out of range.");return h[e]},this.decodeAndBlitFrameBGRA=function(n,i){var s=this.frameInfo(n),a=s.width*s.height,o=new Uint8Array(a);t(e,s.data_offset,o,a);var l=s.palette_offset,u=s.transparent_index;null===u&&(u=256);var c=s.width,h=r-c,d=c,p=4*(s.y*r+s.x),f=4*((s.y+s.height)*r+s.x),m=p,g=4*h;!0===s.interlaced&&(g+=4*r*7);for(var v=8,y=0,b=o.length;y<b;++y){var x=o[y];if(0===d&&(d=c,(m+=g)>=f&&(g=4*h+4*r*(v-1),m=p+(c+h)*(v<<1),v>>=1)),x===u)m+=4;else{var _=e[l+3*x],w=e[l+3*x+1],S=e[l+3*x+2];i[m++]=S,i[m++]=w,i[m++]=_,i[m++]=255}--d}},this.decodeAndBlitFrameRGBA=function(n,i){var s=this.frameInfo(n),a=s.width*s.height,o=new Uint8Array(a);t(e,s.data_offset,o,a);var l=s.palette_offset,u=s.transparent_index;null===u&&(u=256);var c=s.width,h=r-c,d=c,p=4*(s.y*r+s.x),f=4*((s.y+s.height)*r+s.x),m=p,g=4*h;!0===s.interlaced&&(g+=4*r*7);for(var v=8,y=0,b=o.length;y<b;++y){var x=o[y];if(0===d&&(d=c,(m+=g)>=f&&(g=4*h+4*r*(v-1),m=p+(c+h)*(v<<1),v>>=1)),x===u)m+=4;else{var _=e[l+3*x],w=e[l+3*x+1],S=e[l+3*x+2];i[m++]=_,i[m++]=w,i[m++]=S,i[m++]=255}--d}}}}catch(Rr){}}})()),xi=m((bi=d({"node_modules/gifenc/dist/gifenc.js":e=>{var t=Object.defineProperty;t(e,"__esModule",{value:!0}),((e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})})(e,{GIFEncoder:()=>A,applyPalette:()=>y,default:()=>N,nearestColor:()=>C,nearestColorIndex:()=>S,nearestColorIndexWithDistance:()=>E,prequantize:()=>v,quantize:()=>p,snapColorsToPalette:()=>_});var n={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function r(e=256){let t=0,n=new Uint8Array(e);return{get buffer(){return n.buffer},reset(){t=0},bytesView:()=>n.subarray(0,t),bytes:()=>n.slice(0,t),writeByte(e){r(t+1),n[t]=e,t++},writeBytes(e,i=0,s=e.length){r(t+s);for(let r=0;r<s;r++)n[t++]=e[r+i]},writeBytesView(e,i=0,s=e.byteLength){r(t+s),n.set(e.subarray(i,i+s),t),t+=s}};function r(e){var r=n.length;if(r>=e)return;e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));const i=n;n=new Uint8Array(e),t>0&&n.set(i.subarray(0,t),0)}}var i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],s=function(e,t,n,s,a=r(512),o=new Uint8Array(256),l=new Int32Array(5003),u=new Int32Array(5003)){const c=l.length,h=Math.max(2,s);o.fill(0),u.fill(0),l.fill(-1);let d=0,p=0;const f=h+1,m=f;let g=!1,v=m,y=(1<<v)-1;const b=1<<f-1,x=b+1;let _=b+2,w=0,S=n[0],E=0;for(let r=c;r<65536;r*=2)++E;E=8-E,a.writeByte(h),A(b);const C=n.length;for(let r=1;r<C;r++)e:{const e=n[r],t=(e<<12)+S;let i=e<<E^S;if(l[i]===t){S=u[i];break e}const s=0===i?1:c-i;for(;l[i]>=0;)if(i-=s,i<0&&(i+=c),l[i]===t){S=u[i];break e}A(S),S=e,_<4096?(u[i]=_++,l[i]=t):(l.fill(-1),_=b+2,g=!0,A(b))}return A(S),A(x),a.writeByte(0),a.bytesView();function A(e){for(d&=i[p],p>0?d|=e<<p:d=e,p+=v;p>=8;)o[w++]=255&d,w>=254&&(a.writeByte(w),a.writeBytesView(o,0,w),w=0),d>>=8,p-=8;if((_>y||g)&&(g?(v=m,y=(1<<v)-1,g=!1):(++v,y=12===v?1<<v:(1<<v)-1)),e==x){for(;p>0;)o[w++]=255&d,w>=254&&(a.writeByte(w),a.writeBytesView(o,0,w),w=0),d>>=8,p-=8;w>0&&(a.writeByte(w),a.writeBytesView(o,0,w),w=0)}}};function a(e,t,n){return e<<8&63488|t<<2&992|n>>3}function o(e,t,n,r){return e>>4|240&t|(240&n)<<4|(240&r)<<8}function l(e,t,n){return e>>4<<8|240&t|n>>4}function u(e,t,n){return e<t?t:e>n?n:e}function c(e){return e*e}function h(e,t,n){var r=0,i=1e100;const s=e[t],a=s.cnt,o=s.ac,l=s.rc,u=s.gc,h=s.bc;for(var d=s.fw;0!=d;d=e[d].fw){const t=e[d],s=t.cnt,f=a*s/(a+s);if(!(f>=i)){var p=0;n&&(p+=f*c(t.ac-o))>=i||(p+=f*c(t.rc-l))>=i||(p+=f*c(t.gc-u))>=i||(p+=f*c(t.bc-h))>=i||(i=p,r=d)}}s.err=i,s.nn=r}function d(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function p(e,t,n={}){const{format:r="rgb565",clearAlpha:i=!0,clearAlphaColor:s=0,clearAlphaThreshold:p=0,oneBitAlpha:m=!1}=n;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const g=new Uint32Array(e.buffer);let v=!1!==n.useSqrt;const y="rgba4444"===r,b=function(e,t){const n=new Array("rgb444"===t?4096:65536),r=e.length;if("rgba4444"===t)for(let i=0;i<r;++i){const t=e[i],r=t>>24&255,s=t>>16&255,a=t>>8&255,l=255&t,u=o(l,a,s,r);let c=u in n?n[u]:n[u]=d();c.rc+=l,c.gc+=a,c.bc+=s,c.ac+=r,c.cnt++}else if("rgb444"===t)for(let i=0;i<r;++i){const t=e[i],r=t>>16&255,s=t>>8&255,a=255&t,o=l(a,s,r);let u=o in n?n[o]:n[o]=d();u.rc+=a,u.gc+=s,u.bc+=r,u.cnt++}else for(let i=0;i<r;++i){const t=e[i],r=t>>16&255,s=t>>8&255,o=255&t,l=a(o,s,r);let u=l in n?n[l]:n[l]=d();u.rc+=o,u.gc+=s,u.bc+=r,u.cnt++}return n}(g,r),x=b.length,_=x-1,w=new Uint32Array(x+1);for(var S=0,E=0;E<x;++E){const e=b[E];if(null!=e){var C=1/e.cnt;y&&(e.ac*=C),e.rc*=C,e.gc*=C,e.bc*=C,b[S++]=e}}var A,T,M;for(c(t)/S<.022&&(v=!1),E=0;E<S-1;++E)b[E].fw=E+1,b[E+1].bk=E,v&&(b[E].cnt=Math.sqrt(b[E].cnt));for(v&&(b[E].cnt=Math.sqrt(b[E].cnt)),E=0;E<S;++E){h(b,E,!1);var D=b[E].err;for(T=++w[0];T>1&&!(b[A=w[M=T>>1]].err<=D);T=M)w[T]=A;w[T]=E}var k=S-t;for(E=0;E<k;){for(var N;;){var F=w[1];if((N=b[F]).tm>=N.mtm&&b[N.nn].mtm<=N.tm)break;for(N.mtm==_?F=w[1]=w[w[0]--]:(h(b,F,!1),N.tm=E),D=b[F].err,T=1;(M=T+T)<=w[0]&&(M<w[0]&&b[w[M]].err>b[w[M+1]].err&&M++,!(D<=b[A=w[M]].err));T=M)w[T]=A;w[T]=F}var I=b[N.nn],R=N.cnt,L=I.cnt;C=1/(R+L),y&&(N.ac=C*(R*N.ac+L*I.ac)),N.rc=C*(R*N.rc+L*I.rc),N.gc=C*(R*N.gc+L*I.gc),N.bc=C*(R*N.bc+L*I.bc),N.cnt+=I.cnt,N.mtm=++E,b[I.bk].fw=I.fw,b[I.fw].bk=I.bk,I.mtm=_}let P=[];var O=0;for(E=0;;++O){let e=u(Math.round(b[E].rc),0,255),t=u(Math.round(b[E].gc),0,255),n=u(Math.round(b[E].bc),0,255),r=255;y&&(r=u(Math.round(b[E].ac),0,255),m&&(r=r<=("number"==typeof m?m:127)?0:255),i&&r<=p&&(e=t=n=s,r=0));const a=y?[e,t,n,r]:[e,t,n];if(f(P,a)||P.push(a),0==(E=b[E].fw))break}return P}function f(e,t){for(let n=0;n<e.length;n++){const r=e[n];let i=r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2],s=!(r.length>=4&&t.length>=4)||r[3]===t[3];if(i&&s)return!0}return!1}function m(e,t){var n,r=0;for(n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return r}function g(e,t){return t>1?Math.round(e/t)*t:e}function v(e,{roundRGB:t=5,roundAlpha:n=10,oneBitAlpha:r=null}={}){const i=new Uint32Array(e.buffer);for(let s=0;s<i.length;s++){const e=i[s];let a=e>>24&255,o=e>>16&255,l=e>>8&255,u=255&e;a=g(a,n),r&&(a=a<=("number"==typeof r?r:127)?0:255),u=g(u,t),l=g(l,t),o=g(o,t),i[s]=a<<24|o<<16|l<<8|u}}function y(e,t,n="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");const r=new Uint32Array(e.buffer),i=r.length,s="rgb444"===n?4096:65536,u=new Uint8Array(i),c=new Array(s);if("rgba4444"===n)for(let a=0;a<i;a++){const e=r[a],n=e>>24&255,i=e>>16&255,s=e>>8&255,l=255&e,h=o(l,s,i,n);u[a]=h in c?c[h]:c[h]=b(l,s,i,n,t)}else{const e="rgb444"===n?l:a;for(let n=0;n<i;n++){const i=r[n],s=i>>16&255,a=i>>8&255,o=255&i,l=e(o,a,s);u[n]=l in c?c[l]:c[l]=x(o,a,s,t)}}return u}function b(e,t,n,r,i){let s=0,a=1e100;for(let o=0;o<i.length;o++){const l=i[o];let u=w(l[3]-r);u>a||(u+=w(l[0]-e),u>a||(u+=w(l[1]-t),u>a||(u+=w(l[2]-n),u>a||(a=u,s=o))))}return s}function x(e,t,n,r){let i=0,s=1e100;for(let a=0;a<r.length;a++){const o=r[a];let l=w(o[0]-e);l>s||(l+=w(o[1]-t),l>s||(l+=w(o[2]-n),l>s||(s=l,i=a)))}return i}function _(e,t,n=5){if(!e.length||!t.length)return;const r=e.map(e=>e.slice(0,3)),i=n*n,s=e[0].length;for(let a=0;a<t.length;a++){let n=t[a];n=n.length<s?[n[0],n[1],n[2],255]:n.length>s?n.slice(0,3):n.slice();const o=E(r,n.slice(0,3),m),l=o[0],u=o[1];u>0&&u<=i&&(e[l]=n)}}function w(e){return e*e}function S(e,t,n=m){let r=1/0,i=-1;for(let s=0;s<e.length;s++){const a=n(t,e[s]);a<r&&(r=a,i=s)}return i}function E(e,t,n=m){let r=1/0,i=-1;for(let s=0;s<e.length;s++){const a=n(t,e[s]);a<r&&(r=a,i=s)}return[i,r]}function C(e,t,n=m){return e[S(e,t,n)]}function A(e={}){const{initialCapacity:t=4096,auto:i=!0}=e,a=r(t),o=new Uint8Array(256),l=new Int32Array(5003),u=new Int32Array(5003);let c=!1;return{reset(){a.reset(),c=!1},finish(){a.writeByte(n.trailer)},bytes:()=>a.bytes(),bytesView:()=>a.bytesView(),get buffer(){return a.buffer},get stream(){return a},writeHeader:h,writeFrame(e,t,n,r={}){const{transparent:d=!1,transparentIndex:p=0,delay:f=0,palette:m=null,repeat:g=0,colorDepth:v=8,dispose:y=-1}=r;let b=!1;if(i?c||(b=!0,h(),c=!0):b=Boolean(r.first),t=Math.max(0,Math.floor(t)),n=Math.max(0,Math.floor(n)),b){if(!m)throw new Error("First frame must include a { palette } option");!function(e,t,n,r,i=8){const s=k(r.length)-1,a=i-1<<4|128|s,o=0,l=0;M(e,t),M(e,n),e.writeBytes([a,o,l])}(a,t,n,m,v),T(a,m),g>=0&&function(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),D(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),M(e,t),e.writeByte(0)}(a,g)}const x=Math.round(f/10);!function(e,t,n,r,i){var s,a;e.writeByte(33),e.writeByte(249),e.writeByte(4),i<0&&(i=0,r=!1),r?(s=1,a=2):(s=0,a=0),t>=0&&(a=7&t),a<<=2,e.writeByte(0|a|s),M(e,n),e.writeByte(i||0),e.writeByte(0)}(a,y,x,d,p);const _=Boolean(m)&&!b;!function(e,t,n,r){if(e.writeByte(44),M(e,0),M(e,0),M(e,t),M(e,n),r){const t=k(r.length)-1;e.writeByte(128|t)}else e.writeByte(0)}(a,t,n,_?m:null),_&&T(a,m),function(e,t,n,r,i=8,a,o,l){s(n,r,t,i,e,a,o,l)}(a,e,t,n,v,o,l,u)}};function h(){D(a,"GIF89a")}}function T(e,t){const n=1<<k(t.length);for(let r=0;r<n;r++){let n=[0,0,0];r<t.length&&(n=t[r]),e.writeByte(n[0]),e.writeByte(n[1]),e.writeByte(n[2])}}function M(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function D(e,t){for(var n=0;n<t.length;n++)e.writeByte(t.charCodeAt(n))}function k(e){return Math.max(Math.ceil(Math.log2(e)),1)}var N=A}}))()),"undefined"!=typeof p5&&pC(p5,p5.prototype),"undefined"!=typeof Float32Array&&Float32Array,_i=class e{#m=null;constructor(...t){if(this.constructor===e)throw new Error("Class is of abstract type and can't be instantiated")}},wi=e=>{if(Math.sqrt(e.length)%1!=0)throw new Error("Array length must be a perfect square.");return!0},Si=Array,Ei=e=>Array.isArray(e),"undefined"!=typeof Float32Array&&(Si=Float32Array,Ei=e=>Array.isArray(e)||e instanceof Float32Array),Ci=class e extends _i{matrix;#g;constructor(...e){return super(...e),Ei(e[0])&&wi(e[0])?(this.#g=Math.sqrt(e[0].length),this.matrix=Si.from(e[0])):"number"==typeof e[0]&&(this.#g=Number(e[0]),this.matrix=this.#v(e[0])),this}get mat3(){return 3===this.#g?this.matrix:void 0}get mat4(){return 4===this.#g?this.matrix:void 0}add(e){if(this.matrix.length!==e.matrix.length)throw new Error("Matrices must be of the same dimension to add.");for(let t=0;t<this.matrix.length;t++)this.matrix[t]+=e.matrix[t];return this}setElement(e,t){return e>=0&&e<this.matrix.length&&(this.matrix[e]=t),this}reset(){return this.matrix=this.#v(this.#g),this}set(t){let n=Si.from([...arguments]);return t instanceof e?n=Si.from(t.matrix):Ei(t)&&(n=Si.from(t)),n.length!==this.matrix.length?(p5._friendlyError(`Expected same dimensions values but received different ${n.length}.`,"p5.Matrix.set"),this):(this.matrix=n,this)}get(){return new e(this.matrix)}copy(){return new e(this.matrix)}clone(){return this.copy()}diagonal(){const e=[];for(let t=0;t<this.#g;t++)e.push(this.matrix[t*(this.#g+1)]);return e}row(e){const t=[];for(let n=0;n<this.#g;n++)t.push(this.matrix[n*this.#g+e]);return new Ur(...t)}column(e){const t=[];for(let n=0;n<this.#g;n++)t.push(this.matrix[e*this.#g+n]);return new Ur(...t)}transpose(e){return 4===this.#g?this.#y(e):3===this.#g?this.#b(e):this.#x(e)}mult(t){let n;return t===this||t===this.matrix?n=this.copy().matrix:t instanceof e?n=t.matrix:Ei(t)&&wi(t)?n=t:wi(Array.from(arguments))&&(n=Array.from(arguments)),4===this.#g&&16===n.length?this.#_(n):3===this.#g&&9===n.length?this.#w(n):this.#S(n)}multiplyVec(e,t){void 0===t&&(t=e.copy());for(let n=0;n<this.#g;n++)t.values[n]=this.row(n).dot(e);return t}invert(e){if(4===this.#g)return this.#E(e);if(3===this.#g)return this.#C(e);throw new Error("Invert is not implemented for N>4 at the moment, we are working on it")}createSubMatrix3x3(){if(4===this.#g){const t=new e(3);return t.mat3[0]=this.matrix[0],t.mat3[1]=this.matrix[1],t.mat3[2]=this.matrix[2],t.mat3[3]=this.matrix[4],t.mat3[4]=this.matrix[5],t.mat3[5]=this.matrix[6],t.mat3[6]=this.matrix[8],t.mat3[7]=this.matrix[9],t.mat3[8]=this.matrix[10],t}throw new Error("Matrix dimension must be 4 to create a 3x3 submatrix.")}inverseTranspose4x4({mat4:e}){if(3!==this.#g)throw new Error("This function only works with 3Ã—3 matrices.");this.matrix[0]=e[0],this.matrix[1]=e[1],this.matrix[2]=e[2],this.matrix[3]=e[4],this.matrix[4]=e[5],this.matrix[5]=e[6],this.matrix[6]=e[8],this.matrix[7]=e[9],this.matrix[8]=e[10];const t=this.invert();if(t)t.transpose(this.matrix);else for(let n=0;n<9;n++)this.matrix[n]=0;return this}apply(t){let n;if(t===this||t===this.matrix)n=this.copy().matrix;else if(t instanceof e)n=t.matrix;else if(Ei(t))n=t;else{if(16!==arguments.length)return;n=arguments}const r=this.matrix,i=r[0],s=r[4],a=r[8],o=r[12];r[0]=n[0]*i+n[1]*s+n[2]*a+n[3]*o,r[4]=n[4]*i+n[5]*s+n[6]*a+n[7]*o,r[8]=n[8]*i+n[9]*s+n[10]*a+n[11]*o,r[12]=n[12]*i+n[13]*s+n[14]*a+n[15]*o;const l=r[1],u=r[5],c=r[9],h=r[13];r[1]=n[0]*l+n[1]*u+n[2]*c+n[3]*h,r[5]=n[4]*l+n[5]*u+n[6]*c+n[7]*h,r[9]=n[8]*l+n[9]*u+n[10]*c+n[11]*h,r[13]=n[12]*l+n[13]*u+n[14]*c+n[15]*h;const d=r[2],p=r[6],f=r[10],m=r[14];r[2]=n[0]*d+n[1]*p+n[2]*f+n[3]*m,r[6]=n[4]*d+n[5]*p+n[6]*f+n[7]*m,r[10]=n[8]*d+n[9]*p+n[10]*f+n[11]*m,r[14]=n[12]*d+n[13]*p+n[14]*f+n[15]*m;const g=r[3],v=r[7],y=r[11],b=r[15];return r[3]=n[0]*g+n[1]*v+n[2]*y+n[3]*b,r[7]=n[4]*g+n[5]*v+n[6]*y+n[7]*b,r[11]=n[8]*g+n[9]*v+n[10]*y+n[11]*b,r[15]=n[12]*g+n[13]*v+n[14]*y+n[15]*b,this}scale(e,t,n){return e instanceof Ur?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.matrix[0]*=e,this.matrix[1]*=e,this.matrix[2]*=e,this.matrix[3]*=e,this.matrix[4]*=t,this.matrix[5]*=t,this.matrix[6]*=t,this.matrix[7]*=t,this.matrix[8]*=n,this.matrix[9]*=n,this.matrix[10]*=n,this.matrix[11]*=n,this}rotate4x4(e,t,n,r){t instanceof Ur?(n=t.y,r=t.z,t=t.x):t instanceof Array&&(n=t[1],r=t[2],t=t[0]);const i=Math.sqrt(t*t+n*n+r*r);t*=1/i,n*=1/i,r*=1/i;const s=this.matrix[0],a=this.matrix[1],o=this.matrix[2],l=this.matrix[3],u=this.matrix[4],c=this.matrix[5],h=this.matrix[6],d=this.matrix[7],p=this.matrix[8],f=this.matrix[9],m=this.matrix[10],g=this.matrix[11],v=Math.sin(e),y=Math.cos(e),b=1-y,x=t*t*b+y,_=n*t*b+r*v,w=r*t*b-n*v,S=t*n*b-r*v,E=n*n*b+y,C=r*n*b+t*v,A=t*r*b+n*v,T=n*r*b-t*v,M=r*r*b+y;return this.matrix[0]=s*x+u*_+p*w,this.matrix[1]=a*x+c*_+f*w,this.matrix[2]=o*x+h*_+m*w,this.matrix[3]=l*x+d*_+g*w,this.matrix[4]=s*S+u*E+p*C,this.matrix[5]=a*S+c*E+f*C,this.matrix[6]=o*S+h*E+m*C,this.matrix[7]=l*S+d*E+g*C,this.matrix[8]=s*A+u*T+p*M,this.matrix[9]=a*A+c*T+f*M,this.matrix[10]=o*A+h*T+m*M,this.matrix[11]=l*A+d*T+g*M,this}translate(e){const t=e[0],n=e[1],r=e[2]||0;return this.matrix[12]+=this.matrix[0]*t+this.matrix[4]*n+this.matrix[8]*r,this.matrix[13]+=this.matrix[1]*t+this.matrix[5]*n+this.matrix[9]*r,this.matrix[14]+=this.matrix[2]*t+this.matrix[6]*n+this.matrix[10]*r,this.matrix[15]+=this.matrix[3]*t+this.matrix[7]*n+this.matrix[11]*r,this}rotateX(e){this.rotate4x4(e,1,0,0)}rotateY(e){this.rotate4x4(e,0,1,0)}rotateZ(e){this.rotate4x4(e,0,0,1)}perspective(e,t,n,r){const i=1/Math.tan(e/2),s=1/(n-r);return this.matrix[0]=i/t,this.matrix[1]=0,this.matrix[2]=0,this.matrix[3]=0,this.matrix[4]=0,this.matrix[5]=i,this.matrix[6]=0,this.matrix[7]=0,this.matrix[8]=0,this.matrix[9]=0,this.matrix[10]=(r+n)*s,this.matrix[11]=-1,this.matrix[12]=0,this.matrix[13]=0,this.matrix[14]=2*r*n*s,this.matrix[15]=0,this}ortho(e,t,n,r,i,s){const a=1/(e-t),o=1/(n-r),l=1/(i-s);return this.matrix[0]=-2*a,this.matrix[1]=0,this.matrix[2]=0,this.matrix[3]=0,this.matrix[4]=0,this.matrix[5]=-2*o,this.matrix[6]=0,this.matrix[7]=0,this.matrix[8]=0,this.matrix[9]=0,this.matrix[10]=2*l,this.matrix[11]=0,this.matrix[12]=(e+t)*a,this.matrix[13]=(r+n)*o,this.matrix[14]=(s+i)*l,this.matrix[15]=1,this}multiplyVec4(e,t,n,r){const i=new Array(4),s=this.matrix;return i[0]=s[0]*e+s[4]*t+s[8]*n+s[12]*r,i[1]=s[1]*e+s[5]*t+s[9]*n+s[13]*r,i[2]=s[2]*e+s[6]*t+s[10]*n+s[14]*r,i[3]=s[3]*e+s[7]*t+s[11]*n+s[15]*r,i}multiplyPoint({x:e,y:t,z:n}){const r=this.multiplyVec4(e,t,n,1);return new Ur(r[0],r[1],r[2])}multiplyAndNormalizePoint({x:e,y:t,z:n}){const r=this.multiplyVec4(e,t,n,1);return r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],new Ur(r[0],r[1],r[2])}multiplyDirection({x:e,y:t,z:n}){const r=this.multiplyVec4(e,t,n,0);return new Ur(r[0],r[1],r[2])}multiplyVec3(e,t){return void 0===t&&(t=e.copy()),t.x=this.row(0).dot(e),t.y=this.row(1).dot(e),t.z=this.row(2).dot(e),t}#v(e){if(3===e)return new Si([1,0,0,0,1,0,0,0,1]);if(4===e)return new Si([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);const t=new Si(e*e).fill(0);for(let n=0;n<e;n++)t[n*e+n]=1;return t}#_(e){let t=this.matrix[0],n=this.matrix[1],r=this.matrix[2],i=this.matrix[3];return this.matrix[0]=t*e[0]+n*e[4]+r*e[8]+i*e[12],this.matrix[1]=t*e[1]+n*e[5]+r*e[9]+i*e[13],this.matrix[2]=t*e[2]+n*e[6]+r*e[10]+i*e[14],this.matrix[3]=t*e[3]+n*e[7]+r*e[11]+i*e[15],t=this.matrix[4],n=this.matrix[5],r=this.matrix[6],i=this.matrix[7],this.matrix[4]=t*e[0]+n*e[4]+r*e[8]+i*e[12],this.matrix[5]=t*e[1]+n*e[5]+r*e[9]+i*e[13],this.matrix[6]=t*e[2]+n*e[6]+r*e[10]+i*e[14],this.matrix[7]=t*e[3]+n*e[7]+r*e[11]+i*e[15],t=this.matrix[8],n=this.matrix[9],r=this.matrix[10],i=this.matrix[11],this.matrix[8]=t*e[0]+n*e[4]+r*e[8]+i*e[12],this.matrix[9]=t*e[1]+n*e[5]+r*e[9]+i*e[13],this.matrix[10]=t*e[2]+n*e[6]+r*e[10]+i*e[14],this.matrix[11]=t*e[3]+n*e[7]+r*e[11]+i*e[15],t=this.matrix[12],n=this.matrix[13],r=this.matrix[14],i=this.matrix[15],this.matrix[12]=t*e[0]+n*e[4]+r*e[8]+i*e[12],this.matrix[13]=t*e[1]+n*e[5]+r*e[9]+i*e[13],this.matrix[14]=t*e[2]+n*e[6]+r*e[10]+i*e[14],this.matrix[15]=t*e[3]+n*e[7]+r*e[11]+i*e[15],this}#S(e){if(e.length!==this.matrix.length)throw new Error("Matrices must be of the same dimension to multiply.");const t=new Si(this.matrix.length).fill(0);for(let n=0;n<this.#g;n++)for(let r=0;r<this.#g;r++)for(let i=0;i<this.#g;i++)t[n*this.#g+r]+=this.matrix[n*this.#g+i]*e[i*this.#g+r];return this.matrix=t,this}#w(e){let t=this.mat3[0],n=this.mat3[1],r=this.mat3[2];return this.mat3[0]=t*e[0]+n*e[3]+r*e[6],this.mat3[1]=t*e[1]+n*e[4]+r*e[7],this.mat3[2]=t*e[2]+n*e[5]+r*e[8],t=this.mat3[3],n=this.mat3[4],r=this.mat3[5],this.mat3[3]=t*e[0]+n*e[3]+r*e[6],this.mat3[4]=t*e[1]+n*e[4]+r*e[7],this.mat3[5]=t*e[2]+n*e[5]+r*e[8],t=this.mat3[6],n=this.mat3[7],r=this.mat3[8],this.mat3[6]=t*e[0]+n*e[3]+r*e[6],this.mat3[7]=t*e[1]+n*e[4]+r*e[7],this.mat3[8]=t*e[2]+n*e[5]+r*e[8],this}#x(){const e=this.#g;for(let t=0;t<e;t++)for(let n=0;n<e;n++)this.matrix[t*e+n]=this.matrix[n*e+t];return this}#y(t){let n,r,i,s,a,o;return console.log("====> 4x4"),t instanceof e?(n=t.matrix[1],r=t.matrix[2],i=t.matrix[3],s=t.matrix[6],a=t.matrix[7],o=t.matrix[11],this.matrix[0]=t.matrix[0],this.matrix[1]=t.matrix[4],this.matrix[2]=t.matrix[8],this.matrix[3]=t.matrix[12],this.matrix[4]=n,this.matrix[5]=t.matrix[5],this.matrix[6]=t.matrix[9],this.matrix[7]=t.matrix[13],this.matrix[8]=r,this.matrix[9]=s,this.matrix[10]=t.matrix[10],this.matrix[11]=t.matrix[14],this.matrix[12]=i,this.matrix[13]=a,this.matrix[14]=o,this.matrix[15]=t.matrix[15]):Ei(t)&&(n=t[1],r=t[2],i=t[3],s=t[6],a=t[7],o=t[11],this.matrix[0]=t[0],this.matrix[1]=t[4],this.matrix[2]=t[8],this.matrix[3]=t[12],this.matrix[4]=n,this.matrix[5]=t[5],this.matrix[6]=t[9],this.matrix[7]=t[13],this.matrix[8]=r,this.matrix[9]=s,this.matrix[10]=t[10],this.matrix[11]=t[14],this.matrix[12]=i,this.matrix[13]=a,this.matrix[14]=o,this.matrix[15]=t[15]),this}#b(e){void 0===e&&(e=this.mat3);const t=e[1],n=e[2],r=e[5];return this.mat3[0]=e[0],this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[4]=e[4],this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this.mat3[8]=e[8],this}#E(t){let n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v;t instanceof e?(n=t.matrix[0],r=t.matrix[1],i=t.matrix[2],s=t.matrix[3],a=t.matrix[4],o=t.matrix[5],l=t.matrix[6],u=t.matrix[7],c=t.matrix[8],h=t.matrix[9],d=t.matrix[10],p=t.matrix[11],f=t.matrix[12],m=t.matrix[13],g=t.matrix[14],v=t.matrix[15]):Ei(t)&&(n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15]);const y=n*o-r*a,b=n*l-i*a,x=n*u-s*a,_=r*l-i*o,w=r*u-s*o,S=i*u-s*l,E=c*m-h*f,C=c*g-d*f,A=c*v-p*f,T=h*g-d*m,M=h*v-p*m,D=d*v-p*g;let k=y*D-b*M+x*T+_*A-w*C+S*E;return k?(k=1/k,this.matrix[0]=(o*D-l*M+u*T)*k,this.matrix[1]=(i*M-r*D-s*T)*k,this.matrix[2]=(m*S-g*w+v*_)*k,this.matrix[3]=(d*w-h*S-p*_)*k,this.matrix[4]=(l*A-a*D-u*C)*k,this.matrix[5]=(n*D-i*A+s*C)*k,this.matrix[6]=(g*x-f*S-v*b)*k,this.matrix[7]=(c*S-d*x+p*b)*k,this.matrix[8]=(a*M-o*A+u*E)*k,this.matrix[9]=(r*A-n*M-s*E)*k,this.matrix[10]=(f*w-m*x+v*y)*k,this.matrix[11]=(h*x-c*w-p*y)*k,this.matrix[12]=(o*C-a*T-l*E)*k,this.matrix[13]=(n*T-r*C+i*E)*k,this.matrix[14]=(m*b-f*_-g*y)*k,this.matrix[15]=(c*_-h*b+d*y)*k,this):null}#C(){const e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],i=this.mat3[4],s=this.mat3[5],a=this.mat3[6],o=this.mat3[7],l=this.mat3[8],u=l*i-s*o,c=-l*r+s*a,h=o*r-i*a;let d=e*u+t*c+n*h;return d?(d=1/d,this.mat3[0]=u*d,this.mat3[1]=(-l*t+n*o)*d,this.mat3[2]=(s*t-n*i)*d,this.mat3[3]=c*d,this.mat3[4]=(l*e-n*a)*d,this.mat3[5]=(-s*e+n*r)*d,this.mat3[6]=h*d,this.mat3[7]=(-o*e+t*a)*d,this.mat3[8]=(i*e-t*r)*d,this):null}#A(){if(4!==this.#g)throw new Error("Determinant is only implemented for 4x4 matrices. We are working on it.");const e=this.matrix[0]*this.matrix[5]-this.matrix[1]*this.matrix[4],t=this.matrix[0]*this.matrix[6]-this.matrix[2]*this.matrix[4],n=this.matrix[0]*this.matrix[7]-this.matrix[3]*this.matrix[4],r=this.matrix[1]*this.matrix[6]-this.matrix[2]*this.matrix[5],i=this.matrix[1]*this.matrix[7]-this.matrix[3]*this.matrix[5],s=this.matrix[2]*this.matrix[7]-this.matrix[3]*this.matrix[6],a=this.matrix[8]*this.matrix[13]-this.matrix[9]*this.matrix[12],o=this.matrix[8]*this.matrix[14]-this.matrix[10]*this.matrix[12],l=this.matrix[8]*this.matrix[15]-this.matrix[11]*this.matrix[12],u=this.matrix[9]*this.matrix[14]-this.matrix[10]*this.matrix[13],c=this.matrix[9]*this.matrix[15]-this.matrix[11]*this.matrix[13];return e*(this.matrix[10]*this.matrix[15]-this.matrix[11]*this.matrix[14])-t*c+n*u+r*l-i*o+s*a}},"undefined"!=typeof p5&&fC(p5,p5.prototype),Ai=class{constructor(e=128){this.length=0,this.data=new Float32Array(e),this.initialLength=e}dataArray(){return this.subArray(0,this.length)}clear(){this.length=0}rescale(){if(this.length<this.data.length/2){const e=1<<Math.ceil(Math.log2(this.length)),t=new Float32Array(e);t.set(this.data.subarray(0,this.length),0),this.data=t}}reset(){this.clear(),this.data=new Float32Array(this.initialLength)}push(...e){this.ensureLength(this.length+e.length),this.data.set(e,this.length),this.length+=e.length}slice(e,t){return this.data.slice(e,Math.min(t,this.length))}subArray(e,t){return this.data.subarray(e,Math.min(t,this.length))}ensureLength(e){for(;this.data.length<e;){const e=new Float32Array(2*this.data.length);e.set(this.data,0),this.data=e}}},"undefined"!=typeof p5&&mC(p5,p5.prototype),li(),Ti=class e{constructor(t,n,r,i){this.renderer=i,this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new Ai,this.lineTangentsIn=new Ai,this.lineTangentsOut=new Ai,this.lineSides=new Ai,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.userVertexProperties={},this.lineVertexColors=new Ai,this.detailX=void 0!==t?t:1,this.detailY=void 0!==n?n:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.gid=`_p5_Geometry_${e.nextId}`,e.nextId++,r instanceof Function&&r.call(this)}calculateBoundingBox(){if(this.boundingBoxCache)return this.boundingBoxCache;let e=new Ur(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t=new Ur(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(let i=0;i<this.vertices.length;i++){let n=this.vertices[i];e.x=Math.min(e.x,n.x),e.y=Math.min(e.y,n.y),e.z=Math.min(e.z,n.z),t.x=Math.max(t.x,n.x),t.y=Math.max(t.y,n.y),t.z=Math.max(t.z,n.z)}let n=new Ur(t.x-e.x,t.y-e.y,t.z-e.z),r=new Ur((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2);return this.boundingBoxCache={min:e,max:t,size:n,offset:r},this.boundingBoxCache}reset(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0;for(const e in this.userVertexProperties)this.userVertexProperties[e].delete();this.userVertexProperties={},this.dirtyFlags={}}hasFillTransparency(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(let e=0;e<this.vertexColors.length;e+=4)if(this.vertexColors[e+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}hasStrokeTransparency(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(let e=0;e<this.lineVertexColors.length;e+=4)if(this.lineVertexColors[e+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}clearColors(){return this.vertexColors=[],this}saveObj(e="model.obj"){let t="";if(this.vertices.forEach(e=>{t+=`v ${e.x} ${e.y} ${e.z}\n`}),this.uvs&&this.uvs.length>0)for(let n=0;n<this.uvs.length;n+=2)t+=`vt ${this.uvs[n]} ${this.uvs[n+1]}\n`;this.vertexNormals&&this.vertexNormals.length>0&&this.vertexNormals.forEach(e=>{t+=`vn ${e.x} ${e.y} ${e.z}\n`}),this.faces.forEach(e=>{let n="f";e.forEach(e=>{n+=" ",n+=e+1,(this.vertexNormals.length>0||this.uvs.length>0)&&(n+="/",this.uvs.length>0&&(n+=e+1),n+="/",this.vertexNormals.length>0&&(n+=e+1))}),t+=n+"\n"}),JE(new Blob([t],{type:"text/plain"}),e,"obj")}saveStl(e="model.stl",{binary:t=!1}={}){let n,r=e.substring(0,e.lastIndexOf(".")),i=[];for(let s of this.faces){const e=Ur.sub(this.vertices[s[1]],this.vertices[s[0]]),t=Ur.sub(this.vertices[s[2]],this.vertices[s[0]]),n=e.y*t.z-e.z*t.y,r=e.z*t.x-e.x*t.z,a=e.x*t.y-e.y*t.x;i.push(new Ur(n,r,a).normalize())}if(t){let e=80;const t=2*this.faces.length+3*this.faces.length*4*4+80+4,r=new ArrayBuffer(t);n=new DataView(r),n.setUint32(e,this.faces.length,!0),e+=4;for(const[s,a]of Object.entries(this.faces)){const t=i[s];n.setFloat32(e,t.x,!0),e+=4,n.setFloat32(e,t.y,!0),e+=4,n.setFloat32(e,t.z,!0),e+=4;for(let r of a){const t=this.vertices[r];n.setFloat32(e,t.x,!0),e+=4,n.setFloat32(e,t.y,!0),e+=4,n.setFloat32(e,t.z,!0),e+=4}n.setUint16(e,0,!0),e+=2}}else{n="solid "+r+"\n";for(const[e,t]of Object.entries(this.faces)){const r=i[e];n+=" facet norm "+r.x+" "+r.y+" "+r.z+"\n",n+="  outer loop\n";for(let e of t){const t=this.vertices[e];n+="   vertex "+t.x+" "+t.y+" "+t.z+"\n"}n+="  endloop\n",n+=" endfacet\n"}n+="endsolid "+r+"\n"}JE(new Blob([n],{type:"text/plain"}),e,"stl")}flipU(){this.uvs=this.uvs.flat().map((e,t)=>t%2==0?1-e:e)}flipV(){this.uvs=this.uvs.flat().map((e,t)=>t%2==0?e:1-e)}computeFaces(){this.faces.length=0;const e=this.detailX+1;let t,n,r,i;for(let s=0;s<this.detailY;s++)for(let a=0;a<this.detailX;a++)t=s*e+a,n=s*e+a+1,r=(s+1)*e+a+1,i=(s+1)*e+a,this.faces.push([t,n,i]),this.faces.push([i,n,r]);return this}_getFaceNormal(e){const t=this.faces[e],n=this.vertices[t[0]],r=this.vertices[t[1]],i=this.vertices[t[2]],s=Ur.sub(r,n),a=Ur.sub(i,n),o=Ur.cross(s,a),l=Ur.mag(o);let u=l/(Ur.mag(s)*Ur.mag(a));return 0===u||isNaN(u)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),o):(u>1&&(u=1),o.mult(Math.asin(u)/l))}computeNormals(e=mt,{roundToPrecision:t=3}={}){const n=this.vertexNormals;let r=this.vertices;const i=this.faces;let s;if("smooth"===e){const e={},n=[],s=Math.pow(10,t),a=e=>Math.round(e*s)/s,o=e=>`${a(e.x)},${a(e.y)},${a(e.z)}`;for(let t=0;t<r.length;t++){const i=r[t],s=o(i);void 0===e[s]&&(e[s]=n.length,n.push(i))}i.forEach(t=>{for(let n=0;n<3;++n){const i=t[n],s=r[i],a=o(s);t[n]=e[a]}}),this.edges.forEach(t=>{for(let n=0;n<2;++n){const i=t[n],s=r[i],a=o(s);t[n]=e[a]}}),this.vertices=r=n}for(n.length=0,s=0;s<r.length;++s)n.push(new Ur);for(i.forEach((e,t)=>{const r=this._getFaceNormal(t);for(let i=0;i<3;++i){const t=e[i];n[t].add(r)}}),s=0;s<r.length;++s)n[s].normalize();return this}averageNormals(){for(let e=0;e<=this.detailY;e++){const t=this.detailX+1;let n=Ur.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=Ur.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this}averagePoleNormals(){let e=new Ur(0,0,0);for(let t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=Ur.div(e,this.detailX);for(let t=0;t<this.detailX;t++)this.vertexNormals[t]=e;e=new Ur(0,0,0);for(let t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)e.add(this.vertexNormals[t]);e=Ur.div(e,this.detailX);for(let t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)this.vertexNormals[t]=e;return this}_makeTriangleEdges(){this.edges.length=0;for(let e=0;e<this.faces.length;e++)this.edges.push([this.faces[e][0],this.faces[e][1]]),this.edges.push([this.faces[e][1],this.faces[e][2]]),this.edges.push([this.faces[e][2],this.faces[e][0]]);return this}makeEdgesFromFaces(){this._makeTriangleEdges()}_edgesToVertices(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();const e=new Map,t=new Set;let n;for(let r=0;r<this.edges.length;r++){const i=this.edges[r-1],s=this.edges[r],a=this.vertices[s[0]],o=this.vertices[s[1]],l=this.vertexStrokeColors.length>0&&i?this.vertexStrokeColors.slice(4*i[1],4*(i[1]+1)):[0,0,0,0],u=this.vertexStrokeColors.length>0?this.vertexStrokeColors.slice(4*s[0],4*(s[0]+1)):[0,0,0,0],c=this.vertexStrokeColors.length>0?this.vertexStrokeColors.slice(4*s[1],4*(s[1]+1)):[0,0,0,0],h=o.copy().sub(a).normalize(),d=h.magSq()>0;if(d&&this._addSegment(a,o,u,c,h),!this.renderer?._simpleLines){if(r>0&&i[1]===s[0])t.has(s[0])||(t.add(s[0]),e.delete(s[0]),n&&d&&h.dot(n)<.99999999&&this._addJoin(a,n,h,u));else{if(d&&!t.has(s[0])){const n=e.get(s[0]);n?(this._addJoin(a,n.dir,h,u),e.delete(s[0]),t.add(s[0])):e.set(s[0],{point:a,dir:h.copy().mult(-1),color:u})}if(n&&!t.has(i[1])){const r=e.get(i[1]);r?(this._addJoin(this.vertices[i[1]],n,r.dir.copy().mult(-1),l),e.delete(i[1]),t.add(i[1])):e.set(i[1],{point:this.vertices[i[1]],dir:n,color:l}),n=void 0}}if(r===this.edges.length-1&&!t.has(s[1])){const n=e.get(s[1]);n?(this._addJoin(o,h,n.dir.copy().mult(-1),c),e.delete(s[1]),t.add(s[1])):e.set(s[1],{point:o,dir:h,color:c})}d&&(n=h)}}for(const{point:r,dir:i,color:s}of e.values())this._addCap(r,i,s);return this}_addSegment(e,t,n,r,i){const s=e.array(),a=t.array(),o=i.array();this.lineSides.push(1,1,-1,1,-1,-1);for(const l of[this.lineTangentsIn,this.lineTangentsOut])for(let e=0;e<6;e++)l.push(...o);return this.lineVertices.push(...s,...a,...s,...a,...a,...s),this.renderer?._simpleLines||this.lineVertexColors.push(...n,...r,...n,...r,...r,...n),this}_addCap(e,t,n){const r=e.array(),i=t.array(),s=[0,0,0];for(let a=0;a<6;a++)this.lineVertices.push(...r),this.lineTangentsIn.push(...i),this.lineTangentsOut.push(...s),this.lineVertexColors.push(...n);return this.lineSides.push(-1,2,-2,1,2,-1),this}_addJoin(e,t,n,r){const i=e.array(),s=t.array(),a=n.array();for(let o=0;o<12;o++)this.lineVertices.push(...i),this.lineTangentsIn.push(...s),this.lineTangentsOut.push(...a),this.lineVertexColors.push(...r);return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}normalize(){if(this.vertices.length>0){const e=this.vertices[0].copy(),t=this.vertices[0].copy();for(let s=0;s<this.vertices.length;s++)e.x=Math.max(e.x,this.vertices[s].x),t.x=Math.min(t.x,this.vertices[s].x),e.y=Math.max(e.y,this.vertices[s].y),t.y=Math.min(t.y,this.vertices[s].y),e.z=Math.max(e.z,this.vertices[s].z),t.z=Math.min(t.z,this.vertices[s].z);const n=Ur.lerp(e,t,.5),r=Ur.sub(e,t),i=200/Math.max(Math.max(r.x,r.y),r.z);for(let s=0;s<this.vertices.length;s++)this.vertices[s].sub(n),this.vertices[s].mult(i)}return this}vertexProperty(e,t,n){let r;this.userVertexProperties[e]||(r=this.userVertexProperties[e]=this._userVertexPropertyHelper(e,t,n)),r=this.userVertexProperties[e],n?r.pushDirect(t):(r.setCurrentData(t),r.pushCurrentData())}_userVertexPropertyHelper(e,t,n){return this[(this.userVertexProperties[e]={name:e,dataSize:n||(t.length?t.length:1),geometry:this,getName(){return this.name},getCurrentData(){return void 0===this.currentData&&(this.currentData=new Array(this.getDataSize()).fill(0)),this.currentData},getDataSize(){return this.dataSize},getSrcName(){return this.name.concat("Src")},getDstName(){return this.name.concat("Buffer")},getSrcArray(){const e=this.getSrcName();return this.geometry[e]},setCurrentData(e){e.length&&e.length,this.currentData=e},pushCurrentData(){const e=this.getCurrentData();this.pushDirect(e)},pushDirect(e){e.length?this.getSrcArray().push(...e):this.getSrcArray().push(e)},resetSrcArray(){this.geometry[this.getSrcName()]=[]},delete(){const e=this.getSrcName();delete this.geometry[e]}}).getSrcName()]=[],this.userVertexProperties[e]}},Ti.nextId=0,"undefined"!=typeof p5&&gC(p5,p5.prototype),li(),(Mi=class e{constructor(t){this.renderer=t,t._pInst.push(),this.identityMatrix=new Ci(4),t.states.setValue("uModelMatrix",new Ci(4)),this.geometry=new Ti(void 0,void 0,void 0,this.renderer),this.geometry.gid=`_p5_GeometryBuilder_${e.nextGeometryId}`,e.nextGeometryId++,this.hasTransform=!1}transformVertices(e){return this.hasTransform?e.map(e=>this.renderer.states.uModelMatrix.multiplyPoint(e)):e}transformNormals(e){return this.hasTransform?e.map(e=>this.renderer.scratchMat3.multiplyVec(e)):e}addGeometry(e){this.hasTransform=!this.renderer.states.uModelMatrix.mat4.every((e,t)=>e===this.identityMatrix.mat4[t]),this.hasTransform&&this.renderer.scratchMat3.inverseTranspose4x4(this.renderer.states.uModelMatrix);let t=this.geometry.vertices.length;this.geometry.vertices.push(...this.transformVertices(e.vertices)),this.geometry.vertexNormals.push(...this.transformNormals(e.vertexNormals)),this.geometry.uvs.push(...e.uvs);const n=e.userVertexProperties,r=this.geometry.userVertexProperties,i=this.geometry.vertices.length-e.vertices.length;for(const a in r){if(a in n)continue;const t=r[a],i=t.getDataSize()*e.vertices.length,s=Array(i).fill(0);t.pushDirect(s)}for(const a in n){const e=n[a],t=e.getSrcArray(),s=e.getDataSize();if(i>0&&!(a in r)){const e=Array(s*i).fill(0);this.geometry.vertexProperty(a,e,s)}this.geometry.vertexProperty(a,t,s)}this.renderer.states.fillColor&&this.geometry.faces.push(...e.faces.map(e=>e.map(e=>e+t))),this.renderer.states.strokeColor&&this.geometry.edges.push(...e.edges.map(e=>e.map(e=>e+t)));const s=[...e.vertexColors];for(;s.length<4*e.vertices.length;)s.push(...this.renderer.states.curFillColor);this.geometry.vertexColors.push(...s)}addImmediate(e,t,{validateFaces:n=!1}={}){const r=[];if(this.renderer.states.fillColor)if(5===t||"quad_strip"===t)for(let i=2;i<e.vertices.length;i++)i%2==0?r.push([i,i-1,i-2]):r.push([i,i-2,i-1]);else if(6===t)for(let i=2;i<e.vertices.length;i++)r.push([0,i-1,i]);else if(4===t)for(let i=0;i<e.vertices.length;i+=3)(!n||e.vertices[i].copy().sub(e.vertices[i+1]).cross(e.vertices[i].copy().sub(e.vertices[i+2])).magSq()>0)&&r.push([i,i+1,i+2]);this.addGeometry(Object.assign({},e,{faces:r}))}addRetained(e){this.addGeometry(e)}finish(){return this.renderer._pInst.pop(),this.geometry}}).nextGeometryId=0,Di=class e{constructor(e,t,n,r){this.w=e,this.vec=new Ur(t,n,r)}static fromAxisAngle(t,n,r,i){const s=Math.cos(t/2),a=new Ur(n,r,i).normalize().mult(Math.sin(t/2));return new e(s,a.x,a.y,a.z)}conjugate(){return new e(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}multiply(t){return new e(this.w*t.w-this.vec.x*t.vec.x-this.vec.y*t.vec.y-this.vec.z-t.vec.z,this.w*t.vec.x+this.vec.x*t.w+this.vec.y*t.vec.z-this.vec.z*t.vec.y,this.w*t.vec.y-this.vec.x*t.vec.z+this.vec.y*t.w+this.vec.z*t.vec.x,this.w*t.vec.z+this.vec.x*t.vec.y-this.vec.y*t.vec.x+this.vec.z*t.w)}rotateVector(e){return Ur.mult(e,this.w*this.w-this.vec.dot(this.vec)).add(Ur.mult(this.vec,2*e.dot(this.vec))).add(Ur.mult(this.vec,2*this.w).cross(e)).clampToZero()}rotateBy(e){return e.multiply(this).multiply(e.conjugate()).vec.clampToZero()}},"undefined"!=typeof p5&&vC(p5,p5.prototype),ki=class{constructor(e,t,n,r,i,s){this.size=e,this.src=t,this.dst=n,this.attr=r,this._renderer=i,this.map=s}_prepareBuffer(e,t){const n=t.attributes,r=this._renderer.GL,i=this._renderer._getOrMakeCachedBuffers(e),s=n[this.attr];if(!s)return;let a=i[this.dst];const o=e[this.src];if(o&&o.length>0){const n=!a;if(n&&(i[this.dst]=a=r.createBuffer()),r.bindBuffer(r.ARRAY_BUFFER,a),n||!1!==e.dirtyFlags[this.src]){const t=this.map,n=t?t(o):o;this._renderer._bindBuffer(a,r.ARRAY_BUFFER,n),e.dirtyFlags[this.src]=!1}t.enableAttrib(s,this.size)}else{const e=s.location;if(-1===e||!this._renderer.registerEnabled.has(e))return;r.disableVertexAttribArray(e),this._renderer.registerEnabled.delete(e)}}},"undefined"!=typeof p5&&yC(p5,p5.prototype),Fi=m((Ni=d({"node_modules/libtess/libtess.min.js":(e,t)=>{var n;function r(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function s(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?r<i?t.a-e.a+r/(r+i)*(e.a-n.a):t.a-n.a+i/(r+i)*(n.a-e.a):0}function a(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?(t.a-n.a)*r+(t.a-e.a)*i:0}function o(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function l(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?r<i?t.b-e.b+r/(r+i)*(e.b-n.b):t.b-n.b+i/(r+i)*(n.b-e.b):0}function u(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?(t.b-n.b)*r+(t.b-e.b)*i:0}function c(e){return i(e.b.a,e.a)}function h(e){return i(e.a,e.b.a)}function d(e,t,n,r){return(e=0>e?0:e)<=(n=0>n?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function p(e){var t=y(e.b);return x(t,e.c),x(t.b,e.c),_(t,e.a),t}function f(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,S(t.a,e.a)),t.d!==e.d&&(n=!0,E(t.d,e.d)),b(t,e),r||(x(t,e.a),e.a.c=e),n||(_(t,e.d),e.d.a=e))}function m(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,E(e.d,e.b.d)),e.c===e?S(e.a,null):(e.b.d.a=ee(e),e.a.c=e.c,b(e,ee(e)),n||_(e,e.d)),t.c===t?(S(t.a,null),E(t.d,null)):(e.d.a=ee(t),t.a.c=t.c,b(t,ee(t))),w(e)}function g(e){var t=y(e),n=t.b;return b(t,e.e),t.a=e.b.a,x(n,t.a),t.d=n.d=e.d,t=t.b,b(e.b,ee(e.b)),b(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function v(e,t){var n=!1,r=y(e),i=r.b;return t.d!==e.d&&(n=!0,E(t.d,e.d)),b(r,e.e),b(i,t),r.a=e.b.a,i.a=t.a,r.d=i.d=e.d,e.d.a=i,n||_(r,e.d),r}function y(e){var t=new J,n=new J,r=e.b.h;return n.h=r,r.b.h=t,t.h=e,e.b.h=n,t.b=n,t.c=t,t.e=n,n.b=t,n.c=n,n.e=t}function b(e,t){var n=e.c,r=t.c;n.b.e=t,r.b.e=e,e.c=r,t.c=n}function x(e,t){var n=t.f,r=new ne(t,n);n.e=r,t.f=r,n=r.c=e;do{n.a=r,n=n.c}while(n!==e)}function _(e,t){var n=t.d,r=new Q(t,n);n.b=r,t.d=r,r.a=e,r.c=t.c,n=e;do{n.d=r,n=n.e}while(n!==e)}function w(e){var t=e.h;e=e.b.h,t.b.h=e,e.b.h=t}function S(e,t){var n=e.c,r=n;do{r.a=t,r=r.c}while(r!==n);n=e.f,(r=e.e).f=n,n.e=r}function E(e,t){var n=e.a,r=n;do{r.d=t,r=r.e}while(r!==n);n=e.d,(r=e.b).d=n,n.b=r}function C(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}var A=4e150;function T(e,t){e.f+=t.f,e.b.f+=t.b.f}function M(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?i(t.a,n.a)?0>=a(n.b.a,t.a,n.a):0<=a(t.b.a,n.a,t.a):0>=a(n.b.a,e,n.a):n.b.a===e?0<=a(t.b.a,e,t.a):(t=s(t.b.a,e,t.a))>=(e=s(n.b.a,e,n.a))}function D(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function k(e,t){m(e.a),e.c=!1,e.a=t,t.i=e}function N(e){var t=e.a.a;do{e=fe(e)}while(e.a.a===t);return e.c&&(k(e,t=v(pe(e).a.b,e.a.e)),e=fe(e)),e}function F(e,t,n){var r=new de;return r.a=n,r.e=$(e.f,t.e,r),n.i=r}function I(e,t){switch(e.s){case 100130:return!!(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return 0>t;case 100134:return 2<=t||-2>=t}return!1}function R(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,D(e)}function L(e,t,n){for(e=t,t=t.a;e!==n;){e.c=!1;var r=pe(e),i=r.a;if(i.a!==t.a){if(!r.c){R(e);break}k(r,i=v(t.c.b,i.b))}t.c!==i&&(f(ee(i),i),f(t,i)),R(e),t=r.a,e=r}return t}function P(e,t,n,r,i,s){var a=!0;do{F(e,t,n.b),n=n.c}while(n!==r);for(null===i&&(i=pe(t).a.b.c);(n=(r=pe(t)).a.b).a===i.a;)n.c!==i&&(f(ee(n),n),f(ee(i),n)),r.f=t.f-n.f,r.d=I(e,r.f),t.b=!0,!a&&z(e,t)&&(T(n,i),D(t),m(i)),a=!1,t=r,i=n;t.b=!0,s&&j(e,t)}function O(e,t,n,r,i){var s=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(s,n,r,e.c)||null,null===t.d&&(i?e.n||(K(e,100156),e.n=!0):t.d=n[0])}function B(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,O(e,t.a,r,[.5,.5,0,0],!1),f(t,n)}function U(e,t,n,r,i){var s=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),o=i+1;r[i]=.5*a/(s+a),r[o]=.5*s/(s+a),e.g[0]+=r[i]*t.g[0]+r[o]*n.g[0],e.g[1]+=r[i]*t.g[1]+r[o]*n.g[1],e.g[2]+=r[i]*t.g[2]+r[o]*n.g[2]}function z(e,t){var n=pe(t),s=t.a,o=n.a;if(i(s.a,o.a)){if(0<a(o.b.a,s.a,o.a))return!1;if(r(s.a,o.a)){if(s.a!==o.a){n=e.e;var l=s.a.h;if(0<=l){var u=(n=n.b).d,c=n.e,h=n.c,d=h[l];u[d]=u[n.a],h[u[d]]=d,d<=--n.a&&(1>=d||i(c[u[d>>1]],c[u[d]])?ce(n,d):he(n,d)),c[l]=null,h[l]=n.b,n.b=l}else for(n.c[-(l+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;B(e,ee(o),s)}}else g(o.b),f(s,ee(o)),t.b=n.b=!0}else{if(0>a(s.b.a,o.a,s.a))return!1;fe(t).b=t.b=!0,g(s.b),f(ee(o),s)}return!0}function V(e,t){var n=pe(t),c=t.a,h=n.a,p=c.a,m=h.a,v=c.b.a,y=h.b.a,b=new ne;if(a(v,e.a,p),a(y,e.a,m),p===m||Math.min(p.a,v.a)>Math.max(m.a,y.a))return!1;if(i(p,m)){if(0<a(y,p,m))return!1}else if(0>a(v,m,p))return!1;var x,_,w=v,S=p,E=y,C=m;if(i(w,S)||(x=w,w=S,S=x),i(E,C)||(x=E,E=C,C=x),i(w,E)||(x=w,w=E,E=x,x=S,S=C,C=x),i(E,S)?i(S,C)?(0>(x=s(w,E,S))+(_=s(E,S,C))&&(x=-x,_=-_),b.b=d(x,E.b,_,S.b)):(0>(x=a(w,E,S))+(_=-a(w,C,S))&&(x=-x,_=-_),b.b=d(x,E.b,_,C.b)):b.b=(E.b+S.b)/2,o(w,S)||(x=w,w=S,S=x),o(E,C)||(x=E,E=C,C=x),o(w,E)||(x=w,w=E,E=x,x=S,S=C,C=x),o(E,S)?o(S,C)?(0>(x=l(w,E,S))+(_=l(E,S,C))&&(x=-x,_=-_),b.a=d(x,E.a,_,S.a)):(0>(x=u(w,E,S))+(_=-u(w,C,S))&&(x=-x,_=-_),b.a=d(x,E.a,_,C.a)):b.a=(E.a+S.a)/2,i(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),w=i(p,m)?p:m,i(w,b)&&(b.b=w.b,b.a=w.a),r(b,p)||r(b,m))return z(e,t),!1;if(!r(v,e.a)&&0<=a(v,e.a,b)||!r(y,e.a)&&0>=a(y,e.a,b)){if(y===e.a)return g(c.b),f(h.b,c),c=pe(t=N(t)).a,L(e,pe(t),n),P(e,t,ee(c),c,c,!0),!0;if(v===e.a){g(h.b),f(c.e,ee(h)),m=(p=n=t).a.b.a;do{p=fe(p)}while(p.a.b.a===m);return p=pe(t=p).a.b.c,n.a=ee(h),P(e,t,(h=L(e,n,null)).c,c.b.c,p,!0),!0}return 0<=a(v,e.a,b)&&(fe(t).b=t.b=!0,g(c.b),c.a.b=e.a.b,c.a.a=e.a.a),0>=a(y,e.a,b)&&(t.b=n.b=!0,g(h.b),h.a.b=e.a.b,h.a.a=e.a.a),!1}return g(c.b),g(h.b),f(ee(h),c),c.a.b=b.b,c.a.a=b.a,c.a.h=ie(e.e,c.a),c=c.a,h=[0,0,0,0],b=[p.d,v.d,m.d,y.d],c.g[0]=c.g[1]=c.g[2]=0,U(c,p,v,h,0),U(c,m,y,h,2),O(e,c,b,h,!0),fe(t).b=t.b=n.b=!0,!1}function j(e,t){for(var n=pe(t);;){for(;n.b;)t=n,n=pe(n);if(!t.b&&(n=t,null===(t=fe(t))||!t.b))break;t.b=!1;var r,s=t.a,o=n.a;if(r=s.b.a!==o.b.a)e:{var l=pe(r=t),u=r.a,c=l.a,h=void 0;if(i(u.b.a,c.b.a)){if(0>a(u.b.a,c.b.a,u.a)){r=!1;break e}fe(r).b=r.b=!0,h=g(u),f(c.b,h),h.d.c=r.d}else{if(0<a(c.b.a,u.b.a,c.a)){r=!1;break e}r.b=l.b=!0,h=g(c),f(u.e,c.b),h.b.d.c=r.d}r=!0}if(r&&(n.c?(D(n),m(o),o=(n=pe(t)).a):t.c&&(D(t),m(s),s=(t=fe(n)).a)),s.a!==o.a)if(s.b.a===o.b.a||t.c||n.c||s.b.a!==e.a&&o.b.a!==e.a)z(e,t);else if(V(e,t))break;s.a===o.a&&s.b.a===o.b.a&&(T(o,s),D(t),m(s),t=fe(n))}}function G(e,t){e.a=t;for(var n=t.c;null===n.i;)if((n=n.c)===t.c){n=e;var s=t;(u=new de).a=s.c.b;var o=(h=n.f).a;do{o=o.a}while(null!==o.b&&!h.c(h.b,u,o.b));var l=pe(h=o.b),u=h.a;if(o=l.a,0===a(u.b.a,s,u.a))r((u=h.a).a,s)||r(u.b.a,s)||(g(u.b),h.c&&(m(u.c),h.c=!1),f(s.c,u),G(n,s));else{var c=i(o.b.a,u.b.a)?h:l;l=void 0,h.d||c.c?(l=c===h?v(s.c.b,u.e):v(o.b.c.b,s.c).b,c.c?k(c,l):(u=n,(h=F(n,h,l)).f=fe(h).f+h.a.f,h.d=I(u,h.f)),G(n,s)):P(n,h,s.c,s.c,null,!0)}return}if(h=(u=pe(n=N(n.i))).a,(u=L(e,u,null)).c===h){u=(h=u).c,o=pe(n),l=n.a,c=o.a;var h,d=!1;l.b.a!==c.b.a&&V(e,n),r(l.a,e.a)&&(f(ee(u),l),u=pe(n=N(n)).a,L(e,pe(n),o),d=!0),r(c.a,e.a)&&(f(h,ee(c)),h=L(e,o,null),d=!0),d?P(e,n,h.c,u,u,!0):(s=i(c.a,l.a)?ee(c):l,P(e,n,s=v(h.c.b,s),s.c,s.c,!1),s.b.i.c=!0,j(e,n))}else P(e,n,u.c,h,h,!0)}function H(e,t){var n=new de,r=p(e.b);r.a.b=A,r.a.a=t,r.b.a.b=-A,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=$(r=e.f,r.a,n),n.e=r}function W(e){this.a=new q,this.b=e,this.c=M}function $(e,t,n){do{t=t.c}while(null!==t.b&&!e.c(e.b,t.b,n));return e=new q(n,t.a,t),t.a.c=e,t.a=e}function q(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function X(){this.d=Y,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var Y=0;function Z(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case Y:K(e,100151),e.u(null);break;case 1:K(e,100152),e.t()}else switch(e.d){case 2:K(e,100154),e.v();break;case 1:K(e,100153),e.w()}}function K(e,t){e.p&&e.p(t,e.c)}function Q(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function J(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function ee(e){return e.b.e}function te(){this.c=new ne,this.a=new Q,this.b=new J,this.d=new J,this.b.b=this.d,this.d.b=this.b}function ne(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function re(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ae}function ie(e,t){if(e.e){var n,r=e.b,i=++r.a;return 2*i>r.f&&(r.f*=2,r.c=oe(r.c,r.f+1)),0===r.b?n=i:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=i,r.d[i]=n,r.h&&he(r,i),n}return r=e.a++,e.c[r]=t,-(r+1)}function se(e){if(0===e.a)return ue(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(le(e.b),t))return ue(e.b);do{--e.a}while(0<e.a&&null===e.c[e.d[e.a-1]]);return t}function ae(){this.d=oe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function oe(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function le(e){return e.e[e.d[1]]}function ue(e){var t=e.d,n=e.e,r=e.c,i=t[1],s=n[i];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[i]=null,r[i]=e.b,e.b=i,0<--e.a&&ce(e,1)),s}function ce(e,t){for(var n=e.d,r=e.e,s=e.c,a=t,o=n[a];;){var l=a<<1;l<e.a&&i(r[n[l+1]],r[n[l]])&&(l+=1);var u=n[l];if(l>e.a||i(r[o],r[u])){n[a]=o,s[o]=a;break}n[a]=u,s[u]=a,a=l}}function he(e,t){for(var n=e.d,r=e.e,s=e.c,a=t,o=n[a];;){var l=a>>1,u=n[l];if(0===l||i(r[u],r[o])){n[a]=o,s[o]=a;break}n[a]=u,s[u]=a,a=l}}function de(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function pe(e){return e.e.c.b}function fe(e){return e.e.a.b}(n=X.prototype).x=function(){Z(this,Y)},n.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void K(this,100900)}K(this,100901)},n.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:K(this,100900)}return!1},n.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},n.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:K(this,100900)}},n.C=function(e,t){var n=!1,r=[0,0,0];Z(this,2);for(var i=0;3>i;++i){var s=e[i];-1e150>s&&(s=-1e150,n=!0),1e150<s&&(s=1e150,n=!0),r[i]=s}n&&K(this,100155),null===(n=this.q)?f(n=p(this.b),n.b):(g(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},n.u=function(e){Z(this,Y),this.d=1,this.b=new te,this.c=e},n.t=function(){Z(this,1),this.d=2,this.q=null},n.v=function(){Z(this,2),this.d=1},n.w=function(){Z(this,1),this.d=Y;var e=!1,t=[u=this.j[0],n=this.j[1],o=this.j[2]];if(0===u&&0===n&&0===o){for(var n=[-2e150,-2e150,-2e150],s=[2e150,2e150,2e150],o=[],l=[],u=(e=this.b.c).e;u!==e;u=u.e)for(var d=0;3>d;++d){var p=u.g[d];p<s[d]&&(s[d]=p,l[d]=u),p>n[d]&&(n[d]=p,o[d]=u)}if(u=0,n[1]-s[1]>n[0]-s[0]&&(u=1),n[2]-s[2]>n[u]-s[u]&&(u=2),s[u]>=n[u])t[0]=0,t[1]=0,t[2]=1;else{for(n=0,s=l[u],o=o[u],l=[0,0,0],s=[s.g[0]-o.g[0],s.g[1]-o.g[1],s.g[2]-o.g[2]],d=[0,0,0],u=e.e;u!==e;u=u.e)d[0]=u.g[0]-o.g[0],d[1]=u.g[1]-o.g[1],d[2]=u.g[2]-o.g[2],l[0]=s[1]*d[2]-s[2]*d[1],l[1]=s[2]*d[0]-s[0]*d[2],l[2]=s[0]*d[1]-s[1]*d[0],(p=l[0]*l[0]+l[1]*l[1]+l[2]*l[2])>n&&(n=p,t[0]=l[0],t[1]=l[1],t[2]=l[2]);0>=n&&(t[0]=t[1]=t[2]=0,t[C(s)]=1)}e=!0}for(l=C(t),u=this.b.c,n=(l+1)%3,o=(l+2)%3,l=0<t[l]?1:-1,t=u.e;t!==u;t=t.e)t.b=t.g[n],t.a=l*t.g[o];if(e){for(t=0,u=(e=this.b.a).b;u!==e;u=u.b)if(!(0>=(n=u.a).f))do{t+=(n.a.b-n.b.a.b)*(n.a.a+n.b.a.a),n=n.e}while(n!==u.a);if(0>t)for(e=(t=this.b.c).e;e!==t;e=e.e)e.a=-e.a}for(this.n=!1,u=(t=this.b.b).h;u!==t;u=e)e=u.h,n=u.e,r(u.a,u.b.a)&&u.e.e!==u&&(B(this,n,u),m(u),n=(u=n).e),n.e===u&&(n!==u&&(n!==e&&n!==e.b||(e=e.h),m(n)),u!==e&&u!==e.b||(e=e.h),m(u));for(this.e=t=new re,u=(e=this.b.c).e;u!==e;u=u.e)u.h=ie(t,u);for(function(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;var n;e.d.sort((n=e.c,function(e,t){return i(n[e],n[t])?1:-1})),e.e=!0,function(e){for(var t=e.a;1<=t;--t)ce(e,t);e.h=!0}(e.b)}(t),this.f=new W(this),H(this,-A),H(this,A);null!==(t=se(this.e));){for(;;){e:if(u=this.e,0===u.a)e=le(u.b);else if(e=u.c[u.d[u.a-1]],0!==u.b.a&&(u=le(u.b),i(u,e))){e=u;break e}if(null===e||!r(e,t))break;e=se(this.e),B(this,t.c,e.c)}G(this,t)}for(this.a=this.f.a.a.b.a.a,t=0;null!==(e=this.f.a.a.b);)e.h||++t,D(e);for(this.f=null,(t=this.e).b=null,t.d=null,this.e=t.c=null,u=(t=this.b).a.b;u!==t.a;u=e)e=u.b,(u=u.a).e.e===u&&(T(u.c,u),m(u));if(!this.n){if(t=this.b,this.m)for(u=t.b.h;u!==t.b;u=e)e=u.h,u.b.d.c!==u.d.c?u.f=u.d.c?1:-1:m(u);else for(u=t.a.b;u!==t.a;u=e)if(e=u.b,u.c){for(u=u.a;i(u.b.a,u.a);u=u.c.b);for(;i(u.a,u.b.a);u=u.e);for(n=u.c.b,o=void 0;u.e!==n;)if(i(u.b.a,n.a)){for(;n.e!==u&&(c(n.e)||0>=a(n.a,n.b.a,n.e.b.a));)n=(o=v(n.e,n)).b;n=n.c.b}else{for(;n.e!==u&&(h(u.c.b)||0<=a(u.b.a,u.a,u.c.b.a));)u=(o=v(u,u.c.b)).b;u=u.e}for(;n.e.e!==u;)n=(o=v(n.e,n)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(e=(t=this.b).a.b;e!==t.a;e=e.b)if(e.c){this.h&&this.h(2,this.c),u=e.a;do{this.k&&this.k(u.a.d,this.c),u=u.e}while(u!==e.a);this.i&&this.i(this.c)}}else{for(t=this.b,e=!!this.l,u=!1,n=-1,o=t.a.d;o!==t.a;o=o.d)if(o.c){u||(this.h&&this.h(4,this.c),u=!0),l=o.a;do{e&&n!==(s=l.b.d.c?0:1)&&(n=s,this.l&&this.l(!!n,this.c)),this.k&&this.k(l.a.d,this.c),l=l.e}while(l!==o.a)}u&&this.i&&this.i(this.c)}if(this.r){for(u=(t=this.b).a.b;u!==t.a;u=e)if(e=u.b,!u.c){o=(n=u.a).e,l=void 0;do{o=(l=o).e,l.d=null,null===l.b.d&&(l.c===l?S(l.a,null):(l.a.c=l.c,b(l,ee(l))),(s=l.b).c===s?S(s.a,null):(s.a.c=s.c,b(s,ee(s))),w(l))}while(l!==n);n=u.d,(u=u.b).d=n,n.b=u}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},e.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==t&&(t.exports=e.libtess)}}))()),li(),Ii={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},Ri=Object.values(Ii).reduce((e,t)=>e+t),Li=class{constructor(e){this.renderer=e,this.shapeMode=8,this.geometry=new Ti(void 0,void 0,void 0,this.renderer),this.geometry.gid="__IMMEDIATE_MODE_GEOMETRY__",this.contourIndices=[],this._useUserVertexProperties=void 0,this._bezierVertex=[],this._quadraticVertex=[],this._curveVertex=[],this.isProcessingVertices=!1,this._tessy=this._initTessy(),this.tessyVertexSize=Ri,this.bufferStrides={...Ii}}constructFromContours(e,t){this._useUserVertexProperties&&this._resetUserVertexProperties(),this.geometry.reset(),this.contourIndices=[],this.shapeMode=e.contours[0].kind;const n=!!this.renderer.states.strokeColor,r={};if(e.userVertexProperties){this._useUserVertexProperties=!0;for(const t in e.userVertexProperties){const n=e.vertexPropertyName(t),i=this.geometry._userVertexPropertyHelper(n,[],e.userVertexProperties[t]);r[t]=i,this.tessyVertexSize+=i.getDataSize(),this.bufferStrides[i.getSrcName()]=i.getDataSize(),this.renderer.buffers.user.push(new ki(i.getDataSize(),i.getSrcName(),i.getDstName(),n,this.renderer))}}else this._useUserVertexProperties=!1;for(const i of t){this.contourIndices.push(this.geometry.vertices.length);for(const e of i){if("quads"===this.shapeMode&&this.geometry.vertices.length%6==3)for(const e in this.bufferStrides){const t=this.bufferStrides[e],n=this.geometry[e];n.push(...n.slice(n.length-3*t,n.length-2*t),...n.slice(n.length-t,n.length))}this.geometry.vertices.push(e.position),this.geometry.vertexNormals.push(e.normal||new Ur(0,0,0)),this.geometry.uvs.push(e.textureCoordinates.x,e.textureCoordinates.y),this.renderer.states.fillColor?this.geometry.vertexColors.push(...e.fill.array()):this.geometry.vertexColors.push(0,0,0,0),this.renderer.states.strokeColor?this.geometry.vertexStrokeColors.push(...e.stroke.array()):this.geometry.vertexStrokeColors.push(0,0,0,0);for(const t in r){const n=r[t];t in e&&n.setCurrentData(e[t]),n.pushCurrentData()}}}n&&(this.geometry.edges=this._calculateEdges(this.shapeMode,this.geometry.vertices)),n&&!this.renderer.geometryBuilder&&this.geometry._edgesToVertices(),8===this.shapeMode?(this.isProcessingVertices=!0,this._tesselateShape(),this.isProcessingVertices=!1):"quad_strip"===this.shapeMode?this.shapeMode=5:"quads"===this.shapeMode&&(this.shapeMode=4),"image"===this.renderer.states.textureMode&&null!==this.renderer.states._tex&&this.renderer.states._tex.width>0&&this.renderer.states._tex.height>0&&(this.geometry.uvs=this.geometry.uvs.map((e,t)=>t%2==0?e/this.renderer.states._tex.width:e/this.renderer.states._tex.height))}_resetUserVertexProperties(){const e=this.geometry.userVertexProperties;for(const t in e){const n=e[t];delete this.bufferStrides[t],n.delete()}this._useUserVertexProperties=!1,this.tessyVertexSize=Ri,this.geometry.userVertexProperties={}}_calculateEdges(e,t){const n=[];let r=0;const i=this.contourIndices.slice();let s=-1;switch(e){case 5:for(r=0;r<t.length-2;r++)n.push([r,r+1]),n.push([r,r+2]);n.push([r,r+1]);break;case 6:for(r=1;r<t.length-1;r++)n.push([0,r]),n.push([r,r+1]);n.push([0,t.length-1]);break;case 4:for(r=0;r<t.length-2;r+=3)n.push([r,r+1]),n.push([r+1,r+2]),n.push([r+2,r]);break;case 1:for(r=0;r<t.length-1;r+=2)n.push([r,r+1]);break;case Be:for(r=0;r<t.length-5;r+=6)n.push([r,r+1]),n.push([r+1,r+2]),n.push([r+2,r+5]),n.push([r+5,r]);break;case Ue:for(r=0;r<t.length-2;r+=2)n.push([r,r+1]),n.push([r+1,r+3]),n.push([r,r+2]);n.push([r,r+1]);break;default:for(r=0;r<t.length;r++)r===i[0]?s=i.shift():t[s]&&t[r].equals(t[s])?n.push([r-1,s]):n.push([r-1,r])}return n}_tesselateShape(){const e=[];for(let i=0;i<this.geometry.vertices.length;i++){this.contourIndices.length>0&&this.contourIndices[0]===i&&(this.contourIndices.shift(),e.push([])),e[e.length-1].push(this.geometry.vertices[i].x,this.geometry.vertices[i].y,this.geometry.vertices[i].z,this.geometry.uvs[2*i],this.geometry.uvs[2*i+1],this.geometry.vertexColors[4*i],this.geometry.vertexColors[4*i+1],this.geometry.vertexColors[4*i+2],this.geometry.vertexColors[4*i+3],this.geometry.vertexNormals[i].x,this.geometry.vertexNormals[i].y,this.geometry.vertexNormals[i].z);for(const t in this.geometry.userVertexProperties){const n=this.geometry.userVertexProperties[t],r=i*n.getDataSize(),s=r+n.getDataSize(),a=n.getSrcArray().slice(r,s);e[e.length-1].push(...a)}}const t=this._triangulate(e);if(0===t.length)return;this.shapeMode=4;const n=this.geometry.vertices;this.geometry.vertices=[],this.geometry.vertexNormals=[],this.geometry.uvs=[];for(const i in this.geometry.userVertexProperties)this.geometry.userVertexProperties[i].resetSrcArray();const r=[];for(let i=0,s=t.length;i<s;i+=this.tessyVertexSize){r.push(...t.slice(i+5,i+9)),this.geometry.vertexNormals.push(new Ur(...t.slice(i+9,i+12)));{let e=12;for(const n in this.geometry.userVertexProperties){const r=this.geometry.userVertexProperties[n],s=r.getDataSize(),a=i+e,o=a+s;r.setCurrentData(t.slice(a,o)),r.pushCurrentData(),e+=s}}this.geometry.vertices.push(new Ur(...t.slice(i,i+3))),this.geometry.uvs.push(...t.slice(i+3,i+5))}if(this.renderer.geometryBuilder){const e=new Map;this.geometry.edges=this.geometry.edges.map(t=>t.map(t=>{if(!e.has(t)){const r=n[t];let i=this.geometry.vertices.findIndex(e=>r.x===e.x&&r.y===e.y&&r.z===e.z);if(-1===i){let e=1/0,t=0;for(let n=0;n<this.geometry.vertices.length;n++){const i=this.geometry.vertices[n],s=r.x-i.x,a=r.y-i.y,o=r.z-i.z,l=s*s+a*a+o*o;l<e&&(e=l,t=n)}i=t}e.set(t,i)}return e.get(t)}))}this.geometry.vertexColors=r}_initTessy(){const e=new Fi.default.GluTesselator;return e.gluTessCallback(Fi.default.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){for(const n of e)t.push(n)}),e.gluTessCallback(Fi.default.gluEnum.GLU_TESS_BEGIN,function(e){e!==Fi.default.primitiveType.GL_TRIANGLES&&console.log(`expected TRIANGLES but got type: ${e}`)}),e.gluTessCallback(Fi.default.gluEnum.GLU_TESS_ERROR,function(e){console.log("error callback"),console.log(`error number: ${e}`)}),e.gluTessCallback(Fi.default.gluEnum.GLU_TESS_COMBINE,(e,t,n)=>{const r=new Array(this.tessyVertexSize).fill(0);for(let i=0;i<n.length;i++)for(let e=0;e<r.length;e++)0!==n[i]&&t[i]&&(r[e]+=t[i][e]*n[i]);return r}),e.gluTessCallback(Fi.default.gluEnum.GLU_TESS_EDGE_FLAG,function(e){}),e.gluTessProperty(Fi.default.gluEnum.GLU_TESS_WINDING_RULE,Fi.default.windingRule.GLU_TESS_WINDING_NONZERO),e}_triangulate(e){const t=e[0]?e[0][2]:void 0;let n=!0;for(const i of e)for(let e=0;e<i.length;e+=this.tessyVertexSize)if(i[e+2]!==t){n=!1;break}n?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);const r=[];this._tessy.gluTessBeginPolygon(r);for(const i of e){this._tessy.gluTessBeginContour();for(let e=0;e<i.length;e+=this.tessyVertexSize){const t=i.slice(e,e+this.tessyVertexSize);this._tessy.gluTessVertex(t,t)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),r}},Pi=class{constructor(e){this.renderer=e,this.cache={}}numCached(){return Object.keys(this.cache).length}isCached(e){return void 0!==this.cache[e]}getGeometryByID(e){return this.cache[e]?.geometry}getCached(e){return this.getCachedID(e.gid)}getCachedID(e){return this.cache[e]}ensureCached(e){const t=e.gid;if(!t)throw new Error("The p5.Geometry you passed in has no gid property!");if(this.isCached(e.gid))return this.getCached(e);const n=this.renderer.GL;if(this.freeBuffers(t),Object.keys(this.cache).length>1e3){const e=Object.keys(this.cache)[0];this.freeBuffers(e)}const r={};this.cache[t]=r,r.geometry=e;let i=r.indexBuffer;if(e.faces.length){i||(i=r.indexBuffer=n.createBuffer());const t=e.faces.flat(),s=t.some(e=>e>65535);let a=s?Uint32Array:Uint16Array;this.renderer._bindBuffer(i,n.ELEMENT_ARRAY_BUFFER,t,a),r.indexBufferType=s?n.UNSIGNED_INT:n.UNSIGNED_SHORT}else i&&(n.deleteBuffer(i),r.indexBuffer=null);return r}freeBuffers(e){const t=this.cache[e];if(!t)return;delete this.cache[e];const n=this.renderer.GL;function r(e){for(const r of e)t[r.dst]&&(n.deleteBuffer(t[r.dst]),t[r.dst]=null)}t.indexBuffer&&n.deleteBuffer(t.indexBuffer),r(this.renderer.buffers.stroke),r(this.renderer.buffers.fill),r(this.renderer.buffers.user)}},Oi={[lt]:3,[st]:4,[tt]:.5},"undefined"!=typeof p5&&bC(p5,p5.prototype),"undefined"!=typeof p5&&xC(p5,p5.prototype),Bi=class extends Error{status;response;ok},"undefined"!=typeof p5&&wC(p5,p5.prototype),"undefined"!=typeof p5&&SC(p5,p5.prototype),Ui=class e{constructor(e){this._renderer=e,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new Ci(4),this.projMatrix=new Ci(4),this.yScale=1}perspective(e,t,n,r){this.cameraType=arguments.length>0?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===r&&(r=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),r<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=r,this.projMatrix=new Ci(4);const i=1/Math.tan(this.cameraFOV/2),s=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/t,0,0,0,0,-i*this.yScale,0,0,0,0,(r+n)*s,-1,0,0,2*r*n*s,0),this._isActive()&&(this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uPMatrix.set(this.projMatrix))}ortho(e,t,n,r,i,s){const a=this.fbo||this._renderer;void 0===e&&(e=-a.width/2),void 0===t&&(t=+a.width/2),void 0===n&&(n=-a.height/2),void 0===r&&(r=+a.height/2),void 0===i&&(i=0),void 0===s&&(s=Math.max(a.width,a.height)+800),this.cameraNear=i,this.cameraFar=s;const o=t-e,l=r-n,u=s-i,c=2/o,h=2/l*this.yScale,d=-2/u,p=-(t+e)/o,f=-(r+n)/l,m=-(s+i)/u;this.projMatrix=new Ci(4),this.projMatrix.set(c,0,0,0,0,-h,0,0,0,0,d,0,p,f,m,1),this._isActive()&&(this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uPMatrix.set(this.projMatrix)),this.cameraType="custom"}frustum(e,t,n,r,i,s){void 0===e&&(e=.05*-this._renderer.width),void 0===t&&(t=.05*+this._renderer.width),void 0===n&&(n=.05*+this._renderer.height),void 0===r&&(r=.05*-this._renderer.height),void 0===i&&(i=this.defaultCameraNear),void 0===s&&(s=this.defaultCameraFar),this.cameraNear=i,this.cameraFar=s;const a=t-e,o=r-n,l=s-i,u=2*i/a,c=2*i/o*this.yScale,h=-2*s*i/l,d=(t+e)/a,p=(r+n)/o,f=-(s+i)/l;this.projMatrix=new Ci(4),this.projMatrix.set(u,0,0,0,0,-c,0,0,d,p,f,-1,0,0,h,0),this._isActive()&&(this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uPMatrix.set(this.projMatrix)),this.cameraType="custom"}_rotateView(e,t,n,r){let i=this.centerX,s=this.centerY,a=this.centerZ;i-=this.eyeX,s-=this.eyeY,a-=this.eyeZ;const o=new Ci(4);o.rotate4x4(this._renderer._pInst._toRadians(e),t,n,r);const l=[i*o.mat4[0]+s*o.mat4[4]+a*o.mat4[8],i*o.mat4[1]+s*o.mat4[5]+a*o.mat4[9],i*o.mat4[2]+s*o.mat4[6]+a*o.mat4[10]];l[0]+=this.eyeX,l[1]+=this.eyeY,l[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,l[0],l[1],l[2],this.upX,this.upY,this.upZ)}roll(e){const t=this._getLocalAxes(),n=Di.fromAxisAngle(this._renderer._pInst._toRadians(e),t.z[0],t.z[1],t.z[2]).rotateVector(new Ur(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,n.x,n.y,n.z)}pan(e){const t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])}tilt(e){const t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])}lookAt(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)}camera(e,t,n,r,i,s,a,o,l){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,i=t,s=0,a=0,o=1,l=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=i,this.centerZ=s),void 0!==a&&(this.upX=a,this.upY=o,this.upZ=l);const u=this._getLocalAxes();this.cameraMatrix.set(u.x[0],u.y[0],u.z[0],0,u.x[1],u.y[1],u.z[1],0,u.x[2],u.y[2],u.z[2],0,0,0,0,1);const c=-e,h=-t,d=-n;return this.cameraMatrix.translate([c,h,d]),this._isActive()&&(this._renderer.states.setValue("uViewMatrix",this._renderer.states.uViewMatrix.clone()),this._renderer.states.uViewMatrix.set(this.cameraMatrix)),this}move(e,t,n){const r=this._getLocalAxes(),i=[r.x[0]*e,r.x[1]*e,r.x[2]*e],s=[r.y[0]*t,r.y[1]*t,r.y[2]*t],a=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+i[0]+s[0]+a[0],this.eyeY+i[1]+s[1]+a[1],this.eyeZ+i[2]+s[2]+a[2],this.centerX+i[0]+s[0]+a[0],this.centerY+i[1]+s[1]+a[1],this.centerZ+i[2]+s[2]+a[2],this.upX,this.upY,this.upZ)}setPosition(e,t,n){const r=e-this.eyeX,i=t-this.eyeY,s=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+i,this.centerZ+s,this.upX,this.upY,this.upZ)}set(e){for(const t of["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"])this[t]=e[t];this.cameraMatrix=e.cameraMatrix.copy(),this.projMatrix=e.projMatrix.copy(),this._isActive()&&(this._renderer.states.setValue("uModelMatrix",this._renderer.states.uModelMatrix.clone()),this._renderer.states.setValue("uViewMatrix",this._renderer.states.uViewMatrix.clone()),this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uModelMatrix.reset(),this._renderer.states.uViewMatrix.set(this.cameraMatrix),this._renderer.states.uPMatrix.set(this.projMatrix))}slerp(e,t,n){if(0===n)return void this.set(e);if(1===n)return void this.set(t);0!==this.projMatrix.mat4[15]&&(this.projMatrix.setElement(0,e.projMatrix.mat4[0]*Math.pow(t.projMatrix.mat4[0]/e.projMatrix.mat4[0],n)),this.projMatrix.setElement(5,e.projMatrix.mat4[5]*Math.pow(t.projMatrix.mat4[5]/e.projMatrix.mat4[5],n)),this._isActive()&&(this._renderer.states.setValue("uPMatrix",this._renderer.states.uPMatrix.clone()),this._renderer.states.uPMatrix.mat4=this.projMatrix.mat4.slice()));const r=new Ur(e.eyeX,e.eyeY,e.eyeZ),i=new Ur(t.eyeX,t.eyeY,t.eyeZ),s=new Ur(e.centerX,e.centerY,e.centerZ),a=new Ur(t.centerX,t.centerY,t.centerZ),o=Ur.dist(r,s),l=Ur.dist(i,a),u=o*Math.pow(l/o,n),c=Ur.sub(r,i),h=r.copy().sub(i).sub(s).add(a),d=h.magSq();let p=1;d>1e-6&&(p=Ur.dot(c,h)/d,p=Math.max(0,Math.min(p,1)));const f=Ur.lerp(Ur.lerp(r,s,p),Ur.lerp(i,a,p),n),m=e.cameraMatrix.createSubMatrix3x3(),g=t.cameraMatrix.createSubMatrix3x3(),v=m.row(2),y=g.row(2),b=m.row(1),x=g.row(1),_=new Ur,w=new Ur,S=new Ur,E=new Ur,C=g.mult(m.copy().transpose()),A=C.diagonal();let T,M,D,k,N=.5*(A[0]+A[1]+A[2]-1);if(1-N<1e-7)return _.set(Ur.lerp(v,y,n)).normalize(),S.set(_).mult(p*u).add(f),E.set(_).mult((p-1)*u).add(f),w.set(Ur.lerp(b,x,n)).normalize(),void this.camera(S.x,S.y,S.z,E.x,E.y,E.z,w.x,w.y,w.z);let F=1/(1-N);const I=Math.max(A[0],A[1],A[2]),R=C.mat3[1]+C.mat3[3],L=C.mat3[2]+C.mat3[6],P=C.mat3[5]+C.mat3[7];I===A[0]?(T=Math.sqrt((A[0]-N)*F),F/=T,M=.5*R*F,D=.5*L*F,k=.5*(C.mat3[7]-C.mat3[5])/T):I===A[1]?(M=Math.sqrt((A[1]-N)*F),F/=M,D=.5*P*F,T=.5*R*F,k=.5*(C.mat3[2]-C.mat3[6])/M):(D=Math.sqrt((A[2]-N)*F),F/=D,T=.5*L*F,M=.5*P*F,k=.5*(C.mat3[3]-C.mat3[1])/D);const O=n*Math.atan2(k,N),B=Math.cos(O),U=Math.sin(O),z=1-B,V=T*M,j=M*D,G=D*T,H=new Ci([B+z*T*T,z*V+U*D,z*G-U*M,z*V-U*D,B+z*M*M,z*j+U*T,z*G+U*M,z*j-U*T,B+z*D*D]);H.multiplyVec(v,_),S.set(_).mult(p*u).add(f),E.set(_).mult((p-1)*u).add(f),H.multiplyVec(b,w),this.camera(S.x,S.y,S.z,E.x,E.y,E.z,w.x,w.y,w.z)}_computeCameraDefaultSettings(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}_setDefaultCamera(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}_resize(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}copy(){const t=new e(this._renderer);return t.cameraFOV=this.cameraFOV,t.aspectRatio=this.aspectRatio,t.eyeX=this.eyeX,t.eyeY=this.eyeY,t.eyeZ=this.eyeZ,t.centerX=this.centerX,t.centerY=this.centerY,t.centerZ=this.centerZ,t.upX=this.upX,t.upY=this.upY,t.upZ=this.upZ,t.cameraNear=this.cameraNear,t.cameraFar=this.cameraFar,t.cameraType=this.cameraType,t.useLinePerspective=this.useLinePerspective,t.cameraMatrix=this.cameraMatrix.copy(),t.projMatrix=this.projMatrix.copy(),t.yScale=this.yScale,t}clone(){return this.copy()}_getLocalAxes(){let e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ;const r=Math.sqrt(e*e+t*t+n*n);0!==r&&(e/=r,t/=r,n/=r);let i=this.upX,s=this.upY,a=this.upZ,o=s*n-a*t,l=-i*n+a*e,u=i*t-s*e;i=t*u-n*l,s=-e*u+n*o,a=e*l-t*o;const c=Math.sqrt(o*o+l*l+u*u);0!==c&&(o/=c,l/=c,u/=c);const h=Math.sqrt(i*i+s*s+a*a);return 0!==h&&(i/=h,s/=h,a/=h),{x:[o,l,u],y:[i,s,a],z:[e,t,n]}}_orbit(e,t,n){const r=this.eyeX-this.centerX,i=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ;let a=Math.hypot(r,i,s);const o=new Ur(r,i,s).normalize(),l=new Ur(this.upX,this.upY,this.upZ).normalize(),u=Ur.cross(l,o).normalize(),c=Ur.cross(u,l);a*=Math.pow(10,n),a<this.cameraNear&&(a=this.cameraNear),a>this.cameraFar&&(a=this.cameraFar);const h=Math.acos(Math.max(-1,Math.min(1,Ur.dot(o,l))))+t,d=e;(h<=0||h>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),l.mult(Math.cos(h)),c.mult(Math.cos(d)*Math.sin(h)),u.mult(Math.sin(d)*Math.sin(h)),o.set(l).add(c).add(u),this.eyeX=a*o.x+this.centerX,this.eyeY=a*o.y+this.centerY,this.eyeZ=a*o.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}_orbitFree(e,t,n){const r=this.eyeX-this.centerX,i=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ;let a=Math.hypot(r,i,s);const o=new Ur(r,i,s).normalize(),l=new Ur(this.upX,this.upY,this.upZ),u=Ur.cross(l,o).normalize(),c=Ur.cross(o,u),h=Math.atan2(t,e);c.mult(Math.sin(h)),u.mult(Math.cos(h)).add(c);const d=Math.sqrt(e*e+t*t),p=Ur.cross(o,u);a*=Math.pow(10,n),a<this.cameraNear&&(a=this.cameraNear),a>this.cameraFar&&(a=this.cameraFar);const f=Math.cos(d),m=Math.sin(d),g=l.dot(o),v=l.dot(u),y=g*f+v*m,b=-g*m+v*f,x=l.dot(p);l.x=y*o.x+b*u.x+x*p.x,l.y=y*o.y+b*u.y+x*p.y,l.z=y*o.z+b*u.z+x*p.z,u.mult(-m),o.mult(f).add(u).mult(a),this.camera(o.x+this.centerX,o.y+this.centerY,o.z+this.centerZ,this.centerX,this.centerY,this.centerZ,l.x,l.y,l.z)}_isActive(){return this===this._renderer.states.curCamera}},"undefined"!=typeof p5&&EC(p5,p5.prototype),zi=class e{constructor(e,t,n,r={}){this._renderer=e,this._vertSrc=t,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:r.uniforms||{},declarations:r.declarations,helpers:r.helpers||{},vertex:r.vertex||{},fragment:r.fragment||{},modified:{vertex:r.modified&&r.modified.vertex||{},fragment:r.modified&&r.modified.fragment||{}}}}hookTypes(e){let t=this._vertSrc,n=this.hooks.vertex[e];if(n||(n=this.hooks.fragment[e],t=this._fragSrc),!n)throw new Error(`Can't find hook ${e}!`);const r=e.split(/\s+/g),i=r.pop(),s=r.pop(),a=[...r],o=/\(([^\)]*)\)/.exec(n);if(!o)throw new Error(`Couldn't find function parameters in hook body:\n${n}`);const l=e=>{const n=new RegExp(`struct\\s+${e}\\s*{([^}]*)}`).exec(t);if(!n)return;const r=[];for(const t of n[1].split(";")){const e=t.trim().split(/\s+|,/g),n=e.shift(),i=[...e],s=l(n);for(const t of i)r.push({name:t,type:{typeName:n,qualifiers:[],properties:s}})}return r},u=o[1].split(",").map(e=>{const t=e.trim().split(/\s+/g),n=t.pop(),r=t.pop();return{name:n,type:{typeName:r,qualifiers:[...t],properties:l(r)}}});return{name:i,returnType:{typeName:s,qualifiers:a,properties:l(s)},parameters:u}}shaderSrc(e,t){const n="void main";let[r,i]=e.split(n),s="",a="";for(const o in this.hooks.uniforms)s+=`uniform ${o};\n`;this.hooks.declarations&&(s+=this.hooks.declarations+"\n"),this.hooks[t].declarations&&(s+=this.hooks[t].declarations+"\n");for(const o in this.hooks.helpers)s+=`${o}${this.hooks.helpers[o]}\n`;for(const o in this.hooks[t]){if("declarations"===o)continue;const[e,n]=o.split(" ");this.hooks.modified[t][o]&&(a+="#define AUGMENTED_HOOK_"+n+"\n"),s+=e+" HOOK_"+n+this.hooks[t][o]+"\n"}return-1!==r.indexOf("#define HOOK_DEFINES")&&(r=r.replace("#define HOOK_DEFINES","\n"+a+"\n"),a=""),r+"\n"+a+s+n+i}version(){const e=/#version (.+)$/.exec(this.vertSrc());return e?e[1]:"100 es"}vertSrc(){return this.shaderSrc(this._vertSrc,"vertex")}fragSrc(){return this.shaderSrc(this._fragSrc,"fragment")}inspectHooks(){console.log("==== Vertex shader hooks: ====");for(const e in this.hooks.vertex)console.log((this.hooks.modified.vertex[e]?"[MODIFIED] ":"")+e+this.hooks.vertex[e]);console.log(""),console.log("==== Fragment shader hooks: ====");for(const e in this.hooks.fragment)console.log((this.hooks.modified.fragment[e]?"[MODIFIED] ":"")+e+this.hooks.fragment[e]);console.log(""),console.log("==== Helper functions: ====");for(const e in this.hooks.helpers)console.log(e+this.hooks.helpers[e])}modify(t){const n={vertex:{},fragment:{},helpers:{}};for(const e in t)"declarations"!==e&&"uniforms"!==e&&("vertexDeclarations"===e?n.vertex.declarations=(n.vertex.declarations||"")+"\n"+t[e]:"fragmentDeclarations"===e?n.fragment.declarations=(n.fragment.declarations||"")+"\n"+t[e]:this.hooks.vertex[e]?n.vertex[e]=t[e]:this.hooks.fragment[e]?n.fragment[e]=t[e]:n.helpers[e]=t[e]);const r=Object.assign({},this.hooks.modified.vertex),i=Object.assign({},this.hooks.modified.fragment);for(const e in n.vertex||{})"declarations"!==e&&(r[e]=!0);for(const e in n.fragment||{})"declarations"!==e&&(i[e]=!0);return new e(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(t.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,t.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,n.fragment||{}),vertex:Object.assign({},this.hooks.vertex,n.vertex||{}),helpers:Object.assign({},this.hooks.helpers,n.helpers||{}),modified:{vertex:r,fragment:i}})}init(){if(0===this._glProgram){const e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this.vertSrc()),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(this._vertShader);if("undefined"==typeof IS_MINIFIED)throw p5._friendlyError(`Yikes! An error occurred compiling the vertex shader:${t}`),t;return console.error(t),null}if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this.fragSrc()),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(this._fragShader);if("undefined"==typeof IS_MINIFIED)throw p5._friendlyError(`Darn! An error occurred compiling the fragment shader:${t}`),t;return console.error(t),null}this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||p5._friendlyError(`Snap! Error linking shader program: ${e.getProgramInfoLog(this._glProgram)}`),this._loadAttributes(),this._loadUniforms()}return this}setDefaultUniforms(){for(const e in this.hooks.uniforms){const[,t]=e.split(" "),n=this.hooks.uniforms[e];let r;r=n instanceof Function?n():n,null!=r&&this.setUniform(t,r)}}copyToContext(t){const n=new e(t._renderer,this._vertSrc,this._fragSrc);return n.ensureCompiledOnContext(t._renderer),n}ensureCompiledOnContext(e){if(0!==this._glProgram&&this._renderer!==e)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=e?._renderer?.filterRenderer?._renderer||e,this.init())}_loadAttributes(){if(this._loadedAttributes)return;this.attributes={};const e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES);for(let n=0;n<t;++n){const t=e.getActiveAttrib(this._glProgram,n),r=t.name,i=e.getAttribLocation(this._glProgram,r),s={};s.name=r,s.location=i,s.index=n,s.type=t.type,s.size=t.size,this.attributes[r]=s}this._loadedAttributes=!0}_loadUniforms(){if(this._loadedUniforms)return;const e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS);let n=0;for(let r=0;r<t;++r){const t=e.getActiveUniform(this._glProgram,r),i={};i.location=e.getUniformLocation(this._glProgram,t.name),i.size=t.size;let s=t.name;t.size>1&&(s=s.substring(0,s.indexOf("[0]"))),i.name=s,i.type=t.type,i._cachedData=void 0,i.type===e.SAMPLER_2D&&(i.samplerIndex=n,n++,this.samplers.push(i)),i.isArray=t.size>1||i.type===e.FLOAT_MAT3||i.type===e.FLOAT_MAT4||i.type===e.FLOAT_VEC2||i.type===e.FLOAT_VEC3||i.type===e.FLOAT_VEC4||i.type===e.INT_VEC2||i.type===e.INT_VEC4||i.type===e.INT_VEC3,this.uniforms[s]=i}this._loadedUniforms=!0}compile(){}bindShader(){this.init(),this._bound||(this.useProgram(),this._bound=!0)}unbindShader(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}bindTextures(){const e=this._renderer.GL,t=this._renderer._getEmptyTexture();for(const n of this.samplers){let r=n.texture;void 0===r&&(n.texture=r=t),e.activeTexture(e.TEXTURE0+n.samplerIndex),r.bindTexture(),r.update(),e.uniform1i(n.location,n.samplerIndex)}}updateTextures(){for(const e of this.samplers){const t=e.texture;t&&t.update()}}unbindTextures(){const e=this._renderer.GL,t=this._renderer._getEmptyTexture();for(const n of this.samplers)n.texture?.isFramebufferTexture&&(e.activeTexture(e.TEXTURE0+n.samplerIndex),t.bindTexture(),e.uniform1i(n.location,n.samplerIndex))}useProgram(){const e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this}setUniform(e,t){this.init();const n=this.uniforms[e];if(!n)return;const r=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;Array.isArray(t)?n._cachedData=t.slice(0):n._cachedData=t}const i=n.location;switch(this.useProgram(),n.type){case r.BOOL:!0===t?r.uniform1i(i,1):r.uniform1i(i,0);break;case r.INT:n.size>1?t.length&&r.uniform1iv(i,t):r.uniform1i(i,t);break;case r.FLOAT:n.size>1?t.length&&r.uniform1fv(i,t):r.uniform1f(i,t);break;case r.FLOAT_MAT3:r.uniformMatrix3fv(i,!1,t);break;case r.FLOAT_MAT4:r.uniformMatrix4fv(i,!1,t);break;case r.FLOAT_VEC2:n.size>1?t.length&&r.uniform2fv(i,t):r.uniform2f(i,t[0],t[1]);break;case r.FLOAT_VEC3:n.size>1?t.length&&r.uniform3fv(i,t):r.uniform3f(i,t[0],t[1],t[2]);break;case r.FLOAT_VEC4:n.size>1?t.length&&r.uniform4fv(i,t):r.uniform4f(i,t[0],t[1],t[2],t[3]);break;case r.INT_VEC2:n.size>1?t.length&&r.uniform2iv(i,t):r.uniform2i(i,t[0],t[1]);break;case r.INT_VEC3:n.size>1?t.length&&r.uniform3iv(i,t):r.uniform3i(i,t[0],t[1],t[2]);break;case r.INT_VEC4:n.size>1?t.length&&r.uniform4iv(i,t):r.uniform4i(i,t[0],t[1],t[2],t[3]);break;case r.SAMPLER_2D:if("number"==typeof t){if(t<r.TEXTURE0||t>r.TEXTURE31||t!==Math.ceil(t))return console.log("ðŸŒ¸ p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;r.activeTexture(t),r.uniform1i(i,t)}else r.activeTexture(r.TEXTURE0+n.samplerIndex),n.texture=t instanceof cs?t:this._renderer.getTexture(t),r.uniform1i(i,n.samplerIndex),n.texture.src.gifProperties&&n.texture.src._animateGif(this._renderer._pInst);break;case r.SAMPLER_CUBE:case r.SAMPLER_3D:case r.SAMPLER_2D_SHADOW:case r.SAMPLER_2D_ARRAY:case r.SAMPLER_2D_ARRAY_SHADOW:case r.SAMPLER_CUBE_SHADOW:case r.INT_SAMPLER_2D:case r.INT_SAMPLER_3D:case r.INT_SAMPLER_CUBE:case r.INT_SAMPLER_2D_ARRAY:case r.UNSIGNED_INT_SAMPLER_2D:case r.UNSIGNED_INT_SAMPLER_3D:case r.UNSIGNED_INT_SAMPLER_CUBE:case r.UNSIGNED_INT_SAMPLER_2D_ARRAY:if("number"!=typeof t)break;if(t<r.TEXTURE0||t>r.TEXTURE31||t!==Math.ceil(t)){console.log("ðŸŒ¸ p5.js says: You're trying to use a number as the data for a texture.Please use a texture.");break}r.activeTexture(t),r.uniform1i(i,t)}return this}enableAttrib(e,t,n,r,i,s){if(e){"undefined"==typeof IS_MINIFIED&&this.attributes[e.name]!==e&&console.warn(`The attribute "${e.name}"passed to enableAttrib does not belong to this shader.`);const a=e.location;if(-1!==a){const e=this._renderer.GL;this._renderer.registerEnabled.has(a)||(e.enableVertexAttribArray(a),this._renderer.registerEnabled.add(a)),this._renderer.GL.vertexAttribPointer(a,t,n||e.FLOAT,r||!1,i||0,s||0)}}return this}disableRemainingAttributes(){for(const e of this._renderer.registerEnabled.values())Object.keys(this.attributes).some(t=>this.attributes[t].location===e)||(this._renderer.GL.disableVertexAttribArray(e),this._renderer.registerEnabled.delete(e))}},"undefined"!=typeof p5&&CC(p5,p5.prototype),Vi="precision highp int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nIN vec3 aPosition;\nIN vec2 aTexCoord;\nOUT vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // project to 3D space\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",ji='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n',Gi="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n\n#ifdef FRAGMENT_SHADER\nvec4 getTexture(in sampler2D content, vec2 coord) {\n  vec4 color = TEXTURE(content, coord);\n  color.rgb /= color.a;\n  return color;\n}\n#endif\n",Hi="precision highp float;\n\nuniform sampler2D tex0;\nuniform vec2 canvasSize;\nuniform vec2 texelSize;\n\nIN vec2 vTexCoord;\n\nstruct FilterInputs {\n  vec2 texCoord;\n  vec2 canvasSize;\n  vec2 texelSize;\n};\n\nvoid main(void) {\n  FilterInputs inputs;\n  inputs.texCoord = vTexCoord;\n  inputs.canvasSize = canvasSize;\n  inputs.texelSize = texelSize;\n  OUT_COLOR = HOOK_getColor(inputs, tex0);\n  OUT_COLOR.rgb *= outColor.a;\n}\n",Wi="precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n",$i="// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n",qi="// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n",Xi="precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n",Yi="// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n",Zi="// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n",Ki="// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n",Qi="// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n",Ji="uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",es={},ts={},ns="",is=function(e,t){ns+=`#define STROKE_JOIN_${e} ${t}\n`,ts[Et[e]]=t},(rs=function(e,t){ns+=`#define STROKE_CAP_${e} ${t}\n`,es[Et[e]]=t})("ROUND",0),rs("PROJECT",1),rs("SQUARE",2),is("ROUND",0),is("MITER",1),is("BEVEL",2),as=(ss={normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\n#define HOOK_DEFINES\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat3 uModelNormalMatrix;\nuniform mat3 uCameraNormalMatrix;\n#else\nuniform mat4 uModelViewMatrix;\nuniform mat3 uNormalMatrix;\n#endif\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nstruct Vertex {\n  vec3 position;\n  vec3 normal;\n  vec2 texCoord;\n  vec4 color;\n};\n\nvoid main(void) {\n  HOOK_beforeVertex();\n\n  Vertex inputs;\n  inputs.position = aPosition;\n  inputs.normal = aNormal;\n  inputs.texCoord = aTexCoord;\n  inputs.color = (uUseVertexColor && aVertexColor.x >= 0.0) ? aVertexColor : uMaterialColor;\n#ifdef AUGMENTED_HOOK_getObjectInputs\n  inputs = HOOK_getObjectInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  inputs.position = (uModelMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uModelNormalMatrix * inputs.normal;\n  inputs = HOOK_getWorldInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  // Already multiplied by the model matrix, just apply view\n  inputs.position = (uViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uCameraNormalMatrix * inputs.normal;\n#else\n  // Apply both at once\n  inputs.position = (uModelViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uNormalMatrix * inputs.normal;\n#endif\n#ifdef AUGMENTED_HOOK_getCameraInputs\n  inputs = HOOK_getCameraInputs(inputs);\n#endif\n\n  // Pass varyings to fragment shader\n  vVertTexCoord = inputs.texCoord;\n  vVertexNormal = normalize(inputs.normal);\n  vColor = inputs.color;\n\n  gl_Position = uProjectionMatrix * vec4(inputs.position, 1.);\n\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uEnvMap;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    vec4 newTexColor = texture2D(uEnvMap, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",lightVert:ji+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = ((uUseVertexColor && aVertexColor.x >= 0.0) ? aVertexColor : uMaterialColor);\n}\n",lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\n#define HOOK_DEFINES\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat3 uModelNormalMatrix;\nuniform mat3 uCameraNormalMatrix;\n#else\nuniform mat4 uModelViewMatrix;\nuniform mat3 uNormalMatrix;\n#endif\nuniform mat4 uProjectionMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nstruct Vertex {\n  vec3 position;\n  vec3 normal;\n  vec2 texCoord;\n  vec4 color;\n};\n\nvoid main(void) {\n  HOOK_beforeVertex();\n\n  Vertex inputs;\n  inputs.position = aPosition;\n  inputs.normal = aNormal;\n  inputs.texCoord = aTexCoord;\n  inputs.color = (uUseVertexColor && aVertexColor.x >= 0.0) ? aVertexColor : uMaterialColor;\n#ifdef AUGMENTED_HOOK_getObjectInputs\n  inputs = HOOK_getObjectInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  inputs.position = (uModelMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uModelNormalMatrix * inputs.normal;\n  inputs = HOOK_getWorldInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  // Already multiplied by the model matrix, just apply view\n  inputs.position = (uViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uCameraNormalMatrix * inputs.normal;\n#else\n  // Apply both at once\n  inputs.position = (uModelViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.normal = uNormalMatrix * inputs.normal;\n#endif\n#ifdef AUGMENTED_HOOK_getCameraInputs\n  inputs = HOOK_getCameraInputs(inputs);\n#endif\n\n  // Pass varyings to fragment shader\n  vViewPosition = inputs.position;\n  vTexCoord = inputs.texCoord;\n  vNormal = inputs.normal;\n  vColor = inputs.color;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n\n  gl_Position = uProjectionMatrix * vec4(inputs.position, 1.);\n  HOOK_afterVertex();\n}\n",phongFrag:ji+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      ? TEXTURE(uSampler, vTexCoord) * (vec4(uTint.rgb/255., 1.) * uTint.a/255.)\n      : vColor;\n  if (isTexture && inputs.color.a > 0.0) {\n    // Textures come in with premultiplied alpha. Temporarily unpremultiply it\n    // so hooks users don't have to think about premultiplied alpha.\n    inputs.color.rgb /= inputs.color.a;\n  }\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  OUT_COLOR.rgb *= OUT_COLOR.a; // Premultiply alpha before rendering\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5));\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:ns+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\n#define HOOK_DEFINES\n\nprecision highp int;\nprecision highp float;\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\n#else\nuniform mat4 uModelViewMatrix;\n#endif\n\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform bool uSimpleLines;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec3 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nstruct StrokeVertex {\n  vec3 position;\n  vec3 tangentIn;\n  vec3 tangentOut;\n  vec4 color;\n  float weight;\n};\n\nvoid main() {\n  HOOK_beforeVertex();\n\n  if (!uSimpleLines) {\n      // Caps have one of either the in or out tangent set to 0\n      vCap = (aTangentIn == vec3(0.)) != (aTangentOut == vec3(0.)) ? 1. : 0.;\n\n      // Joins have two unique, defined tangents\n      vJoin = (\n          aTangentIn != vec3(0.) &&\n          aTangentOut != vec3(0.) &&\n          aTangentIn != aTangentOut\n      ) ? 1. : 0.;\n  }\n\n  StrokeVertex inputs;\n  inputs.position = aPosition.xyz;\n  inputs.color = uUseLineColor ? aVertexColor : uMaterialColor;\n  inputs.weight = uStrokeWeight;\n  inputs.tangentIn = aTangentIn;\n  inputs.tangentOut = aTangentOut;\n\n#ifdef AUGMENTED_HOOK_getObjectInputs\n  inputs = HOOK_getObjectInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  inputs.position = (uModelMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.tangentIn = (uModelMatrix * vec4(aTangentIn, 0.)).xyz;\n  inputs.tangentOut = (uModelMatrix * vec4(aTangentOut, 0.)).xyz;\n  inputs = HOOK_getWorldInputs(inputs);\n#endif\n\n#ifdef AUGMENTED_HOOK_getWorldInputs\n  // Already multiplied by the model matrix, just apply view\n  inputs.position = (uViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.tangentIn = (uViewMatrix * vec4(aTangentIn, 0.)).xyz;\n  inputs.tangentOut = (uViewMatrix * vec4(aTangentOut, 0.)).xyz;\n#else\n  // Apply both at once\n  inputs.position = (uModelViewMatrix * vec4(inputs.position, 1.)).xyz;\n  inputs.tangentIn = (uModelViewMatrix * vec4(aTangentIn, 0.)).xyz;\n  inputs.tangentOut = (uModelViewMatrix * vec4(aTangentOut, 0.)).xyz;\n#endif\n#ifdef AUGMENTED_HOOK_getCameraInputs\n  inputs = hook_getCameraInputs(inputs);\n#endif\n\n  vec4 posp = vec4(inputs.position, 1.);\n  vec4 posqIn = vec4(inputs.position + inputs.tangentIn, 1.);\n  vec4 posqOut = vec4(inputs.position + inputs.tangentOut, 1.);\n  vStrokeWeight = inputs.weight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(0., -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1. && !uSimpleLines) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * inputs.weight / 2.),\n          tangentIn,\n          c + (side * normalOut * inputs.weight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * inputs.weight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * inputs.weight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * inputs.weight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * inputs.weight / 2.));\n    } else {\n      vMaxDist = inputs.weight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      inputs.weight * 0.5;\n    vMaxDist = inputs.weight / 2.;\n  }\n\n  vCenter = p.xy;\n  vPosition = vCenter + offset;\n  vColor = inputs.color;\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  HOOK_afterVertex();\n}\n",lineFrag:ns+"precision highp int;\nprecision highp float;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n",filterBaseVert:Vi,filterBaseFrag:Hi}).sphereMappingFrag;for(const e in ss)ss[e]=Gi+ss[e];os={[nt]:Wi,[ot]:$i,[at]:qi,[lt]:Xi,[st]:Yi,[rt]:Zi,[it]:Ki,[tt]:Qi},ls=class e extends di{constructor(e,t,n,r,i,s){super(e,t,n,r),this.canvas=this.elt=i||document.createElement("canvas"),this._setAttributeDefaults(e),this._initContext(),this.GL=this.drawingContext,this._isMainCanvas?(this._pInst._curElement=this,this._pInst.canvas=this.canvas):this.canvas.style.display="none",this.elt.id="defaultCanvas0",this.elt.classList.add("p5Canvas"),this.wrappedElt=new Nr(this.elt,this._pInst);for(const o of Object.getOwnPropertyNames(Nr.prototype))"constructor"!==o&&"_"!==o[0]&&Object.defineProperty(this,o,{get(){return this.wrappedElt[o]}});const a=this._adjustDimensions(t,n);if(t=a.adjustedWidth,n=a.adjustedHeight,this.width=t,this.height=n,this.elt.width=t*this._pixelDensity,this.elt.height=n*this._pixelDensity,this.elt.style.width=`${t}px`,this.elt.style.height=`${n}px`,this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._pInst._userNode)this._pInst._userNode.appendChild(this.elt);else{if(0===document.getElementsByTagName("main").length){let e=document.createElement("main");document.body.appendChild(e)}document.getElementsByTagName("main")[0].appendChild(this.elt)}this.isP3D=!0,this.geometryBuilder=void 0,this.states.uModelMatrix=new Ci(4),this.states.uViewMatrix=new Ci(4),this.states.uPMatrix=new Ci(4),this.states.curCamera=new Ui(this),this.states.uPMatrix.set(this.states.curCamera.projMatrix),this.states.uViewMatrix.set(this.states.curCamera.cameraMatrix),this.states.enableLighting=!1,this.states.ambientLightColors=[],this.states.specularColors=[1,1,1],this.states.directionalLightDirections=[],this.states.directionalLightDiffuseColors=[],this.states.directionalLightSpecularColors=[],this.states.pointLightPositions=[],this.states.pointLightDiffuseColors=[],this.states.pointLightSpecularColors=[],this.states.spotLightPositions=[],this.states.spotLightDirections=[],this.states.spotLightDiffuseColors=[],this.states.spotLightSpecularColors=[],this.states.spotLightAngle=[],this.states.spotLightConc=[],this.states.activeImageLight=null,this.states.curFillColor=[1,1,1,1],this.states.curAmbientColor=[1,1,1,1],this.states.curSpecularColor=[0,0,0,0],this.states.curEmissiveColor=[0,0,0,0],this.states.curStrokeColor=[0,0,0,1],this.states.curBlendMode=We,this.states._hasSetAmbient=!1,this.states._useSpecularMaterial=!1,this.states._useEmissiveMaterial=!1,this.states._useNormalMaterial=!1,this.states._useShininess=1,this.states._useMetalness=0,this.states.tint=[255,255,255,255],this.states.constantAttenuation=1,this.states.linearAttenuation=0,this.states.quadraticAttenuation=0,this.states._currentNormal=new Ur(0,0,1),this.states.drawMode=ht,this.states._tex=null,this.states.textureMode=pt,this.states.textureWrapX=ft,this.states.textureWrapY=ft,this._isErasing=!1,this._simpleLines=!1,this._clipDepths=[],this._isClipApplied=!1,this._stencilTestOn=!1,this.mixedAmbientLight=[],this.mixedSpecularColor=[],this.diffusedTextures=new Map,this.specularTextures=new Map,this.preEraseBlend=void 0,this._cachedBlendMode=void 0,this._cachedFillStyle=[1,1,1,1],this._cachedStrokeStyle=[0,0,0,1],"webgl2"===this.webglVersion?this.blendExt=this.GL:this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useLineColor=!1,this._useVertexColor=!1,this.registerEnabled=new Set,this.states.curCamera._computeCameraDefaultSettings(),this.states.curCamera._setDefaultCamera(),this.filterCamera=new Ui(this),this.filterCamera._computeCameraDefaultSettings(),this.filterCamera._setDefaultCamera(),this.prevTouches=[],this.zoomVelocity=0,this.rotateVelocity=new Ur(0,0),this.moveVelocity=new Ur(0,0),this.executeZoom=!1,this.executeRotateAndMove=!1,this._drawingFilter=!1,this._drawingImage=!1,this.specularShader=void 0,this.sphereMapping=void 0,this.diffusedShader=void 0,this._baseFilterShader=void 0,this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.states.userFillShader=void 0,this.states.userStrokeShader=void 0,this.states.userPointShader=void 0,this.states.userImageShader=void 0,this.states.curveDetail=1/4,this.shapeBuilder=new Li(this),this.buffers={fill:[new ki(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new ki(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new ki(4,"vertexColors","colorBuffer","aVertexColor",this),new ki(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new ki(2,"uvs","uvBuffer","aTexCoord",this,e=>e.flat())],stroke:[new ki(4,"lineVertexColors","lineColorBuffer","aVertexColor",this),new ki(3,"lineVertices","lineVerticesBuffer","aPosition",this),new ki(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this),new ki(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this),new ki(1,"lineSides","lineSidesBuffer","aSide",this)],text:[new ki(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new ki(2,"uvs","uvBuffer","aTexCoord",this,e=>e.flat())],point:this.GL.createBuffer(),user:[]},this.geometryBufferCache=new Pi(this),this.curStrokeCap=Ge,this.curStrokeJoin=Ge,this.textures=new Map,this.framebuffers=new Set,this.activeFramebuffers=[],this.states.filterShader=void 0,this.filterLayer=void 0,this.filterLayerTemp=void 0,this.defaultFilterShaders={},this.fontInfos={},this._curShader=void 0,this.drawShapeCount=1,this.scratchMat3=new Ci(3),this._userEnabledStencil=!1,this._internalEnable=this.drawingContext.enable,this._internalDisable=this.drawingContext.disable,this.drawingContext.enable=e=>(e===this.drawingContext.STENCIL_TEST&&(this._clipping||(this._userEnabledStencil=!0)),this._internalEnable.call(this.drawingContext,e)),this.drawingContext.disable=e=>(e===this.drawingContext.STENCIL_TEST&&(this._userEnabledStencil=!1),this._internalDisable.call(this.drawingContext,e)),this._validateFaces=!1}remove(){this.wrappedElt.remove(),this.wrappedElt=null,this.canvas=null,this.elt=null}beginGeometry(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new Mi(this),this.geometryBuilder.prevFillColor=this.states.fillColor,this.fill(new Er([-1,-1,-1,-1]))}endGeometry(){if(!this.geometryBuilder)throw new Error("Make sure you call beginGeometry() before endGeometry()!");const e=this.geometryBuilder.finish();return this.geometryBuilder.prevFillColor?this.fill(this.geometryBuilder.prevFillColor):this.noFill(),this.geometryBuilder=void 0,e}buildGeometry(e){return this.beginGeometry(),e(),this.endGeometry()}beginShape(...e){super.beginShape(...e)}curveDetail(e){if(void 0===e)return this.states.curveDetail;this.states.setValue("curveDetail",e)}drawShape(e){const t=new si({curveDetail:this.states.curveDetail});e.accept(t),this.shapeBuilder.constructFromContours(e,t.contours),this.geometryBuilder?this.geometryBuilder.addImmediate(this.shapeBuilder.geometry,this.shapeBuilder.shapeMode,{validateFaces:this._validateFaces}):(this.states.fillColor||this.states.strokeColor)&&(0===this.shapeBuilder.shapeMode?this._drawPoints(this.shapeBuilder.geometry.vertices,this.buffers.point):this._drawGeometry(this.shapeBuilder.geometry,{mode:this.shapeBuilder.shapeMode,count:this.drawShapeCount})),this.drawShapeCount=1}endShape(e,t){this.drawShapeCount=t,super.endShape(e,t)}vertexProperty(...e){this.currentShape.vertexProperty(...e)}normal(e,t,n){e instanceof Ur?this.states.setValue("_currentNormal",e):this.states.setValue("_currentNormal",new Ur(e,t,n)),this.updateShapeVertexProperties()}model(e,t=1){e.vertices.length>0&&(this.geometryBuilder?this.geometryBuilder.addRetained(e):(this.geometryInHash(e.gid)||(e._edgesToVertices(),this._getOrMakeCachedBuffers(e)),this._drawGeometry(e,{count:t})))}_drawGeometry(e,{mode:t=4,count:n=1}={}){for(const r in e.userVertexProperties){const t=e.userVertexProperties[r];this.buffers.user.push(new ki(t.getDataSize(),t.getSrcName(),t.getDstName(),t.getName(),this))}this.states.fillColor&&e.vertices.length>=3&&![1,0].includes(t)&&this._drawFills(e,{mode:t,count:n}),this.states.strokeColor&&e.lineVertices.length>=1&&this._drawStrokes(e,{count:n}),this.buffers.user=[]}_drawGeometryScaled(e,t,n,r){let i=this.states.uModelMatrix;this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone());try{this.states.uModelMatrix.scale(t,n,r),this.geometryBuilder?this.geometryBuilder.addRetained(e):this._drawGeometry(e)}finally{this.states.setValue("uModelMatrix",i)}}_drawFills(e,{count:t,mode:n}={}){this._useVertexColor=e.vertexColors.length>0;const r=!this._drawingFilter&&this.states.userFillShader?this.states.userFillShader:this._getFillShader();r.bindShader(),this._setGlobalUniforms(r),this._setFillUniforms(r),r.bindTextures();for(const i of this.buffers.fill)i._prepareBuffer(e,r);this._prepareUserAttributes(e,r),r.disableRemainingAttributes(),this._applyColorBlend(this.states.curFillColor,e.hasFillTransparency()),this._drawBuffers(e,{mode:n,count:t}),r.unbindShader()}_drawStrokes(e,{count:t}={}){const n=this.GL;this._useLineColor=e.vertexStrokeColors.length>0;const r=this._getStrokeShader();r.bindShader(),this._setGlobalUniforms(r),this._setStrokeUniforms(r),r.bindTextures();for(const i of this.buffers.stroke)i._prepareBuffer(e,r);if(this._prepareUserAttributes(e,r),r.disableRemainingAttributes(),this._applyColorBlend(this.states.curStrokeColor,e.hasStrokeTransparency()),1===t)n.drawArrays(n.TRIANGLES,0,e.lineVertices.length/3);else try{n.drawArraysInstanced(n.TRIANGLES,0,e.lineVertices.length/3,t)}catch(Rr){console.log("ðŸŒ¸ p5.js says: Instancing is only supported in WebGL2 mode")}r.unbindShader()}_drawPoints(e,t){const n=this.GL,r=this._getPointShader();r.bindShader(),this._setGlobalUniforms(r),this._setPointUniforms(r),r.bindTextures(),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),this._applyColorBlend(this.states.curStrokeColor),n.drawArrays(n.Points,0,e.length),r.unbindShader()}_prepareUserAttributes(e,t){for(const n of this.buffers.user){if(!this._pInst.constructor.disableFriendlyErrors){const t=e.userVertexProperties[n.attr];if(t){const n=t.getSrcArray().length/t.getDataSize();n>e.vertices.length?this._pInst.constructor._friendlyError(`One of the geometries has a custom vertex property '${t.getName()}' with more values than vertices. This is probably caused by directly using the Geometry.vertexProperty() method.`,"vertexProperty()"):n<e.vertices.length&&this._pInst.constructor._friendlyError(`One of the geometries has a custom vertex property '${t.getName()}' with fewer values than vertices. This is probably caused by directly using the Geometry.vertexProperty() method.`,"vertexProperty()")}}n._prepareBuffer(e,t)}}_drawBuffers(e,{mode:t=this.GL.TRIANGLES,count:n}){const r=this.GL,i=this.geometryBufferCache.getCached(e);if(i)if(i.indexBuffer){if(this._bindBuffer(i.indexBuffer,r.ELEMENT_ARRAY_BUFFER),"webgl2"!==this._pInst.webglVersion&&i.indexBufferType===r.UNSIGNED_INT&&!r.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");if(1===n)r.drawElements(r.TRIANGLES,3*e.faces.length,i.indexBufferType,0);else try{r.drawElementsInstanced(r.TRIANGLES,3*e.faces.length,i.indexBufferType,0,n)}catch(Rr){console.log("ðŸŒ¸ p5.js says: Instancing is only supported in WebGL2 mode")}}else if(1===n)r.drawArrays(t,0,e.vertices.length);else try{r.drawArraysInstanced(t,0,e.vertices.length,n)}catch(Rr){console.log("ðŸŒ¸ p5.js says: Instancing is only supported in WebGL2 mode")}}_getOrMakeCachedBuffers(e){return this.geometryBufferCache.ensureCached(e)}_setAttributeDefaults(e){const t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)}_initContext(){if(1!==this._pInst._glAttributes?.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?ve:ge,this._pInst.webglVersion=this.webglVersion,this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");{const e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}}_getMaxTextureSize(){const e=this.drawingContext;return e.getParameter(e.MAX_TEXTURE_SIZE)}_adjustDimensions(e,t){this._maxTextureSize||(this._maxTextureSize=this._getMaxTextureSize());let n=this._maxTextureSize,r=Math.floor(n/this._pixelDensity),i=Math.min(e,r),s=Math.min(t,r);return i===e&&s===t||console.warn(`Warning: The requested width/height exceeds hardware limits. Adjusting dimensions to width: ${i}, height: ${s}.`),{adjustedWidth:i,adjustedHeight:s}}_resetContext(t,n){const r=this.width,i=this.height,s=this.canvas.id,a=this._pInst instanceof us,o={position:this.canvas.style.position,top:this.canvas.style.top,left:this.canvas.style.left};if(a){const e=this._pInst;e.canvas.parentNode.removeChild(e.canvas),e.canvas=document.createElement("canvas"),(e._pInst._userNode||document.body).appendChild(e.canvas),Nr.call(e,e.canvas,e._pInst),e.width=r,e.height=i}else{let e=this.canvas;e&&e.parentNode.removeChild(e),e=document.createElement("canvas"),e.id=s,this._pInst._userNode?this._pInst._userNode.appendChild(e):document.body.appendChild(e),this._pInst.canvas=e,this.canvas=e,this.canvas.style.position=o.position,this.canvas.style.top=o.top,this.canvas.style.left=o.left}const l=new e(this._pInst,r,i,!a,this._pInst.canvas);this._pInst._renderer=l,l._applyDefaults(),"function"==typeof n&&setTimeout(()=>{n.apply(window._renderer,t)},0)}_update(){this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),this.states.uModelMatrix.reset(),this.states.setValue("uViewMatrix",this.states.uViewMatrix.clone()),this.states.uViewMatrix.set(this.states.curCamera.cameraMatrix),this.states.setValue("ambientLightColors",[]),this.states.setValue("specularColors",[1,1,1]),this.states.setValue("directionalLightDirections",[]),this.states.setValue("directionalLightDiffuseColors",[]),this.states.setValue("directionalLightSpecularColors",[]),this.states.setValue("pointLightPositions",[]),this.states.setValue("pointLightDiffuseColors",[]),this.states.setValue("pointLightSpecularColors",[]),this.states.setValue("spotLightPositions",[]),this.states.setValue("spotLightDirections",[]),this.states.setValue("spotLightDiffuseColors",[]),this.states.setValue("spotLightSpecularColors",[]),this.states.setValue("spotLightAngle",[]),this.states.setValue("spotLightConc",[]),this.states.setValue("enableLighting",!1),this.states.setValue("tint",[255,255,255,255]),this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this._userEnabledStencil||this._internalDisable.call(this.GL,this.GL.STENCIL_TEST)}background(...e){const t=this._pInst.color(...e);this.clear(...t._getRGBA())}get uModelMatrix(){return this.states.uModelMatrix}get uViewMatrix(){return this.states.uViewMatrix}get uPMatrix(){return this.states.uPMatrix}get uMVMatrix(){const e=this.uModelMatrix.copy();return e.mult(this.uViewMatrix),e}getWorldToScreenMatrix(){const e=this.states.uModelMatrix,t=this.states.uViewMatrix,n=this.states.uPMatrix,r=new Ci(4);return r.scale(this.width,this.height,1),r.translate([.5,.5,.5]),r.scale(.5,-.5,.5),e.copy().mult(t).mult(n).mult(r)}fill(...e){super.fill(...e);const t=this.states.fillColor;this.states.setValue("curFillColor",t._array),this.states.setValue("drawMode",ht),this.states.setValue("_useNormalMaterial",!1),this.states.setValue("_tex",null)}stroke(...e){super.stroke(...e),this.states.setValue("curStrokeColor",this.states.strokeColor._array)}getCommonVertexProperties(){return{...super.getCommonVertexProperties(),stroke:this.states.strokeColor,fill:this.states.fillColor,normal:this.states._currentNormal}}getSupportedIndividualVertexProperties(){return{textureCoordinates:!0}}strokeCap(e){this.curStrokeCap=e}strokeJoin(e){this.curStrokeJoin=e}getFilterLayer(){return this.filterLayer||(this.filterLayer=new ms(this)),this.filterLayer}getFilterLayerTemp(){return this.filterLayerTemp||(this.filterLayerTemp=new ms(this)),this.filterLayerTemp}matchSize(e,t){e.width===t.width&&e.height===t.height||e.resize(t.width,t.height),e.pixelDensity()!==t.pixelDensity()&&e.pixelDensity(t.pixelDensity())}filter(...e){let t,n,r=this.getFilterLayer();"string"==typeof e[0]?(n=e[0],t=n in Oi&&void 0===e[1]?Oi[n]:e[1],n in this.defaultFilterShaders||(this.defaultFilterShaders[n]=new zi(r.renderer,Ji,os[n])),this.states.setValue("filterShader",this.defaultFilterShaders[n])):this.states.setValue("filterShader",e[0]);const i=this.activeFramebuffer()||this;this.matchSize(r,i),r.draw(()=>this.clear());let s=[1/(i.width*i.pixelDensity()),1/(i.height*i.pixelDensity())];if("blur"===n){const e=this.getFilterLayerTemp();this.matchSize(e,i),this.push(),this.states.setValue("strokeColor",null),this.blendMode(We),this.shader(this.states.filterShader),this.states.filterShader.setUniform("texelSize",s),this.states.filterShader.setUniform("canvasSize",[i.width,i.height]),this.states.filterShader.setUniform("radius",Math.max(1,t)),e.draw(()=>{this.states.filterShader.setUniform("direction",[1,0]),this.states.filterShader.setUniform("tex0",i),this.clear(),this.shader(this.states.filterShader),this.noLights(),this.plane(i.width,i.height)}),r.draw(()=>{this.states.filterShader.setUniform("direction",[0,1]),this.states.filterShader.setUniform("tex0",e),this.clear(),this.shader(this.states.filterShader),this.noLights(),this.plane(i.width,i.height)}),this.pop()}else r.draw(()=>{this.states.setValue("strokeColor",null),this.blendMode(We),this.shader(this.states.filterShader),this.states.filterShader.setUniform("tex0",i),this.states.filterShader.setUniform("texelSize",s),this.states.filterShader.setUniform("canvasSize",[i.width,i.height]),this.states.filterShader.setUniform("filterParameter",t),this.noLights(),this.plane(i.width,i.height)});this.push(),this.states.setValue("strokeColor",null),this.clear(),this.push(),this.states.setValue("imageMode",Ie),this.blendMode(We),i.filterCamera._resize(),this.setCamera(i.filterCamera),this.resetMatrix(),this._drawingFilter=!0,this.image(r,0,0,r.width,r.height,-i.width/2,-i.height/2,i.width,i.height),this._drawingFilter=!1,this.clearDepth(),this.pop(),this.pop()}pixelDensity(e){return e?this._pInst.pixelDensity(e):this._pInst.pixelDensity()}blendMode(e){"darken"===e||"lighten"===e||"lighter"===e||"source-over"===e||"subtract"===e||"screen"===e||"exclusion"===e||"copy"===e||"multiply"===e||"destination-out"===e?this.states.setValue("curBlendMode",e):"color-burn"!==e&&"overlay"!==e&&"hard-light"!==e&&"soft-light"!==e&&"color-dodge"!==e||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}erase(e,t){this._isErasing||(this.preEraseBlend=this.states.curBlendMode,this._isErasing=!0,this.blendMode($e),this._cachedFillStyle=this.states.curFillColor.slice(),this.states.setValue("curFillColor",[1,1,1,e/255]),this._cachedStrokeStyle=this.states.curStrokeColor.slice(),this.states.setValue("curStrokeColor",[1,1,1,t/255]))}noErase(){this._isErasing&&(this.states.setValue("curFillColor",this._cachedFillStyle.slice()),this.states.setValue("curStrokeColor",this._cachedStrokeStyle.slice()),this.states.setValue("curBlendMode",this.preEraseBlend),this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}drawTarget(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}beginClip(e={}){super.beginClip(e),this.drawTarget()._isClipApplied=!0;const t=this.GL;t.clearStencil(0),t.clear(t.STENCIL_BUFFER_BIT),this._internalEnable.call(t,t.STENCIL_TEST),this._stencilTestOn=!0,t.stencilFunc(t.ALWAYS,1,255),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.disable(t.DEPTH_TEST),this.push(),this.resetShader(),this.states.fillColor&&this.fill(0,0),this.states.strokeColor&&this.stroke(0,0)}endClip(){this.pop();const e=this.GL;e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(this._clipInvert?e.EQUAL:e.NOTEQUAL,0,255),e.enable(e.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),super.endClip()}_clearClip(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),this._clipDepths.length>0&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}_getPixel(e,t){const n=this.GL;return MC(n,null,e,t,n.RGBA,n.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}loadPixels(){if(!0!==this._pInst._glAttributes.preserveDrawingBuffer)return void console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.");const e=this._pixelDensity,t=this.GL;this.pixels=TC(this.pixels,t,null,0,0,this.width*e,this.height*e,t.RGBA,t.UNSIGNED_BYTE,this.height*e)}updatePixels(){const e=this._getTempFramebuffer();e.pixels=this.pixels,e.updatePixels(),this.push(),this.resetMatrix(),this.clear(),this.states.setValue("imageMode",Ie),this.image(e,0,0,e.width,e.height,-e.width/2,-e.height/2,e.width,e.height),this.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}_getTempFramebuffer(){return this._tempFramebuffer||(this._tempFramebuffer=new ms(this,{format:yt,useDepth:this._pInst._glAttributes.depth,depthFormat:bt,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}geometryInHash(e){return this.geometryBufferCache.isCached(e)}viewport(e,t){this._viewport=[0,0,e,t],this.GL.viewport(0,0,e,t)}resize(e,t){super.resize(e,t);const n={};for(const s in this.drawingContext){const e=this.drawingContext[s];"object"!=typeof e&&"function"!=typeof e&&(n[s]=e)}const r=this._adjustDimensions(e,t);e=r.adjustedWidth,t=r.adjustedHeight,this.width=e,this.height=t,this.canvas.width=e*this._pixelDensity,this.canvas.height=t*this._pixelDensity,this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`,this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this.states.curCamera._resize(),void 0!==this.pixels&&(this.pixels=new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4));for(const s of this.framebuffers)s._canvasSizeChanged();for(const s in n)try{this.drawingContext[s]=n[s]}catch(i){}}clear(...e){const t=e[0]||0,n=e[1]||0,r=e[2]||0;let i=e[3]||0;const s=this.activeFramebuffer();s&&"unsigned-byte"===s.format&&!s.antialias&&0===i&&(i=1e-10),this.GL.clearColor(t*i,n*i,r*i,i),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}clearDepth(e=1){this.GL.clearDepth(e),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}applyMatrix(e,t,n,r,i,s){this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),16===arguments.length?Ci.prototype.apply.apply(this.states.uModelMatrix,arguments):this.states.uModelMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,i,s,0,1])}translate(e,t,n){return e instanceof Ur&&(n=e.z,t=e.y,e=e.x),this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),this.states.uModelMatrix.translate([e,t,n]),this}scale(e,t,n){return this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),this.states.uModelMatrix.scale(e,t,n),this}rotate(e,t){return void 0===t?this.rotateZ(e):(this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),Ci.prototype.rotate4x4.apply(this.states.uModelMatrix,arguments),this)}rotateX(e){return this.rotate(e,1,0,0),this}rotateY(e){return this.rotate(e,0,1,0),this}rotateZ(e){return this.rotate(e,0,0,1),this}pop(...e){this._clipDepths.length>0&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&(this._clearClip(),this._userEnabledStencil||this._internalDisable.call(this.GL,this.GL.STENCIL_TEST)),super.pop(...e),this._applyStencilTestIfClipping()}_applyStencilTestIfClipping(){const e=this.drawTarget();e._isClipApplied!==this._stencilTestOn&&(e._isClipApplied?(this._internalEnable.call(this.GL,this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this._userEnabledStencil||this._internalDisable.call(this.GL,this.GL.STENCIL_TEST),this._stencilTestOn=!1))}resetMatrix(){return this.states.setValue("uModelMatrix",this.states.uModelMatrix.clone()),this.states.uModelMatrix.reset(),this.states.setValue("uViewMatrix",this.states.uViewMatrix.clone()),this.states.uViewMatrix.set(this.states.curCamera.cameraMatrix),this}_getStrokeShader(){const e=this.states.userStrokeShader;return e||this._getLineShader()}_getSphereMapping(e){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(as)),this.scratchMat3.inverseTranspose4x4(this.states.uViewMatrix),this.scratchMat3.invert(this.scratchMat3),this.sphereMapping.setUniform("uFovY",this.states.curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this.states.curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.scratchMat3.mat3),this.sphereMapping.setUniform("uEnvMap",e),this.sphereMapping}_getFillShader(){return this._drawingImage?this.states.userImageShader&&!this._drawingFilter?this.states.userImageShader:this._getLightShader():this.states.userFillShader?this.states.userFillShader:this.states._useNormalMaterial?this._getNormalShader():this.states.enableLighting||this.states._tex?this._getLightShader():this._getColorShader()}_getPointShader(){const e=this.states.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()}baseMaterialShader(){if(!this._pInst._glAttributes.perPixelLighting)throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.");return this._getLightShader()}_getLightShader(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new zi(this,this._webGL2CompatibilityPrefix("vert","highp")+ss.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+ss.phongFrag,{vertex:{"void beforeVertex":"() {}","Vertex getObjectInputs":"(Vertex inputs) { return inputs; }","Vertex getWorldInputs":"(Vertex inputs) { return inputs; }","Vertex getCameraInputs":"(Vertex inputs) { return inputs; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new zi(this,this._webGL2CompatibilityPrefix("vert","highp")+ss.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+ss.lightTextureFrag)),this._defaultLightShader}baseNormalShader(){return this._getNormalShader()}_getNormalShader(){return this._defaultNormalShader||(this._defaultNormalShader=new zi(this,this._webGL2CompatibilityPrefix("vert","mediump")+ss.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+ss.normalFrag,{vertex:{"void beforeVertex":"() {}","Vertex getObjectInputs":"(Vertex inputs) { return inputs; }","Vertex getWorldInputs":"(Vertex inputs) { return inputs; }","Vertex getCameraInputs":"(Vertex inputs) { return inputs; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}baseColorShader(){return this._getColorShader()}_getColorShader(){return this._defaultColorShader||(this._defaultColorShader=new zi(this,this._webGL2CompatibilityPrefix("vert","mediump")+ss.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+ss.basicFrag,{vertex:{"void beforeVertex":"() {}","Vertex getObjectInputs":"(Vertex inputs) { return inputs; }","Vertex getWorldInputs":"(Vertex inputs) { return inputs; }","Vertex getCameraInputs":"(Vertex inputs) { return inputs; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}pointShader(){return this._getPointShader()}_getPointShader(){return this._defaultPointShader||(this._defaultPointShader=new zi(this,this._webGL2CompatibilityPrefix("vert","mediump")+ss.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+ss.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}baseStrokeShader(){return this._getLineShader()}_getLineShader(){return this._defaultLineShader||(this._defaultLineShader=new zi(this,this._webGL2CompatibilityPrefix("vert","mediump")+ss.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+ss.lineFrag,{vertex:{"void beforeVertex":"() {}","StrokeVertex getObjectInputs":"(StrokeVertex inputs) { return inputs; }","StrokeVertex getWorldInputs":"(StrokeVertex inputs) { return inputs; }","StrokeVertex getCameraInputs":"(StrokeVertex inputs) { return inputs; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}_getFontShader(){return this._defaultFontShader||("webgl"===this.webglVersion&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new zi(this,this._webGL2CompatibilityPrefix("vert","highp")+ss.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+ss.fontFrag)),this._defaultFontShader}baseFilterShader(){return this._baseFilterShader||(this._baseFilterShader=new zi(this,this._webGL2CompatibilityPrefix("vert","highp")+ss.filterBaseVert,this._webGL2CompatibilityPrefix("frag","highp")+ss.filterBaseFrag,{vertex:{},fragment:{"vec4 getColor":"(FilterInputs inputs, in sampler2D canvasContent) {\n                return getTexture(canvasContent, inputs.texCoord);\n              }"}})),this._baseFilterShader}_webGL2CompatibilityPrefix(e,t){let n="";return"webgl2"===this.webglVersion&&(n+="#version 300 es\n#define WEBGL2\n"),"vert"===e?n+="#define VERTEX_SHADER\n":"frag"===e&&(n+="#define FRAGMENT_SHADER\n"),t&&(n+=`precision ${t} float;\n`),n}_getEmptyTexture(){if(!this._emptyTexture){const e=new ci(1,1);e.set(0,0,255),this._emptyTexture=new cs(this,e)}return this._emptyTexture}getTexture(e){let t=e;t instanceof ms&&(t=t.color);const n=this.textures.get(t);if(n)return n;const r=new cs(this,t);return this.textures.set(t,r),r}getDiffusedTexture(e){if(null!=this.diffusedTextures.get(e))return this.diffusedTextures.get(e);let t,n=Math.floor(e.height/e.width*200);return t=new ms(this,{width:200,height:n,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(ss.imageLightVert,ss.imageLightDiffusedFrag)),t.draw(()=>{this.shader(this.diffusedShader),this.diffusedShader.setUniform("environmentMap",e),this.states.setValue("strokeColor",null),this.noLights(),this.plane(200,n)}),this.diffusedTextures.set(e,t),t}getSpecularTexture(e){if(null!=this.specularTextures.get(e))return this.specularTextures.get(e);const t=512;let n;const r=[],i=new ms(this,{width:t,height:t,density:1});let s=Math.log(t)/Math.log(2);this.specularShader||(this.specularShader=this._pInst.createShader(ss.imageLightVert,ss.imageLightSpecularFrag));for(let a=t;a>=1;a/=2){i.resize(a,a);let t=1-Math.log(a)/Math.log(2)/s;i.draw(()=>{this.shader(this.specularShader),this.clear(),this.specularShader.setUniform("environmentMap",e),this.specularShader.setUniform("roughness",t),this.states.setValue("strokeColor",null),this.noLights(),this.plane(a,a)}),r.push(i.get().drawingContext.getImageData(0,0,a,a))}return i.remove(),n=new hs(this,r,{}),this.specularTextures.set(e,n),n}activeFramebuffer(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}createFramebuffer(e){return new ms(this,e)}_setGlobalUniforms(e){const t=this.states.uModelMatrix,n=this.states.uViewMatrix,r=this.states.uPMatrix,i=t.copy().mult(n);if(e.setUniform("uPerspective",this.states.curCamera.useLinePerspective?1:0),e.setUniform("uViewMatrix",n.mat4),e.setUniform("uProjectionMatrix",r.mat4),e.setUniform("uModelMatrix",t.mat4),e.setUniform("uModelViewMatrix",i.mat4),e.uniforms.uModelViewProjectionMatrix){const t=i.copy();t.mult(r),e.setUniform("uModelViewProjectionMatrix",t.mat4)}e.uniforms.uNormalMatrix&&(this.scratchMat3.inverseTranspose4x4(i),e.setUniform("uNormalMatrix",this.scratchMat3.mat3)),e.uniforms.uModelNormalMatrix&&(this.scratchMat3.inverseTranspose4x4(this.states.uModelMatrix),e.setUniform("uModelNormalMatrix",this.scratchMat3.mat3)),e.uniforms.uCameraNormalMatrix&&(this.scratchMat3.inverseTranspose4x4(this.states.uViewMatrix),e.setUniform("uCameraNormalMatrix",this.scratchMat3.mat3)),e.uniforms.uCameraRotation&&(this.scratchMat3.inverseTranspose4x4(this.states.uViewMatrix),e.setUniform("uCameraRotation",this.scratchMat3.mat3)),e.setUniform("uViewport",this._viewport)}_setStrokeUniforms(e){e.setUniform("uSimpleLines",this._simpleLines),e.setUniform("uUseLineColor",this._useLineColor),e.setUniform("uMaterialColor",this.states.curStrokeColor),e.setUniform("uStrokeWeight",this.states.strokeWeight),e.setUniform("uStrokeCap",es[this.curStrokeCap]),e.setUniform("uStrokeJoin",ts[this.curStrokeJoin])}_setFillUniforms(e){this.mixedSpecularColor=[...this.states.curSpecularColor];const t=this._getEmptyTexture();this.states._useMetalness>0&&(this.mixedSpecularColor=this.mixedSpecularColor.map((e,t)=>this.states.curFillColor[t]*this.states._useMetalness+e*(1-this.states._useMetalness))),e.setUniform("uUseVertexColor",this._useVertexColor),e.setUniform("uMaterialColor",this.states.curFillColor),e.setUniform("isTexture",!!this.states._tex),e.setUniform("uSampler",this.states._tex||t),e.setUniform("uTint",this.states.tint),e.setUniform("uHasSetAmbient",this.states._hasSetAmbient),e.setUniform("uAmbientMatColor",this.states.curAmbientColor),e.setUniform("uSpecularMatColor",this.mixedSpecularColor),e.setUniform("uEmissiveMatColor",this.states.curEmissiveColor),e.setUniform("uSpecular",this.states._useSpecularMaterial),e.setUniform("uEmissive",this.states._useEmissiveMaterial),e.setUniform("uShininess",this.states._useShininess),e.setUniform("uMetallic",this.states._useMetalness),this._setImageLightUniforms(e),e.setUniform("uUseLighting",this.states.enableLighting);const n=this.states.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",n),e.setUniform("uPointLightLocation",this.states.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.states.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.states.pointLightSpecularColors);const r=this.states.directionalLightDiffuseColors.length/3;e.setUniform("uDirectionalLightCount",r),e.setUniform("uLightingDirection",this.states.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.states.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.states.directionalLightSpecularColors);const i=this.states.ambientLightColors.length/3;this.mixedAmbientLight=[...this.states.ambientLightColors],this.states._useMetalness>0&&(this.mixedAmbientLight=this.mixedAmbientLight.map(e=>{let t=e-this.states._useMetalness;return Math.max(0,t)})),e.setUniform("uAmbientLightCount",i),e.setUniform("uAmbientColor",this.mixedAmbientLight);const s=this.states.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",s),e.setUniform("uSpotLightAngle",this.states.spotLightAngle),e.setUniform("uSpotLightConc",this.states.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.states.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.states.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.states.spotLightPositions),e.setUniform("uSpotLightDirection",this.states.spotLightDirections),e.setUniform("uConstantAttenuation",this.states.constantAttenuation),e.setUniform("uLinearAttenuation",this.states.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.states.quadraticAttenuation)}_setImageLightUniforms(e){if(e.setUniform("uUseImageLight",null!=this.states.activeImageLight),this.states.activeImageLight){let t=this.getDiffusedTexture(this.states.activeImageLight);e.setUniform("environmentMapDiffused",t);let n=this.getSpecularTexture(this.states.activeImageLight);e.setUniform("environmentMapSpecular",n)}}_setPointUniforms(e){e.setUniform("uMaterialColor",this.states.curStrokeColor),e.setUniform("uPointSize",this.states.strokeWeight*this._pixelDensity)}_bindBuffer(e,t,n,r,i){if(t||(t=this.GL.ARRAY_BUFFER),this.GL.bindBuffer(t,e),void 0!==n){let e=n;n instanceof Ai?e=n.dataArray():e instanceof(r||Float32Array)||(e=new(r||Float32Array)(e)),this.GL.bufferData(t,e,i||this.GL.STATIC_DRAW)}}_arraysEqual(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}_isTypedArray(e){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(t=>e instanceof t)}_vToNArray(e){return e.flatMap(e=>[e.x,e.y,e.z])}},"undefined"!=typeof p5&&AC(p5,p5.prototype),"undefined"!=typeof p5&&DC(p5,p5.prototype),"undefined"!=typeof p5&&kC(p5,p5.prototype),"undefined"!=typeof p5&&loading(p5,p5.prototype),us=class{constructor(e,t,n,r,i){const s=n||"p2d";return this._pInst=r,this._renderer=new gs[s](this,e,t,!1,i),this._initializeInstanceVariables(this),this._renderer._applyDefaults(),this}get elt(){return this.canvas}get deltaTime(){return this._pInst.deltaTime}get canvas(){return this._renderer?.canvas}get drawingContext(){return this._renderer.drawingContext}get width(){return this._renderer?.width}get height(){return this._renderer?.height}get pixels(){return this._renderer?.pixels}pixelDensity(e){let t;return"number"==typeof e?(e!==this._renderer._pixelDensity&&(this._renderer._pixelDensity=e),t=this,this.resizeCanvas(this.width,this.height,!0)):t=this._renderer._pixelDensity,t}resizeCanvas(e,t){this._renderer.resize(e,t)}reset(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}remove(){this._renderer.remove(),this._renderer=void 0}createFramebuffer(e){return new ms(this._renderer,e)}_assert3d(e){if(!this._renderer.isP3D)throw new Error(`${e}() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information.`)}_initializeInstanceVariables(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._downKeys={}}},cs=class{constructor(e,t,n){this._renderer=e;const r=this._renderer.GL;n=n||{},this.src=t,this.glTex=void 0,this.glTarget=r.TEXTURE_2D,this.glFormat=n.format||r.RGBA,this.mipmaps=!1,this.glMinFilter=n.minFilter||r.LINEAR,this.glMagFilter=n.magFilter||r.LINEAR,this.glWrapS=n.wrapS||r.CLAMP_TO_EDGE,this.glWrapT=n.wrapT||r.CLAMP_TO_EDGE,this.glDataType=n.dataType||r.UNSIGNED_BYTE;const i=RC(e);this.glFormat!==r.HALF_FLOAT||i.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=r.FLOAT),this.glFormat!==r.HALF_FLOAT||this.glMinFilter!==r.LINEAR&&this.glMagFilter!==r.LINEAR||i.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===r.LINEAR&&(this.glMinFilter=r.NEAREST),this.glMagFilter===r.LINEAR&&(this.glMagFilter=r.NEAREST)),this.glFormat!==r.FLOAT||i.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=r.UNSIGNED_BYTE),this.glFormat!==r.FLOAT||this.glMinFilter!==r.LINEAR&&this.glMagFilter!==r.LINEAR||i.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===r.LINEAR&&(this.glMinFilter=r.NEAREST),this.glMagFilter===r.LINEAR&&(this.glMagFilter=r.NEAREST)),this.isSrcMediaElement=!1,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==Nr&&t instanceof Nr&&!(t instanceof us)&&!(t instanceof di),this.isSrcP5Image=t instanceof ci,this.isSrcP5Graphics=t instanceof us,this.isSrcP5Renderer=t instanceof di,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData,this.isFramebufferTexture=t instanceof fs;const s=this._getTextureDataFromSource();return this.width=s.width,this.height=s.height,this.init(s),this}remove(){this.glTex&&(this._renderer.GL.deleteTexture(this.glTex),this.glTex=void 0)}_getTextureDataFromSource(){let e;return this.isFramebufferTexture?e=this.src.rawTexture():this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),e=this.src.elt):this.isSrcP5Graphics||this.isSrcP5Renderer?e=this.src.canvas:this.isImageData&&(e=this.src),e}init(e){const t=this._renderer.GL;if(this.isFramebufferTexture||(this.glTex=t.createTexture()),this.glWrapS=this._renderer.states.textureWrapX,this.glWrapT=this._renderer.states.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture);else if(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){const e=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,this.glDataType,e)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)}update(){const e=this.src;if(0===e.width||0===e.height)return!1;if(this.isFramebufferTexture)return this.src.update(),!1;const t=this._getTextureDataFromSource();let n=!1;const r=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(n=!0,this.width=t.width||e.width,this.height=t.height||e.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(n=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(n=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),n=!0):this.isImageData?e._dirty&&(e._dirty=!1,n=!0):n=!0,n&&(this.bindTexture(),r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,t)),n}bindTexture(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}unbindTexture(){this._renderer.GL.bindTexture(this.glTarget,null)}getTexture(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}setInterpolation(e,t){const n=this._renderer.GL;this.glMinFilter=this.glFilter(e),this.glMagFilter=this.glFilter(t),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}glFilter(e){const t=this._renderer.GL;return"nearest"===e?t.NEAREST:t.LINEAR}setWrapMode(e,t){const n=this._renderer.GL,r=e=>!(e&e-1),i=this._getTextureDataFromSource();let s,a;i.naturalWidth&&i.naturalHeight?(s=i.naturalWidth,a=i.naturalHeight):(s=this.width,a=this.height);const o=r(s),l=r(a);"repeat"===e?"webgl2"===this._renderer.webglVersion||o&&l?this.glWrapS=n.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=n.CLAMP_TO_EDGE):"mirror"===e?"webgl2"===this._renderer.webglVersion||o&&l?this.glWrapS=n.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=n.CLAMP_TO_EDGE):this.glWrapS=n.CLAMP_TO_EDGE,"repeat"===t?"webgl2"===this._renderer.webglVersion||o&&l?this.glWrapT=n.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=n.CLAMP_TO_EDGE):"mirror"===t?"webgl2"===this._renderer.webglVersion||o&&l?this.glWrapT=n.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=n.CLAMP_TO_EDGE):this.glWrapT=n.CLAMP_TO_EDGE,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.glWrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}},hs=class extends cs{constructor(e,t,n){super(e,t,n);const r=this._renderer.GL;this.glMinFilter===r.LINEAR&&(this.glMinFilter=r.LINEAR_MIPMAP_LINEAR)}glFilter(e){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}_getTextureDataFromSource(){return this.src}init(e){const t=this._renderer.GL;this.glTex=t.createTexture(),this.bindTexture();for(let n=0;n<e.length;n++)t.texImage2D(this.glTarget,n,this.glFormat,this.glFormat,this.glDataType,e[n]);this.glMinFilter=t.LINEAR_MIPMAP_LINEAR,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}update(){}},"undefined"!=typeof p5&&IC(p5,p5.prototype),ds=(e,t,n)=>Math.max(Math.min(e,n),t),ps=class extends Ui{constructor(e){super(e.renderer),this.fbo=e,this.yScale=-1}_computeCameraDefaultSettings(){super._computeCameraDefaultSettings(),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}},fs=class{constructor(e,t){this.framebuffer=e,this.property=t}get width(){return this.framebuffer.width*this.framebuffer.density}get height(){return this.framebuffer.height*this.framebuffer.density}update(){this.framebuffer._update(this.property)}rawTexture(){return this.framebuffer[this.property]}},ms=class{constructor(e,t={}){this.renderer=e,this.renderer.framebuffers.add(this),this._isClipApplied=!1,this.dirty={colorTexture:!1,depthTexture:!1},this.pixels=[],this.format=t.format||"unsigned-byte",this.channels=t.channels||(this.renderer._pInst._glAttributes.alpha?"rgba":"rgb"),this.useDepth=void 0===t.depth||t.depth,this.depthFormat=t.depthFormat||"float",this.textureFiltering=t.textureFiltering||"linear",void 0===t.antialias?this.antialiasSamples=this.renderer._pInst._glAttributes.antialias?2:0:"number"==typeof t.antialias?this.antialiasSamples=t.antialias:this.antialiasSamples=t.antialias?2:0,this.antialias=this.antialiasSamples>0,this.antialias&&"webgl2"!==this.renderer.webglVersion&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=t.density||this.renderer._pixelDensity;const n=this.renderer.GL;if(this.gl=n,t.width&&t.height){const e=this.renderer._adjustDimensions(t.width,t.height);this.width=e.adjustedWidth,this.height=e.adjustedHeight,this._autoSized=!1}else void 0===t.width!=(void 0===t.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=this.renderer.width,this.height=this.renderer.height,this._autoSized=!0;if(this._checkIfFormatsAvailable(),t.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===t.stencil||t.stencil),this.framebuffer=n.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=n.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();const r=this.renderer.states.curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.renderer.states.setValue("curCamera",r),this.draw(()=>this.renderer.clear())}resize(e,t){this._autoSized=!1;const n=this.renderer._adjustDimensions(e,t);e=n.adjustedWidth,t=n.adjustedHeight,this.width=e,this.height=t,this._handleResize()}pixelDensity(e){if(!e)return this.density;this._autoSized=!1,this.density=e,this._handleResize()}autoSized(e){if(void 0===e)return this._autoSized;this._autoSized=e,this._handleResize()}_checkIfFormatsAvailable(){const e=this.gl;this.useDepth&&"webgl"===this.renderer.webglVersion&&!e.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&"webgl"===this.renderer.webglVersion&&"float"===this.depthFormat&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=bt),["unsigned-byte","float","half-float"].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=yt),this.useDepth&&!["unsigned-int","float"].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=xt);const t=RC(this.renderer);t.float||"float"!==this.format||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=yt),this.useDepth&&!t.float&&"float"===this.depthFormat&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=bt),t.halfFloat||"half-float"!==this.format||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=yt),"rgb"===this.channels&&["float","half-float"].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=Mr)}_recreateTextures(){const e=this.gl;this._updateSize();const t=e.getParameter(e.TEXTURE_BINDING_2D),n=e.getParameter(e.FRAMEBUFFER_BINDING),r=e.createTexture();if(!r)throw new Error("Unable to create color texture");e.bindTexture(e.TEXTURE_2D,r);const i=this._glColorFormat();if(e.texImage2D(e.TEXTURE_2D,0,i.internalFormat,this.width*this.density,this.height*this.density,0,i.format,i.type,null),this.colorTexture=r,e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),this.useDepth){const t=e.createTexture();if(!t)throw new Error("Unable to create depth texture");const n=this._glDepthFormat();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n.internalFormat,this.width*this.density,this.height*this.density,0,n.format,n.type,null),e.framebufferTexture2D(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.TEXTURE_2D,t,0),this.depthTexture=t}if(this.antialias){if(this.colorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.colorRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),i.internalFormat,this.width*this.density,this.height*this.density),this.useDepth){const t=this._glDepthFormat();this.depthRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),t.internalFormat,this.width*this.density,this.height*this.density)}e.bindFramebuffer(e.FRAMEBUFFER,this.aaFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&e.framebufferRenderbuffer(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthRenderbuffer)}if(this.useDepth){this.depth=new fs(this,"depthTexture");const t=e.NEAREST;this.depthP5Texture=new cs(this.renderer,this.depth,{minFilter:t,magFilter:t}),this.renderer.textures.set(this.depth,this.depthP5Texture)}this.color=new fs(this,"colorTexture");const s="linear"===this.textureFiltering?e.LINEAR:e.NEAREST;this.colorP5Texture=new cs(this.renderer,this.color,{minFilter:s,magFilter:s}),this.renderer.textures.set(this.color,this.colorP5Texture),e.bindTexture(e.TEXTURE_2D,t),e.bindFramebuffer(e.FRAMEBUFFER,n)}_glColorFormat(){let e,t,n;const r=this.gl;return e="float"===this.format?r.FLOAT:"half-float"===this.format?"webgl2"===this.renderer.webglVersion?r.HALF_FLOAT:r.getExtension("OES_texture_half_float").HALF_FLOAT_OES:r.UNSIGNED_BYTE,t="rgba"===this.channels?r.RGBA:r.RGB,n="webgl2"===this.renderer.webglVersion?{[r.FLOAT]:{[r.RGBA]:r.RGBA32F},[r.HALF_FLOAT]:{[r.RGBA]:r.RGBA16F},[r.UNSIGNED_BYTE]:{[r.RGBA]:r.RGBA8,[r.RGB]:r.RGB8}}[e][t]:"half-float"===this.format?r.RGBA:t,{internalFormat:n,format:t,type:e}}_glDepthFormat(){let e,t,n;const r=this.gl;return e=this.useStencil?"float"===this.depthFormat?r.FLOAT_32_UNSIGNED_INT_24_8_REV:"webgl2"===this.renderer.webglVersion?r.UNSIGNED_INT_24_8:r.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:"float"===this.depthFormat?r.FLOAT:r.UNSIGNED_INT,t=this.useStencil?r.DEPTH_STENCIL:r.DEPTH_COMPONENT,n=this.useStencil?"float"===this.depthFormat?r.DEPTH32F_STENCIL8:"webgl2"===this.renderer.webglVersion?r.DEPTH24_STENCIL8:r.DEPTH_STENCIL:"webgl2"===this.renderer.webglVersion?"float"===this.depthFormat?r.DEPTH_COMPONENT32F:r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT,{internalFormat:n,format:t,type:e}}_updateSize(){this._autoSized&&(this.width=this.renderer.width,this.height=this.renderer.height,this.density=this.renderer._pixelDensity)}_canvasSizeChanged(){this._autoSized&&this._handleResize()}_handleResize(){const e=this.color,t=this.depth,n=this.colorRenderbuffer,r=this.depthRenderbuffer;this._deleteTexture(e),t&&this._deleteTexture(t);const i=this.gl;n&&i.deleteRenderbuffer(n),r&&i.deleteRenderbuffer(r),this._recreateTextures(),this.defaultCamera._resize()}createCamera(){const e=new ps(this);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),e}_deleteTexture(e){this.gl.deleteTexture(e.rawTexture()),this.renderer.textures.delete(e)}remove(){const e=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),e.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&e.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&e.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&e.deleteRenderbuffer(this.colorRenderbuffer),this.renderer.framebuffers.delete(this)}begin(){this.prevFramebuffer=this.renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.renderer.activeFramebuffers.push(this),this._beforeBegin(),this.renderer.push(),this.renderer.states.setValue("curCamera",this.defaultCamera),this.renderer.states.setValue("uPMatrix",this.renderer.states.uPMatrix.clone()),this.renderer.states.uPMatrix.set(this.defaultCamera.projMatrix),this.renderer.states.setValue("uViewMatrix",this.renderer.states.uViewMatrix.clone()),this.renderer.states.uViewMatrix.set(this.defaultCamera.cameraMatrix),this.renderer.resetMatrix(),this.renderer.states.uViewMatrix.set(this.renderer.states.curCamera.cameraMatrix),this.renderer.states.uModelMatrix.reset(),this.renderer._applyStencilTestIfClipping()}_framebufferToBind(){return this.antialias?this.aaFramebuffer:this.framebuffer}_update(e){if(this.dirty[e]&&this.antialias){const t=this.gl;t.bindFramebuffer(t.READ_FRAMEBUFFER,this.aaFramebuffer),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.framebuffer);const n={colorTexture:[t.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]};this.useDepth&&(n.depthTexture=[t.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);const[r,i]=n[e];t.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,r,i),this.dirty[e]=!1;const s=this.renderer.activeFramebuffer();s?t.bindFramebuffer(t.FRAMEBUFFER,s._framebufferToBind()):t.bindFramebuffer(t.FRAMEBUFFER,null)}}_beforeBegin(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferToBind()),this.renderer.viewport(this.width*this.density,this.height*this.density)}_beforeEnd(){this.antialias&&(this.dirty={colorTexture:!0,depthTexture:!0})}end(){const e=this.gl;if(this.renderer.pop(),this.renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(e.bindFramebuffer(e.FRAMEBUFFER,null),this.renderer.viewport(this.renderer._origViewport.width,this.renderer._origViewport.height)),this.renderer._applyStencilTestIfClipping()}draw(e){this.begin(),e(),this.end()}loadPixels(){this._update("colorTexture");const e=this.gl,t=this.renderer.activeFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer);const n=this._glColorFormat();this.pixels=TC(this.pixels,e,this.framebuffer,0,0,this.width*this.density,this.height*this.density,n.format,n.type),t?e.bindFramebuffer(e.FRAMEBUFFER,t._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null)}get(e,t,n,r){this._update("colorTexture");const i=this._glColorFormat();if(void 0===e&&void 0===t)e=0,t=0,n=this.width,r=this.height;else if(void 0===n&&void 0===r)return(e<0||t<0||e>=this.width||t>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),e=ds(e,0,this.width-1),t=ds(t,0,this.height-1)),MC(this.gl,this.framebuffer,e*this.density,t*this.density,i.format,i.type);e=ds(e,0,this.width-1),t=ds(t,0,this.height-1),n=ds(n,1,this.width-e),r=ds(r,1,this.height-t);const s=TC(void 0,this.gl,this.framebuffer,e*this.density,t*this.density,n*this.density,r*this.density,i.format,i.type),a=new Uint8ClampedArray(n*r*this.density*this.density*4);a.fill(255);const o=i.type===this.gl.RGB?3:4;for(let u=0;u<r*this.density;u++)for(let e=0;e<n*this.density;e++)for(let t=0;t<4;t++){const r=4*(u*n*this.density+e)+t;if(t<o){const i=4===o?r:(u*n*this.density+e)*o+t;a[r]=s[i]}}const l=new ci(n*this.density,r*this.density);return l.imageData=l.canvas.getContext("2d").createImageData(l.width,l.height),l.imageData.data.set(a),l.pixels=l.imageData.data,l.updatePixels(),1!==this.density&&l.resize(n,r),l}updatePixels(){const e=this.gl;this.colorP5Texture.bindTexture();const t=this._glColorFormat(),n=t.format===e.RGBA?4:3,r=this.width*this.height*this.density*this.density*n,i=t.type===e.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof i)||this.pixels.length!==r)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");e.texImage2D(e.TEXTURE_2D,0,t.internalFormat,this.width*this.density,this.height*this.density,0,t.format,t.type,this.pixels),this.colorP5Texture.unbindTexture(),this.dirty.colorTexture=!1;const s=this.renderer.activeFramebuffer();this.antialias?(this.begin(),this.renderer.push(),this.renderer.states.setValue("imageMode",Ie),this.renderer.setCamera(this.filterCamera),this.renderer.resetMatrix(),this.renderer.states.setValue("strokeColor",null),this.renderer.clear(),this.renderer._drawingFilter=!0,this.renderer.image(this,0,0,this.width,this.height,-this.renderer.width/2,-this.renderer.height/2,this.renderer.width,this.renderer.height),this.renderer._drawingFilter=!1,this.renderer.pop(),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),this.end()):(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),s?e.bindFramebuffer(e.FRAMEBUFFER,s._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null))}},"undefined"!=typeof p5&&LC(p5,p5.prototype),"undefined"!=typeof p5&&PC(p5,p5.prototype),li(),bi(),Ni(),vs=class{constructor(e){this.pInst=e,this.canvas=document.createElement("canvas"),this.canvas.width=e.width,this.canvas.height=e.height;let t=ve;this.gl=this.canvas.getContext("webgl2"),this.gl||(t=ge,this.gl=this.canvas.getContext("webgl")),this.gl?(this._renderer={GL:this.gl,registerEnabled:new Set,_curShader:null,_emptyTexture:null,webglVersion:t,states:{textureWrapX:this.gl.CLAMP_TO_EDGE,textureWrapY:this.gl.CLAMP_TO_EDGE},_arraysEqual:(e,t)=>JSON.stringify(e)===JSON.stringify(t),_getEmptyTexture:()=>{if(!this._emptyTexture){const e=new ci(1,1);e.set(0,0,255),this._emptyTexture=new cs(this._renderer,e)}return this._emptyTexture}},this._baseFilterShader=void 0,this.filterShaderSources={[lt]:Xi,[it]:Ki,[tt]:Qi,[ot]:$i,[nt]:Wi,[at]:qi,[st]:Yi,[rt]:Zi},this.filterShaders={},this.operation=null,this.filterParameter=1,this.customShader=null,this._shader=null,this.vertexBuffer=this.gl.createBuffer(),this.texcoordBuffer=this.gl.createBuffer(),this.vertices=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.texcoords=new Float32Array([0,1,1,1,0,0,1,0]),this._bindBufferData(this.vertexBuffer,this.gl.ARRAY_BUFFER,this.vertices),this._bindBufferData(this.texcoordBuffer,this.gl.ARRAY_BUFFER,this.texcoords)):console.error("WebGL not supported, cannot apply filter.")}_webGL2CompatibilityPrefix(e,t){let n="";return"webgl2"===this._renderer.webglVersion&&(n+="#version 300 es\n#define WEBGL2\n"),"vert"===e?n+="#define VERTEX_SHADER\n":"frag"===e&&(n+="#define FRAGMENT_SHADER\n"),t&&(n+=`precision ${t} float;\n`),n}baseFilterShader(){return this._baseFilterShader||(this._baseFilterShader=new zi(this._renderer,this._webGL2CompatibilityPrefix("vert","highp")+Gi+Vi,this._webGL2CompatibilityPrefix("frag","highp")+Gi+Hi,{vertex:{},fragment:{"vec4 getColor":"(FilterInputs inputs, in sampler2D canvasContent) {\n              return getTexture(canvasContent, inputs.texCoord);\n            }"}})),this._baseFilterShader}setOperation(e,t,n=null){this.operation=e,this.filterParameter=t,e in Oi&&void 0===t&&(this.filterParameter=Oi[e]),this.customShader=n,this._initializeShader()}_initializeShader(){if(this.customShader)return void(this._shader=this.customShader);if(!this.operation)return void console.error("No operation set for FilterRenderer2D, cannot initialize shader.");if(this.filterShaders[this.operation])return void(this._shader=this.filterShaders[this.operation]);const e=this.filterShaderSources[this.operation];if(!e)return void console.error("No shader available for this operation:",this.operation);const t=new zi(this._renderer,Ji,e);this.filterShaders[this.operation]=t,this._shader=t}_bindBufferData(e,t,n){const r=this.gl;r.bindBuffer(t,e),r.bufferData(t,n,r.STATIC_DRAW)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new cs(this._renderer,this.pInst.wrappedElt)),this._canvasTexture}_renderPass(){const e=this.gl;this._shader.bindShader();const t=this.pInst.pixelDensity?this.pInst.pixelDensity():1,n=[1/(this.pInst.width*t),1/(this.pInst.height*t)],r=this.canvasTexture;this._shader.setUniform("tex0",r),this._shader.setUniform("texelSize",n),this._shader.setUniform("canvasSize",[this.pInst.width,this.pInst.height]),this._shader.setUniform("radius",Math.max(1,this.filterParameter)),this._shader.setUniform("filterParameter",this.filterParameter),this._shader.setDefaultUniforms(),this.pInst.states.setValue("rectMode",Ie),this.pInst.states.setValue("imageMode",Ie),this.pInst.blendMode(We),this.pInst.resetMatrix();const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this._shader.setUniform("uModelViewMatrix",i),this._shader.setUniform("uProjectionMatrix",i),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this._shader.enableAttrib(this._shader.attributes.aPosition,2),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this._shader.enableAttrib(this._shader.attributes.aTexCoord,2),this._shader.bindTextures(),this._shader.disableRemainingAttributes(),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._shader.unbindShader()}applyFilter(){this._shader?(this.pInst.push(),this.pInst.resetMatrix(),"blur"!==this.operation||this.customShader?(this._renderPass(),this.pInst.clear(),this.pInst.blendMode(We),this.pInst.drawingContext.drawImage(this.canvas,0,0,this.pInst.width,this.pInst.height)):(this._shader.setUniform("direction",[1,0]),this._renderPass(),this.pInst.clear(),this.pInst.drawingContext.drawImage(this.canvas,0,0,this.pInst.width,this.pInst.height),this._shader.setUniform("direction",[0,1]),this._renderPass(),this.pInst.clear(),this.pInst.drawingContext.drawImage(this.canvas,0,0,this.pInst.width,this.pInst.height)),this.pInst.pop()):console.error("Cannot apply filter: shader not initialized.")}},ys="rgba(0,0,0,0)",bs=class extends di{constructor(e,t,n,r,i,s={}){super(e,t,n,r),this.canvas=this.elt=i||document.createElement("canvas"),r?(this._pInst._curElement=this,this._pInst.canvas=this.canvas):this.canvas.style.display="none",this.elt.id="defaultCanvas0",this.elt.classList.add("p5Canvas");for(const a of Object.getOwnPropertyNames(Nr.prototype))"constructor"!==a&&"_"!==a[0]&&Object.defineProperty(this,a,{get(){return this.wrappedElt[a]}});if(this.elt.width=t*this._pixelDensity,this.elt.height=n*this._pixelDensity,this.elt.style.width=`${t}px`,this.elt.style.height=`${n}px`,this._pInst._userNode)this._pInst._userNode.appendChild(this.elt);else{if(0===document.getElementsByTagName("main").length){let e=document.createElement("main");document.body.appendChild(e)}document.getElementsByTagName("main")[0].appendChild(this.elt)}this.drawingContext=this.canvas.getContext("2d",s),"display-p3"===s.colorSpace&&(this.states.colorMode=Cr),this.scale(this._pixelDensity,this._pixelDensity),this.wrappedElt=new Nr(this.elt,this._pInst),this.clipPath=null}get filterRenderer(){return this._filterRenderer||(this._filterRenderer=new vs(this)),this._filterRenderer}remove(){this.wrappedElt.remove(),this.wrappedElt=null,this.canvas=null,this.elt=null}getFilterGraphicsLayer(){if(!this.filterGraphicsLayer){const e=this._pInst;this.filterGraphicsLayer=new us(this.width,this.height,ge,e)}return this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}_applyDefaults(){this.states.setValue("_cachedFillStyle",void 0),this.states.setValue("_cachedStrokeStyle",void 0),this._cachedBlendMode=We,this._setFill(vt),this._setStroke(gt),this.drawingContext.lineCap=Ge,this.drawingContext.font="normal 12px sans-serif"}resize(e,t){super.resize(e,t);const n={};for(const i in this.drawingContext){const e=this.drawingContext[i];"object"!=typeof e&&"function"!=typeof e&&(n[i]=e)}this.canvas.width=e*this._pixelDensity,this.canvas.height=t*this._pixelDensity,this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`,this.drawingContext.scale(this._pixelDensity,this._pixelDensity);for(const i in n)try{this.drawingContext[i]=n[i]}catch(r){}}background(...e){if(this.push(),this.resetMatrix(),e[0]instanceof ci)if(e[1]>=0){const t=e[0];this.drawingContext.globalAlpha=e[1]/255,this._pInst.image(t,0,0,this.width,this.height)}else this._pInst.image(e[0],0,0,this.width,this.height);else{const t=this._pInst.color(...e);this._pInst._addAccsOutput?.()&&this._pInst._accsBackground?.(t._getRGBA([255,255,255,255]));const n=t.toString();this._setFill(n),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._isErasing&&this._pInst.erase()}this.pop()}clear(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}fill(...e){super.fill(...e);const t=this.states.fillColor;this._setFill(t.toString()),this._pInst._addAccsOutput?.()&&this._pInst._accsCanvasColors?.("fill",t._getRGBA([255,255,255,255]))}stroke(...e){super.stroke(...e);const t=this.states.strokeColor;this._setStroke(t.toString()),this._pInst._addAccsOutput?.()&&this._pInst._accsCanvasColors?.("stroke",t._getRGBA([255,255,255,255]))}erase(e,t){if(!this._isErasing){this.states.setValue("_cachedFillStyle",this.drawingContext.fillStyle);const n=this._pInst.color(255,e).toString();this.drawingContext.fillStyle=n,this.states.setValue("_cachedStrokeStyle",this.drawingContext.strokeStyle);const r=this._pInst.color(255,t).toString();this.drawingContext.strokeStyle=r;const i=this._cachedBlendMode;this.blendMode($e),this._cachedBlendMode=i,this._isErasing=!0}}noErase(){this._isErasing&&(this.drawingContext.fillStyle=this.states._cachedFillStyle,this.drawingContext.strokeStyle=this.states._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}drawShape(e){const t=new ii({strokeWeight:this.states.strokeWeight});e.accept(t),this._clipping?(this.clipPath.addPath(t.path),this.clipPath.closePath()):(this.states.fillColor&&this.drawingContext.fill(t.path),this.states.strokeColor&&this.drawingContext.stroke(t.path))}beginClip(e={}){super.beginClip(e),this.states.setValue("_cachedFillStyle",this.drawingContext.fillStyle);const t=this._pInst.color(255,0).toString();this.drawingContext.fillStyle=t,this.states.setValue("_cachedStrokeStyle",this.drawingContext.strokeStyle);const n=this._pInst.color(255,0).toString();this.drawingContext.strokeStyle=n;const r=this._cachedBlendMode;this.blendMode(We),this._cachedBlendMode=r,this.clipPath=new Path2D,this._clipInvert&&(this.clipPath.moveTo(-2*this.width,-2*this.height),this.clipPath.lineTo(-2*this.width,2*this.height),this.clipPath.lineTo(2*this.width,2*this.height),this.clipPath.lineTo(2*this.width,-2*this.height),this.clipPath.closePath())}endClip(){this.drawingContext.clip(this.clipPath),this.clipPath=null,super.endClip(),this.drawingContext.fillStyle=this.states._cachedFillStyle,this.drawingContext.strokeStyle=this.states._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}image(e,t,n,r,i,s,a,o,l){let u;e.gifProperties&&e._animateGif(this._pInst);try{e instanceof gi&&e._ensureCanvas(),this.states.tint&&e.canvas&&(u=this._getTintedImageCanvas(e)),u||(u=e.canvas||e.elt);let c=1;e.width&&e.width>0&&(c=u.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(u,c*t,c*n,c*r,c*i,s,a,o,l),this._isErasing&&this._pInst.erase()}catch(Rr){if("NS_ERROR_NOT_AVAILABLE"!==Rr.name)throw Rr}}_getTintedImageCanvas(e){if(!e.canvas)return e;e.tintCanvas||(e.tintCanvas=document.createElement("canvas")),e.tintCanvas.width!==e.canvas.width&&(e.tintCanvas.width=e.canvas.width),e.tintCanvas.height!==e.canvas.height&&(e.tintCanvas.height=e.canvas.height);const t=e.tintCanvas.getContext("2d");return t.save(),t.clearRect(0,0,e.canvas.width,e.canvas.height),this.states.tint[0]<255||this.states.tint[1]<255||this.states.tint[2]<255?(t.drawImage(e.canvas,0,0),t.globalCompositeOperation="luminosity",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="color",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="multiply",t.fillStyle=`rgb(${this.states.tint.slice(0,3).join(", ")})`,t.fillRect(0,0,e.canvas.width,e.canvas.height),t.globalCompositeOperation="destination-in",t.globalAlpha=this.states.tint[3]/255,t.drawImage(e.canvas,0,0)):(t.globalAlpha=this.states.tint[3]/255,t.drawImage(e.canvas,0,0)),t.restore(),e.tintCanvas}blendMode(e){if("subtract"===e)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if("source-over"!==e&&"destination-out"!==e&&"darken"!==e&&"lighten"!==e&&"difference"!==e&&"multiply"!==e&&"exclusion"!==e&&"screen"!==e&&"copy"!==e&&"overlay"!==e&&"hard-light"!==e&&"soft-light"!==e&&"color-dodge"!==e&&"color-burn"!==e&&"lighter"!==e)throw new Error(`Mode ${e} not recognized.`);this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}}blend(...e){const t=this.drawingContext.globalCompositeOperation,n=e[e.length-1],r=Array.prototype.slice.call(e,0,e.length-1);this.drawingContext.globalCompositeOperation=n,xs.prototype.copy.apply(this,r),this.drawingContext.globalCompositeOperation=t}_getPixel(e,t){let n,r;return n=this.drawingContext.getImageData(e,t,1,1).data,r=0,[n[0],n[1],n[2],n[3]]}loadPixels(){const e=this._pixelDensity,t=this.width*e,n=this.height*e,r=this.drawingContext.getImageData(0,0,t,n);this.imageData=r,this.pixels=r.data}set(e,t,n){if(e=Math.floor(e),t=Math.floor(t),n instanceof ci)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pixelDensity,this._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{let r=0,i=0,s=0,a=0,o=4*(t*this._pixelDensity*(this.width*this._pixelDensity)+e*this._pixelDensity);if(this.imageData||this.loadPixels(),"number"==typeof n)o<this.pixels.length&&(r=n,i=n,s=n,a=255);else if(Array.isArray(n)){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");o<this.pixels.length&&(r=n[0],i=n[1],s=n[2],a=n[3])}else n instanceof xs.Color&&o<this.pixels.length&&([r,i,s,a]=n._getRGBA([255,255,255,255]));for(let n=0;n<this._pixelDensity;n++)for(let l=0;l<this._pixelDensity;l++)o=4*((t*this._pixelDensity+l)*this.width*this._pixelDensity+(e*this._pixelDensity+n)),this.pixels[o]=r,this.pixels[o+1]=i,this.pixels[o+2]=s,this.pixels[o+3]=a}}updatePixels(e,t,n,r){const i=this._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(e=0,t=0,n=this.width,r=this.height),e*=i,t*=i,n*=i,r*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=this.imageData),this.drawingContext.putImageData(this.imageData,0,0,e,t,n,r)}arc(e,t,n,r,i,s,a){const o=this.clipPa||this.drawingContext,l=e+n/2,u=t+r/2,c=n/2,h=r/2,d=!("chord"===a||"open"===a||(s-i)%ke===0);return this.states.fillColor&&(this._clipping||o.beginPath(),o.ellipse(l,u,c,h,0,i,s),d&&o.lineTo(l,u),o.closePath(),this._clipping||o.fill()),this.states.strokeColor&&(this._clipping||o.beginPath(),o.ellipse(l,u,c,h,0,i,s),"pie"===a&&d&&o.lineTo(l,u),"pie"!==a&&"chord"!==a||o.closePath(),this._clipping||o.stroke()),this}ellipse(e){const t=this.clipPath||this.drawingContext,n=!!this.states.fillColor,r=this.states.strokeColor,i=parseFloat(e[0]),s=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]);if(n&&!r){if(this._getFill()===ys)return this}else if(!n&&r&&this._getStroke()===ys)return this;const l=i+a/2,u=s+o/2,c=a/2,h=o/2;this._clipping||t.beginPath(),t.ellipse(l,u,c,h,0,0,2*Math.PI),t.closePath(),!this._clipping&&n&&t.fill(),!this._clipping&&r&&t.stroke()}line(e,t,n,r){const i=this.clipPath||this.drawingContext;return this.states.strokeColor?(this._getStroke()===ys||(this._clipping||i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),i.stroke()),this):this}point(e,t){const n=this.clipPath||this.drawingContext;if(!this.states.strokeColor)return this;if(this._getStroke()===ys)return this;const r=this._getStroke(),i=this._getFill();this._clipping||this._setFill(r),this._clipping||n.beginPath(),n.arc(e,t,n.lineWidth/2,0,ke,!1),this._clipping||(n.fill(),this._setFill(i))}quad(e,t,n,r,i,s,a,o){const l=this.clipPath||this.drawingContext,u=!!this.states.fillColor,c=this.states.strokeColor;if(u&&!c){if(this._getFill()===ys)return this}else if(!u&&c&&this._getStroke()===ys)return this;return this._clipping||l.beginPath(),l.moveTo(e,t),l.lineTo(n,r),l.lineTo(i,s),l.lineTo(a,o),l.closePath(),!this._clipping&&u&&l.fill(),!this._clipping&&c&&l.stroke(),this}rect(e){const t=e[0],n=e[1],r=e[2],i=e[3];let s=e[4],a=e[5],o=e[6],l=e[7];const u=this.clipPath||this.drawingContext,c=!!this.states.fillColor,h=this.states.strokeColor;if(c&&!h){if(this._getFill()===ys)return this}else if(!c&&h&&this._getStroke()===ys)return this;if(this._clipping||u.beginPath(),void 0===s)u.rect(t,n,r,i);else{void 0===a&&(a=s),void 0===o&&(o=a),void 0===l&&(l=o);const e=Math.abs(r),c=Math.abs(i),h=e/2,d=c/2;e<2*s&&(s=h),c<2*s&&(s=d),e<2*a&&(a=h),c<2*a&&(a=d),e<2*o&&(o=h),c<2*o&&(o=d),e<2*l&&(l=h),c<2*l&&(l=d),u.roundRect(t,n,r,i,[s,a,o,l])}return!this._clipping&&this.states.fillColor&&u.fill(),!this._clipping&&this.states.strokeColor&&u.stroke(),this}triangle(e){const t=this.clipPath||this.drawingContext,n=!!this.states.fillColor,r=this.states.strokeColor,i=e[0],s=e[1],a=e[2],o=e[3],l=e[4],u=e[5];if(n&&!r){if(this._getFill()===ys)return this}else if(!n&&r&&this._getStroke()===ys)return this;this._clipping||t.beginPath(),t.moveTo(i,s),t.lineTo(a,o),t.lineTo(l,u),t.closePath(),!this._clipping&&n&&t.fill(),!this._clipping&&r&&t.stroke()}strokeCap(e){return"round"!==e&&"butt"!==e&&"square"!==e||(this.drawingContext.lineCap=e),this}strokeJoin(e){return"round"!==e&&"bevel"!==e&&"miter"!==e||(this.drawingContext.lineJoin=e),this}strokeWeight(e){return super.strokeWeight(e),this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this}_getFill(){return this.states._cachedFillStyle||this.states.setValue("_cachedFillStyle",this.drawingContext.fillStyle),this.states._cachedFillStyle}_setFill(e){e!==this.states._cachedFillStyle&&(this.drawingContext.fillStyle=e,this.states.setValue("_cachedFillStyle",e))}_getStroke(){return this.states._cachedStrokeStyle||this.states.setValue("_cachedStrokeStyle",this.drawingContext.strokeStyle),this.states._cachedStrokeStyle}_setStroke(e){e!==this.states._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this.states.setValue("_cachedStrokeStyle",e))}applyMatrix(e,t,n,r,i,s){this.drawingContext.transform(e,t,n,r,i,s)}getWorldToScreenMatrix(){let e=(new DOMMatrix).scale(1/this._pixelDensity).multiply(this.drawingContext.getTransform());return new Ci(e.toFloat32Array())}resetMatrix(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pixelDensity,this._pixelDensity),this}rotate(e){this.drawingContext.rotate(e)}scale(e,t){return this.drawingContext.scale(e,t),this}translate(e,t){return e instanceof xs.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this}push(){return this.drawingContext.save(),super.push()}pop(e){this.drawingContext.restore(),super.pop(e)}},xs=class e{static VERSION=me;static instance=null;static lifecycleHooks={presetup:[],postsetup:[],predraw:[],postdraw:[],remove:[]};static _checkForUserDefinedFunctions=()=>{};static _friendlyFileLoadError=()=>{};constructor(t,n){if(e.decorations.size>0){for(const[t,n]of e.decorations)for(const r in e.prototype)"function"==typeof e.prototype[r]&&t.some(e=>"string"==typeof e?e===r:e instanceof RegExp?e.test(r):void 0)&&(e.prototype[r]=n(e.prototype[r],{kind:"method",name:r,access:{},static:!1,private:!1,addInitializer(e){}}));e.decorations.clear()}this.hitCriticalError=!1,this._setupDone=!1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._events={},this._removeAbortController=new AbortController,this._removeSignal=this._removeAbortController.signal,this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._updateWindowSize();const r=BC(this);if(t)t(this),e._checkForUserDefinedFunctions(this);else{if(this._isGlobal=!0,window.hitCriticalError)return;e.instance=this;for(const n of Object.getOwnPropertyNames(e.prototype))"_"!==n[0]&&r(n);const t=["constructor","length"];for(const e in this)if(this.hasOwnProperty(e)){if("_"===e[0]||t.includes(e))continue;r(e)}}const i=()=>{this.focused=!0},s=()=>{this.focused=!1};window.addEventListener("focus",i),window.addEventListener("blur",s),e.lifecycleHooks.remove.push(function(){window.removeEventListener("focus",i),window.removeEventListener("blur",s)}),"complete"===document.readyState?this.#T():(this._startListener=this.#T.bind(this),window.addEventListener("load",this._startListener,!1))}get pixels(){return this._renderer.pixels}get drawingContext(){return this._renderer.drawingContext}static registerAddon(t){const n={};t(e,e.prototype,n);const r=Object.keys(e.lifecycleHooks);for(const i of r)"function"==typeof n[i]&&e.lifecycleHooks[i].push(n[i])}static decorations=new Map;static decorateHelper(t,n){let r=t;Array.isArray(t)||(r=[t]),e.decorations.set(r,n)}#M={};_customActions=new Proxy({},{get:(e,t)=>{if(!this.#M[t]){const e=this._isGlobal?window:this;"function"==typeof e[t]&&(this.#M[t]=e[t].bind(this))}return this.#M[t]}});async#T(){this.hitCriticalError||(this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),await this.#D(),this.hitCriticalError||this._recording||this._draw())}async#D(){if(await this._runLifecycleHook("presetup"),this.hitCriticalError)return;this.createCanvas(100,100,"p2d"),this._millisStart=window.performance.now();const e=this._isGlobal?window:this;if("function"==typeof e.setup&&await e.setup(),this.hitCriticalError)return;const t=document.getElementsByTagName("canvas");for(const n of t)n.style.touchAction="none","true"===n.dataset.hidden&&(n.style.visibility="",delete n.dataset.hidden);this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),this._setupDone=!0,(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),await this._runLifecycleHook("postsetup"),this._millisStart=window.performance.now()}async _draw(e){if(this.hitCriticalError)return;const t=e||window.performance.now(),n=t-this._lastTargetFrameTime,r=1e3/this._targetFrameRate;(!this._loop||n>=r-5)&&(this.deltaTime=t-this._lastRealFrameTime,this._frameRate=1e3/this.deltaTime,await this.redraw(),this._lastTargetFrameTime=Math.max(this._lastTargetFrameTime+r,t),this._lastRealFrameTime=t,void 0!==this._updateMouseCoords&&(this._updateMouseCoords(),this.movedX=0,this.movedY=0)),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw.bind(this)))}async remove(){if(this._startListener&&window.removeEventListener("load",this._startListener,!1),this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId),this._removeAbortController.abort();for(const e of this._elements)e.elt&&e.elt.parentNode&&e.elt.parentNode.removeChild(e.elt);await this._runLifecycleHook("remove")}if(this._isGlobal){for(const n in e.prototype)try{delete window[n]}catch(t){window[n]=void 0}for(const e in this)if(this.hasOwnProperty(e))try{delete window[e]}catch(t){window[e]=void 0}e.instance=null}}async _runLifecycleHook(t){await Promise.all(e.lifecycleHooks[t].map(e=>e.call(this)))}_initializeInstanceVariables(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._downKeys={},this._downKeyCodes={}}};for(const e in Et)xs.prototype[e]=Et[e];xs.registerAddon(WS),xs.registerAddon($S),xs.registerAddon(qS),xs.registerAddon(PC),xs.registerAddon(nC),xs.registerAddon(OC),xs.registerAddon(FC),"undefined"!=typeof p5&&UC(p5,p5.prototype),"undefined"!=typeof p5&&zC(p5,p5.prototype),"undefined"!=typeof p5&&VC(p5,p5.prototype),"undefined"!=typeof p5&&jC(p5,p5.prototype),li(),bi(),Ni(),xs.ColorConversion={_hsbaToHSLA(e){const t=e[0];let n=e[1];const r=e[2],i=(2-n)*r/2;return 0!==i&&(1===i?n=0:i<.5?n/=2-n:n=n*r/(2-2*i)),[t,n,i,e[3]]},_hsbaToRGBA(e){const t=6*e[0],n=e[1],r=e[2];let i=[];if(0===n)i=[r,r,r,e[3]];else{const s=Math.floor(t),a=r*(1-n),o=r*(1-n*(t-s)),l=r*(1-n*(1+s-t));let u,c,h;1===s?(u=o,c=r,h=a):2===s?(u=a,c=r,h=l):3===s?(u=a,c=o,h=r):4===s?(u=l,c=a,h=r):5===s?(u=r,c=a,h=o):(u=r,c=l,h=a),i=[u,c,h,e[3]]}return i},_hslaToHSBA(e){const t=e[0];let n=e[1];const r=e[2];let i;return i=r<.5?(1+n)*r:r+n-r*n,n=2*(i-r)/i,[t,n,i,e[3]]},_hslaToRGBA(e){const t=6*e[0],n=e[1],r=e[2];let i=[];if(0===n)i=[r,r,r,e[3]];else{let s;s=r<.5?(1+n)*r:r+n-r*n;const a=2*r-s,o=(e,t,n)=>(e<0?e+=6:e>=6&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t);i=[o(t+2,a,s),o(t,a,s),o(t-2,a,s),e[3]]}return i},_rgbaToHSBA(e){const t=e[0],n=e[1],r=e[2],i=Math.max(t,n,r),s=i-Math.min(t,n,r);let a,o;return 0===s?(a=0,o=0):(o=s/i,t===i?a=(n-r)/s:n===i?a=2+(r-t)/s:r===i&&(a=4+(t-n)/s),a<0?a+=6:a>=6&&(a-=6)),[a/6,o,i,e[3]]},_rgbaToHSLA(e){const t=e[0],n=e[1],r=e[2],i=Math.max(t,n,r),s=Math.min(t,n,r),a=i+s,o=i-s;let l,u;return 0===o?(l=0,u=0):(u=a<1?o/a:o/(2-a),t===i?l=(n-r)/o:n===i?l=2+(r-t)/o:r===i&&(l=4+(t-n)/o),l<0?l+=6:l>=6&&(l-=6)),[l/6,u,a/2,e[3]]}},_s=xs.ColorConversion,li(),bi(),Ni(),"undefined"!=typeof p5&&GC(p5,p5.prototype),li(),bi(),Ni(),ws={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Ss=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XC(this,e),this.init(t,n)}return ZC(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||ws,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,qC({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Es=function(){function e(){XC(this,e),this.observers={}}return ZC(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter(function(e){return e!==t}):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(e){e.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})}}]),e}(),Cs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},As="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Ts=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return XC(this,t),n=QC(this,JC(t).call(this)),As&&Es.call(KC(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return tA(t,e),ZC(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,s=[e,t];return n&&"string"!=typeof n&&(s=s.concat(n)),n&&"string"==typeof n&&(s=s.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(s=e.split(".")),aA(this.data,s)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},s=this.options.keySeparator;void 0===s&&(s=".");var a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),sA(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var o=aA(this.data,a)||{};r?lA(o,n,i):o=qC({},o,n),sA(this.data,a,o),s.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?qC({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(Es),Ms={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var s=this;return e.forEach(function(e){s.processors[e]&&(t=s.processors[e].process(t,n,r,i))}),t}},Ds={},ks=function(e){function t(e){var n,r,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return XC(this,t),n=QC(this,JC(t).call(this)),As&&Es.call(KC(n)),r=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i=e,s=KC(n),r.forEach(function(e){i[e]&&(s[e]=i[e])}),n.options=a,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Ss.create("translator"),n}return tA(t,e),ZC(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:i};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var i=this;if("object"!==HC(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),o=a.key,l=a.namespaces,u=l[l.length-1],c=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return u+d+o}return o}var p=this.resolve(e,n),f=p&&p.res,m=p&&p.usedKey||o,g=p&&p.exactUsedKey||o,v=Object.prototype.toString.apply(f),y=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject;if(b&&f&&"string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f&&["[object Number]","[object Function]","[object RegExp]"].indexOf(v)<0&&("string"!=typeof y||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,n):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(s){var x="[object Array]"===v,_=x?[]:{},w=x?g:m;for(var S in f)if(Object.prototype.hasOwnProperty.call(f,S)){var E="".concat(w).concat(s).concat(S);_[S]=this.translate(E,qC({},n,{joinArrays:!1,ns:l})),_[S]===E&&(_[S]=f[S])}f=_}}else if(b&&"string"==typeof y&&"[object Array]"===v)(f=f.join(y))&&(f=this.extendTranslation(f,e,n,r));else{var C=!1,A=!1,T=void 0!==n.count&&"string"!=typeof n.count,M=t.hasDefaultValue(n),D=T?this.pluralResolver.getSuffix(c,n.count):"",k=n["defaultValue".concat(D)]||n.defaultValue;!this.isValidLookup(f)&&M&&(C=!0,f=k),this.isValidLookup(f)||(A=!0,f=o);var N=M&&k!==f&&this.options.updateMissing;if(A||C||N){if(this.logger.log(N?"updateKey":"missingKey",c,u,o,N?k:f),s){var F=this.resolve(o,qC({},n,{keySeparator:!1}));F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var I=[],R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&R&&R[0])for(var L=0;L<R.length;L++)I.push(R[L]);else"all"===this.options.saveMissingTo?I=this.languageUtils.toResolveHierarchy(n.lng||this.language):I.push(n.lng||this.language);var P=function(e,t,r){i.options.missingKeyHandler?i.options.missingKeyHandler(e,u,t,N?r:f,N,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,u,t,N?r:f,N,n),i.emit("missingKey",e,u,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?I.forEach(function(e){i.pluralResolver.getSuffixes(e).forEach(function(t){P([e],o+t,n["defaultValue".concat(t)]||k)})}):P(I,o,k))}f=this.extendTranslation(f,e,n,p,r),A&&f===o&&this.options.appendNamespaceToMissingKey&&(f="".concat(u,":").concat(o)),A&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,r,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(qC({},n,{interpolation:qC({},this.options.interpolation,n.interpolation)}));var a,o=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(o){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=qC({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),o){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):s.translate.apply(s,r.concat([t]))},n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,d="string"==typeof h?[h]:h;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=Ms.handle(d,e,t,this.options&&this.options.postProcessPassResolved?qC({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,s,a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,o),u=l.key;n=u;var c=l.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var h=void 0!==o.count&&"string"!=typeof o.count,d=void 0!==o.context&&"string"==typeof o.context&&""!==o.context,p=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);c.forEach(function(e){a.isValidLookup(t)||(s=e,!Ds["".concat(p[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(s)&&(Ds["".concat(p[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(function(n){if(!a.isValidLookup(t)){i=n;var s,l,c=u,p=[c];for(a.i18nFormat&&a.i18nFormat.addLookupKeys?a.i18nFormat.addLookupKeys(p,u,n,e,o):(h&&(s=a.pluralResolver.getSuffix(n,o.count)),h&&d&&p.push(c+s),d&&p.push(c+="".concat(a.options.contextSeparator).concat(o.context)),h&&p.push(c+=s));l=p.pop();)a.isValidLookup(t)||(r=l,t=a.getResource(n,e,l,o))}}))})}}),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:s}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),t}(Es),Ns=function(){function e(t){XC(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ss.create("languageUtils")}return ZC(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=hA(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=hA(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=hA(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach(function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}}),!t&&this.options.supportedLngs&&e.forEach(function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find(function(e){if(0===e.indexOf(r))return e})}}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):"string"==typeof e&&s(this.formatLanguageCode(e)),r.forEach(function(e){i.indexOf(e)<0&&s(n.formatLanguageCode(e))}),i}}]),e}(),Fs=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Is={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},Rs=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XC(this,e),this.languageUtils=t,this.options=r,this.logger=Ss.create("pluralResolver"),this.rules=(n={},Fs.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:Is[e.fc]}})}),n)}return ZC(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map(function(e){return t+e})}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map(function(n){return t.getSuffix(e,n)}):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),s=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===s?s="plural":1===s&&(s=""));var a=function(){return n.options.prepend&&s.toString()?n.options.prepend+s.toString():s.toString()};return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?"_plural_".concat(s.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Ls=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};XC(this,e),this.logger=Ss.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return ZC(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:cA,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?uA(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?uA(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?uA(t.nestingPrefix):t.nestingPrefixEscaped||uA("$t("),this.nestingSuffix=t.nestingSuffix?uA(t.nestingSuffix):t.nestingSuffixEscaped||uA(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,s,a,o=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(o.formatSeparator)<0){var i=oA(t,l,e);return o.alwaysFormat?o.format(i,void 0,n):i}var s=e.split(o.formatSeparator),a=s.shift().trim(),u=s.join(o.formatSeparator).trim();return o.format(oA(t,l,a),u,n,r)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return o.escapeValue?u(o.escape(e)):u(e)}}].forEach(function(t){for(a=0;i=t.regex.exec(e);){if(void 0===(s=c(i[1].trim())))if("function"==typeof h){var n=h(e,i,r);s="string"==typeof n?n:""}else{if(d){s=i[0];continue}o.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),s=""}else"string"==typeof s||o.useRawValueToEscape||(s=rA(s));if(e=e.replace(i[0],t.safeValue(s)),t.regex.lastIndex=0,++a>=o.maxReplaces)break}}),e}},{key:"nest",value:function(e,t){var n,r,i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=qC({},s);function o(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=qC({},t,a))}catch(Rr){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),Rr),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],u=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map(function(e){return e.trim()});n[1]=c.shift(),l=c,u=!0}if((r=t(o.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=rA(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=l.reduce(function(e,t){return i.format(e,t,s.lng,s)},r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}(),Ps=function(e){function t(e,n,r){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return XC(this,t),i=QC(this,JC(t).call(this)),As&&Es.call(KC(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=s,i.logger=Ss.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,s.backend,s),i}return tA(t,e),ZC(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,s=[],a=[],o=[],l=[];return e.forEach(function(e){var r=!0;t.forEach(function(t){var o="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[o]=2:i.state[o]<0||(1===i.state[o]?a.indexOf(o)<0&&a.push(o):(i.state[o]=1,r=!1,a.indexOf(o)<0&&a.push(o),s.indexOf(o)<0&&s.push(o),l.indexOf(t)<0&&l.push(t)))}),r||o.push(e)}),(s.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:s,pending:a,toLoadLanguages:o,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),n&&this.store.addResourceBundle(i,s,n),this.state[e]=t?-1:2;var a={};this.queue.forEach(function(n){var r,o,l,u,c,h;r=n.loaded,o=s,u=iA(r,[i],Object),c=u.obj,h=u.k,c[h]=c[h]||[],l&&(c[h]=c[h].concat(o)),l||c[h].push(o),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach(function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach(function(t){a[e].indexOf(t)<0&&a[e].push(t)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,function(o,l){o&&l&&i<5?setTimeout(function(){r.read.call(r,e,t,n,i+1,2*s,a)},s):a(o,l)}):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(function(e){n.loadOne(e)})}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(s," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(s," for language ").concat(i),a),t.loaded(e,r,a)})}},{key:"saveMissing",value:function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,qC({},s,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(Es),Os=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(XC(this,t),e=QC(this,JC(t).call(this)),As&&Es.call(KC(e)),e.options=dA(n),e.services={},e.logger=Ss,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),QC(e,KC(e));setTimeout(function(){e.init(n,r)},0)}return e}return tA(t,e),ZC(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=qC({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===HC(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===HC(e[2])||"object"===HC(e[3])){var n=e[3]||e[2];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,dA(t)),this.format=this.options.interpolation.format,n||(n=pA),!this.options.isClone){this.modules.logger?Ss.init(r(this.modules.logger),this.options):Ss.init(null,this.options);var i=new Ns(this.options);this.store=new Ts(this.options.resources,this.options);var s=this.services;s.logger=Ss,s.resourceStore=this.store,s.languageUtils=i,s.pluralResolver=new Rs(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new Ls(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Ps(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new ks(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}});var o=nA(),l=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),o.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),o}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pA,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],s=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach(function(e){i.indexOf(e)<0&&i.push(e)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return s(e)}),this.options.preload&&this.options.preload.forEach(function(e){return s(e)}),this.services.backendConnector.load(i,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=nA();return e||(e=this.languages),t||(t=this.options.ns),n||(n=pA),this.services.backendConnector.reload(e,t,function(e){r.resolve(),n(e)}),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Ms.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=nA();this.emit("languageChanging",e);var i=function(e){var i="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve(function(){return n.t.apply(n,arguments)}),t&&t(e,function(){return n.t.apply(n,arguments)})}(e,i)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i;if("object"!==HC(r)){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];i=n.options.overloadTranslationOptionHandler([t,r].concat(a))}else i=qC({},r);return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var o=n.precheck(this,a);if(void 0!==o)return o}return!!this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||!(!a(r,e)||i&&!a(s,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=nA();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=nA();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter(function(e){return r.indexOf(e)<0});return i.length?(this.options.preload=r.concat(i),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pA,i=qC({},this.options,n,{isClone:!0}),s=new t(i);return["store","services","language"].forEach(function(t){s[t]=e[t]}),s.services=qC({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new ks(s.services,s.options),s.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.emit.apply(s,[e].concat(n))}),s.init(i,r),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),t}(Es)),Bs=Os,zs=(Us=[]).forEach,Vs=Us.slice,js={create:function(e,t,n,r){var i,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/"};if(n){var a=new Date;a.setTime(a.getTime()+60*n*1e3),i="; expires="+a.toUTCString()}else i="";r=r?"domain="+r+";":"",s=Object.keys(s).reduce(function(e,t){return e+";"+t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})+"="+s[t]},""),document.cookie=e+"="+encodeURIComponent(t)+i+";"+r+s},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},Gs={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=js.read(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&js.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},Hs={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");i>0&&n[r].substring(0,i)===e.lookupQuerystring&&(t=n[r].substring(i+1))}return t}};try{Ws="undefined"!==window&&null!==window.localStorage,$s="i18next.translate.boo",window.localStorage.setItem($s,"foo"),window.localStorage.removeItem($s)}catch(Rr){Ws=!1}qs={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&Ws){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&Ws&&window.localStorage.setItem(t.lookupLocalStorage,e)}};try{Xs="undefined"!==window&&null!==window.sessionStorage,Ys="i18next.translate.boo",window.sessionStorage.setItem(Ys,"foo"),window.sessionStorage.removeItem(Ys)}catch(Rr){Xs=!1}if(Zs={name:"sessionStorage",lookup:function(e){var t;if(e.lookupsessionStorage&&Xs){var n=window.sessionStorage.getItem(e.lookupsessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupsessionStorage&&Xs&&window.sessionStorage.setItem(t.lookupsessionStorage,e)}},Ks={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Qs={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},Js={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},ea={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}},ta=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};XC(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return ZC(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return zs.call(Vs.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],checkWhitelist:!0,checkForSimilarInWhitelist:!1}),this.options.checkForSimilarInWhitelist&&(this.options.checkWhitelist=!0),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Gs),this.addDetector(Hs),this.addDetector(qs),this.addDetector(Zs),this.addDetector(Ks),this.addDetector(Qs),this.addDetector(Js),this.addDetector(ea)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n,r=[];if(e.forEach(function(e){if(t.detectors[e]){var n=t.detectors[e].lookup(t.options);n&&"string"==typeof n&&(n=[n]),n&&(r=r.concat(n))}}),r.forEach(function(e){if(!n){var r=t.services.languageUtils.formatLanguageCode(e);t.options.checkWhitelist&&!t.services.languageUtils.isWhitelisted(r)||(n=r),!n&&t.options.checkForSimilarInWhitelist&&(n=t.getSimilarInWhitelist(r))}}),!n){var i=this.i18nOptions.fallbackLng;"string"==typeof i&&(i=[i]),i||(i=[]),n="[object Array]"===Object.prototype.toString.apply(i)?i[0]:i[0]||i.default&&i.default[0]}return n}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)}))}},{key:"getSimilarInWhitelist",value:function(e){var t=this;if(this.i18nOptions.whitelist){if(e.includes("-")){var n=e.split("-")[0],r=this.services.languageUtils.formatLanguageCode(n);if(this.services.languageUtils.isWhitelisted(r))return r;e=r}var i=this.i18nOptions.whitelist.find(function(n){var r=t.services.languageUtils.formatLanguageCode(n);if(r.startsWith(e))return r});return i||void 0}}}]),e}(),ta.type="languageDetector",na=ta,ia=h({"node_modules/p5/translations/en/translation.json":()=>{ra={fes:{autoplay:"The media that tried to play (with '{{src}}') wasn't allowed to by this browser, most likely due to the browser's autoplay policy.\n\n+ More info: {{url}}",checkUserDefinedFns:"It seems that you may have accidentally written {{name}} instead of {{actualName}}. Please correct it if it's not intentional.",fileLoadError:{bytes:"It looks like there was a problem loading your file. {{suggestion}}",font:"It looks like there was a problem loading your font. {{suggestion}}",gif:"There was some trouble loading your GIF. Make sure that your GIF is using 87a or 89a encoding.",image:"It looks like there was a problem loading your image. {{suggestion}}",json:"It looks like there was a problem loading your JSON file. {{suggestion}}",large:"If your large file isn't fetched successfully, we recommend splitting the file into smaller segments and fetching those.",strings:"It looks like there was a problem loading your text file. {{suggestion}}",suggestion:"Try checking if the file path ({{filePath}}) is correct, hosting the file online, or running a local server.\n\n+ More info: {{url}}",table:"It looks like there was a problem loading your table file. {{suggestion}}",xml:"It looks like there was a problem loading your XML file. {{suggestion}}"},friendlyParamError:{type_EMPTY_VAR:"{{location}} {{func}}() was expecting {{formatType}} for the {{position}} parameter, received an empty variable instead. If not intentional, this is often a problem with scope.\n\n+ More info: {{url}}",type_TOO_FEW_ARGUMENTS:"{{location}} {{func}}() was expecting at least {{minParams}} arguments, but received only {{argCount}}.",type_TOO_MANY_ARGUMENTS:"{{location}} {{func}}() was expecting no more than {{maxParams}} arguments, but received {{argCount}}.",type_WRONG_TYPE:"{{location}} {{func}}() was expecting {{formatType}} for the {{position}} parameter, received {{argType}} instead."},globalErrors:{reference:{cannotAccess:'\n{{location}} "{{symbol}}" is used before declaration. Make sure you have declared the variable before using it.\n\n+ More info: {{url}}',notDefined:'\n{{location}} "{{symbol}}" is not defined in the current scope. If you have defined it in your code, you should check its scope, spelling, and letter-casing (JavaScript is case-sensitive).\n\n+ More info: {{url}}'},stackSubseq:"â””[{{location}}] \n\t Called from line {{line}} in {{func}}()\n",stackTop:"â”Œ[{{location}}] \n\t Error at line {{line}} in {{func}}()\n",syntax:{badReturnOrYield:"\nSyntax Error - return lies outside of a function. Make sure youâ€™re not missing any brackets, so that return lies inside a function.\n\n+ More info: {{url}}",invalidToken:"\nSyntax Error - Found a symbol that JavaScript doesn't recognize or didn't expect at it's place.\n\n+ More info: {{url}}",missingInitializer:"\nSyntax Error - A const variable is declared but not initialized. In JavaScript, an initializer for a const is required. A value must be specified in the same statement in which the variable is declared. Check the line number in the error and assign the const variable a value.\n\n+ More info: {{url}}",redeclaredVariable:'\nSyntax Error - "{{symbol}}" is being redeclared. JavaScript doesn\'t allow declaring a variable more than once. Check the line number in error for redeclaration of the variable.\n\n+ More info: {{url}}',unexpectedToken:"\nSyntax Error - Symbol present at a place that wasn't expected.\nUsually this is due to a typo. Check the line number in the error for anything missing/extra.\n\n+ More info: {{url}}"},type:{constAssign:"\n{{location}} A const variable is being re-assigned. In javascript, re-assigning a value to a constant is not allowed. If you want to re-assign new values to a variable, make sure it is declared as var or let.\n\n+ More info: {{url}}",notfunc:'\n{{location}} "{{symbol}}" could not be called as a function.\nCheck the spelling, letter-casing (JavaScript is case-sensitive) and its type.\n\n+ More info: {{url}}',notfuncObj:'\n{{location}} "{{symbol}}" could not be called as a function.\nVerify whether "{{obj}}" has "{{symbol}}" in it and check the spelling, letter-casing (JavaScript is case-sensitive) and its type.\n\n+ More info: {{url}}',readFromNull:"\n{{location}} The property of null can't be read. In javascript the value null indicates that an object has no value.\n\n+ More info: {{url}}",readFromUndefined:"\n{{location}} Cannot read property of undefined. Check the line number in error and make sure the variable which is being operated is not undefined.\n\n + More info: {{url}}"}},libraryError:'{{location}} An error with message "{{error}}" occurred inside the p5js library when {{func}} was called. If not stated otherwise, it might be an issue with the arguments passed to {{func}}.',location:"[{{file}}, line {{line}}]",misspelling:'{{location}} It seems that you may have accidentally written "{{name}}" instead of "{{actualName}}". Please correct it to {{actualName}} if you wish to use the {{type}} from p5.js.',misspelling_plural:'{{location}} It seems that you may have accidentally written "{{name}}".\nYou may have meant one of the following: \n{{suggestions}}',misusedTopLevel:"Did you just try to use p5.js's {{symbolName}} {{symbolType}}? If so, you may want to move it into your sketch's setup() function.\n\n+ More info: {{url}}",preloadDisabled:"The preload() function has been removed in p5.js 2.0. Please load assets in setup() using async / await keywords or callbacks instead. See https://github.com/processing/p5.js-compatibility for more information about 2.0 and compatibility, or https://dev.to/limzykenneth/asynchronous-p5js-20-458f for more information about promises and async/await.",positions:{p_1:"first",p_10:"tenth",p_11:"eleventh",p_12:"twelfth",p_2:"second",p_3:"third",p_4:"fourth",p_5:"fifth",p_6:"sixth",p_7:"seventh",p_8:"eighth",p_9:"ninth"},pre:"\nðŸŒ¸ p5.js says: {{message}}",sketchReaderErrors:{reservedConst:'you have used a p5.js reserved variable "{{symbol}}" make sure you change the variable name to something else.\n\n+ More info: {{url}}',reservedFunc:'you have used a p5.js reserved function "{{symbol}}" make sure you change the function name to something else.\n\n+ More info: {{url}}'},welcome:"Welcome! This is your friendly debugger. To turn me off, switch to using p5.min.js.",wrongPreload:'{{location}} An error with message "{{error}}" occurred inside the p5js library when "{{func}}" was called. If not stated otherwise, it might be due to "{{func}}" being called from preload. Nothing besides load calls (loadImage, loadJSON, loadFont, loadStrings, etc.) should be inside the preload function.'}}}}),aa=h({"node_modules/p5/translations/es/translation.json":()=>{sa={fes:{autoplay:"Su browser impidÃ­o un medio tocar (de '{{src}}'), posiblemente porque las reglas de autoplay. Para aprender mÃ¡s, visite {{link}}.",checkUserDefinedFns:"",fileLoadError:{bytes:"",font:"",gif:"",image:"",json:"",large:"",strings:"",suggestion:"",table:"",xml:""},friendlyParamError:{type_EMPTY_VAR:"",type_TOO_FEW_ARGUMENTS:"",type_TOO_MANY_ARGUMENTS:"",type_WRONG_TYPE:""},globalErrors:{reference:{cannotAccess:"",notDefined:""},stackSubseq:"",stackTop:"",syntax:{badReturnOrYield:"",invalidToken:"",missingInitializer:"",redeclaredVariable:"",unexpectedToken:""},type:{constAssign:"",notfunc:"",notfuncObj:"",readFromNull:"",readFromUndefined:""}},libraryError:"",location:"",misspelling:"",misspelling_plural:"",misusedTopLevel:"",positions:{p_1:"",p_10:"",p_11:"",p_12:"",p_2:"",p_3:"",p_4:"",p_5:"",p_6:"",p_7:"",p_8:"",p_9:""},pre:"ðŸŒ¸ p5.js dice: {{message}}",sketchReaderErrors:{reservedConst:"",reservedFunc:""},welcome:"",wrongPreload:""}}}}),la=h({"node_modules/p5/translations/ko/translation.json":()=>{oa={fes:{autoplay:"ë¯¸ë””ì–´('{{src}}')ê°€ ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìž¬ìƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ê³  ê³„ì‹  ë¸Œë¼ìš°ì €ì˜ ìžë™ ìž¬ìƒ ì •ì±… ë•Œë¬¸ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",checkUserDefinedFns:"í˜¹ì‹œ {{actualName}} ëŒ€ì‹  {{name}}ë¥¼ ì“´ ê²ƒì´ ì•„ë‹Œì§€ ì‚´íŽ´ë³´ì„¸ìš”.",fileLoadError:{bytes:"íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",font:"ê¸€ê¼´ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",gif:"GIF íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. GIF íŒŒì¼ì˜ ì¸ì½”ë”© ë°©ì‹ì´ 87aì´ê±°ë‚˜ 89aì¸ì§€ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.",image:"ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",json:"JSON íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",large:"ìš©ëŸ‰ì´ í° íŒŒì¼ì„ í•œêº¼ë²ˆì— ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. íŒŒì¼ ìš©ëŸ‰ì„ ì¤„ì—¬ ë³´ì„¸ìš”.",strings:"í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",suggestion:"íŒŒì¼ ê²½ë¡œ({{filePath}})ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ë³´ì„¸ìš”. í˜¹ì€ í•´ë‹¹ íŒŒì¼ì„ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê±°ë‚˜ ë¡œì»¬ ì„œë²„ë¥¼ êµ¬ë™í•˜ì—¬ ì›¹ì— ì˜¬ë¦¬ëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ ë³´ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",table:"í…Œì´ë¸” íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}",xml:"XML íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. {{suggestion}}"},friendlyParamError:{type_EMPTY_VAR:"{{location}} {{formatType}} íƒ€ìž… ê°’ì„ ë°›ëŠ” {{func}}()ì˜ {{position}} ë§¤ê°œë³€ìˆ˜(parameter)ì— ì•„ë¬´ ê°’ë„ ì „ë‹¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë²”ìœ„(scope)ì™€ ê´€ë ¨ëœ ë¬¸ì œì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",type_TOO_FEW_ARGUMENTS:"{{location}} ìµœì†Œ {{minParams}}ê°œì˜ ì¸ìˆ˜(argument)ë¥¼ ë°›ëŠ” í•¨ìˆ˜ {{func}}()ì— ì¸ìˆ˜ê°€ {{argCount}}ê°œë§Œ ìž…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.",type_TOO_MANY_ARGUMENTS:"{{location}} ìµœëŒ€ {{maxParams}}ê°œì˜ ì¸ìˆ˜(argument)ë¥¼ ë°›ëŠ” í•¨ìˆ˜ {{func}}()ì— ì¸ìˆ˜ê°€ {{argCount}}ê°œë‚˜ ìž…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.",type_WRONG_TYPE:"{{location}} {{formatType}} íƒ€ìž…ì˜ ê°’ì„ ë°›ëŠ” {{func}}()ì˜ {{position}} ë§¤ê°œë³€ìˆ˜(parameter)ì— {{argType}} íƒ€ìž…ì˜ ê°’ì´ ìž…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤."},globalErrors:{reference:{cannotAccess:'\n{{location}} "{{symbol}}"ê°€ ì„ ì–¸ë˜ì§€ ì•Šì€ ì±„ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì „, ë¨¼ì € ì„ ì–¸í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}',notDefined:'\n{{location}} "{{symbol}}"ì€ í˜„ìž¬ ë²”ìœ„(scope) ì•ˆì— ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë§Œì•½ ì •ì˜ë¥¼ í–ˆë‹¤ë©´, í•´ë‹¹ ë²”ìœ„ì™€ ì˜¤íƒˆìž, ëŒ€ì†Œë¬¸ìž ë“±ì„ í™•ì¸í•´ë³´ì„¸ìš” (ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ëŒ€ì†Œë¬¸ìžë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤).\n\n+ ì¶”ê°€ ì •ë³´: {{url}}'},stackSubseq:"â””[{{location}}] \n\t {{func}}()ì— ìžˆëŠ” ì¤„{{line}}ì—ì„œ í˜¸ì¶œ\n",stackTop:"â”Œ[{{location}}] \n\t {{func}}()ì— ìžˆëŠ” ì¤„{{line}}ì—ì„œ ì˜¤ë¥˜ ë°œìƒ\n",syntax:{badReturnOrYield:"\nêµ¬ë¬¸ ì˜¤ë¥˜ - ëŒ€ê´„í˜¸ê°€ ì œëŒ€ë¡œ ì“°ì˜€ëŠ”ì§€ í™•ì¸í•´ ë³¸ í›„, returnì„ í•¨ìˆ˜ ì•ˆì— ë„£ì–´ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",invalidToken:"\nêµ¬ë¬¸ ì˜¤ë¥˜ - ìžë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì¸ì‹í•  ìˆ˜ ì—†ê±°ë‚˜, ì í•©í•˜ì§€ ì•Šì€ ê¸°í˜¸ë‚˜ ë¬¸êµ¬ê°€ ìž…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",missingInitializer:"\nêµ¬ë¬¸ ì˜¤ë¥˜ - const ë³€ìˆ˜ê°€ ì„ ì–¸ë˜ì—ˆì§€ë§Œ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë³€ìˆ˜ê°€ ì„ ì–¸ëœ ëª…ë ¹ë¬¸ ì•ˆì—ì„œ ê°’ì„ ì§€ì •í•´ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",redeclaredVariable:'\nêµ¬ë¬¸ ì˜¤ë¥˜ - ì´ë¯¸ ì„ ì–¸ëœ "{{symbol}}"ê°€ ìž¬ì„ ì–¸ë˜ì—ˆìŠµë‹ˆë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê°™ì€ ë³€ìˆ˜ë¥¼ í•œ ë²ˆ ì´ìƒ ì„ ì–¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}',unexpectedToken:"\nêµ¬ë¬¸ ì˜¤ë¥˜ - ìž…ë ¥ëœ ë¬¸êµ¬ê°€ ì˜ˆìƒí•˜ì§€ ëª»í•œ ìœ„ì¹˜ì— ìžˆìŠµë‹ˆë‹¤.ë³´í†µ ì´ëŸ° ìƒí™©ì€ ì˜¤íƒˆìž ë•Œë¬¸ì— ì¼ì–´ë‚˜ëŠ” ê²½ìš°ê°€ ë§ŽìŠµë‹ˆë‹¤. ëˆ„ë½ë˜ê±°ë‚˜ ì¶”ê°€ëœ ë‚´ìš©ì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}"},type:{constAssign:"\n{{location}} const ë³€ìˆ˜ê°€ ìž¬ì§€ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” const ë³€ìˆ˜ì— ë‹¤ë¥¸ ê°’ì„ ì—¬ëŸ¬ ë²ˆ ì§€ì •í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ìƒˆë¡œìš´ ê°’ì„ ì—¬ëŸ¬ ë²ˆ ì§€ì •í•˜ì‹œë ¤ë©´, const ëŒ€ì‹  varë‚˜ letì„ ì¨ì„œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",notfunc:'\n{{location}} "{{symbol}}"ëŠ” í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íƒ€ìž…ê³¼ ì˜¤íƒˆìž, ëŒ€ì†Œë¬¸ìž ë“±ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}',notfuncObj:'\n{{location}} "{{symbol}}"ëŠ” í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. "{{obj}}"ê°€ "{{symbol}}"ë¥¼ ê°€ì§€ê³  ìžˆëŠ”ì§€ ì‚´íŽ´ë³´ê³ , íƒ€ìž…ê³¼ ì˜¤íƒˆìž, ëŒ€ì†Œë¬¸ìž ë“±ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}',readFromNull:"\n{{location}} nullì˜ ì†ì„±(property)ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ nullì´ëž€, ê°ì²´(object)ì— ì£¼ì–´ì§„ ê°’ì´ ë¹„ì–´ìžˆë‹¤ëŠ” ëœ»ìž…ë‹ˆë‹¤.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",readFromUndefined:"\n{{location}} undefinedì˜ ì†ì„±(property)ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜¹ì‹œ ì—°ì‚° ì¤‘ì¸ ë³€ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}"}},libraryError:'{{location}} í•¨ìˆ˜ {{func}}ê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œ,  "{{error}}" ì˜¤ë¥˜ê°€ p5js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ì—ì„œ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ {{func}}ì— ì „ë‹¬í•œ ì¸ìˆ˜(argument)ê°€ ë¬¸ì œì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',location:"[{{file}}, ì¤„{{line}}]",misspelling:'{{location}} í˜¹ì‹œ p5.jsì˜ {{type}}ë¥¼ ì‚¬ìš©í•˜ì‹œë ¤ë©´ "{{name}}"ë¥¼ {{actualName}}ë¡œ ê³ ì³ ë³´ì„¸ìš”.',misspelling_plural:'{{location}} í˜¹ì‹œ p5.jsì˜ {{type}}ë¥¼ ì‚¬ìš©í•˜ì‹œë ¤ë©´ "{{name}}"ë¥¼ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¡œ ê³ ì³ë³´ì„¸ìš”: \n{{suggestions}}',misusedTopLevel:"{{location}} í˜¹ì‹œ p5.jsì˜ {{symbolType}} íƒ€ìž… {{symbolName}}ì„ ì‚¬ìš©í•˜ì…¨ë‚˜ìš”? ê·¸ë ‡ë‹¤ë©´ {{symbolName}}ì„ ìž‘ì„± ì¤‘ì¸ setup() í•¨ìˆ˜ì˜ ëŒ€ê´„í˜¸ ì•ˆìœ¼ë¡œ ì˜®ê²¨ë³´ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}",positions:{p_1:"1ë²ˆì§¸",p_10:"10ë²ˆì§¸",p_11:"11ë²ˆì§¸",p_12:"12ë²ˆì§¸",p_2:"2ë²ˆì§¸",p_3:"3ë²ˆì§¸",p_4:"4ë²ˆì§¸",p_5:"5ë²ˆì§¸",p_6:"6ë²ˆì§¸",p_7:"7ë²ˆì§¸",p_8:"8ë²ˆì§¸",p_9:"9ë²ˆì§¸"},pre:"\nðŸŒ¸ p5.js says: {{message}}",sketchReaderErrors:{reservedConst:'p5.jsì—ì„œ ì´ë¯¸ ì“°ê³  ìžˆëŠ” ë³€ìˆ˜ "{{symbol}}"ë¥¼ ì‚¬ìš©í•˜ì…¨ìŠµë‹ˆë‹¤. í•´ë‹¹ ë³€ìˆ˜ë¥¼ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}',reservedFunc:'p5.jsì—ì„œ ì´ë¯¸ ì“°ê³  ìžˆëŠ” í•¨ìˆ˜ "{{symbol}}"ë¥¼ ì‚¬ìš©í•˜ì…¨ìŠµë‹ˆë‹¤. í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì–´ ì£¼ì„¸ìš”.\n\n+ ì¶”ê°€ ì •ë³´: {{url}}'},welcome:"{{logo}} í™˜ì˜í•©ë‹ˆë‹¤, ì´ ë©”ì„¸ì§€ëŠ” ì—ëŸ¬ë¥¼ ì°¾ëŠ” ë””ë²„ê¹… ì•ˆë‚´ë¬¸ìž…ë‹ˆë‹¤. ì•ˆë‚´ê°€ í•„ìš”ì—†ëŠ” ê²½ìš° p5.jsëŒ€ì‹  p5.min.jsë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.",wrongPreload:'{{location}} "{{func}}"ê°€ í˜¸ì¶œë˜ë©° p5js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ë¶€ì—ì„œ ë‹¤ìŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "{{error}}".\n\n í•¨ìˆ˜ "{{func}}"ê°€ preload()ì—ì„œ í˜¸ì¶œë˜ì—ˆê¸° ë•Œë¬¸ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. preload() í•¨ìˆ˜ ì•ˆì—ì„œëŠ” ì§€ì •ëœ í•¨ìˆ˜(ì˜ˆ: loadImage, loadJSON, loadFont, loadStrings ë“±)ë§Œ í˜¸ì¶œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.'}}}}),ca=h({"node_modules/p5/translations/zh/translation.json":()=>{ua={fes:{autoplay:"å°è¯•æ’­æ”¾ï¼ˆä½¿ç”¨'{{src}}'ï¼‰çš„åª’ä½“åœ¨æ­¤æµè§ˆå™¨ä¸­è¢«ç¦æ­¢ï¼Œå¾ˆå¯èƒ½æ˜¯ç”±äºŽæµè§ˆå™¨çš„è‡ªåŠ¨æ’­æ”¾ç­–ç•¥ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",checkUserDefinedFns:"çœ‹èµ·æ¥æ‚¨å¯èƒ½åœ¨{{name}}å¤„æ„å¤–å†™é”™äº†ï¼Œåº”è¯¥æ˜¯{{actualName}}ã€‚å¦‚æžœè¿™ä¸æ˜¯æ•…æ„çš„ï¼Œè¯·è¿›è¡Œæ›´æ­£ã€‚",fileLoadError:{bytes:"ä¼¼ä¹Žåœ¨åŠ è½½æ–‡ä»¶æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",font:"ä¼¼ä¹Žåœ¨åŠ è½½å­—ä½“æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",gif:"åŠ è½½GIFæ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚è¯·ç¡®ä¿æ‚¨çš„GIFä½¿ç”¨87aæˆ–89aç¼–ç ã€‚",image:"ä¼¼ä¹Žåœ¨åŠ è½½å›¾åƒæ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",json:"ä¼¼ä¹Žåœ¨åŠ è½½JSONæ–‡ä»¶æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",large:"å¦‚æžœæ‚¨æ— æ³•æˆåŠŸèŽ·å–å¤§åž‹æ–‡ä»¶ï¼Œæˆ‘ä»¬å»ºè®®å°†æ–‡ä»¶åˆ†å‰²æˆè¾ƒå°çš„æ®µå¹¶èŽ·å–è¿™äº›æ®µã€‚",strings:"ä¼¼ä¹Žåœ¨åŠ è½½æ–‡æœ¬æ–‡ä»¶æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",suggestion:"å°è¯•æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼ˆ{{filePath}}ï¼‰æ˜¯å¦æ­£ç¡®ï¼Œå°†æ–‡ä»¶æ‰˜ç®¡åœ¨çº¿ä¸Šæˆ–è¿è¡Œæœ¬åœ°æœåŠ¡å™¨ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",table:"ä¼¼ä¹Žåœ¨åŠ è½½è¡¨æ ¼æ–‡ä»¶æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}",xml:"ä¼¼ä¹Žåœ¨åŠ è½½XMLæ–‡ä»¶æ—¶å‡ºçŽ°äº†é—®é¢˜ã€‚{{suggestion}}"},friendlyParamError:{type_EMPTY_VAR:"{{location}} {{func}}() æœŸæœ›çš„æ˜¯{{formatType}}ç±»åž‹çš„{{position}}å‚æ•°ï¼Œè€ŒæŽ¥æ”¶åˆ°äº†ä¸€ä¸ªç©ºå˜é‡ã€‚å¦‚æžœè¿™ä¸æ˜¯æ•…æ„çš„ï¼Œé€šå¸¸æ˜¯ä½œç”¨åŸŸçš„é—®é¢˜ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",type_TOO_FEW_ARGUMENTS:"{{location}} {{func}}() æœŸæœ›è‡³å°‘{{minParams}}ä¸ªå‚æ•°ï¼Œä½†åªæ”¶åˆ°äº†{{argCount}}ä¸ªã€‚",type_TOO_MANY_ARGUMENTS:"{{location}} {{func}}() æœŸæœ›æœ€å¤š{{maxParams}}ä¸ªå‚æ•°ï¼Œä½†æ”¶åˆ°äº†{{argCount}}ä¸ªã€‚",type_WRONG_TYPE:"{{location}} {{func}}() æœŸæœ›çš„æ˜¯{{formatType}}ç±»åž‹çš„{{position}}å‚æ•°ï¼Œè€ŒæŽ¥æ”¶åˆ°äº†{{argType}}ç±»åž‹ã€‚"},globalErrors:{reference:{cannotAccess:'\n{{location}} åœ¨å£°æ˜Žä¹‹å‰ä½¿ç”¨äº†"{{symbol}}"ã€‚è¯·ç¡®ä¿åœ¨ä½¿ç”¨ä¹‹å‰å·²ç»å£°æ˜Žäº†è¯¥å˜é‡ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}',notDefined:'\n{{location}} åœ¨å½“å‰èŒƒå›´ä¸­æœªå®šä¹‰"{{symbol}}"ã€‚å¦‚æžœæ‚¨å·²ç»åœ¨ä»£ç ä¸­å®šä¹‰äº†å®ƒï¼Œè¯·æ£€æŸ¥å…¶ä½œç”¨åŸŸã€æ‹¼å†™å’Œå¤§å°å†™ï¼ˆJavaScriptåŒºåˆ†å¤§å°å†™ï¼‰ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}'},stackSubseq:"â””[{{location}}] \n\t åœ¨{{func}}()ä¸­çš„ç¬¬{{line}}è¡Œè°ƒç”¨\n",stackTop:"â”Œ[{{location}}] \n\t åœ¨{{func}}()çš„ç¬¬{{line}}è¡Œå‡ºçŽ°é”™è¯¯\n",syntax:{badReturnOrYield:"\nè¯­æ³•é”™è¯¯ - returnä½äºŽå‡½æ•°å¤–éƒ¨ã€‚è¯·ç¡®ä¿æ²¡æœ‰æ¼æŽ‰ä»»ä½•æ‹¬å·ï¼Œä»¥ä¾¿returnä½äºŽå‡½æ•°å†…éƒ¨ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",invalidToken:"\nè¯­æ³•é”™è¯¯ - å‘çŽ°äº†JavaScriptä¸è¯†åˆ«æˆ–ä¸æœŸæœ›çš„ç¬¦å·ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",missingInitializer:"\nè¯­æ³•é”™è¯¯ - å£°æ˜Žäº†ä¸€ä¸ªconstå˜é‡ä½†æ²¡æœ‰åˆå§‹åŒ–ã€‚åœ¨JavaScriptä¸­ï¼Œconstå¿…é¡»è¦æœ‰åˆå§‹å€¼ã€‚åœ¨åŒä¸€è¯­å¥ä¸­å¿…é¡»æŒ‡å®šå€¼æ¥å£°æ˜Žå˜é‡ã€‚è¯·æ£€æŸ¥é”™è¯¯ä¸­çš„è¡Œå·å¹¶ç»™constå˜é‡èµ‹å€¼ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",redeclaredVariable:'\nè¯­æ³•é”™è¯¯ - "{{symbol}}" æ­£åœ¨è¢«é‡æ–°å£°æ˜Žã€‚JavaScriptä¸å…è®¸é‡å¤å£°æ˜Žå˜é‡ã€‚è¯·æ£€æŸ¥é”™è¯¯ä¸­çš„è¡Œå·æ˜¯å¦é‡æ–°å£°æ˜Žäº†è¯¥å˜é‡ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}',unexpectedToken:"\nè¯­æ³•é”™è¯¯ - ç¬¦å·å‡ºçŽ°åœ¨ä¸åº”è¯¥å‡ºçŽ°çš„ä½ç½®ã€‚\né€šå¸¸è¿™æ˜¯ç”±äºŽæ‹¼å†™é”™è¯¯ã€‚è¯·æ£€æŸ¥é”™è¯¯ä¸­çš„è¡Œå·æ˜¯å¦æœ‰ç¼ºå°‘æˆ–å¤šä½™çš„å†…å®¹ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}"},type:{constAssign:"\n{{location}} æ­£åœ¨é‡æ–°èµ‹å€¼constå˜é‡ã€‚åœ¨JavaScriptä¸­ï¼Œä¸å…è®¸å¯¹å¸¸é‡è¿›è¡Œé‡æ–°èµ‹å€¼ã€‚å¦‚æžœè¦ç»™å˜é‡é‡æ–°èµ‹å€¼ï¼Œè¯·ç¡®ä¿å£°æ˜Žä¸ºvaræˆ–letã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",notfunc:'\n{{location}} æ— æ³•å°†"{{symbol}}" è°ƒç”¨ä¸ºå‡½æ•°ã€‚\nè¯·æ£€æŸ¥æ‹¼å†™ã€å¤§å°å†™ï¼ˆJavaScriptåŒºåˆ†å¤§å°å†™ï¼‰å’Œå…¶ç±»åž‹ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}',notfuncObj:'\n{{location}} æ— æ³•å°†"{{symbol}}" è°ƒç”¨ä¸ºå‡½æ•°ã€‚\nè¯·éªŒè¯"{{obj}}"æ˜¯å¦åŒ…å«"{{symbol}}"ï¼Œå¹¶æ£€æŸ¥æ‹¼å†™ã€å¤§å°å†™ï¼ˆJavaScriptåŒºåˆ†å¤§å°å†™ï¼‰å’Œå…¶ç±»åž‹ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}',readFromNull:"\n{{location}} æ— æ³•è¯»å–nullçš„å±žæ€§ã€‚åœ¨JavaScriptä¸­ï¼Œnullè¡¨ç¤ºå¯¹è±¡æ²¡æœ‰å€¼ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",readFromUndefined:"\n{{location}} æ— æ³•è¯»å–undefinedçš„å±žæ€§ã€‚è¯·æ£€æŸ¥é”™è¯¯ä¸­çš„è¡Œå·å¹¶ç¡®ä¿æ­£åœ¨æ“ä½œçš„å˜é‡ä¸æ˜¯undefinedã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}"}},libraryError:'{{location}} åœ¨è°ƒç”¨{{func}}æ—¶ï¼Œåœ¨p5jsåº“å†…éƒ¨å‡ºçŽ°äº†ä¸€æ¡é”™è¯¯æ¶ˆæ¯"{{error}}"ã€‚é™¤éžå¦æœ‰è¯´æ˜Žï¼Œå¦åˆ™å¯èƒ½æ˜¯ä¸Žä¼ é€’ç»™{{func}}çš„å‚æ•°æœ‰å…³çš„é—®é¢˜ã€‚',location:"[{{file}}ï¼Œç¬¬{{line}}è¡Œ]",misspelling:'{{location}} çœ‹èµ·æ¥æ‚¨å¯èƒ½åœ¨{{name}}å¤„æ„å¤–å†™é”™äº†ï¼Œåº”è¯¥æ˜¯"{{actualName}}"ã€‚å¦‚æžœå¸Œæœ›ä½¿ç”¨p5.jsä¸­çš„{{type}}ï¼Œè¯·å°†å…¶æ›´æ­£ä¸º{{actualName}}ã€‚',misspelling_plural:"{{location}} çœ‹èµ·æ¥æ‚¨å¯èƒ½åœ¨{{name}}å¤„æ„å¤–å†™é”™äº†ã€‚\næ‚¨å¯èƒ½æŒ‡çš„æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š\n{{suggestions}}",misusedTopLevel:"æ‚¨åˆšåˆšå°è¯•ä½¿ç”¨äº†p5.jsçš„{{symbolType}} {{symbolName}}å—ï¼Ÿå¦‚æžœæ˜¯ï¼Œè¯·å°†å…¶ç§»åˆ°æ‚¨çš„sketchçš„setup()å‡½æ•°ä¸­ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}",positions:{p_1:"ç¬¬ä¸€",p_10:"ç¬¬å",p_11:"ç¬¬åä¸€",p_12:"ç¬¬åäºŒ",p_2:"ç¬¬äºŒ",p_3:"ç¬¬ä¸‰",p_4:"ç¬¬å››",p_5:"ç¬¬äº”",p_6:"ç¬¬å…­",p_7:"ç¬¬ä¸ƒ",p_8:"ç¬¬å…«",p_9:"ç¬¬ä¹"},pre:"\nðŸŒ¸ p5.js è¯´ï¼š{{message}}",sketchReaderErrors:{reservedConst:'æ‚¨ä½¿ç”¨äº†p5.jsçš„ä¿ç•™å˜é‡"{{symbol}}"ï¼Œè¯·ç¡®ä¿å°†å˜é‡åæ›´æ”¹ä¸ºå…¶ä»–åç§°ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}',reservedFunc:'æ‚¨ä½¿ç”¨äº†p5.jsçš„ä¿ç•™å‡½æ•°"{{symbol}}"ï¼Œè¯·ç¡®ä¿å°†å‡½æ•°åæ›´æ”¹ä¸ºå…¶ä»–åç§°ã€‚\n\n+ æ›´å¤šä¿¡æ¯ï¼š{{url}}'},welcome:"æ¬¢è¿Žï¼è¿™æ˜¯æ‚¨å‹å¥½çš„è°ƒè¯•ç¨‹åºã€‚è¦å…³é—­æˆ‘ï¼Œè¯·åˆ‡æ¢åˆ°ä½¿ç”¨p5.min.jsã€‚",wrongPreload:'{{location}} åœ¨è°ƒç”¨"{{func}}"æ—¶ï¼Œåœ¨p5jsåº“å†…éƒ¨å‡ºçŽ°äº†ä¸€æ¡é”™è¯¯æ¶ˆæ¯"{{error}}"ã€‚é™¤éžå¦æœ‰è¯´æ˜Žï¼Œå¦åˆ™å¯èƒ½æ˜¯ç”±äºŽåœ¨preloadä¸­è°ƒç”¨äº†"{{func}}"ã€‚preloadå‡½æ•°ä¹‹å¤–ä¸åº”è¯¥åŒ…å«é™¤loadå‡½æ•°ï¼ˆloadImageã€loadJSONã€loadFontã€loadStringsç­‰ï¼‰ä»¥å¤–çš„å†…å®¹ã€‚'}}}}),da=h({"node_modules/p5/translations/hi/translation.json":()=>{ha={fes:JSON.parse('{"autoplay":"à¤œà¤¿à¤¸ à¤®à¥€à¤¡à¤¿à¤¯à¤¾ à¤•à¥‹ à¤šà¤²à¤¾à¤¨à¥‡ à¤•à¥€ à¤•à¥‹à¤¶à¤¿à¤¶ à¤•à¥€ à¤—à¤ˆ (\'{{src}}\' à¤•à¥‡ à¤¸à¤¾à¤¥) à¤‰à¤¸à¥‡ à¤‡à¤¸ à¤¬à¥à¤°à¤¾à¤‰à¤œà¤¼à¤° à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤…à¤¨à¥à¤®à¤¤à¤¿ à¤¨à¤¹à¥€à¤‚ à¤¦à¥€ à¤—à¤ˆ, à¤¸à¤‚à¤­à¤µà¤¤à¤ƒ à¤¬à¥à¤°à¤¾à¤‰à¤œà¤¼à¤° à¤•à¥€ à¤¸à¥à¤µà¤¤: à¤ªà¥à¤²à¥‡ à¤¨à¥€à¤¤à¤¿ à¤•à¥‡ à¤•à¤¾à¤°à¤£à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","checkUserDefinedFns":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤—à¤²à¤¤à¥€ à¤¸à¥‡ {{actualName}} à¤•à¥€ à¤œà¤—à¤¹ {{name}} à¤²à¤¿à¤– à¤¦à¤¿à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤¯à¤¦à¤¿ à¤¯à¤¹ à¤œà¤¾à¤¨à¤¬à¥‚à¤à¤•à¤° à¤¨à¤¹à¥€à¤‚ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ à¤¤à¥‹ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤‡à¤¸à¥‡ à¤¸à¥à¤§à¤¾à¤°à¥‡à¤‚à¥¤","fileLoadError":{"bytes":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ à¤«à¤¼à¤¾à¤‡à¤² à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","font":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¤¾ à¤®à¥à¤¦à¥à¤°à¤²à¤¿à¤ªà¤¿ à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","gif":"à¤†à¤ªà¤•à¥€ GIF à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥à¤› à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¹à¥à¤ˆà¥¤ à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤†à¤ªà¤•à¤¾ GIF 87a à¤¯à¤¾ 89a à¤à¤¨à¥à¤•à¥‹à¤¡à¤¿à¤‚à¤— à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤° à¤°à¤¹à¤¾ à¤¹à¥ˆà¥¤","image":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ à¤›à¤µà¤¿ à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","json":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ JSON à¤«à¤¼à¤¾à¤‡à¤² à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","large":"à¤¯à¤¦à¤¿ à¤†à¤ªà¤•à¥€ à¤¬à¤¡à¤¼à¥€ à¤«à¤¼à¤¾à¤‡à¤² à¤¸à¤«à¤²à¤¤à¤¾à¤ªà¥‚à¤°à¥à¤µà¤• à¤¨à¤¹à¥€à¤‚ à¤²à¤¾à¤ˆ à¤—à¤ˆ à¤¹à¥ˆ, à¤¤à¥‹ à¤¹à¤® à¤«à¤¼à¤¾à¤‡à¤² à¤•à¥‹ à¤›à¥‹à¤Ÿà¥‡ à¤–à¤‚à¤¡à¥‹à¤‚ à¤®à¥‡à¤‚ à¤µà¤¿à¤­à¤¾à¤œà¤¿à¤¤ à¤•à¤°à¤¨à¥‡ à¤”à¤° à¤‰à¤¨à¥à¤¹à¥‡à¤‚ à¤²à¤¾à¤¨à¥‡ à¤•à¥€ à¤¸à¤²à¤¾à¤¹ à¤¦à¥‡à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤","strings":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ à¤ªà¤¾à¤  à¤«à¤¼à¤¾à¤‡à¤² à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","suggestion":"à¤¯à¤¹ à¤œà¤¾à¤à¤šà¤¨à¥‡ à¤•à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤«à¤¼à¤¾à¤‡à¤² à¤ªà¤¥ ({{filePath}}) à¤¸à¤¹à¥€ à¤¹à¥ˆ à¤¯à¤¾ à¤¨à¤¹à¥€à¤‚, à¤«à¤¼à¤¾à¤‡à¤² à¤•à¥‹ à¤‘à¤¨à¤²à¤¾à¤‡à¤¨ à¤¹à¥‹à¤¸à¥à¤Ÿ à¤•à¤°à¤¨à¤¾, à¤¯à¤¾ à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ à¤¸à¤°à¥à¤µà¤° à¤šà¤²à¤¾à¤¨à¤¾à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","table":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ à¤¤à¤¾à¤²à¤¿à¤•à¤¾ à¤«à¤¼à¤¾à¤‡à¤² à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}","xml":"à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤•à¥€ XML à¤«à¤¼à¤¾à¤‡à¤² à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¥‹à¤ˆ à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¥à¥€à¥¤ {{suggestion}}"},"friendlyParamError":{"type_EMPTY_VAR":"{{location}} {{func}}() {{position}} à¤ªà¥à¤°à¤¾à¤šà¤² à¤•à¥‡ à¤²à¤¿à¤ {{formatType}} à¤•à¥€ à¤…à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤•à¤° à¤°à¤¹à¤¾ à¤¥à¤¾, à¤‡à¤¸à¤•à¥‡ à¤¬à¤œà¤¾à¤¯ à¤à¤• à¤–à¤¾à¤²à¥€ à¤šà¤° à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤¹à¥à¤†à¥¤ à¤¯à¤¦à¤¿ à¤œà¤¾à¤¨à¤¬à¥‚à¤à¤•à¤° à¤¨à¤¹à¥€à¤‚ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤¯à¤¹ à¤…à¤•à¥à¤¸à¤° à¤¦à¤¾à¤¯à¤°à¥‡ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤à¤• à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€:{{url}}","type_TOO_FEW_ARGUMENTS":"{{location}} {{func}}() à¤•à¤® à¤¸à¥‡ à¤•à¤® {{minParams}} à¤¤à¤°à¥à¤•à¥‹à¤‚ à¤•à¥€ à¤…à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤¥à¥€, à¤²à¥‡à¤•à¤¿à¤¨ à¤•à¥‡à¤µà¤² à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤¹à¥à¤ {{argCount}}.","type_TOO_MANY_ARGUMENTS":"{{location}} {{func}}() {{maxParams}} à¤¸à¥‡ à¤…à¤§à¤¿à¤• à¤¤à¤°à¥à¤•à¥‹à¤‚ à¤•à¥€ à¤…à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤¨à¤¹à¥€à¤‚ à¤•à¤° à¤°à¤¹à¤¾ à¤¥à¤¾, à¤²à¥‡à¤•à¤¿à¤¨ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤¹à¥à¤† {{argCount}}.","type_WRONG_TYPE":"{{location}} {{func}}() {{position}} à¤ªà¥à¤°à¤¾à¤šà¤² à¤•à¥‡ à¤²à¤¿à¤ {{formatType}} à¤•à¥€ à¤…à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤•à¤° à¤°à¤¹à¤¾ à¤¥à¤¾, à¤‡à¤¸à¤•à¥‡ à¤¬à¤œà¤¾à¤¯ {{argType}} à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤¹à¥à¤†à¥¤"},"globalErrors":{"reference":{"cannotAccess":"\\n{{location}} \\"{{symbol}}\\" à¤˜à¥‹à¤·à¤£à¤¾ à¤¸à¥‡ à¤ªà¤¹à¤²à¥‡ à¤ªà¥à¤°à¤¯à¥‹à¤— à¤•à¤¿à¤¯à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤šà¤° à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¥‡ à¤¸à¥‡ à¤ªà¤¹à¤²à¥‡ à¤‰à¤¸à¥‡ à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤° à¤¦à¤¿à¤¯à¤¾ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","notDefined":"\\n{{location}} \\"{{symbol}}\\" à¤µà¤°à¥à¤¤à¤®à¤¾à¤¨ à¤¦à¤¾à¤¯à¤°à¥‡ à¤®à¥‡à¤‚ à¤ªà¤°à¤¿à¤­à¤¾à¤·à¤¿à¤¤ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤ à¤¯à¤¦à¤¿ à¤†à¤ªà¤¨à¥‡ à¤‡à¤¸à¥‡ à¤…à¤ªà¤¨à¥‡ à¤•à¥‹à¤¡ à¤®à¥‡à¤‚ à¤ªà¤°à¤¿à¤­à¤¾à¤·à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤†à¤ªà¤•à¥‹ à¤‡à¤¸à¤•à¤¾ à¤¦à¤¾à¤¯à¤°à¤¾, à¤µà¤°à¥à¤¤à¤¨à¥€ à¤”à¤° à¤…à¤•à¥à¤·à¤°-à¤†à¤µà¤°à¤£ à¤œà¤¾à¤‚à¤šà¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤ (JavaScript à¤•à¥‡à¤¸-à¤¸à¤‚à¤µà¥‡à¤¦à¥€ à¤¹à¥ˆ)à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}"},"stackSubseq":"â””[{{location}}] \\n\\t {{func}}() à¤®à¥‡à¤‚ à¤ªà¤‚à¤•à¥à¤¤à¤¿ {{line}} à¤¸à¥‡ à¤†à¤¹à¥à¤µà¤¾à¤¨ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾\\n","stackTop":"â”Œ[{{location}}] \\n\\t {{func}}() à¤®à¥‡à¤‚ à¤ªà¤‚à¤•à¥à¤¤à¤¿ {{line}} à¤ªà¤° à¤¤à¥à¤°à¥à¤Ÿà¤¿\\n","syntax":{"badReturnOrYield":"\\nà¤µà¤¾à¤•à¥à¤¯ - à¤µà¤¿à¤¨à¥à¤¯à¤¾à¤¸ à¤¤à¥à¤°à¥à¤Ÿà¤¿ - à¤°à¤¿à¤Ÿà¤°à¥à¤¨ à¤•à¤¿à¤¸à¥€ à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‡ à¤¬à¤¾à¤¹à¤° à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤†à¤ªà¤¸à¥‡ à¤•à¥‹à¤ˆ à¤•à¥‹à¤·à¥à¤ à¤• à¤¨à¤¹à¥€à¤‚ à¤›à¥‚à¤Ÿ à¤°à¤¹à¤¾ à¤¹à¥ˆ, à¤¤à¤¾à¤•à¤¿ à¤°à¤¿à¤Ÿà¤°à¥à¤¨ à¤•à¤¿à¤¸à¥€ à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‡ à¤…à¤‚à¤¦à¤° à¤¹à¥‹à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","invalidToken":"\\nà¤µà¤¾à¤•à¥à¤¯ - à¤µà¤¿à¤¨à¥à¤¯à¤¾à¤¸ à¤¤à¥à¤°à¥à¤Ÿà¤¿ - à¤à¤• à¤à¤¸à¤¾ à¤ªà¥à¤°à¤¤à¥€à¤• à¤®à¤¿à¤²à¤¾ à¤œà¤¿à¤¸à¥‡ à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤¨à¤¹à¥€à¤‚ à¤ªà¤¹à¤šà¤¾à¤¨à¤¤à¤¾ à¤¯à¤¾ à¤…à¤ªà¤¨à¥‡ à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¤° à¤…à¤ªà¥‡à¤•à¥à¤·à¤¿à¤¤ à¤¨à¤¹à¥€à¤‚ à¤¥à¤¾à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","missingInitializer":"\\nà¤µà¤¾à¤•à¥à¤¯ - à¤µà¤¿à¤¨à¥à¤¯à¤¾à¤¸ à¤¤à¥à¤°à¥à¤Ÿà¤¿ - à¤à¤• à¤¨à¤¿à¤¯à¤¤ à¤šà¤° à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ à¤²à¥‡à¤•à¤¿à¤¨ à¤ªà¥à¤°à¤¾à¤°à¤‚à¤­ à¤¨à¤¹à¥€à¤‚ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤®à¥‡à¤‚, à¤à¤• à¤¨à¤¿à¤¯à¤¤ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥à¤°à¤¾à¤°à¤‚à¤­à¤•à¤°à¥à¤¤à¤¾ à¤•à¥€ à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾ à¤¹à¥‹à¤¤à¥€ à¤¹à¥ˆà¥¤ à¤à¤• à¤®à¤¾à¤¨ à¤‰à¤¸à¥€ à¤•à¤¥à¤¨ à¤®à¥‡à¤‚ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤ à¤œà¤¿à¤¸à¤®à¥‡à¤‚ à¤šà¤° à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤®à¥‡à¤‚ à¤ªà¤‚à¤•à¥à¤¤à¤¿ à¤¸à¤‚à¤–à¥à¤¯à¤¾ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¸à¥à¤¥à¤¿à¤°à¤¾à¤‚à¤• à¤šà¤° à¤•à¥‹ à¤à¤• à¤®à¤¾à¤¨ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤°à¥‡à¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","redeclaredVariable":"\\nà¤µà¤¾à¤•à¥à¤¯ - à¤µà¤¿à¤¨à¥à¤¯à¤¾à¤¸ à¤¤à¥à¤°à¥à¤Ÿà¤¿ - \\"{{symbol}}\\" à¤ªà¥à¤¨à¤ƒ à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆà¥¤ à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤à¤• à¤šà¤° à¤•à¥‹ à¤à¤• à¤¸à¥‡ à¤…à¤§à¤¿à¤• à¤¬à¤¾à¤° à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤…à¤¨à¥à¤®à¤¤à¤¿ à¤¨à¤¹à¥€à¤‚ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤šà¤° à¤•à¥€ à¤ªà¥à¤¨à¤ƒ à¤˜à¥‹à¤·à¤£à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤µà¤¾à¤²à¥€ à¤ªà¤‚à¤•à¥à¤¤à¤¿ à¤¸à¤‚à¤–à¥à¤¯à¤¾ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","unexpectedToken":"\\nà¤µà¤¾à¤•à¥à¤¯ - à¤µà¤¿à¤¨à¥à¤¯à¤¾à¤¸ à¤¤à¥à¤°à¥à¤Ÿà¤¿ - à¤ªà¥à¤°à¤¤à¥€à¤• à¤à¤¸à¥‡ à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¤° à¤®à¥Œà¤œà¥‚à¤¦ à¤¹à¥ˆ à¤œà¤¿à¤¸à¤•à¥€ à¤…à¤ªà¥‡à¤•à¥à¤·à¤¾ à¤¨à¤¹à¥€à¤‚ à¤¥à¥€à¥¤\\nà¤†à¤® à¤¤à¥Œà¤° à¤ªà¤° à¤¯à¤¹ à¤Ÿà¤‚à¤•à¤£ à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤•à¥‡ à¤•à¤¾à¤°à¤£ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤•à¤¿à¤¸à¥€ à¤­à¥€ à¤—à¥à¤®/à¤…à¤¤à¤¿à¤°à¤¿à¤•à¥à¤¤ à¤šà¥€à¤œà¤¼ à¤•à¥‡ à¤²à¤¿à¤ à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤®à¥‡à¤‚ à¤ªà¤‚à¤•à¥à¤¤à¤¿ à¤¨à¤‚à¤¬à¤° à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}"},"type":{"constAssign":"\\n{{location}} à¤à¤• à¤¨à¤¿à¤¯à¤¤ à¤šà¤° à¤•à¥‹ à¤«à¤¿à¤° à¤¸à¥‡ à¤…à¤¸à¤¾à¤‡à¤¨ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆà¥¤ à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤®à¥‡à¤‚, à¤•à¤¿à¤¸à¥€ à¤¸à¥à¤¥à¤¿à¤°à¤¾à¤‚à¤• à¤•à¥‹ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤®à¤¾à¤¨ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤…à¤¨à¥à¤®à¤¤à¤¿ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤ à¤¯à¤¦à¤¿ à¤†à¤ª à¤•à¤¿à¤¸à¥€ à¤šà¤° à¤•à¥‡ à¤²à¤¿à¤ à¤¨à¤ à¤®à¤¾à¤¨ à¤ªà¥à¤¨à¤ƒ à¤¨à¤¿à¤°à¥à¤¦à¤¿à¤·à¥à¤Ÿ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚, à¤¤à¥‹ à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤‡à¤¸à¥‡ var à¤¯à¤¾ Let à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤˜à¥‹à¤·à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","notfunc":"\\n{{location}} \\"{{symbol}}\\" à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤¨à¤¹à¥€à¤‚ à¤¬à¥à¤²à¤¾à¤¯à¤¾ à¤œà¤¾ à¤¸à¤•à¤¾à¥¤\\nà¤µà¤°à¥à¤¤à¤¨à¥€, à¤…à¤•à¥à¤·à¤°-à¤†à¤µà¤°à¤£ (à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤•à¥‡à¤¸-à¤¸à¤‚à¤µà¥‡à¤¦à¥€ à¤¹à¥ˆ) à¤”à¤° à¤‰à¤¸à¤•à¥‡ à¤ªà¥à¤°à¤•à¤¾à¤° à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","notfuncObj":"\\n{{location}} \\"{{symbol}}\\" à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤¨à¤¹à¥€à¤‚ à¤¬à¥à¤²à¤¾à¤¯à¤¾ à¤œà¤¾ à¤¸à¤•à¤¾à¥¤\\nà¤¸à¤¤à¥à¤¯à¤¾à¤ªà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤•à¥à¤¯à¤¾ \\"{{obj}}\\" à¤®à¥‡à¤‚ \\"{{symbol}}\\" à¤¹à¥ˆ à¤”à¤° à¤µà¤°à¥à¤¤à¤¨à¥€, à¤…à¤•à¥à¤·à¤°-à¤†à¤µà¤°à¤£ (à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤•à¥‡à¤¸-à¤¸à¤‚à¤µà¥‡à¤¦à¥€ à¤¹à¥ˆ) à¤”à¤° à¤‰à¤¸à¤•à¥‡ à¤ªà¥à¤°à¤•à¤¾à¤° à¤•à¥€ à¤œà¤¾à¤‚à¤š à¤•à¤°à¥‡à¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","readFromNull":"\\n{{location}} null à¤•à¥€ à¤¸à¤‚à¤ªà¤¤à¥à¤¤à¤¿ à¤•à¥‹ à¤ªà¤¢à¤¼à¤¾ à¤¨à¤¹à¥€à¤‚ à¤œà¤¾ à¤¸à¤•à¤¤à¤¾. à¤œà¤¾à¤µà¤¾à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤®à¥‡à¤‚ à¤®à¤¾à¤¨ null à¤‡à¤‚à¤—à¤¿à¤¤ à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤•à¤¿à¤¸à¥€ à¤‘à¤¬à¥à¤œà¥‡à¤•à¥à¤Ÿ à¤•à¤¾ à¤•à¥‹à¤ˆ à¤®à¥‚à¤²à¥à¤¯ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","readFromUndefined":"\\n{{location}} undefined à¤•à¥€ à¤¸à¤‚à¤ªà¤¤à¥à¤¤à¤¿ à¤¨à¤¹à¥€à¤‚ à¤ªà¤¢à¤¼ à¤¸à¤•à¤¤à¤¾. à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤µà¤¾à¤²à¥€ à¤ªà¤‚à¤•à¥à¤¤à¤¿ à¤¸à¤‚à¤–à¥à¤¯à¤¾ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤œà¥‹ à¤šà¤° à¤¸à¤‚à¤šà¤¾à¤²à¤¿à¤¤ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ à¤µà¤¹ à¤…à¤ªà¤°à¤¿à¤­à¤¾à¤·à¤¿à¤¤ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤\\n\\n + à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}"}},"libraryError":"{{location}} à¤œà¤¬ {{func}} à¤•à¥‹ à¤†à¤¹à¥à¤µà¤¾à¤¨ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¤à¥‹ p5js à¤²à¤¾à¤‡à¤¬à¥à¤°à¥‡à¤°à¥€ à¤•à¥‡ à¤…à¤‚à¤¦à¤° \\"{{error}}\\" à¤¸à¤‚à¤¦à¥‡à¤¶ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤à¤• à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨ à¤¹à¥à¤ˆà¥¤ à¤¯à¤¦à¤¿ à¤…à¤¨à¥à¤¯à¤¥à¤¾ à¤¨à¤¹à¥€à¤‚ à¤•à¤¹à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤¯à¤¹ {{func}} à¤•à¥‹ à¤¦à¤¿à¤ à¤—à¤ à¤¤à¤°à¥à¤•à¥‹à¤‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤à¤• à¤¸à¤®à¤¸à¥à¤¯à¤¾ à¤¹à¥‹ à¤¸à¤•à¤¤à¥€ à¤¹à¥ˆà¥¤","location":"[{{file}}, à¤ªà¤‚à¤•à¥à¤¤à¤¿ {{line}}]","misspelling":"{{location}} à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤—à¤²à¤¤à¥€ à¤¸à¥‡ \\"{{actualName}}\\" à¤•à¥‡ à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¤° \\"{{name}}\\" à¤²à¤¿à¤– à¤¦à¤¿à¤¯à¤¾ à¤¹à¥‹à¤—à¤¾à¥¤ à¤¯à¤¦à¤¿ à¤†à¤ª p5.js à¤¸à¥‡ {{type}} à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚ à¤¤à¥‹ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤‡à¤¸à¥‡ à¤¸à¤¹à¥€ à¤•à¤°à¤•à¥‡ {{actualName}} à¤•à¤° à¤¦à¥‡à¤‚à¥¤","misspelling_plural":"{{location}} à¤à¤¸à¤¾ à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤—à¤²à¤¤à¥€ à¤¸à¥‡ \\"{{name}}\\" à¤²à¤¿à¤– à¤¦à¤¿à¤¯à¤¾ à¤¹à¥‹à¤—à¤¾à¥¤\\nà¤†à¤ªà¤•à¤¾ à¤®à¤¤à¤²à¤¬ à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¥‹à¤ˆ à¤à¤• à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆ: \\n{{suggestions}}","misusedTopLevel":"à¤•à¥à¤¯à¤¾ à¤†à¤ªà¤¨à¥‡ à¤…à¤­à¥€ p5.js à¤•à¥‡ {{symbolName}} {{symbolType}} à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¥‡ à¤•à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤¿à¤¯à¤¾? à¤¯à¤¦à¤¿ à¤à¤¸à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤†à¤ª à¤‡à¤¸à¥‡ à¤…à¤ªà¤¨à¥‡ à¤°à¥‡à¤–à¤¾-à¤šà¤¿à¤¤à¥à¤° à¤•à¥‡ setup() à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤®à¥‡à¤‚ à¤²à¥‡ à¤œà¤¾à¤¨à¤¾ à¤šà¤¾à¤¹ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","positions":{"p_1":"à¤ªà¤¹à¤²à¤¾","p_10":"à¤¦à¤¸à¤µà¤¾à¤‚","p_11":"à¤—à¥à¤¯à¤¾à¤°à¤¹à¤µà¥‡à¤‚","p_12":"à¤¬à¤¾à¤°à¤¹à¤µà¥‡à¤‚","p_2":"à¤¦à¥‚à¤¸à¤°à¤¾","p_3":"à¤¤à¥€à¤¸à¤°à¤¾","p_4":"à¤šà¥Œà¤¥à¥€","p_5":"à¤ªà¤¾à¤‚à¤šà¤µà¤¾à¤‚","p_6":"à¤›à¤ à¤¾","p_7":"à¤¸à¤¾à¤¤à¤µà¥€à¤‚","p_8":"à¤†à¤ à¤µà¤¾à¤","p_9":"à¤¨à¥Œà¤µà¤¾à¤‚"},"pre":"\\nðŸŒ¸ p5.js à¤•à¤¹à¤¤à¤¾ à¤¹à¥ˆ: {{message}}","sketchReaderErrors":{"reservedConst":"à¤†à¤ªà¤¨à¥‡ à¤à¤• p5.js à¤†à¤°à¤•à¥à¤·à¤¿à¤¤ à¤šà¤° \\"{{symbol}}\\" à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤¿à¤¯à¤¾ à¤¹à¥ˆ, à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤šà¤° à¤¨à¤¾à¤® à¤•à¥‹ à¤•à¤¿à¤¸à¥€ à¤”à¤° à¤šà¥€à¤œà¤¼ à¤®à¥‡à¤‚ à¤¬à¤¦à¤² à¤¦à¤¿à¤¯à¤¾ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}","reservedFunc":"à¤†à¤ªà¤¨à¥‡ à¤à¤• p5.js à¤†à¤°à¤•à¥à¤·à¤¿à¤¤ à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ \\"{{symbol}}\\" à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤¿à¤¯à¤¾ à¤¹à¥ˆ, à¤¸à¥à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¥‡à¤‚ à¤•à¤¿ à¤†à¤ªà¤¨à¥‡ à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¤¾ à¤¨à¤¾à¤® à¤•à¤¿à¤¸à¥€ à¤”à¤° à¤šà¥€à¤œà¤¼ à¤®à¥‡à¤‚ à¤¬à¤¦à¤² à¤¦à¤¿à¤¯à¤¾ à¤¹à¥ˆà¥¤\\n\\n+ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€: {{url}}"},"welcome":"à¤¸à¥à¤µà¤¾à¤—à¤¤! à¤¯à¤¹ à¤†à¤ªà¤•à¤¾ à¤®à¤¿à¤¤à¥à¤°à¤µà¤¤ à¤¡à¤¿à¤¬à¤—à¤° à¤¹à¥ˆ. à¤®à¥à¤à¥‡ à¤¬à¤‚à¤¦ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤, p5.min.js à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚à¥¤","wrongPreload":"{{location}} à¤œà¤¬ \\"{{func}}\\" à¤•à¥‹ à¤†à¤¹à¥à¤µà¤¾à¤¨ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¤à¥‹ p5js à¤²à¤¾à¤‡à¤¬à¥à¤°à¥‡à¤°à¥€ à¤•à¥‡ à¤…à¤‚à¤¦à¤° \\"{{error}}\\" à¤¸à¤‚à¤¦à¥‡à¤¶ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤à¤• à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨ à¤¹à¥à¤ˆà¥¤ à¤¯à¤¦à¤¿ à¤…à¤¨à¥à¤¯à¤¥à¤¾ à¤¨à¤¹à¥€à¤‚ à¤•à¤¹à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤¯à¤¹ \\"{{func}}\\" à¤•à¥‹ à¤ªà¥à¤°à¥€à¤²à¥‹à¤¡ à¤¸à¥‡ à¤†à¤¹à¥à¤µà¤¾à¤¨ à¤•à¤¿à¤ à¤œà¤¾à¤¨à¥‡ à¤•à¥‡ à¤•à¤¾à¤°à¤£ à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤ªà¥à¤°à¥€à¤²à¥‹à¤¡ à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‡ à¤…à¤‚à¤¦à¤° à¤²à¥‹à¤¡ à¤†à¤¹à¥à¤µà¤¾à¤¨ (à¤²à¥‹à¤¡à¤›à¤µà¤¿, à¤²à¥‹à¤¡à¤œà¥‡à¤à¤¸à¤“à¤à¤¨, à¤²à¥‹à¤¡à¤®à¥à¤¦à¥à¤°à¤²à¤¿à¤ªà¤¿, à¤²à¥‹à¤¡à¤¸à¥à¤Ÿà¥à¤°à¤¿à¤‚à¤—à¥à¤¸ à¤‡à¤¤à¥à¤¯à¤¾à¤¦à¤¿) à¤•à¥‡ à¤…à¤²à¤¾à¤µà¤¾ à¤•à¥à¤› à¤­à¥€ à¤¨à¤¹à¥€à¤‚ à¤¹à¥‹à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤à¥¤"}')}}}),fa=h({"node_modules/p5/translations/ja/translation.json":()=>{pa={fes:{autoplay:"å†ç”Ÿã—ã‚ˆã†ã¨ã—ãŸãƒ¡ãƒ‡ã‚£ã‚¢({{src}})ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰è¨±å¯ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãŠãã‚‰ãã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®è‡ªå‹•å†ç”Ÿãƒãƒªã‚·ãƒ¼ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",checkUserDefinedFns:"{{actualName}} ã§ã¯ãªãã€èª¤ã£ã¦ {{name}} ã¨æ›¸ã„ã¦ã—ã¾ã£ãŸã‚ˆã†ã§ã™ã€‚ã“ã‚ŒãŒæ„å›³çš„ã§ãªã‘ã‚Œã°ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚",fileLoadError:{bytes:"ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",font:"ãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",gif:"GIFã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚GIFã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒ 87a ã¾ãŸã¯ 89a ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",image:"ç”»åƒã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",json:"JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",large:"å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ­£å¸¸ã«å–å¾—ã§ããªã„å ´åˆã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ˆã‚Šå°ã•ãªã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«åˆ†å‰²ã—ã¦ã€ãã‚Œã‚‰ã‚’å–å¾—ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚",strings:"ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",suggestion:"ã¾ãšã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹({{filePath}})ãŒæ­£ã—ã„ã‹ã‚’ç¢ºèªã—ã€æ¬¡ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",table:"ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}",xml:"XMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚ {{suggestion}}"},friendlyParamError:{type_EMPTY_VAR:"{{location}} {{func}}()ã¯{{position}}å¼•æ•°ã« {{formatType}} ã‚’æœŸå¾…ã—ã¦ã„ã¾ã—ãŸãŒã€ç©ºã®å¤‰æ•°ã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚ã“ã‚ŒãŒæ„å›³çš„ã§ãªã‘ã‚Œã°ã€é€šå¸¸ã¯ã‚¹ã‚³ãƒ¼ãƒ—ã®å•é¡Œã§ã™ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",type_TOO_FEW_ARGUMENTS:"{{location}} {{func}}()ã¯å°‘ãªãã¨ã‚‚{{minParams}}å€‹ã®å¼•æ•°ã‚’æœŸå¾…ã—ã¦ã„ã¾ã—ãŸãŒã€{{argCount}}å€‹ã—ã‹å—ã‘å–ã£ã¦ã„ã¾ã›ã‚“ã€‚",type_TOO_MANY_ARGUMENTS:"{{location}} {{func}}()ã¯æœ€å¤§{{maxParams}}å€‹ã®å¼•æ•°ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ãŒã€{{argCount}}å€‹ã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚",type_WRONG_TYPE:"{{location}} {{func}}()ã¯{{position}}å¼•æ•°ã« {{formatType}}ã‚¿ã‚¤ãƒ—ã‚’æœŸå¾…ã—ã¦ã„ã¾ã—ãŸãŒã€{{argType}}ã‚¿ã‚¤ãƒ—ã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚"},globalErrors:{reference:{cannotAccess:'\n{{location}} "{{symbol}}" ãŒå®£è¨€å‰ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹å‰ã«å¿…ãšå®£è¨€ã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±ï¼š: {{url}}',notDefined:'\n{{location}} "{{symbol}}" ãŒç¾åœ¨ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚³ãƒ¼ãƒ‰å†…ã§å®šç¾©ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãã®ã‚¹ã‚³ãƒ¼ãƒ—ã€ã‚¹ãƒšãƒ«ã€å¤§æ–‡å­—ã¨å°æ–‡å­—(JavaScriptã¯å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ã¾ã™)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±ï¼š {{url}}'},stackSubseq:"â””[{{location}}] \n\t {{line}}è¡Œç›®( {{func}}()å†… )ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã¾ã—ãŸ\n",stackTop:"â”Œ[{{location}}] \n\t {{line}}è¡Œç›®( {{func}}()å†… )ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ\n",syntax:{badReturnOrYield:"\næ§‹æ–‡ã‚¨ãƒ©ãƒ¼ - returnãŒé–¢æ•°å¤–ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æ‹¬å¼§ã‚’å¿˜ã‚Œãšã«ã€returnãŒé–¢æ•°å†…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",invalidToken:"\næ§‹æ–‡ã‚¨ãƒ©ãƒ¼ - JavaScriptãŒèªè­˜ã—ãªã„ã‹ã€æœŸå¾…ã—ã¦ã„ãªã„ã‚·ãƒ³ãƒœãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",missingInitializer:"\næ§‹æ–‡ã‚¨ãƒ©ãƒ¼ - å®šæ•°ãŒå®£è¨€ã•ã‚Œã¦ã„ã¾ã™ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚JavaScriptã§ã¯ const ã«ã¯åˆæœŸå€¤ãŒå¿…è¦ã§ã™ã€‚å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹éš›ã«åŒã˜æ–‡å†…ã§å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã®è¡Œç•ªå·ã‚’ç¢ºèªã—ã¦å®šæ•°ã«å€¤ã‚’å‰²ã‚Šå½“ã¦ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",redeclaredVariable:'\næ§‹æ–‡ã‚¨ãƒ©ãƒ¼ - "{{symbol}}" ãŒå†å®£è¨€ã•ã‚Œã¦ã„ã¾ã™ã€‚JavaScriptã§ã¯å¤‰æ•°ã‚’å†å®£è¨€ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ã®è¡Œç•ªå·ã§ãã®å¤‰æ•°ãŒå†å®£è¨€ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}',unexpectedToken:"\næ§‹æ–‡ã‚¨ãƒ©ãƒ¼ - äºˆæœŸã—ãªã„å ´æ‰€ã«ã‚·ãƒ³ãƒœãƒ«ãŒã‚ã‚Šã¾ã™ã€‚\né€šå¸¸ã¯ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ãŒåŽŸå› ã§ã™ã€‚ã‚¨ãƒ©ãƒ¼å†…ã®è¡Œç•ªå·ã‚’ç¢ºèªã—ã€ä¸è¶³ã‚„ä½™åˆ†ãªã‚‚ã®ãŒãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}"},type:{constAssign:"\n{{location}} å®šæ•°ã«å†ä»£å…¥ã—ã¦ã„ã¾ã™ã€‚JavaScriptã§ã¯å®šæ•°ã«å¯¾ã™ã‚‹å†ä»£å…¥ã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚å¤‰æ•°ã«å†ä»£å…¥ã—ãŸã„å ´åˆã¯ã€ var ã¾ãŸã¯ let ã§å®£è¨€ã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",notfunc:'\n{{location}} "{{symbol}}" ã‚’é–¢æ•°ã¨ã—ã¦å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚\nã‚¹ãƒšãƒ«ã€å¤§æ–‡å­—ã¨å°æ–‡å­—(JavaScriptã¯å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ã¾ã™)ã€ãã®ã‚¿ã‚¤ãƒ—ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}',notfuncObj:'\n{{location}} "{{symbol}}" ã‚’é–¢æ•°ã¨ã—ã¦å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚\n{{obj}} ã®ä¸­ã« "{{symbol}}" ãŒã‚ã‚‹ã‹ã©ã†ã‹ã€ã‚¹ãƒšãƒ«ã€å¤§æ–‡å­—ã¨å°æ–‡å­—(JavaScriptã¯å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ã¾ã™)ã€ãŠã‚ˆã³ãã®ã‚¿ã‚¤ãƒ—ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}',readFromNull:"\n{{location}} null ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚JavaScriptã§ã¯ã€null ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå€¤ã‚’æŒãŸãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",readFromUndefined:"\n{{location}} undefined ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ã®è¡Œç•ªå·ã‚’ç¢ºèªã—ã€æ“ä½œã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å¤‰æ•°ãŒ undefined ã§ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}"}},libraryError:'{{location}} {{func}} ã‚’å‘¼ã³å‡ºã—ãŸéš›ã«ã€p5jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ "{{error}}" ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ç‰¹ã«è¨˜è¿°ãŒãªã‘ã‚Œã°ã€ {{func}} ã«æ¸¡ã•ã‚ŒãŸå¼•æ•°ã«é–¢ã™ã‚‹å•é¡ŒãŒã‚ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚',location:"[{{file}}, {{line}}è¡Œç›®]",misspelling:'{{location}} "{{actualName}}" ã§ã¯ãªãã€èª¤ã£ã¦ "{{name}}" ã¨æ›¸ã„ã¦ã—ã¾ã£ãŸã‚ˆã†ã§ã™ã€‚p5.jså†…ã® {{type}} ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯ã€ {{actualName}} ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚',misspelling_plural:'{{location}} ã‚‚ã—ã‹ã™ã‚‹ã¨èª¤ã£ã¦ "{{name}}" ã¨æ›¸ã„ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®å€™è£œãŒã‚ã‚Šã¾ã™: \n{{suggestions}}',misusedTopLevel:"p5.jsã® {{symbolType}} {{symbolName}} ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã‹ï¼Ÿã‚‚ã—ãã†ãªã‚‰ã€ãã‚Œã‚’ã‚¹ã‚±ãƒƒãƒã® setup()é–¢æ•°å†…ã«ç§»å‹•ã•ã›ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}",positions:{p_1:"ç¬¬1",p_10:"ç¬¬10",p_11:"ç¬¬11",p_12:"ç¬¬12",p_2:"ç¬¬2",p_3:"ç¬¬3",p_4:"ç¬¬4",p_5:"ç¬¬5",p_6:"ç¬¬6",p_7:"ç¬¬7",p_8:"ç¬¬8",p_9:"ç¬¬9"},pre:"\nðŸŒ¸ p5.jsãŒè¨€ã£ã¦ã„ã¾ã™: {{message}}",sketchReaderErrors:{reservedConst:'p5.jsã®äºˆç´„æ¸ˆã¿å¤‰æ•° "{{symbol}}" ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚å¤‰æ•°åã‚’ä»–ã®åå‰ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}',reservedFunc:'p5.jsã®äºˆç´„æ¸ˆã¿é–¢æ•° "{{symbol}}" ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚é–¢æ•°åã‚’ä»–ã®åå‰ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚\n\n+ è©³ç´°æƒ…å ±: {{url}}'},welcome:"ã‚ˆã†ã“ãï¼ã“ã‚Œã¯ã‚ãªãŸã®ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ãƒãƒƒã‚¬ãƒ¼ã§ã™ã€‚ã‚ªãƒ•ã«ã™ã‚‹ã«ã¯ã€p5.min.jsã«åˆ‡ã‚Šæ›¿ãˆã¦ãã ã•ã„ã€‚",wrongPreload:'{{location}} p5.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…éƒ¨ã§ "{{error}}" ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ç‰¹ã«è¨˜è¼‰ãŒãªã„å ´åˆã€preloadã‹ã‚‰ "{{func}}" ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã“ã¨ãŒåŽŸå› ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚loadå‘¼ã³å‡ºã—(loadImageã€loadJSONã€loadFontã€loadStringsãªã©)ä»¥å¤–ã®ã‚‚ã®ã¯ã€preloadé–¢æ•°ã®ä¸­ã«å…¥ã‚Œã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚'}}}}),ma=p({en_translation:()=>ra,es_translation:()=>sa,hi_translation:()=>ha,ja_translation:()=>pa,ko_translation:()=>oa,zh_translation:()=>ua}),ga=h({"node_modules/p5/translations/dev.js":()=>{ia(),aa(),la(),ca(),da(),fa()}}),va={en:{translation:{fes:{autoplay:"The media that tried to play (with '{{src}}') wasn't allowed to by this browser, most likely due to the browser's autoplay policy.\n\n+ More info: {{url}}",checkUserDefinedFns:"It seems that you may have accidentally written {{name}} instead of {{actualName}}. Please correct it if it's not intentional.",fileLoadError:{bytes:"It looks like there was a problem loading your file. {{suggestion}}",font:"It looks like there was a problem loading your font. {{suggestion}}",gif:"There was some trouble loading your GIF. Make sure that your GIF is using 87a or 89a encoding.",image:"It looks like there was a problem loading your image. {{suggestion}}",json:"It looks like there was a problem loading your JSON file. {{suggestion}}",large:"If your large file isn't fetched successfully, we recommend splitting the file into smaller segments and fetching those.",strings:"It looks like there was a problem loading your text file. {{suggestion}}",suggestion:"Try checking if the file path ({{filePath}}) is correct, hosting the file online, or running a local server.\n\n+ More info: {{url}}",table:"It looks like there was a problem loading your table file. {{suggestion}}",xml:"It looks like there was a problem loading your XML file. {{suggestion}}"},friendlyParamError:{type_EMPTY_VAR:"{{location}} {{func}}() was expecting {{formatType}} for the {{position}} parameter, received an empty variable instead. If not intentional, this is often a problem with scope.\n\n+ More info: {{url}}",type_TOO_FEW_ARGUMENTS:"{{location}} {{func}}() was expecting at least {{minParams}} arguments, but received only {{argCount}}.",type_TOO_MANY_ARGUMENTS:"{{location}} {{func}}() was expecting no more than {{maxParams}} arguments, but received {{argCount}}.",type_WRONG_TYPE:"{{location}} {{func}}() was expecting {{formatType}} for the {{position}} parameter, received {{argType}} instead."},globalErrors:{reference:{cannotAccess:'\n{{location}} "{{symbol}}" is used before declaration. Make sure you have declared the variable before using it.\n\n+ More info: {{url}}',notDefined:'\n{{location}} "{{symbol}}" is not defined in the current scope. If you have defined it in your code, you should check its scope, spelling, and letter-casing (JavaScript is case-sensitive).\n\n+ More info: {{url}}'},stackSubseq:"â””[{{location}}] \n\t Called from line {{line}} in {{func}}()\n",stackTop:"â”Œ[{{location}}] \n\t Error at line {{line}} in {{func}}()\n",syntax:{badReturnOrYield:"\nSyntax Error - return lies outside of a function. Make sure youâ€™re not missing any brackets, so that return lies inside a function.\n\n+ More info: {{url}}",invalidToken:"\nSyntax Error - Found a symbol that JavaScript doesn't recognize or didn't expect at it's place.\n\n+ More info: {{url}}",missingInitializer:"\nSyntax Error - A const variable is declared but not initialized. In JavaScript, an initializer for a const is required. A value must be specified in the same statement in which the variable is declared. Check the line number in the error and assign the const variable a value.\n\n+ More info: {{url}}",redeclaredVariable:'\nSyntax Error - "{{symbol}}" is being redeclared. JavaScript doesn\'t allow declaring a variable more than once. Check the line number in error for redeclaration of the variable.\n\n+ More info: {{url}}',unexpectedToken:"\nSyntax Error - Symbol present at a place that wasn't expected.\nUsually this is due to a typo. Check the line number in the error for anything missing/extra.\n\n+ More info: {{url}}"},type:{constAssign:"\n{{location}} A const variable is being re-assigned. In javascript, re-assigning a value to a constant is not allowed. If you want to re-assign new values to a variable, make sure it is declared as var or let.\n\n+ More info: {{url}}",notfunc:'\n{{location}} "{{symbol}}" could not be called as a function.\nCheck the spelling, letter-casing (JavaScript is case-sensitive) and its type.\n\n+ More info: {{url}}',notfuncObj:'\n{{location}} "{{symbol}}" could not be called as a function.\nVerify whether "{{obj}}" has "{{symbol}}" in it and check the spelling, letter-casing (JavaScript is case-sensitive) and its type.\n\n+ More info: {{url}}',readFromNull:"\n{{location}} The property of null can't be read. In javascript the value null indicates that an object has no value.\n\n+ More info: {{url}}",readFromUndefined:"\n{{location}} Cannot read property of undefined. Check the line number in error and make sure the variable which is being operated is not undefined.\n\n + More info: {{url}}"}},libraryError:'{{location}} An error with message "{{error}}" occurred inside the p5js library when {{func}} was called. If not stated otherwise, it might be an issue with the arguments passed to {{func}}.',location:"[{{file}}, line {{line}}]",misspelling:'{{location}} It seems that you may have accidentally written "{{name}}" instead of "{{actualName}}". Please correct it to {{actualName}} if you wish to use the {{type}} from p5.js.',misspelling_plural:'{{location}} It seems that you may have accidentally written "{{name}}".\nYou may have meant one of the following: \n{{suggestions}}',misusedTopLevel:"Did you just try to use p5.js's {{symbolName}} {{symbolType}}? If so, you may want to move it into your sketch's setup() function.\n\n+ More info: {{url}}",preloadDisabled:"The preload() function has been removed in p5.js 2.0. Please load assets in setup() using async / await keywords or callbacks instead. See https://github.com/processing/p5.js-compatibility for more information about 2.0 and compatibility, or https://dev.to/limzykenneth/asynchronous-p5js-20-458f for more information about promises and async/await.",positions:{p_1:"first",p_10:"tenth",p_11:"eleventh",p_12:"twelfth",p_2:"second",p_3:"third",p_4:"fourth",p_5:"fifth",p_6:"sixth",p_7:"seventh",p_8:"eighth",p_9:"ninth"},pre:"\nðŸŒ¸ p5.js says: {{message}}",sketchReaderErrors:{reservedConst:'you have used a p5.js reserved variable "{{symbol}}" make sure you change the variable name to something else.\n\n+ More info: {{url}}',reservedFunc:'you have used a p5.js reserved function "{{symbol}}" make sure you change the function name to something else.\n\n+ More info: {{url}}'},welcome:"Welcome! This is your friendly debugger. To turn me off, switch to using p5.min.js.",wrongPreload:'{{location}} An error with message "{{error}}" occurred inside the p5js library when "{{func}}" was called. If not stated otherwise, it might be due to "{{func}}" being called from preload. Nothing besides load calls (loadImage, loadJSON, loadFont, loadStrings, etc.) should be inside the preload function.'}}}},ya=["en","es","ko","zh","hi","ja"],"undefined"==typeof IS_MINIFIED&&"undefined"!=typeof P5_DEV_BUILD){let e=(ga(),g(ma));for(const t of Object.keys(e)){const n=t.split("_"),r=n.slice(0,n.length-1).join("-"),i=n[n.length-1];va[r]=va[r]||{},va[r][i]=e[t]}}for((ba=class{constructor(e,t){this.init(e,t)}fetchWithTimeout(e,t,n=2e3){return Promise.race([fetch(e,t),new Promise((e,t)=>setTimeout(()=>t(new Error("timeout")),n))])}init(e,t={}){this.services=e,this.options=t}read(e,t,n){const r=this.options.loadPath;if(e===this.options.fallback)n(null,va[e][t]);else if(ya.includes(e)){const i=this.services.interpolator.interpolate(r,{lng:e,ns:t});this.loadUrl(i,n)}else n("Not found",!1)}loadUrl(e,t){this.fetchWithTimeout(e).then(t=>{if(!t.ok)throw new Error(`failed loading ${e}`);return t.json()},()=>{throw new Error(`failed loading ${e}`)}).then(e=>t(null,e)).catch(t)}}).type="backend",xa=(e,t)=>{console.debug("p5.js translator called before translations were loaded"),Bs.t(e,t)},_a=()=>Bs.use(na).use(ba).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:`https://cdn.jsdelivr.net/npm/p5@${me.replace(/^(\d+\.\d+)\.\d+.*$/,"$1")}/translations/{{lng}}/{{ns}}.json`},partialBundledLanguages:!0,resources:va}).then(e=>{xa=e},e=>console.debug(`Translations failed to load (${e})`)),wa={ReferenceError:[{msg:"{{}} is not defined",type:"NOTDEFINED",browser:"all"},{msg:"Can't find variable: {{}}",type:"NOTDEFINED",browser:"Safari"},{msg:"Cannot access '{{.}}' before initialization",type:"CANNOTACCESS",browser:"Chrome"},{msg:"can't access lexical declaration '{{.}}' before initialization",type:"CANNOTACCESS",browser:"Firefox"}],SyntaxError:[{msg:"illegal character",type:"INVALIDTOKEN",browser:"Firefox"},{msg:"Invalid character",type:"INVALIDTOKEN",browser:"Safari"},{msg:"Invalid or unexpected token",type:"INVALIDTOKEN",browser:"Chrome"},{msg:"Unexpected token '{{.}}'",type:"UNEXPECTEDTOKEN",browser:"Chrome"},{msg:"expected {{.}}, got '{{.}}'",type:"UNEXPECTEDTOKEN",browser:"Chrome"},{msg:"Identifier '{{.}}' has already been declared",type:"REDECLAREDVARIABLE",browser:"Chrome"},{msg:"redeclaration of {} {{.}}",type:"REDECLAREDVARIABLE",browser:"Firefox"},{msg:"Missing initializer in const declaration",type:"MISSINGINITIALIZER",browser:"Chrome"},{msg:"missing = in const declaration",type:"MISSINGINITIALIZER",browser:"Firefox"},{msg:"Illegal return statement",type:"BADRETURNORYIELD",browser:"Chrome"},{msg:"return not in function",type:"BADRETURNORYIELD",browser:"Firefox"}],TypeError:[{msg:"{{.}} is not a function",type:"NOTFUNC",browser:"all"},{msg:"Cannot read {{.}} null",type:"READNULL",browser:"Chrome"},{msg:"{{.}} is null",type:"READNULL",browser:"Firefox"},{msg:"Cannot read {{.}} undefined",type:"READUDEFINED",browser:"Chrome"},{msg:"{{.}} is undefined",type:"READUDEFINED",browser:"Firefox"},{msg:"Assignment to constant variable",type:"CONSTASSIGN",browser:"Chrome"},{msg:"invalid assignment to const '{{.}}'",type:"CONSTASSIGN",browser:"Firefox"}]},"undefined"!=typeof p5&&fA(p5,p5.prototype),"undefined"!=typeof p5&&gA(p5,p5.prototype),Object.freeze({status:"aborted"}),Symbol("zod_brand"),Sa=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Ea={},Ca=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{},Aa=xA(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}}),Ta=new Set(["string","number","symbol"]),Ma={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ka=vA("$ZodError",Da=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,bA,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})}),Na=vA("$ZodError",Da,{Parent:Error}),Ia=(Fa=e=>(t,n,r,i)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Sa;if(a.issues.length){const t=new(i?.Err??e)(a.issues.map(e=>RA(e,s,yA())));throw Ca(t,i?.callee),t}return a.value})(Na),La=(Ra=e=>async(t,n,r,i)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const t=new(i?.Err??e)(a.issues.map(e=>RA(e,s,yA())));throw Ca(t,i?.callee),t}return a.value})(Na),Oa=(Pa=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new Sa;return s.issues.length?{success:!1,error:new(e??ka)(s.issues.map(e=>RA(e,i,yA())))}:{success:!0,data:s.value}})(Na),Ua=(Ba=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>RA(e,i,yA())))}:{success:!0,data:s.value}})(Na),za=/^[cC][^\s-]{8,}$/,Va=/^[0-9a-z]+$/,ja=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ga=/^[0-9a-vA-V]{20}$/,Ha=/^[A-Za-z0-9]{27}$/,Wa=/^[a-zA-Z0-9_-]{21}$/,$a=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,qa=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Xa=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Ya=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Za="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ka=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qa=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ja=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eo=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,to=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,no=/^[A-Za-z0-9_-]*$/,ro=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,io=/^\+(?:[0-9]){6,14}[0-9]$/,so="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ao=new RegExp(`^${so}$`),oo=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),lo=/^\d+$/,uo=/^-?\d+(?:\.\d+)?/i,co=/true|false/i,ho=/^[^A-Z]*$/,po=/^[^a-z]*$/,fo=vA("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),mo={number:"number",bigint:"bigint",object:"date"},go=vA("$ZodCheckLessThan",(e,t)=>{fo.init(e,t);const n=mo[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),vo=vA("$ZodCheckGreaterThan",(e,t)=>{fo.init(e,t);const n=mo[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),yo=vA("$ZodCheckMultipleOf",(e,t)=>{fo.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value!==BigInt(0):0!==function(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(n.value,t.value))&&n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),bo=vA("$ZodCheckNumberFormat",(e,t)=>{fo.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[i,s]=Ma[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=s,n&&(r.pattern=lo)}),e._zod.check=a=>{const o=a.value;if(n){if(!Number.isInteger(o))return void a.issues.push({expected:r,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}o<i&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>s&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),xo=vA("$ZodCheckMaxLength",(e,t)=>{var n;fo.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!_A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const i=LA(r);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),_o=vA("$ZodCheckMinLength",(e,t)=>{var n;fo.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!_A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const i=LA(r);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),wo=vA("$ZodCheckLengthEquals",(e,t)=>{var n;fo.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!_A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,i=r.length;if(i===t.length)return;const s=LA(r),a=i>t.length;n.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),So=vA("$ZodCheckStringFormat",(e,t)=>{var n,r;fo.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Eo=vA("$ZodCheckRegex",(e,t)=>{So.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Co=vA("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ho),So.init(e,t)}),Ao=vA("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=po),So.init(e,t)}),To=vA("$ZodCheckIncludes",(e,t)=>{fo.init(e,t);const n=MA(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Mo=vA("$ZodCheckStartsWith",(e,t)=>{fo.init(e,t);const n=new RegExp(`^${MA(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Do=vA("$ZodCheckEndsWith",(e,t)=>{fo.init(e,t);const n=new RegExp(`.*${MA(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ko=vA("$ZodCheckOverwrite",(e,t)=>{fo.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}),No=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const i of r)this.content.push(i)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}},Fo={major:4,minor:0,patch:0},Io=vA("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Fo;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const i of r)for(const t of i._zod.onattach)t(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,i=NA(e);for(const s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(i)continue;const t=e.issues.length,a=s._zod.check(e);if(a instanceof Promise&&!1===n?.async)throw new Sa;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(i||(i=NA(e,t)))});else{if(e.issues.length===t)continue;i||(i=NA(e,t))}}return r?r.then(()=>e):e};e._zod.run=(n,i)=>{const s=e._zod.parse(n,i);if(s instanceof Promise){if(!1===i.async)throw new Sa;return s.then(e=>t(e,r,i))}return t(s,r,i)}}e["~standard"]={validate:t=>{try{const n=Oa(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Ua(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Ro=vA("$ZodString",(e,t)=>{Io.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??oo(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(i){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Lo=vA("$ZodStringFormat",(e,t)=>{So.init(e,t),Ro.init(e,t)}),Po=vA("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=qa),Lo.init(e,t)}),Oo=vA("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Xa(e))}else t.pattern??(t.pattern=Xa());Lo.init(e,t)}),Bo=vA("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ya),Lo.init(e,t)}),Uo=vA("$ZodURL",(e,t)=>{Lo.init(e,t),e._zod.check=n=>{try{const r=n.value,i=new URL(r),s=i.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:ro.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(!r.endsWith("/")&&s.endsWith("/")?n.value=s.slice(0,-1):n.value=s)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),zo=vA("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp(Za,"u")),Lo.init(e,t)}),Vo=vA("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Wa),Lo.init(e,t)}),jo=vA("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=za),Lo.init(e,t)}),Go=vA("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Va),Lo.init(e,t)}),Ho=vA("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ja),Lo.init(e,t)}),Wo=vA("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ga),Lo.init(e,t)}),$o=vA("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Ha),Lo.init(e,t)}),qo=vA("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=OA({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${so}T(?:${r})$`)}(t)),Lo.init(e,t)}),Xo=vA("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ao),Lo.init(e,t)}),Yo=vA("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${OA(t)}$`)),Lo.init(e,t)}),Zo=vA("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=$a),Lo.init(e,t)}),Ko=vA("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Ka),Lo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Qo=vA("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Qa),Lo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Jo=vA("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ja),Lo.init(e,t)}),el=vA("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=eo),Lo.init(e,t),e._zod.check=n=>{const[r,i]=n.value.split("/");try{if(!i)throw new Error;const e=Number(i);if(`${e}`!==i)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}}),tl=vA("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=to),Lo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{BA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),nl=vA("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=no),Lo.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!no.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return BA(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),rl=vA("$ZodE164",(e,t)=>{t.pattern??(t.pattern=io),Lo.init(e,t)}),il=vA("$ZodJWT",(e,t)=>{Lo.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&"JWT"!==i?.typ||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),sl=vA("$ZodNumber",(e,t)=>{Io.init(e,t),e._zod.pattern=e._zod.bag.pattern??uo,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(a){}const i=n.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;const s="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),n}}),al=vA("$ZodNumber",(e,t)=>{bo.init(e,t),sl.init(e,t)}),ol=vA("$ZodBoolean",(e,t)=>{Io.init(e,t),e._zod.pattern=co,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(s){}const i=n.value;return"boolean"==typeof i||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),ll=vA("$ZodAny",(e,t)=>{Io.init(e,t),e._zod.parse=e=>e}),ul=vA("$ZodUnknown",(e,t)=>{Io.init(e,t),e._zod.parse=e=>e}),cl=vA("$ZodNever",(e,t)=>{Io.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),hl=vA("$ZodArray",(e,t)=>{Io.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const s=[];for(let e=0;e<i.length;e++){const a=i[e],o=t.element._zod.run({value:a,issues:[]},r);o instanceof Promise?s.push(o.then(t=>UA(t,n,e))):UA(o,n,e)}return s.length?Promise.all(s).then(()=>n):n}}),dl=vA("$ZodObject",(e,t)=>{Io.init(e,t);const n=xA(()=>{const e=Object.keys(t.shape);for(const i of e)if(!(t.shape[i]instanceof Io))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=(r=t.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});let r;SA(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const i=AA,s=!Ea.jitless,a=s&&Aa.value,o=t.catchall;let l;e._zod.parse=(u,c)=>{l??(l=n.value);const h=u.value;if(!i(h))return u.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),u;const d=[];if(s&&a&&!1===c?.async&&!0!==c.jitless)r||(r=(e=>{const t=new No(["shape","payload","ctx"]),r=n.value,i=e=>{const t=CA(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const s=Object.create(null);let a=0;for(const n of r.keys)s[n]="key_"+a++;t.write("const newResult = {}");for(const n of r.keys)if(r.optionalKeys.has(n)){const e=s[n];t.write(`const ${e} = ${i(n)};`);const r=CA(n);t.write(`\n        if (${e}.issues.length) {\n          if (input[${r}] === undefined) {\n            if (${r} in input) {\n              newResult[${r}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${e}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${r}, ...iss.path] : [${r}],\n              }))\n            );\n          }\n        } else if (${e}.value === undefined) {\n          if (${r} in input) newResult[${r}] = undefined;\n        } else {\n          newResult[${r}] = ${e}.value;\n        }\n        `)}else{const e=s[n];t.write(`const ${e} = ${i(n)};`),t.write(`\n          if (${e}.issues.length) payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${CA(n)}, ...iss.path] : [${CA(n)}]\n          })));`),t.write(`newResult[${CA(n)}] = ${e}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,n)=>o(e,t,n)})(t.shape)),u=r(u,c);else{u.value={};const e=l.shape;for(const t of l.keys){const n=e[t],r=n._zod.run({value:h[t],issues:[]},c),i="optional"===n._zod.optin&&"optional"===n._zod.optout;r instanceof Promise?d.push(r.then(e=>i?VA(e,u,t,h):zA(e,u,t))):i?VA(r,u,t,h):zA(r,u,t)}}if(!o)return d.length?Promise.all(d).then(()=>u):u;const p=[],f=l.keySet,m=o._zod,g=m.def.type;for(const e of Object.keys(h)){if(f.has(e))continue;if("never"===g){p.push(e);continue}const t=m.run({value:h[e],issues:[]},c);t instanceof Promise?d.push(t.then(t=>zA(t,u,e))):zA(t,u,e)}return p.length&&u.issues.push({code:"unrecognized_keys",keys:p,input:h,inst:e}),d.length?Promise.all(d).then(()=>u):u}}),pl=vA("$ZodUnion",(e,t)=>{Io.init(e,t),SA(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),SA(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),SA(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),SA(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>wA(e.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let i=!1;const s=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},r);if(t instanceof Promise)s.push(t),i=!0;else{if(0===t.issues.length)return t;s.push(t)}}return i?Promise.all(s).then(t=>jA(t,n,e,r)):jA(s,n,e,r)}}),fl=vA("$ZodIntersection",(e,t)=>{Io.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,i=t.left._zod.run({value:r,issues:[]},n),s=t.right._zod.run({value:r,issues:[]},n);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([t,n])=>HA(e,t,n)):HA(e,i,s)}}),ml=vA("$ZodTuple",(e,t)=>{Io.init(e,t);const n=t.items,r=n.length-[...n].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(i,s)=>{const a=i.value;if(!Array.isArray(a))return i.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];const o=[];if(!t.rest){const t=a.length>n.length,s=a.length<r-1;if(t||s)return i.issues.push({input:a,inst:e,origin:"array",...t?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}}),i}let l=-1;for(const e of n){if(l++,l>=a.length&&l>=r)continue;const t=e._zod.run({value:a[l],issues:[]},s);t instanceof Promise?o.push(t.then(e=>WA(e,i,l))):WA(t,i,l)}if(t.rest){const e=a.slice(n.length);for(const n of e){l++;const e=t.rest._zod.run({value:n,issues:[]},s);e instanceof Promise?o.push(e.then(e=>WA(e,i,l))):WA(e,i,l)}}return o.length?Promise.all(o).then(()=>i):i}}),gl=vA("$ZodEnum",(e,t)=>{Io.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(e=>Ta.has(typeof e)).map(e=>"string"==typeof e?MA(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{const i=t.value;return e._zod.values.has(i)||t.issues.push({code:"invalid_value",values:n,input:i,inst:e}),t}}),vl=vA("$ZodLiteral",(e,t)=>{Io.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?MA(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),n}}),yl=vA("$ZodTransform",(e,t)=>{Io.init(e,t),e._zod.parse=(e,n)=>{const r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new Sa;return e.value=r,e}}),bl=vA("$ZodOptional",(e,t)=>{Io.init(e,t),e._zod.optin="optional",e._zod.optout="optional",SA(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),SA(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${wA(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)}),xl=vA("$ZodNullable",(e,t)=>{Io.init(e,t),SA(e._zod,"optin",()=>t.innerType._zod.optin),SA(e._zod,"optout",()=>t.innerType._zod.optout),SA(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${wA(e.source)}|null)$`):void 0}),SA(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),_l=vA("$ZodDefault",(e,t)=>{Io.init(e,t),e._zod.optin="optional",SA(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>$A(e,t)):$A(r,t)}}),wl=vA("$ZodPrefault",(e,t)=>{Io.init(e,t),e._zod.optin="optional",SA(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Sl=vA("$ZodNonOptional",(e,t)=>{Io.init(e,t),SA(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(t=>qA(t,e)):qA(i,e)}}),El=vA("$ZodCatch",(e,t)=>{Io.init(e,t),e._zod.optin="optional",SA(e._zod,"optout",()=>t.innerType._zod.optout),SA(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>RA(e,n,yA()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>RA(e,n,yA()))},input:e.value}),e.issues=[]),e)}}),Cl=vA("$ZodPipe",(e,t)=>{Io.init(e,t),SA(e._zod,"values",()=>t.in._zod.values),SA(e._zod,"optin",()=>t.in._zod.optin),SA(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,n)=>{const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>XA(e,t,n)):XA(r,t,n)}}),Al=vA("$ZodReadonly",(e,t)=>{Io.init(e,t),SA(e._zod,"propValues",()=>t.innerType._zod.propValues),SA(e._zod,"values",()=>t.innerType._zod.values),SA(e._zod,"optin",()=>t.innerType._zod.optin),SA(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(YA):YA(r)}}),Tl=vA("$ZodCustom",(e,t)=>{fo.init(e,t),Io.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(t=>ZA(t,n,r,e));ZA(i,n,r,e)}}),Symbol("ZodOutput"),Symbol("ZodInput"),Ml=class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}},Dl=KA(),kl=class{constructor(e){this._def=e,this.def=e}implement(e){if("function"!=typeof e)throw new Error("implement() must be called with a function");const t=(...n)=>{const r=this._def.input?Ia(this._def.input,n,void 0,{callee:t}):n;if(!Array.isArray(r))throw new Error("Invalid arguments schema: not an array or tuple schema.");const i=e(...r);return this._def.output?Ia(this._def.output,i,void 0,{callee:t}):i};return t}implementAsync(e){if("function"!=typeof e)throw new Error("implement() must be called with a function");const t=async(...n)=>{const r=this._def.input?await La(this._def.input,n,void 0,{callee:t}):n;if(!Array.isArray(r))throw new Error("Invalid arguments schema: not an array or tuple schema.");const i=await e(...r);return this._def.output?La(this._def.output,i,void 0,{callee:t}):i};return t}input(...e){const t=this.constructor;return Array.isArray(e[0])?new t({type:"function",input:new ml({type:"tuple",items:e[0],rest:e[1]}),output:this._def.output}):new t({type:"function",input:e[0],output:this._def.output})}output(e){return new(0,this.constructor)({type:"function",input:this._def.input,output:e})}},Nl=vA("ZodISODateTime",(e,t)=>{qo.init(e,t),Hl.init(e,t)}),Fl=vA("ZodISODate",(e,t)=>{Xo.init(e,t),Hl.init(e,t)}),Il=vA("ZodISOTime",(e,t)=>{Yo.init(e,t),Hl.init(e,t)}),Rl=vA("ZodISODuration",(e,t)=>{Zo.init(e,t),Hl.init(e,t)}),vA("ZodError",Ll=(e,t)=>{ka.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const n=t||function(e){return e.message},r={_errors:[]},i=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,i=0;for(;i<t.path.length;){const r=t.path[i];i!==t.path.length-1?e[r]=e[r]||{_errors:[]}:(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))),e=e[r],i++}}};return i(e),r}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})}),Pl=vA("ZodError",Ll,{Parent:Error}),Ol=Fa(Pl),Bl=Ra(Pl),Ul=Pa(Pl),zl=Ba(Pl),Vl=vA("ZodType",(e,t)=>(Io.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>DA(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>Ol(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>Ul(e,t,n),e.parseAsync=async(t,n)=>Bl(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>zl(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(FT(t,n)),e.superRefine=t=>e.check(IT(t)),e.overwrite=t=>e.check(lT(t)),e.optional=()=>MT(e),e.nullable=()=>DT(e),e.nullish=()=>MT(DT(e)),e.nonoptional=t=>function(e,t){return new Mu({type:"nonoptional",innerType:e,...kA(t)})}(e,t),e.array=()=>ST(e),e.or=t=>CT([e,t]),e.and=t=>new bu({type:"intersection",left:e,right:t}),e.transform=t=>kT(e,new Su({type:"transform",transform:t})),e.default=t=>{return n=t,new Au({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.prefault=t=>{return n=t,new Tu({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.catch=t=>{return new Du({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>kT(e,t),e.readonly=()=>new Nu({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return Dl.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>Dl.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Dl.get(e);const n=e.clone();return Dl.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),jl=vA("_ZodString",(e,t)=>{Ro.init(e,t),Vl.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new Eo({check:"string_format",format:"regex",...kA(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new To({check:"string_format",format:"includes",...kA(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new Mo({check:"string_format",format:"starts_with",...kA(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Do({check:"string_format",format:"ends_with",...kA(t),suffix:e})}(...t)),e.min=(...t)=>e.check(aT(...t)),e.max=(...t)=>e.check(sT(...t)),e.length=(...t)=>e.check(oT(...t)),e.nonempty=(...t)=>e.check(aT(1,...t)),e.lowercase=t=>e.check(function(e){return new Co({check:"string_format",format:"lowercase",...kA(e)})}(t)),e.uppercase=t=>e.check(function(e){return new Ao({check:"string_format",format:"uppercase",...kA(e)})}(t)),e.trim=()=>e.check(lT(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return lT(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(lT(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(lT(e=>e.toUpperCase()))}),Gl=vA("ZodString",(e,t)=>{Ro.init(e,t),jl.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...kA(t)})}(Wl,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...kA(t)})}(Xl,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...kA(t)})}(uu,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...kA(t)})}(Yl,t)),e.guid=t=>e.check(QA($l,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...kA(t)})}(ql,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...kA(t)})}(ql,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...kA(t)})}(ql,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...kA(t)})}(ql,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...kA(t)})}(Zl,t)),e.guid=t=>e.check(QA($l,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...kA(t)})}(Kl,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...kA(t)})}(Ql,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...kA(t)})}(Jl,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...kA(t)})}(au,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...kA(t)})}(ou,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...kA(t)})}(eu,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...kA(t)})}(tu,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...kA(t)})}(nu,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...kA(t)})}(ru,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...kA(t)})}(iu,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...kA(t)})}(su,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...kA(t)})}(lu,t)),e.datetime=t=>e.check(dT(t)),e.date=t=>e.check(pT(t)),e.time=t=>e.check(fT(t)),e.duration=t=>e.check(mT(t))}),Hl=vA("ZodStringFormat",(e,t)=>{Lo.init(e,t),jl.init(e,t)}),Wl=vA("ZodEmail",(e,t)=>{Bo.init(e,t),Hl.init(e,t)}),$l=vA("ZodGUID",(e,t)=>{Po.init(e,t),Hl.init(e,t)}),ql=vA("ZodUUID",(e,t)=>{Oo.init(e,t),Hl.init(e,t)}),Xl=vA("ZodURL",(e,t)=>{Uo.init(e,t),Hl.init(e,t)}),Yl=vA("ZodEmoji",(e,t)=>{zo.init(e,t),Hl.init(e,t)}),Zl=vA("ZodNanoID",(e,t)=>{Vo.init(e,t),Hl.init(e,t)}),Kl=vA("ZodCUID",(e,t)=>{jo.init(e,t),Hl.init(e,t)}),Ql=vA("ZodCUID2",(e,t)=>{Go.init(e,t),Hl.init(e,t)}),Jl=vA("ZodULID",(e,t)=>{Ho.init(e,t),Hl.init(e,t)}),eu=vA("ZodXID",(e,t)=>{Wo.init(e,t),Hl.init(e,t)}),tu=vA("ZodKSUID",(e,t)=>{$o.init(e,t),Hl.init(e,t)}),nu=vA("ZodIPv4",(e,t)=>{Ko.init(e,t),Hl.init(e,t)}),ru=vA("ZodIPv6",(e,t)=>{Qo.init(e,t),Hl.init(e,t)}),iu=vA("ZodCIDRv4",(e,t)=>{Jo.init(e,t),Hl.init(e,t)}),su=vA("ZodCIDRv6",(e,t)=>{el.init(e,t),Hl.init(e,t)}),au=vA("ZodBase64",(e,t)=>{tl.init(e,t),Hl.init(e,t)}),ou=vA("ZodBase64URL",(e,t)=>{nl.init(e,t),Hl.init(e,t)}),lu=vA("ZodE164",(e,t)=>{rl.init(e,t),Hl.init(e,t)}),uu=vA("ZodJWT",(e,t)=>{il.init(e,t),Hl.init(e,t)}),cu=vA("ZodNumber",(e,t)=>{sl.init(e,t),Vl.init(e,t),e.gt=(t,n)=>e.check(nT(t,n)),e.gte=(t,n)=>e.check(rT(t,n)),e.min=(t,n)=>e.check(rT(t,n)),e.lt=(t,n)=>e.check(eT(t,n)),e.lte=(t,n)=>e.check(tT(t,n)),e.max=(t,n)=>e.check(tT(t,n)),e.int=t=>e.check(yT(t)),e.safe=t=>e.check(yT(t)),e.positive=t=>e.check(nT(0,t)),e.nonnegative=t=>e.check(rT(0,t)),e.negative=t=>e.check(eT(0,t)),e.nonpositive=t=>e.check(tT(0,t)),e.multipleOf=(t,n)=>e.check(iT(t,n)),e.step=(t,n)=>e.check(iT(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null}),hu=vA("ZodNumberFormat",(e,t)=>{al.init(e,t),cu.init(e,t)}),du=vA("ZodBoolean",(e,t)=>{ol.init(e,t),Vl.init(e,t)}),pu=vA("ZodAny",(e,t)=>{ll.init(e,t),Vl.init(e,t)}),fu=vA("ZodUnknown",(e,t)=>{ul.init(e,t),Vl.init(e,t)}),mu=vA("ZodNever",(e,t)=>{cl.init(e,t),Vl.init(e,t)}),gu=vA("ZodArray",(e,t)=>{hl.init(e,t),Vl.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(aT(t,n)),e.nonempty=t=>e.check(aT(1,t)),e.max=(t,n)=>e.check(sT(t,n)),e.length=(t,n)=>e.check(oT(t,n)),e.unwrap=()=>e.element}),vu=vA("ZodObject",(e,t)=>{dl.init(e,t),Vl.init(e,t),SA(e,"shape",()=>t.shape),e.keyof=()=>function(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new _u({type:"enum",entries:n,...kA(t)})}(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:_T()}),e.loose=()=>e.clone({...e._zod.def,catchall:_T()}),e.strict=()=>e.clone({...e._zod.def,catchall:wT()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!TA(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return EA(this,"shape",n),n},checks:[]};return DA(e,n)}(e,t),e.merge=t=>{return r=t,DA(n=e,{...n._zod.def,get shape(){const e={...n._zod.def.shape,...r._zod.def.shape};return EA(this,"shape",e),e},catchall:r._zod.def.catchall,checks:[]});var n,r},e.pick=t=>function(e,t){const n={},r=e._zod.def;for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=r.shape[i])}return DA(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.omit=t=>function(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return DA(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.partial=(...t)=>function(e,t,n){const r=t._zod.def.shape,i={...r};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=e?new e({type:"optional",innerType:r[s]}):r[s])}else for(const s in r)i[s]=e?new e({type:"optional",innerType:r[s]}):r[s];return DA(t,{...t._zod.def,shape:i,checks:[]})}(Eu,e,t[0]),e.required=(...t)=>function(e,t,n){const r=t._zod.def.shape,i={...r};if(n)for(const s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(i[s]=new e({type:"nonoptional",innerType:r[s]}))}else for(const s in r)i[s]=new e({type:"nonoptional",innerType:r[s]});return DA(t,{...t._zod.def,shape:i,checks:[]})}(Mu,e,t[0])}),yu=vA("ZodUnion",(e,t)=>{pl.init(e,t),Vl.init(e,t),e.options=t.options}),bu=vA("ZodIntersection",(e,t)=>{fl.init(e,t),Vl.init(e,t)}),xu=vA("ZodTuple",(e,t)=>{ml.init(e,t),Vl.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})}),_u=vA("ZodEnum",(e,t)=>{gl.init(e,t),Vl.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const i={};for(const s of e){if(!n.has(s))throw new Error(`Key ${s} not found in enum`);i[s]=t.entries[s]}return new _u({...t,checks:[],...kA(r),entries:i})},e.exclude=(e,r)=>{const i={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete i[t]}return new _u({...t,checks:[],...kA(r),entries:i})}}),wu=vA("ZodLiteral",(e,t)=>{vl.init(e,t),Vl.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})}),Su=vA("ZodTransform",(e,t)=>{yl.init(e,t),Vl.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=r=>{if("string"==typeof r)n.issues.push(PA(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),n.issues.push(PA(t))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(e=>(n.value=e,n)):(n.value=i,n)}}),Eu=vA("ZodOptional",(e,t)=>{bl.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Cu=vA("ZodNullable",(e,t)=>{xl.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Au=vA("ZodDefault",(e,t)=>{_l.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),Tu=vA("ZodPrefault",(e,t)=>{wl.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Mu=vA("ZodNonOptional",(e,t)=>{Sl.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Du=vA("ZodCatch",(e,t)=>{El.init(e,t),Vl.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),ku=vA("ZodPipe",(e,t)=>{Cl.init(e,t),Vl.init(e,t),e.in=t.in,e.out=t.out}),Nu=vA("ZodReadonly",(e,t)=>{Al.init(e,t),Vl.init(e,t)}),Fu=vA("ZodCustom",(e,t)=>{Tl.init(e,t),Vl.init(e,t)}),Iu={p5:{describe:{overloads:[["String","FALLBACK|LABEL?"]]},describeElement:{overloads:[["String","String","FALLBACK|LABEL?"]]},textOutput:{overloads:[["FALLBACK|LABEL?"]]},gridOutput:{overloads:[["FALLBACK|LABEL?"]]},remove:{overloads:[[]]},p5:{overloads:[["Object","String|HTMLElement"]]},color:{overloads:[["Number","Number?"],["Number","Number","Number","Number?"],["String"],["Number[]"],["p5.Color"]]},red:{overloads:[["p5.Color|Number[]|String"]]},green:{overloads:[["p5.Color|Number[]|String"]]},blue:{overloads:[["p5.Color|Number[]|String"]]},alpha:{overloads:[["p5.Color|Number[]|String"]]},hue:{overloads:[["p5.Color|Number[]|String"]]},saturation:{overloads:[["p5.Color|Number[]|String"]]},brightness:{overloads:[["p5.Color|Number[]|String"]]},lightness:{overloads:[["p5.Color|Number[]|String"]]},lerpColor:{overloads:[["p5.Color","p5.Color","Number"]]},paletteLerp:{overloads:[["[p5.Color|String|Number|Number[], Number][]","Number"]]},beginClip:{overloads:[["Object?"]]},endClip:{overloads:[[]]},clip:{overloads:[["Function","Object?"]]},background:{overloads:[["p5.Color"],["String","Number?"],["Number","Number?"],["Number","Number","Number","Number?"],["Number[]"],["p5.Image","Number?"]]},clear:{overloads:[["Number?","Number?","Number?","Number?"],[]]},colorMode:{overloads:[["RGB|HSB|HSL|RGBHDR|HWB|LAB|LCH|OKLAB|OKLCH","Number?"],["RGB|HSB|HSL|RGBHDR|HWB|LAB|LCH|OKLAB|OKLCH","Number","Number","Number","Number?"],[]]},fill:{overloads:[["Number","Number","Number","Number?"],["String"],["Number","Number?"],["Number[]"],["p5.Color"]]},noFill:{overloads:[[]]},noStroke:{overloads:[[]]},stroke:{overloads:[["Number","Number","Number","Number?"],["String"],["Number","Number?"],["Number[]"],["p5.Color"]]},erase:{overloads:[["Number?","Number?"]]},noErase:{overloads:[[]]},blendMode:{overloads:[["BLEND|DARKEST|LIGHTEST|DIFFERENCE|MULTIPLY|EXCLUSION|SCREEN|REPLACE|OVERLAY|HARD_LIGHT|SOFT_LIGHT|DODGE|BURN|ADD|REMOVE|SUBTRACT"]]},print:{overloads:[["Any"],["String|Number|Array"]]},cursor:{overloads:[["ARROW|CROSS|HAND|MOVE|TEXT|WAIT|String","Number?","Number?"]]},frameRate:{overloads:[["Number"],[]]},getTargetFrameRate:{overloads:[[]]},noCursor:{overloads:[[]]},windowResized:{overloads:[["Event?"]]},fullscreen:{overloads:[["Boolean?"]]},pixelDensity:{overloads:[["Number?"],[]]},displayDensity:{overloads:[[]]},getURL:{overloads:[[]]},getURLPath:{overloads:[[]]},getURLParams:{overloads:[[]]},worldToScreen:{overloads:[["Number|p5.Vector","Number","Number?"]]},screenToWorld:{overloads:[["Number|p5.Vector","Number","Number?"]]},setup:{overloads:[[]]},draw:{overloads:[[]]},registerAddon:{overloads:[["Function"]]},createCanvas:{overloads:[["Number?","Number?","P2D|WEBGL|P2DHDR?","HTMLCanvasElement?"],["Number?","Number?","HTMLCanvasElement?"]]},resizeCanvas:{overloads:[["Number","Number","Boolean?"]]},noCanvas:{overloads:[[]]},createGraphics:{overloads:[["Number","Number","P2D|WEBGL?","HTMLCanvasElement?"],["Number","Number","HTMLCanvasElement?"]]},createFramebuffer:{overloads:[["Object?"]]},clearDepth:{overloads:[["Number?"]]},noLoop:{overloads:[[]]},loop:{overloads:[[]]},isLooping:{overloads:[[]]},redraw:{overloads:[["Integer?"]]},applyMatrix:{overloads:[["Number[]"],["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]},resetMatrix:{overloads:[[]]},rotate:{overloads:[["Number","p5.Vector|Number[]?"]]},rotateX:{overloads:[["Number"]]},rotateY:{overloads:[["Number"]]},rotateZ:{overloads:[["Number"]]},scale:{overloads:[["Number|p5.Vector|Number[]","Number?","Number?"],["p5.Vector|Number[]"]]},shearX:{overloads:[["Number"]]},shearY:{overloads:[["Number"]]},translate:{overloads:[["Number","Number","Number?"],["p5.Vector"]]},push:{overloads:[[]]},pop:{overloads:[[]]},storeItem:{overloads:[["String","String|Number|Boolean|Object|Array"]]},getItem:{overloads:[["String"]]},clearStorage:{overloads:[[]]},removeItem:{overloads:[["String"]]},select:{overloads:[["String","String|p5.Element|HTMLElement?"]]},selectAll:{overloads:[["String","String|p5.Element|HTMLElement?"]]},createElement:{overloads:[["String","String?"]]},removeElements:{overloads:[[]]},addElement:{overloads:[[]]},createDiv:{overloads:[["String?"]]},createP:{overloads:[["String?"]]},createSpan:{overloads:[["String?"]]},createImg:{overloads:[["String","String"],["String","String","String?","Function?"]]},createA:{overloads:[["String","String","String?"]]},createSlider:{overloads:[["Number","Number","Number?","Number?"]]},createButton:{overloads:[["String","String?"]]},createCheckbox:{overloads:[["String?","Boolean?"]]},createSelect:{overloads:[["Boolean?"],["Object"]]},createRadio:{overloads:[["Object?"],["String?"],[]]},createColorPicker:{overloads:[["String|p5.Color?"]]},createInput:{overloads:[["String?","String?"],["String?"]]},createFileInput:{overloads:[["Function","Boolean?"]]},createVideo:{overloads:[["String|String[]?","Function?"]]},createAudio:{overloads:[["String|String[]?","Function?"]]},createCapture:{overloads:[["AUDIO|VIDEO|Object?","Object?","Function?"]]},setMoveThreshold:{overloads:[["Number"]]},setShakeThreshold:{overloads:[["Number"]]},deviceMoved:{overloads:[[]]},deviceTurned:{overloads:[[]]},deviceShaken:{overloads:[[]]},keyPressed:{overloads:[["KeyboardEvent?"]]},keyReleased:{overloads:[["KeyboardEvent?"]]},keyTyped:{overloads:[["KeyboardEvent?"]]},keyIsDown:{overloads:[["Number|String"]]},mouseMoved:{overloads:[["MouseEvent?"]]},mouseDragged:{overloads:[["MouseEvent?"]]},mousePressed:{overloads:[["MouseEvent?"]]},mouseReleased:{overloads:[["MouseEvent?"]]},mouseClicked:{overloads:[["MouseEvent?"]]},doubleClicked:{overloads:[["MouseEvent?"]]},mouseWheel:{overloads:[["WheelEvent?"]]},requestPointerLock:{overloads:[[]]},exitPointerLock:{overloads:[[]]},createImage:{overloads:[["Integer","Integer"]]},saveCanvas:{overloads:[["p5.Framebuffer|p5.Element|HTMLCanvasElement","String?","String?"],["String?","String?"]]},saveFrames:{overloads:[["String","String","Number","Number","function(Array)?"]]},loadImage:{overloads:[["String|Request","function(p5.Image)?","function(Event)?"]]},saveGif:{overloads:[["String","Number","Object?"]]},image:{overloads:[["p5.Image|p5.Element|p5.Texture|p5.Framebuffer|p5.FramebufferTexture|p5.Renderer|p5.Graphics","Number","Number","Number?","Number?"],["p5.Image|p5.Element|p5.Texture|p5.Framebuffer|p5.FramebufferTexture","Number","Number","Number","Number","Number","Number","Number?","Number?","CONTAIN|COVER?","LEFT|RIGHT|CENTER?","TOP|BOTTOM|CENTER?"]]},tint:{overloads:[["Number","Number","Number","Number?"],["String"],["Number","Number?"],["Number[]"],["p5.Color"]]},noTint:{overloads:[[]]},imageMode:{overloads:[["CORNER|CORNERS|CENTER"]]},blend:{overloads:[["p5.Image","Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer","BLEND|DARKEST|LIGHTEST|DIFFERENCE|MULTIPLY|EXCLUSION|SCREEN|REPLACE|OVERLAY|HARD_LIGHT|SOFT_LIGHT|DODGE|BURN|ADD|NORMAL"],["Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer","BLEND|DARKEST|LIGHTEST|DIFFERENCE|MULTIPLY|EXCLUSION|SCREEN|REPLACE|OVERLAY|HARD_LIGHT|SOFT_LIGHT|DODGE|BURN|ADD|NORMAL"]]},copy:{overloads:[["p5.Image|p5.Element","Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer"],["Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer"]]},filter:{overloads:[["THRESHOLD|GRAY|OPAQUE|INVERT|POSTERIZE|BLUR|ERODE|DILATE|BLUR","Number?","Boolean?"],["p5.Shader"]]},get:{overloads:[["Number","Number","Number","Number"],[],["Number","Number"]]},loadPixels:{overloads:[[]]},set:{overloads:[["Number","Number","Number|Number[]|Object"]]},updatePixels:{overloads:[["Number?","Number?","Number?","Number?"],[]]},loadJSON:{overloads:[["String|Request","Function?","Function?"]]},loadStrings:{overloads:[["String|Request","Function?","Function?"]]},loadTable:{overloads:[["String|Request","String?","String?","Function?","Function?"]]},loadXML:{overloads:[["String|Request","Function?","Function?"]]},loadBytes:{overloads:[["String|Request","Function?","Function?"]]},loadBlob:{overloads:[["String|Request","Function?","Function?"]]},httpGet:{overloads:[["String|Request","String?","Function?","Function?"],["String|Request","Function","Function?"]]},httpPost:{overloads:[["String|Request","Object|Boolean?","String?","Function?","Function?"],["String|Request","Object|Boolean","Function?","Function?"],["String|Request","Function?","Function?"]]},httpDo:{overloads:[["String|Request","String?","String?","Object?","Function?","Function?"],["String|Request","Function?","Function?"]]},createWriter:{overloads:[["String","String?"]]},write:{overloads:[["String|Number|Array"]]},close:{overloads:[[]]},save:{overloads:[["Object|String?","String?","Boolean|String?"]]},saveJSON:{overloads:[["Array|Object","String","Boolean?"]]},saveStrings:{overloads:[["String[]","String","String?","Boolean?"]]},saveTable:{overloads:[["p5.Table","String","String?"]]},setContent:{overloads:[["String"]]},abs:{overloads:[["Number"]]},ceil:{overloads:[["Number"]]},constrain:{overloads:[["Number","Number","Number"]]},dist:{overloads:[["Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number"]]},exp:{overloads:[["Number"]]},floor:{overloads:[["Number"]]},lerp:{overloads:[["Number","Number","Number"]]},log:{overloads:[["Number"]]},mag:{overloads:[["Number","Number"]]},map:{overloads:[["Number","Number","Number","Number","Number","Boolean?"]]},max:{overloads:[["Number","Number"],["Number[]"]]},min:{overloads:[["Number","Number"],["Number[]"]]},norm:{overloads:[["Number","Number","Number"]]},pow:{overloads:[["Number","Number"]]},round:{overloads:[["Number","Number?"]]},sq:{overloads:[["Number"]]},sqrt:{overloads:[["Number"]]},fract:{overloads:[["Number"]]},createVector:{overloads:[["...Number[]"]]},noise:{overloads:[["Number","Number?","Number?"]]},noiseDetail:{overloads:[["Number","Number"]]},noiseSeed:{overloads:[["Number"]]},randomSeed:{overloads:[["Number"]]},random:{overloads:[["Number?","Number?"],["Array"]]},randomGaussian:{overloads:[["Number?","Number?"]]},acos:{overloads:[["Number"]]},asin:{overloads:[["Number"]]},atan:{overloads:[["Number"]]},atan2:{overloads:[["Number","Number"]]},cos:{overloads:[["Number"]]},sin:{overloads:[["Number"]]},tan:{overloads:[["Number"]]},degrees:{overloads:[["Number"]]},radians:{overloads:[["Number"]]},angleMode:{overloads:[["RADIANS|DEGREES"],[]]},arc:{overloads:[["Number","Number","Number","Number","Number","Number","CHORD|PIE|OPEN?","Integer?"]]},ellipse:{overloads:[["Number","Number","Number","Number?"],["Number","Number","Number","Number","Integer?"]]},circle:{overloads:[["Number","Number","Number"]]},line:{overloads:[["Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number"]]},point:{overloads:[["Number","Number","Number?"],["p5.Vector"]]},quad:{overloads:[["Number","Number","Number","Number","Number","Number","Number","Number","Integer?","Integer?"],["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Integer?","Integer?"]]},rect:{overloads:[["Number","Number","Number","Number?","Number?","Number?","Number?","Number?"],["Number","Number","Number","Number","Integer?","Integer?"]]},square:{overloads:[["Number","Number","Number","Number?","Number?","Number?","Number?"]]},triangle:{overloads:[["Number","Number","Number","Number","Number","Number"]]},ellipseMode:{overloads:[["CENTER|RADIUS|CORNER|CORNERS"]]},noSmooth:{overloads:[[]]},rectMode:{overloads:[["CENTER|RADIUS|CORNER|CORNERS"]]},smooth:{overloads:[[]]},strokeCap:{overloads:[["ROUND|SQUARE|PROJECT"]]},strokeJoin:{overloads:[["MITER|BEVEL|ROUND"]]},strokeWeight:{overloads:[["Number"]]},bezier:{overloads:[["Number","Number","Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]},bezierPoint:{overloads:[["Number","Number","Number","Number","Number"]]},bezierTangent:{overloads:[["Number","Number","Number","Number","Number"]]},spline:{overloads:[["Number","Number","Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]},splinePoint:{overloads:[["Number","Number","Number","Number","Number"]]},splineTangent:{overloads:[["Number","Number","Number","Number","Number"]]},bezierOrder:{overloads:[["Number"],[]]},splineVertex:{overloads:[["Number","Number"],["Number","Number","Number?"],["Number","Number","Number?","Number?"],["Number","Number","Number","Number?","Number?"]]},splineProperty:{overloads:[["String",null],["String"]]},splineProperties:{overloads:[["Object"],[]]},vertex:{overloads:[["Number","Number"],["Number","Number","Number?","Number?"],["Number","Number","Number","Number?","Number?"]]},beginContour:{overloads:[[]]},endContour:{overloads:[["OPEN|CLOSE?"]]},beginShape:{overloads:[["POINTS|LINES|TRIANGLES|TRIANGLE_FAN|TRIANGLE_STRIP|QUADS|QUAD_STRIP|PATH?"]]},bezierVertex:{overloads:[["Number","Number","Number?","Number?"],["Number","Number","Number","Number?","Number?"]]},endShape:{overloads:[["CLOSE?","Integer?"]]},normal:{overloads:[["p5.Vector"],["Number","Number","Number"]]},vertexProperty:{overloads:[["String","Number|Number[]"]]},getWorldInputs:{overloads:[["Function"]]},combineColors:{overloads:[["Function"]]},getPixelInputs:{overloads:[["Function"]]},getFinalColor:{overloads:[["Function"]]},getColor:{overloads:[["Function"]]},getObjectInputs:{overloads:[["Function"]]},getCameraInputs:{overloads:[["Function"]]},loadFont:{overloads:[["String","String?","Object?","Function?","Function?"],["String","Function?","Function?"]]},text:{overloads:[["String|Object|Array|Number|Boolean","Number","Number","Number?","Number?"]]},textAlign:{overloads:[["LEFT|CENTER|RIGHT?","TOP|BOTTOM|CENTER|BASELINE?"]]},textAscent:{overloads:[["String?"]]},textDescent:{overloads:[["String?"]]},textLeading:{overloads:[["Number?"]]},textFont:{overloads:[["p5.Font|String|Object?","Number?"]]},textSize:{overloads:[["Number"],[]]},textStyle:{overloads:[["NORMAL|ITALIC|BOLD|BOLDITALIC"],[]]},textWidth:{overloads:[["String"]]},textWrap:{overloads:[["WORD|CHAR"],[]]},textBounds:{overloads:[["String","Number","Number","Number?","Number?"]]},textDirection:{overloads:[["String"],[]]},textProperty:{overloads:[["String",null],["String"]]},textProperties:{overloads:[["Object"],[]]},fontBounds:{overloads:[["String","Number","Number","Number?","Number?"]]},fontWidth:{overloads:[["String"]]},fontAscent:{overloads:[[]]},fontDescent:{overloads:[[]]},textWeight:{overloads:[["Number"],[]]},float:{overloads:[["String"],["String[]"]]},int:{overloads:[["String|Boolean|Number"],["Array"]]},str:{overloads:[["String|Boolean|Number"]]},boolean:{overloads:[["String|Boolean|Number"],["Array"]]},byte:{overloads:[["String|Boolean|Number"],["Array"]]},char:{overloads:[["String|Number"],["Array"]]},unchar:{overloads:[["String"],["String[]"]]},hex:{overloads:[["Number","Number?"],["Number[]","Number?"]]},unhex:{overloads:[["String"],["String[]"]]},day:{overloads:[[]]},hour:{overloads:[[]]},minute:{overloads:[[]]},millis:{overloads:[[]]},month:{overloads:[[]]},second:{overloads:[[]]},year:{overloads:[[]]},nf:{overloads:[["Number|String","Integer|String?","Integer|String?"],["Number[]","Integer|String?","Integer|String?"]]},nfc:{overloads:[["Number|String","Integer|String?"],["Number[]","Integer|String?"]]},nfp:{overloads:[["Number","Integer?","Integer?"],["Number[]","Integer?","Integer?"]]},nfs:{overloads:[["Number","Integer?","Integer?"],["Array","Integer?","Integer?"]]},splitTokens:{overloads:[["String","String?"]]},shuffle:{overloads:[["Array","Boolean?"]]},strokeMode:{overloads:[["String"]]},buildGeometry:{overloads:[["Function"]]},freeGeometry:{overloads:[["p5.Geometry"]]},plane:{overloads:[["Number?","Number?","Integer?","Integer?"]]},box:{overloads:[["Number?","Number?","Number?","Integer?","Integer?"]]},sphere:{overloads:[["Number?","Integer?","Integer?"]]},cylinder:{overloads:[["Number?","Number?","Integer?","Integer?","Boolean?","Boolean?"]]},cone:{overloads:[["Number?","Number?","Integer?","Integer?","Boolean?"]]},ellipsoid:{overloads:[["Number?","Number?","Number?","Integer?","Integer?"]]},torus:{overloads:[["Number?","Number?","Integer?","Integer?"]]},curveDetail:{overloads:[["Number"]]},orbitControl:{overloads:[["Number?","Number?","Number?","Object?"]]},debugMode:{overloads:[[],["GRID|AXES"],["GRID|AXES","Number?","Number?","Number?","Number?","Number?"],["GRID|AXES","Number?","Number?","Number?","Number?"],["Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?"]]},noDebugMode:{overloads:[[]]},ambientLight:{overloads:[["Number","Number","Number","Number?"],["Number","Number?"],["String"],["Number[]"],["p5.Color"]]},specularColor:{overloads:[["Number","Number","Number"],["Number"],["String"],["Number[]"],["p5.Color"]]},directionalLight:{overloads:[["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","p5.Vector"],["p5.Color|Number[]|String","Number","Number","Number"],["p5.Color|Number[]|String","p5.Vector"]]},pointLight:{overloads:[["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","p5.Vector"],["p5.Color|Number[]|String","Number","Number","Number"],["p5.Color|Number[]|String","p5.Vector"]]},imageLight:{overloads:[["p5.Image"]]},panorama:{overloads:[["p5.Image"]]},lights:{overloads:[[]]},lightFalloff:{overloads:[["Number","Number","Number"]]},spotLight:{overloads:[["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number?","Number?"],["p5.Color|Number[]|String","p5.Vector","p5.Vector","Number?","Number?"],["Number","Number","Number","p5.Vector","p5.Vector","Number?","Number?"],["p5.Color|Number[]|String","Number","Number","Number","p5.Vector","Number?","Number?"],["p5.Color|Number[]|String","p5.Vector","Number","Number","Number","Number?","Number?"],["Number","Number","Number","Number","Number","Number","p5.Vector","Number?","Number?"],["Number","Number","Number","p5.Vector","Number","Number","Number","Number?","Number?"],["p5.Color|Number[]|String","Number","Number","Number","Number","Number","Number","Number?","Number?"]]},noLights:{overloads:[[]]},loadModel:{overloads:[["String|Request","String?","Boolean?","function(p5.Geometry)?","function(Event)?"],["String|Request","String?","function(p5.Geometry)?","function(Event)?"],["String|Request","Object?"]]},model:{overloads:[["p5.Geometry","Number?"]]},createModel:{overloads:[["String","String?","Boolean?","function(p5.Geometry)?","function(Event)?"],["String","String?","function(p5.Geometry)?","function(Event)?"],["String","String?","Object?"]]},loadShader:{overloads:[["String|Request","String|Request","Function?","Function?"]]},createShader:{overloads:[["String","String","Object?"]]},loadFilterShader:{overloads:[["String","Function?","Function?"]]},createFilterShader:{overloads:[["String"]]},shader:{overloads:[["p5.Shader"]]},strokeShader:{overloads:[["p5.Shader"]]},imageShader:{overloads:[["p5.Shader"]]},baseMaterialShader:{overloads:[[]]},baseFilterShader:{overloads:[[]]},baseNormalShader:{overloads:[[]]},baseColorShader:{overloads:[[]]},baseStrokeShader:{overloads:[[]]},resetShader:{overloads:[[]]},texture:{overloads:[["p5.Image|p5.MediaElement|p5.Graphics|p5.Texture|p5.Framebuffer|p5.FramebufferTexture"]]},textureMode:{overloads:[["IMAGE|NORMAL"]]},textureWrap:{overloads:[["CLAMP|REPEAT|MIRROR","CLAMP|REPEAT|MIRROR?"]]},normalMaterial:{overloads:[[]]},ambientMaterial:{overloads:[["Number","Number","Number"],["Number"],["p5.Color|Number[]|String"]]},emissiveMaterial:{overloads:[["Number","Number","Number","Number?"],["Number"],["p5.Color|Number[]|String"]]},specularMaterial:{overloads:[["Number","Number?"],["Number","Number","Number","Number?"],["p5.Color|Number[]|String"]]},shininess:{overloads:[["Number"]]},metalness:{overloads:[["Number"]]},roll:{overloads:[["Number"]]},camera:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?"]]},perspective:{overloads:[["Number?","Number?","Number?","Number?"]]},linePerspective:{overloads:[["Boolean"],[]]},ortho:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?"]]},frustum:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?"]]},createCamera:{overloads:[[]]},setCamera:{overloads:[["p5.Camera"]]},saveObj:{overloads:[["String?"]]},saveStl:{overloads:[["String?","Object?"]]},fromAxisAngle:{overloads:[["Number?","Number?","Number?","Number?"]]},mult:{overloads:[["p5.Quat?"]]},rotateBy:{overloads:[["p5.Quat?"]]},setAttributes:{overloads:[["String","Boolean"],["Object"]]}},"p5.Color":{toString:{overloads:[["String?"]]},contrast:{overloads:[["Color"]]},setRed:{overloads:[["Number"]]},setGreen:{overloads:[["Number"]]},setBlue:{overloads:[["Number"]]},setAlpha:{overloads:[["Number"]]}},"p5.Graphics":{reset:{overloads:[[]]},remove:{overloads:[[]]},createFramebuffer:{overloads:[["Object?"]]}},"p5.Element":{remove:{overloads:[[]]},parent:{overloads:[["String|p5.Element|Object"],[]]},child:{overloads:[[],["String|p5.Element?"]]},html:{overloads:[[],["String?","Boolean?"]]},id:{overloads:[["String"],[]]},class:{overloads:[["String"],[]]},addClass:{overloads:[["String"]]},removeClass:{overloads:[["String"]]},hasClass:{overloads:[[null]]},toggleClass:{overloads:[[null]]},center:{overloads:[["String?"]]},position:{overloads:[[],["Number?","Number?","String?"]]},show:{overloads:[[]]},hide:{overloads:[[]]},size:{overloads:[[],["Number|AUTO?","Number|AUTO?"]]},style:{overloads:[["String"],["String","String|p5.Color"]]},attribute:{overloads:[[],["String","String"]]},removeAttribute:{overloads:[["String"]]},value:{overloads:[[],["String|Number"]]},mousePressed:{overloads:[["Function|Boolean"]]},doubleClicked:{overloads:[["Function|Boolean"]]},mouseWheel:{overloads:[["Function|Boolean"]]},mouseReleased:{overloads:[["Function|Boolean"]]},mouseClicked:{overloads:[["Function|Boolean"]]},mouseMoved:{overloads:[["Function|Boolean"]]},mouseOver:{overloads:[["Function|Boolean"]]},mouseOut:{overloads:[["Function|Boolean"]]},dragOver:{overloads:[["Function|Boolean"]]},dragLeave:{overloads:[["Function|Boolean"]]},changed:{overloads:[["Function|Boolean"]]},input:{overloads:[["Function|Boolean"]]},drop:{overloads:[["Function","Function?"]]},draggable:{overloads:[["p5.Element?"]]}},"p5.MediaElement":{play:{overloads:[[]]},stop:{overloads:[[]]},pause:{overloads:[[]]},loop:{overloads:[[]]},noLoop:{overloads:[[]]},autoplay:{overloads:[["Boolean?"]]},volume:{overloads:[[],["Number"]]},speed:{overloads:[[],["Number"]]},time:{overloads:[["Number?"]]},duration:{overloads:[[]]},onended:{overloads:[["Function"]]},connect:{overloads:[["AudioNode|Object"]]},disconnect:{overloads:[[]]},showControls:{overloads:[[]]},hideControls:{overloads:[[]]},addCue:{overloads:[["Number","Function","Object?"]]},removeCue:{overloads:[["Number"]]},clearCues:{overloads:[[]]}},"p5.Image":{pixelDensity:{overloads:[["Number?"]]},loadPixels:{overloads:[[]]},updatePixels:{overloads:[["Integer?","Integer?","Integer?","Integer?"]]},get:{overloads:[["Number","Number","Number","Number"],[],["Number","Number"]]},set:{overloads:[["Number","Number","Number|Number[]|Object"]]},resize:{overloads:[["Number","Number"]]},copy:{overloads:[["p5.Image|p5.Element","Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer"],["Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer"]]},mask:{overloads:[["p5.Image"]]},filter:{overloads:[["THRESHOLD|GRAY|OPAQUE|INVERT|POSTERIZE|ERODE|DILATE|BLUR","Number?"]]},blend:{overloads:[["p5.Image","Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer","BLEND|DARKEST|LIGHTEST|DIFFERENCE|MULTIPLY|EXCLUSION|SCREEN|REPLACE|OVERLAY|HARD_LIGHT|SOFT_LIGHT|DODGE|BURN|ADD|NORMAL"],["Integer","Integer","Integer","Integer","Integer","Integer","Integer","Integer","BLEND|DARKEST|LIGHTEST|DIFFERENCE|MULTIPLY|EXCLUSION|SCREEN|REPLACE|OVERLAY|HARD_LIGHT|SOFT_LIGHT|DODGE|BURN|ADD|NORMAL"]]},save:{overloads:[["String","String?"]]},reset:{overloads:[[]]},getCurrentFrame:{overloads:[[]]},setFrame:{overloads:[["Number"]]},numFrames:{overloads:[[]]},play:{overloads:[[]]},pause:{overloads:[[]]},delay:{overloads:[["Number","Number?"]]}},"p5.Table":{addRow:{overloads:[["p5.TableRow?"]]},removeRow:{overloads:[["Integer"]]},getRow:{overloads:[["Integer"]]},getRows:{overloads:[[]]},findRow:{overloads:[["String","Integer|String"]]},findRows:{overloads:[["String","Integer|String"]]},matchRow:{overloads:[["String|RegExp","String|Integer"]]},matchRows:{overloads:[["String","String|Integer?"]]},getColumn:{overloads:[["String|Number"]]},clearRows:{overloads:[[]]},addColumn:{overloads:[["String?"]]},getColumnCount:{overloads:[[]]},getRowCount:{overloads:[[]]},removeTokens:{overloads:[["String","String|Integer?"]]},trim:{overloads:[["String|Integer?"]]},removeColumn:{overloads:[["String|Integer"]]},set:{overloads:[["Integer","String|Integer","String|Number"]]},setNum:{overloads:[["Integer","String|Integer","Number"]]},setString:{overloads:[["Integer","String|Integer","String"]]},get:{overloads:[["Integer","String|Integer"]]},getNum:{overloads:[["Integer","String|Integer"]]},getString:{overloads:[["Integer","String|Integer"]]},getObject:{overloads:[["String?"]]},getArray:{overloads:[[]]}},"p5.TableRow":{set:{overloads:[["String|Integer","String|Number"]]},setNum:{overloads:[["String|Integer","Number|String"]]},setString:{overloads:[["String|Integer","String|Number|Boolean|Object"]]},get:{overloads:[["String|Integer"]]},getNum:{overloads:[["String|Integer"]]},getString:{overloads:[["String|Integer"]]}},"p5.XML":{getParent:{overloads:[[]]},getName:{overloads:[[]]},setName:{overloads:[["String"]]},hasChildren:{overloads:[[]]},listChildren:{overloads:[[]]},getChildren:{overloads:[["String?"]]},getChild:{overloads:[["String|Integer"]]},addChild:{overloads:[["p5.XML"]]},removeChild:{overloads:[["String|Integer"]]},getAttributeCount:{overloads:[[]]},listAttributes:{overloads:[[]]},hasAttribute:{overloads:[["String"]]},getNum:{overloads:[["String","Number?"]]},getString:{overloads:[["String","Number?"]]},setAttribute:{overloads:[["String","Number|String|Boolean"]]},getContent:{overloads:[["String?"]]},serialize:{overloads:[[]]}},"p5.Vector":{getValue:{overloads:[["Number"]]},setValue:{overloads:[["Number","Number"]]},set:{overloads:[["Number?","Number?","Number?"],["p5.Vector|Number[]"]]},copy:{overloads:[[]]},add:{overloads:[["Number|Array","Number?","Number?"],["p5.Vector|Number[]"]]},rem:{overloads:[["Number","Number","Number"],["p5.Vector|Number[]"]]},sub:{overloads:[["Number","Number?","Number?"],["p5.Vector|Number[]"]]},mult:{overloads:[["Number"],["Number","Number","Number?"],["Number[]"],["p5.Vector"]]},div:{overloads:[["Number"],["Number","Number","Number?"],["Number[]"],["p5.Vector"]]},mag:{overloads:[[]]},magSq:{overloads:[[]]},dot:{overloads:[["Number","Number?","Number?"],["p5.Vector"]]},cross:{overloads:[["p5.Vector"]]},dist:{overloads:[["p5.Vector"]]},normalize:{overloads:[[]]},limit:{overloads:[["Number"]]},setMag:{overloads:[["Number"]]},heading:{overloads:[[]]},setHeading:{overloads:[["Number"]]},rotate:{overloads:[["Number"]]},angleBetween:{overloads:[["p5.Vector"]]},lerp:{overloads:[["Number","Number","Number","Number"],["p5.Vector","Number"]]},slerp:{overloads:[["p5.Vector","Number"]]},reflect:{overloads:[["p5.Vector"]]},array:{overloads:[[]]},equals:{overloads:[["Number?","Number?","Number?"],["p5.Vector|Array"]]},clampToZero:{overloads:[[]]},fromAngle:{overloads:[["Number","Number?"]]},fromAngles:{overloads:[["Number","Number","Number?"]]},random2D:{overloads:[[]]},random3D:{overloads:[[]]}},"p5.Font":{textToPaths:{overloads:[["String","Number","Number","Number?","Number?"]]},textToPoints:{overloads:[["String","Number","Number","Object?"]]},textToContours:{overloads:[["String","Number","Number","Object?"]]},textToModel:{overloads:[["String","Number","Number","Number","Number","Object?"]]}},"p5.Camera":{perspective:{overloads:[["Number?","Number?","Number?","Number?"]]},ortho:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?"]]},frustum:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?"]]},pan:{overloads:[["Number"]]},tilt:{overloads:[["Number"]]},lookAt:{overloads:[["Number","Number","Number"]]},camera:{overloads:[["Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?","Number?"]]},move:{overloads:[["Number","Number","Number"]]},setPosition:{overloads:[["Number","Number","Number"]]},set:{overloads:[["p5.Camera"]]},slerp:{overloads:[["p5.Camera","p5.Camera","Number"]]}},"p5.Framebuffer":{resize:{overloads:[["Number","Number"]]},pixelDensity:{overloads:[["Number?"]]},autoSized:{overloads:[["Boolean?"]]},createCamera:{overloads:[[]]},remove:{overloads:[[]]},begin:{overloads:[[]]},end:{overloads:[[]]},draw:{overloads:[["Function"]]},loadPixels:{overloads:[[]]},get:{overloads:[["Number","Number","Number","Number"],[],["Number","Number"]]}},"p5.Geometry":{calculateBoundingBox:{overloads:[[]]},clearColors:{overloads:[[]]},flipU:{overloads:[[]]},computeFaces:{overloads:[[]]},computeNormals:{overloads:[["FLAT|SMOOTH?","Object?"]]},makeEdgesFromFaces:{overloads:[[]]},normalize:{overloads:[[]]},vertexProperty:{overloads:[["String","Number|Number[]","Number?"]]},flipV:{overloads:[[]]}},"p5.Shader":{version:{overloads:[[]]},inspectHooks:{overloads:[[]]},modify:{overloads:[["Function","Object?"],["Object?"]]},copyToContext:{overloads:[["p5|p5.Graphics"]]},setUniform:{overloads:[["String","Boolean|Number|Number[]|p5.Image|p5.Graphics|p5.MediaElement|p5.Texture"]]}}},"undefined"!=typeof p5&&LT(p5,p5.prototype),Ru=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],Lu=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Pu="ÂªÂµÂºÃ€-Ã–Ã˜-Ã¶Ã¸-ËË†-Ë‘Ë -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Í¿Î†Îˆ-ÎŠÎŒÎŽ-Î¡Î£-ÏµÏ·-ÒÒŠ-Ô¯Ô±-Õ–Õ™Õ -Öˆ×-×ª×¯-×²Ø -ÙŠÙ®Ù¯Ù±-Û“Û•Û¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ’-Ü¯Ý-Þ¥Þ±ßŠ-ßªß´ßµßºà €-à •à šà ¤à ¨à¡€-à¡˜à¡ -à¡ªà¡°-à¢‡à¢‰-à¢Žà¢ -à£‰à¤„-à¤¹à¤½à¥à¥˜-à¥¡à¥±-à¦€à¦…-à¦Œà¦à¦à¦“-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§Žà§œà§à§Ÿ-à§¡à§°à§±à§¼à¨…-à¨Šà¨à¨à¨“-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©™-à©œà©žà©²-à©´àª…-àªàª-àª‘àª“-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à«¹à¬…-à¬Œà¬à¬à¬“-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­œà­à­Ÿ-à­¡à­±à®ƒà®…-à®Šà®Ž-à®à®’-à®•à®™à®šà®œà®žà®Ÿà®£à®¤à®¨-à®ªà®®-à®¹à¯à°…-à°Œà°Ž-à°à°’-à°¨à°ª-à°¹à°½à±˜-à±šà±à± à±¡à²€à²…-à²Œà²Ž-à²à²’-à²¨à²ª-à²³à²µ-à²¹à²½à³à³žà³ à³¡à³±à³²à´„-à´Œà´Ž-à´à´’-à´ºà´½àµŽàµ”-àµ–àµŸ-àµ¡àµº-àµ¿à¶…-à¶–à¶š-à¶±à¶³-à¶»à¶½à·€-à·†à¸-à¸°à¸²à¸³à¹€-à¹†àºàº‚àº„àº†-àºŠàºŒ-àº£àº¥àº§-àº°àº²àº³àº½à»€-à»„à»†à»œ-à»Ÿà¼€à½€-à½‡à½‰-à½¬à¾ˆ-à¾Œá€€-á€ªá€¿á-á•áš-áá¡á¥á¦á®-á°áµ-á‚á‚Žá‚ -áƒ…áƒ‡áƒáƒ-áƒºáƒ¼-á‰ˆá‰Š-á‰á‰-á‰–á‰˜á‰š-á‰á‰ -áŠˆáŠŠ-áŠáŠ-áŠ°áŠ²-áŠµáŠ¸-áŠ¾á‹€á‹‚-á‹…á‹ˆ-á‹–á‹˜-áŒáŒ’-áŒ•áŒ˜-ášáŽ€-áŽáŽ -áµá¸-á½á-á™¬á™¯-á™¿áš-áššáš -á›ªá›®-á›¸áœ€-áœ‘áœŸ-áœ±á€-á‘á -á¬á®-á°áž€-áž³áŸ—áŸœá  -á¡¸á¢€-á¢¨á¢ªá¢°-á£µá¤€-á¤žá¥-á¥­á¥°-á¥´á¦€-á¦«á¦°-á§‰á¨€-á¨–á¨ -á©”áª§á¬…-á¬³á­…-á­Œá®ƒ-á® á®®á®¯á®º-á¯¥á°€-á°£á±-á±á±š-á±½á²€-á²Šá²-á²ºá²½-á²¿á³©-á³¬á³®-á³³á³µá³¶á³ºá´€-á¶¿á¸€-á¼•á¼˜-á¼á¼ -á½…á½ˆ-á½á½-á½—á½™á½›á½á½Ÿ-á½½á¾€-á¾´á¾¶-á¾¼á¾¾á¿‚-á¿„á¿†-á¿Œá¿-á¿“á¿–-á¿›á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â‚-â‚œâ„‚â„‡â„Š-â„“â„•â„˜-â„â„¤â„¦â„¨â„ª-â„¹â„¼-â„¿â……-â…‰â…Žâ… -â†ˆâ°€-â³¤â³«-â³®â³²â³³â´€-â´¥â´§â´­â´°-âµ§âµ¯â¶€-â¶–â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·€-â·†â·ˆ-â·Žâ·-â·–â·˜-â·žã€…-ã€‡ã€¡-ã€©ã€±-ã€µã€¸-ã€¼ã-ã‚–ã‚›-ã‚Ÿã‚¡-ãƒºãƒ¼-ãƒ¿ã„…-ã„¯ã„±-ã†Žã† -ã†¿ã‡°-ã‡¿ã€-ä¶¿ä¸€-ê’Œê“-ê“½ê”€-ê˜Œê˜-ê˜Ÿê˜ªê˜«ê™€-ê™®ê™¿-êšêš -ê›¯êœ—-êœŸêœ¢-êžˆêž‹-êŸêŸêŸ‘êŸ“êŸ•-êŸœêŸ²-ê ê ƒ-ê …ê ‡-ê Šê Œ-ê ¢ê¡€-ê¡³ê¢‚-ê¢³ê£²-ê£·ê£»ê£½ê£¾ê¤Š-ê¤¥ê¤°-ê¥†ê¥ -ê¥¼ê¦„-ê¦²ê§ê§ -ê§¤ê§¦-ê§¯ê§º-ê§¾ê¨€-ê¨¨ê©€-ê©‚ê©„-ê©‹ê© -ê©¶ê©ºê©¾-êª¯êª±êªµêª¶êª¹-êª½ê«€ê«‚ê«›-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬†ê¬‰-ê¬Žê¬‘-ê¬–ê¬ -ê¬¦ê¬¨-ê¬®ê¬°-ê­šê­œ-ê­©ê­°-ê¯¢ê°€-íž£íž°-íŸ†íŸ‹-íŸ»ï¤€-ï©­ï©°-ï«™ï¬€-ï¬†ï¬“-ï¬—ï¬ï¬Ÿ-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­€ï­ï­ƒï­„ï­†-ï®±ï¯“-ï´½ïµ-ï¶ï¶’-ï·‡ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½šï½¦-ï¾¾ï¿‚-ï¿‡ï¿Š-ï¿ï¿’-ï¿—ï¿š-ï¿œ",Ou={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Uu={5:Bu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":Bu+" export import",6:Bu+" const class extends export import super"},zu=/^in(stanceof)?$/,Vu=new RegExp("["+Pu+"]"),ju=new RegExp("["+Pu+"â€Œâ€Â·Ì€-Í¯Î‡Òƒ-Ò‡Ö‘-Ö½Ö¿××‚×„×…×‡Ø-ØšÙ‹-Ù©Ù°Û–-ÛœÛŸ-Û¤Û§Û¨Ûª-Û­Û°-Û¹Ü‘Ü°-ÝŠÞ¦-Þ°ß€-ß‰ß«-ß³ß½à –-à ™à ›-à £à ¥-à §à ©-à ­à¡™-à¡›à¢—-à¢Ÿà£Š-à£¡à££-à¤ƒà¤º-à¤¼à¤¾-à¥à¥‘-à¥—à¥¢à¥£à¥¦-à¥¯à¦-à¦ƒà¦¼à¦¾-à§„à§‡à§ˆà§‹-à§à§—à§¢à§£à§¦-à§¯à§¾à¨-à¨ƒà¨¼à¨¾-à©‚à©‡à©ˆà©‹-à©à©‘à©¦-à©±à©µàª-àªƒàª¼àª¾-à«…à«‡-à«‰à«‹-à«à«¢à«£à«¦-à«¯à«º-à«¿à¬-à¬ƒà¬¼à¬¾-à­„à­‡à­ˆà­‹-à­à­•-à­—à­¢à­£à­¦-à­¯à®‚à®¾-à¯‚à¯†-à¯ˆà¯Š-à¯à¯—à¯¦-à¯¯à°€-à°„à°¼à°¾-à±„à±†-à±ˆà±Š-à±à±•à±–à±¢à±£à±¦-à±¯à²-à²ƒà²¼à²¾-à³„à³†-à³ˆà³Š-à³à³•à³–à³¢à³£à³¦-à³¯à³³à´€-à´ƒà´»à´¼à´¾-àµ„àµ†-àµˆàµŠ-àµàµ—àµ¢àµ£àµ¦-àµ¯à¶-à¶ƒà·Šà·-à·”à·–à·˜-à·Ÿà·¦-à·¯à·²à·³à¸±à¸´-à¸ºà¹‡-à¹Žà¹-à¹™àº±àº´-àº¼à»ˆ-à»Žà»-à»™à¼˜à¼™à¼ -à¼©à¼µà¼·à¼¹à¼¾à¼¿à½±-à¾„à¾†à¾‡à¾-à¾—à¾™-à¾¼à¿†á€«-á€¾á€-á‰á–-á™áž-á á¢-á¤á§-á­á±-á´á‚‚-á‚á‚-á‚á-áŸá©-á±áœ’-áœ•áœ²-áœ´á’á“á²á³áž´-áŸ“áŸáŸ -áŸ©á ‹-á á -á ™á¢©á¤ -á¤«á¤°-á¤»á¥†-á¥á§-á§šá¨—-á¨›á©•-á©žá© -á©¼á©¿-áª‰áª-áª™áª°-áª½áª¿-á«Žá¬€-á¬„á¬´-á­„á­-á­™á­«-á­³á®€-á®‚á®¡-á®­á®°-á®¹á¯¦-á¯³á°¤-á°·á±€-á±‰á±-á±™á³-á³’á³”-á³¨á³­á³´á³·-á³¹á·€-á·¿â€Œâ€â€¿â€â”âƒ-âƒœâƒ¡âƒ¥-âƒ°â³¯-â³±âµ¿â· -â·¿ã€ª-ã€¯ã‚™ã‚šãƒ»ê˜ -ê˜©ê™¯ê™´-ê™½êšžêšŸê›°ê›±ê ‚ê †ê ‹ê £-ê §ê ¬ê¢€ê¢ê¢´-ê£…ê£-ê£™ê£ -ê£±ê£¿-ê¤‰ê¤¦-ê¤­ê¥‡-ê¥“ê¦€-ê¦ƒê¦³-ê§€ê§-ê§™ê§¥ê§°-ê§¹ê¨©-ê¨¶ê©ƒê©Œê©ê©-ê©™ê©»-ê©½êª°êª²-êª´êª·êª¸êª¾êª¿ê«ê««-ê«¯ê«µê«¶ê¯£-ê¯ªê¯¬ê¯­ê¯°-ê¯¹ï¬žï¸€-ï¸ï¸ -ï¸¯ï¸³ï¸´ï¹-ï¹ï¼-ï¼™ï¼¿ï½¥]"),Hu={beforeExpr:!0},$u={},qu={num:new(Gu=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null})("num",Wu={startsExpr:!0}),regexp:new Gu("regexp",Wu),string:new Gu("string",Wu),name:new Gu("name",Wu),privateId:new Gu("privateId",Wu),eof:new Gu("eof"),bracketL:new Gu("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Gu("]"),braceL:new Gu("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Gu("}"),parenL:new Gu("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Gu(")"),comma:new Gu(",",Hu),semi:new Gu(";",Hu),colon:new Gu(":",Hu),dot:new Gu("."),question:new Gu("?",Hu),questionDot:new Gu("?."),arrow:new Gu("=>",Hu),template:new Gu("template"),invalidTemplate:new Gu("invalidTemplate"),ellipsis:new Gu("...",Hu),backQuote:new Gu("`",Wu),dollarBraceL:new Gu("${",{beforeExpr:!0,startsExpr:!0}),eq:new Gu("=",{beforeExpr:!0,isAssign:!0}),assign:new Gu("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Gu("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Gu("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:UT("||",1),logicalAND:UT("&&",2),bitwiseOR:UT("|",3),bitwiseXOR:UT("^",4),bitwiseAND:UT("&",5),equality:UT("==/!=/===/!==",6),relational:UT("</>/<=/>=",7),bitShift:UT("<</>>/>>>",8),plusMin:new Gu("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:UT("%",10),star:UT("*",10),slash:UT("/",10),starstar:new Gu("**",{beforeExpr:!0}),coalesce:UT("??",1),_break:zT("break"),_case:zT("case",Hu),_catch:zT("catch"),_continue:zT("continue"),_debugger:zT("debugger"),_default:zT("default",Hu),_do:zT("do",{isLoop:!0,beforeExpr:!0}),_else:zT("else",Hu),_finally:zT("finally"),_for:zT("for",{isLoop:!0}),_function:zT("function",Wu),_if:zT("if"),_return:zT("return",Hu),_switch:zT("switch"),_throw:zT("throw",Hu),_try:zT("try"),_var:zT("var"),_const:zT("const"),_while:zT("while",{isLoop:!0}),_with:zT("with"),_new:zT("new",{beforeExpr:!0,startsExpr:!0}),_this:zT("this",Wu),_super:zT("super",Wu),_class:zT("class",Wu),_extends:zT("extends",Hu),_export:zT("export"),_import:zT("import",Wu),_null:zT("null",Wu),_true:zT("true",Wu),_false:zT("false",Wu),_in:zT("in",{beforeExpr:!0,binop:7}),_instanceof:zT("instanceof",{beforeExpr:!0,binop:7}),_typeof:zT("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:zT("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:zT("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Xu=/\r\n?|\n|\u2028|\u2029/,Yu=new RegExp(Xu.source,"g"),Zu=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ku=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Qu=Object.prototype,Ju=Qu.hasOwnProperty,ec=Qu.toString,tc=Object.hasOwn||function(e,t){return Ju.call(e,t)},nc=Array.isArray||function(e){return"[object Array]"===ec.call(e)},rc=Object.create(null),ic=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,(sc=function(e,t){this.line=e,this.column=t}).prototype.offset=function(e){return new sc(this.line,this.column+e)},ac=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)},oc={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},lc=!1,cc=4,hc=8,pc=512,fc=1|(uc=2)|(dc=256),gc={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}},(mc=function(e,t,n){this.options=e=$T(e),this.sourceFile=e.sourceFile,this.keywords=GT(Uu[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=Ou[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=GT(r);var i=(r?r+" ":"")+Ou.strict;this.reservedWordsStrict=GT(i),this.reservedWordsStrictBind=GT(i+" "+Ou.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Xu).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=qu.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]}).prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},gc.inFunction.get=function(){return(this.currentVarScope().flags&uc)>0},gc.inGenerator.get=function(){return(this.currentVarScope().flags&hc)>0},gc.inAsync.get=function(){return(this.currentVarScope().flags&cc)>0},gc.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e].flags;if(768&t)return!1;if(t&uc)return(t&cc)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},gc.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0||this.options.allowSuperOutsideMethod},gc.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},gc.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},gc.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e].flags;if(768&t||t&uc&&!(16&t))return!0}return!1},gc.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&dc)>0},mc.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},mc.parse=function(e,t){return new this(t,e).parse()},mc.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},mc.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(mc.prototype,gc),vc=mc.prototype,yc=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/,vc.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Ku.lastIndex=e,e+=Ku.exec(this.input)[0].length;var t=yc.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){Ku.lastIndex=e+t[0].length;var n=Ku.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||Xu.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,Ku.lastIndex=e,e+=Ku.exec(this.input)[0].length,";"===this.input[e]&&e++}},vc.eat=function(e){return this.type===e&&(this.next(),!0)},vc.isContextual=function(e){return this.type===qu.name&&this.value===e&&!this.containsEsc},vc.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},vc.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},vc.canInsertSemicolon=function(){return this.type===qu.eof||this.type===qu.braceR||Xu.test(this.input.slice(this.lastTokEnd,this.start))},vc.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},vc.semicolon=function(){this.eat(qu.semi)||this.insertSemicolon()||this.unexpected()},vc.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},vc.expect=function(e){this.eat(e)||this.unexpected()},vc.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},bc=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1},vc.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}},vc.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},vc.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},vc.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type},(xc=mc.prototype).parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==qu.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")},_c={kind:"loop"},wc={kind:"switch"},xc.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ku.lastIndex=this.pos;var t=Ku.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(OT(r,!0)){for(var i=n+1;BT(r=this.input.charCodeAt(i),!0);)++i;if(92===r||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!zu.test(s))return!0}return!1},xc.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ku.lastIndex=this.pos;var e,t=Ku.exec(this.input),n=this.pos+t[0].length;return!(Xu.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(BT(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},xc.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;Ku.lastIndex=this.pos;var n=Ku.exec(this.input),r=this.pos+n[0].length;if(Xu.test(this.input.slice(this.pos,r)))return!1;if(e){var i,s=r+5;if("using"!==this.input.slice(r,s)||s===this.input.length||BT(i=this.input.charCodeAt(s))||i>55295&&i<56320)return!1;Ku.lastIndex=s;var a=Ku.exec(this.input);if(a&&Xu.test(this.input.slice(s,s+a[0].length)))return!1}if(t){var o,l=r+2;if(!("of"!==this.input.slice(r,l)||l!==this.input.length&&(BT(o=this.input.charCodeAt(l))||o>55295&&o<56320)))return!1}var u=this.input.charCodeAt(r);return OT(u,!0)||92===u},xc.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},xc.isUsing=function(e){return this.isUsingKeyword(!1,e)},xc.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=qu._var,r="let"),i){case qu._break:case qu._continue:return this.parseBreakContinueStatement(s,i.keyword);case qu._debugger:return this.parseDebuggerStatement(s);case qu._do:return this.parseDoStatement(s);case qu._for:return this.parseForStatement(s);case qu._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case qu._class:return e&&this.unexpected(),this.parseClass(s,!0);case qu._if:return this.parseIfStatement(s);case qu._return:return this.parseReturnStatement(s);case qu._switch:return this.parseSwitchStatement(s);case qu._throw:return this.parseThrowStatement(s);case qu._try:return this.parseTryStatement(s);case qu._const:case qu._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case qu._while:return this.parseWhileStatement(s);case qu._with:return this.parseWithStatement(s);case qu.braceL:return this.parseBlock(!0,s);case qu.semi:return this.parseEmptyStatement(s);case qu._export:case qu._import:if(this.options.ecmaVersion>10&&i===qu._import){Ku.lastIndex=this.pos;var a=Ku.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===qu._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var u=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(u)return t&&"script"===this.options.sourceType&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),"await using"===u&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(s,!1,u),this.semicolon(),this.finishNode(s,"VariableDeclaration");var c=this.value,h=this.parseExpression();return i===qu.name&&"Identifier"===h.type&&this.eat(qu.colon)?this.parseLabeledStatement(s,c,h,e):this.parseExpressionStatement(s,h)}},xc.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(qu.semi)||this.insertSemicolon()?e.label=null:this.type!==qu.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},xc.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},xc.parseDoStatement=function(e){return this.next(),this.labels.push(_c),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(qu._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(qu.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},xc.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(_c),this.enterScope(0),this.expect(qu.parenL),this.type===qu.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===qu._var||this.type===qu._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),this.parseForAfterInit(e,r,t)}var s=this.isContextual("let"),a=!1,o=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(o){var l=this.startNode();return this.next(),"await using"===o&&this.next(),this.parseVar(l,!0,o),this.finishNode(l,"VariableDeclaration"),this.parseForAfterInit(e,l,t)}var u=this.containsEsc,c=new bc,h=this.start,d=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===qu._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===qu._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(d.start!==h||u||"Identifier"!==d.type||"async"!==d.name?this.options.ecmaVersion>=9&&(e.await=!1):this.unexpected()),s&&a&&this.raise(d.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(d,!1,c),this.checkLValPattern(d),this.parseForIn(e,d)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,d))},xc.parseForAfterInit=function(e,t,n){return(this.type===qu._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===t.declarations.length?(this.options.ecmaVersion>=9&&(this.type===qu._in?n>-1&&this.unexpected(n):e.await=n>-1),this.parseForIn(e,t)):(n>-1&&this.unexpected(n),this.parseFor(e,t))},xc.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ec|(n?0:Cc),!1,t)},xc.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(qu._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},xc.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(qu.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},xc.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(qu.braceL),this.labels.push(wc),this.enterScope(0);for(var n=!1;this.type!==qu.braceR;)if(this.type===qu._case||this.type===qu._default){var r=this.type===qu._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(qu.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},xc.parseThrowStatement=function(e){return this.next(),Xu.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")},Sc=[],xc.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?32:0),this.checkLValPattern(e,t?4:2),this.expect(qu.parenR),e},xc.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===qu._catch){var t=this.startNode();this.next(),this.eat(qu.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(qu._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},xc.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},xc.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(_c),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},xc.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},xc.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},xc.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===qu._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},xc.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},xc.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(qu.braceL),e&&this.enterScope(0);this.type!==qu.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},xc.parseFor=function(e,t){return e.init=t,this.expect(qu.semi),e.test=this.type===qu.semi?null:this.parseExpression(),this.expect(qu.semi),e.update=this.type===qu.parenR?null:this.parseExpression(),this.expect(qu.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},xc.parseForIn=function(e,t){var n=this.type===qu._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(qu.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},xc.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(qu.eq)?i.init=this.parseMaybeAssign(t):r||"const"!==n||this.type===qu._in||this.options.ecmaVersion>=6&&this.isContextual("of")?r||"using"!==n&&"await using"!==n||!(this.options.ecmaVersion>=17)||this.type===qu._in||this.isContextual("of")?r||"Identifier"===i.id.type||t&&(this.type===qu._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.raise(this.lastTokEnd,"Missing initializer in "+n+" declaration"):this.unexpected(),e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(qu.comma))break}return e},xc.parseVarId=function(e,t){e.id="using"===t||"await using"===t?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?1:2,!1)},Ec=1,Cc=2,xc.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===qu.star&&t&Cc&&this.unexpected(),e.generator=this.eat(qu.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ec&&(e.id=4&t&&this.type!==qu.name?null:this.parseIdent(),!e.id||t&Cc||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qT(e.async,e.generator)),t&Ec||(e.id=this.type===qu.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&Ec?"FunctionDeclaration":"FunctionExpression")},xc.parseFunctionParams=function(e){this.expect(qu.parenL),e.params=this.parseBindingList(qu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},xc.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(qu.braceL);this.type!==qu.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(i.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&XT(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},xc.parseClassElement=function(e){if(this.eat(qu.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(qu.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===qu.star?o=!0:r="static"}if(n.static=o,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==qu.star||this.canInsertSemicolon()?r="async":s=!0),!r&&(t>=9||!s)&&this.eat(qu.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===qu.parenL||"method"!==a||i||s){var u=!n.static&&YT(n,"constructor"),c=u&&e;u&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n},xc.isClassElementNameStart=function(){return this.type===qu.name||this.type===qu.privateId||this.type===qu.num||this.type===qu.string||this.type===qu.bracketL||this.type.keyword},xc.parseClassElementName=function(e){this.type===qu.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},xc.parseClassMethod=function(e,t,n,r){var i=e.key;"constructor"===e.kind?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&YT(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===e.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},xc.parseClassField=function(e){return YT(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&YT(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(qu.eq)?(this.enterScope(576),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},xc.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(320);this.type!==qu.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},xc.parseClassId=function(e,t){this.type===qu.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},xc.parseClassSuper=function(e){e.superClass=this.eat(qu._extends)?this.parseExprSubscripts(null,!1):null},xc.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},xc.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=0===r?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var a=n[s];tc(t,a.name)||(i?i.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},xc.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==qu.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},xc.parseExport=function(e,t){if(this.next(),this.eat(qu.star))return this.parseExportAllDeclaration(e,t);if(this.eat(qu._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==qu.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),"Literal"===i.local.type&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},xc.parseExportDeclaration=function(e){return this.parseStatement(null)},xc.parseExportDefaultDeclaration=function(){var e;if(this.type===qu._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,4|Ec,!1,e)}if(this.type===qu._class){var n=this.startNode();return this.parseClass(n,"nullableID")}var r=this.parseMaybeAssign();return this.semicolon(),r},xc.checkExport=function(e,t,n){e&&("string"!=typeof t&&(t="Identifier"===t.type?t.name:t.value),tc(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},xc.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n&&this.checkPatternExport(e,t.argument)},xc.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},xc.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},xc.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},xc.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(qu.braceL);!this.eat(qu.braceR);){if(n)n=!1;else if(this.expect(qu.comma),this.afterTrailingComma(qu.braceR))break;t.push(this.parseExportSpecifier(e))}return t},xc.parseImport=function(e){return this.next(),this.type===qu.string?(e.specifiers=Sc,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===qu.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},xc.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportSpecifier")},xc.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportDefaultSpecifier")},xc.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportNamespaceSpecifier")},xc.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===qu.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(qu.comma)))return e;if(this.type===qu.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(qu.braceL);!this.eat(qu.braceR);){if(t)t=!1;else if(this.expect(qu.comma),this.afterTrailingComma(qu.braceR))break;e.push(this.parseImportSpecifier())}return e},xc.parseWithClause=function(){var e=[];if(!this.eat(qu._with))return e;this.expect(qu.braceL);for(var t={},n=!0;!this.eat(qu.braceR);){if(n)n=!1;else if(this.expect(qu.comma),this.afterTrailingComma(qu.braceR))break;var r=this.parseImportAttribute(),i="Identifier"===r.key.type?r.key.name:r.key.value;tc(t,i)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+i+"'"),t[i]=!0,e.push(r)}return e},xc.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===qu.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved),this.expect(qu.colon),this.type!==qu.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},xc.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===qu.string){var e=this.parseLiteral(this.value);return ic.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},xc.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},xc.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])},(Ac=mc.prototype).toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Ac.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},Ac.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Ac.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==qu.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Ac.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case qu.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(qu.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case qu.braceL:return this.parseObj(!0)}return this.parseIdent()},Ac.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(qu.comma),t&&this.type===qu.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===qu.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===qu.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}i.push(this.parseAssignableListItem(r))}return i},Ac.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},Ac.parseBindingListItem=function(e){return e},Ac.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(qu.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Ac.checkLValSimple=function(e,t,n){void 0===t&&(t=0);var r=0!==t;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(tc(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),5!==t&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},Ac.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}},Ac.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}},Mc={b_stat:new(Tc=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i})("{",!1),b_expr:new Tc("{",!0),b_tmpl:new Tc("${",!1),p_stat:new Tc("(",!1),p_expr:new Tc("(",!0),q_tmpl:new Tc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Tc("function",!1),f_expr:new Tc("function",!0),f_expr_gen:new Tc("function",!0,!1,null,!0),f_gen:new Tc("function",!1,!1,null,!0)},(Dc=mc.prototype).initialContext=function(){return[Mc.b_stat]},Dc.curContext=function(){return this.context[this.context.length-1]},Dc.braceIsBlock=function(e){var t=this.curContext();return t===Mc.f_expr||t===Mc.f_stat||(e!==qu.colon||t!==Mc.b_stat&&t!==Mc.b_expr?e===qu._return||e===qu.name&&this.exprAllowed?Xu.test(this.input.slice(this.lastTokEnd,this.start)):e===qu._else||e===qu.semi||e===qu.eof||e===qu.parenR||e===qu.arrow||(e===qu.braceL?t===Mc.b_stat:e!==qu._var&&e!==qu._const&&e!==qu.name&&!this.exprAllowed):!t.isExpr)},Dc.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},Dc.updateContext=function(e){var t,n=this.type;n.keyword&&e===qu.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},Dc.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},qu.parenR.updateContext=qu.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===Mc.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},qu.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Mc.b_stat:Mc.b_expr),this.exprAllowed=!0},qu.dollarBraceL.updateContext=function(){this.context.push(Mc.b_tmpl),this.exprAllowed=!0},qu.parenL.updateContext=function(e){var t=e===qu._if||e===qu._for||e===qu._with||e===qu._while;this.context.push(t?Mc.p_stat:Mc.p_expr),this.exprAllowed=!0},qu.incDec.updateContext=function(){},qu._function.updateContext=qu._class.updateContext=function(e){!e.beforeExpr||e===qu._else||e===qu.semi&&this.curContext()!==Mc.p_stat||e===qu._return&&Xu.test(this.input.slice(this.lastTokEnd,this.start))||(e===qu.colon||e===qu.braceL)&&this.curContext()===Mc.b_stat?this.context.push(Mc.f_stat):this.context.push(Mc.f_expr),this.exprAllowed=!1},qu.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},qu.backQuote.updateContext=function(){this.curContext()===Mc.q_tmpl?this.context.pop():this.context.push(Mc.q_tmpl),this.exprAllowed=!1},qu.star.updateContext=function(e){if(e===qu._function){var t=this.context.length-1;this.context[t]===Mc.f_expr?this.context[t]=Mc.f_expr_gen:this.context[t]=Mc.f_gen}this.exprAllowed=!0},qu.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==qu.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t},(kc=mc.prototype).checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},kc.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===qu.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(qu.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},kc.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new bc,r=!0);var o=this.start,l=this.startLoc;this.type!==qu.parenL&&this.type!==qu.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,l)),this.type.isAssign){var c=this.startNodeAt(o,l);return c.operator=this.value,this.type===qu.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===qu.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u},kc.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(qu.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(qu.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},kc.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},kc.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==qu._in)&&s>r){var a=this.type===qu.logicalOR||this.type===qu.logicalAND,o=this.type===qu.coalesce;o&&(s=qu.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),d=this.buildBinary(t,n,e,h,l,a||o);return(a&&this.type===qu.coalesce||o&&(this.type===qu.logicalOR||this.type===qu.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e},kc.buildBinary=function(e,t,n,r,i,s){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},kc.parseMaybeUnary=function(e,t,n,r){var i,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(r),t=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===qu.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&ZT(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&KT(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==qu.privateId){if(i=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(s,a);u.operator=this.value,u.prefix=!1,u.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(u,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==qu._in&&this.unexpected();return n||!this.eat(qu.starstar)?i:t?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,i,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},kc.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s},kc.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,r,s,a,i);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(t,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}e=o}},kc.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(qu.arrow)},kc.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)},kc.parseSubscript=function(e,t,n,r,i,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(qu.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(qu.bracketL);if(u||l&&this.type!==qu.parenL&&this.type!==qu.backQuote||this.eat(qu.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(qu.bracketR)):this.type===qu.privateId&&"Super"!==e.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,o&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(qu.parenL)){var h=new bc,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(qu.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseSubscriptAsyncArrow(t,n,m,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,o&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===qu.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e},kc.parseExprAtom=function(e,t,n){this.type===qu.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case qu._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type!==qu.parenL||this.allowDirectSuper||this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==qu.dot&&this.type!==qu.bracketL&&this.type!==qu.parenL&&this.unexpected(),this.finishNode(r,"Super");case qu._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case qu.name:var s=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===l.name&&!this.canInsertSemicolon()&&this.eat(qu._function))return this.overrideContext(Mc.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(qu.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[l],!1,t);if(this.options.ecmaVersion>=8&&"async"===l.name&&this.type===qu.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return l=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(qu.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[l],!0,t)}return l;case qu.regexp:var u=this.value;return(r=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},r;case qu.num:case qu.string:return this.parseLiteral(this.value);case qu._null:case qu._true:case qu._false:return(r=this.startNode()).value=this.type===qu._null?null:this.type===qu._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case qu.parenL:var c=this.start,h=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),h;case qu.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(qu.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case qu.braceL:return this.overrideContext(Mc.b_expr),this.parseObj(!1,e);case qu._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case qu._class:return this.parseClass(this.startNode(),!1);case qu._new:return this.parseNew();case qu.backQuote:return this.parseTemplate();case qu._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},kc.parseExprAtomDefault=function(){this.unexpected()},kc.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===qu.parenL&&!e)return this.parseDynamicImport(t);if(this.type===qu.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}this.unexpected()},kc.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(qu.parenR)?e.options=null:(this.expect(qu.comma),this.afterTrailingComma(qu.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(qu.parenR)||(this.expect(qu.comma),this.afterTrailingComma(qu.parenR)||this.unexpected())));else if(!this.eat(qu.parenR)){var t=this.start;this.eat(qu.comma)&&this.eat(qu.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},kc.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},kc.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=null!=t.value?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},kc.parseParenExpression=function(){this.expect(qu.parenL);var e=this.parseExpression();return this.expect(qu.parenR),e},kc.shouldParseArrow=function(e){return!this.canInsertSemicolon()},kc.parseParenAndDistinguishExpression=function(e,t){var n,r=this.start,i=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,u=[],c=!0,h=!1,d=new bc,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==qu.parenR;){if(c?c=!1:this.expect(qu.comma),s&&this.afterTrailingComma(qu.parenR,!0)){h=!0;break}if(this.type===qu.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===qu.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(qu.parenR),e&&this.shouldParseArrow(u)&&this.eat(qu.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(r,i,u,t);u.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((n=this.startNodeAt(o,l)).expressions=u,this.finishNodeAt(n,"SequenceExpression",m,g)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(r,i);return v.expression=n,this.finishNode(v,"ParenthesizedExpression")}return n},kc.parseParenItem=function(e){return e},kc.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)},Nc=[],kc.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===qu.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(qu.parenL)?e.arguments=this.parseExprList(qu.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Nc,this.finishNode(e,"NewExpression")},kc.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===qu.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,"\n"),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===qu.backQuote,this.finishNode(n,"TemplateElement")},kc.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===qu.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(qu.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(qu.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},kc.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===qu.name||this.type===qu.num||this.type===qu.string||this.type===qu.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===qu.star)&&!Xu.test(this.input.slice(this.lastTokEnd,this.start))},kc.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(qu.braceR);){if(r)r=!1;else if(this.expect(qu.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(qu.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},kc.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(qu.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===qu.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,t),this.type===qu.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(qu.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(qu.star),this.parsePropertyName(a)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},kc.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var n="get"===e.kind?0:1;if(e.value.params.length!==n){var r=e.value.start;"get"===e.kind?this.raiseRecoverable(r,"getter should have no params"):this.raiseRecoverable(r,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},kc.parsePropertyValue=function(e,t,n,r,i,s,a,o){(n||r)&&this.type===qu.colon&&this.unexpected(),this.eat(qu.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===qu.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(n,r),e.kind="init"):t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===qu.comma||this.type===qu.braceR||this.type===qu.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===qu.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected():((n||r)&&this.unexpected(),this.parseGetterSetter(e))},kc.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(qu.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(qu.bracketR),e.key;e.computed=!1}return e.key=this.type===qu.num||this.type===qu.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},kc.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},kc.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|qT(t,r.generator)|(n?128:0)),this.expect(qu.parenL),r.params=this.parseBindingList(qu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},kc.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|qT(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},kc.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==qu.braceL,s=this.strict,a=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,5),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()},kc.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},kc.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,1,t?null:n)}},kc.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(qu.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===qu.comma?a=null:this.type===qu.ellipsis?(a=this.parseSpread(r),r&&this.type===qu.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},kc.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().flags&fc||"arguments"!==r||this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},kc.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},kc.parseIdentNode=function(){var e=this.startNode();return this.type===qu.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=qu.name):this.unexpected(),e},kc.parsePrivateIdent=function(){var e=this.startNode();return this.type===qu.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},kc.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===qu.semi||this.canInsertSemicolon()||this.type!==qu.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(qu.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},kc.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")},(Fc=mc.prototype).raise=function(e,t){var n=WT(this.input,e);t+=" ("+n.line+":"+n.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Fc.raiseRecoverable=Fc.raise,Fc.curPosition=function(){if(this.options.locations)return new sc(this.curLine,this.pos-this.lineStart)},Ic=mc.prototype,Rc=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]},Ic.enterScope=function(e){this.scopeStack.push(new Rc(e))},Ic.exitScope=function(){this.scopeStack.pop()},Ic.treatFunctionsAsVarInScope=function(e){return e.flags&uc||!this.inModule&&1&e.flags},Ic.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],o.flags&fc)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},Ic.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},Ic.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Ic.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(fc|pc|dc))return t}},Ic.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(fc|pc|dc)&&!(16&t.flags))return t}},Lc=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new ac(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},(Pc=mc.prototype).startNode=function(){return new Lc(this,this.start,this.startLoc)},Pc.startNodeAt=function(e,t){return new Lc(this,e,t)},Pc.finishNode=function(e,t){return QT.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},Pc.finishNodeAt=function(e,t,n,r){return QT.call(this,e,t,n,r)},Pc.copyNode=function(e){var t=new Lc(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t},jc={9:Oc="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",10:Bc=Oc+" Extended_Pictographic",11:Uc=Bc,12:zc=Uc+" EBase EComp EMod EPres ExtPict",13:Vc=zc,14:Vc},Gc={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},Hc="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Zc={9:Wc="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",10:$c=Wc+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",11:qc=$c+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",12:Xc=qc+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",13:Yc=Xc+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",14:Yc+" Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz"},Kc={},Qc=0,Jc=[9,10,11,12,13,14];Qc<Jc.length;Qc+=1)JT(Jc[Qc]);eh=mc.prototype,(th=function(e,t){this.parent=e,this.base=t||this}).prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1},th.prototype.sibling=function(){return new th(this.parent,this.base)},(nh=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Kc[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null}).prototype.reset=function(e,t,n){var r=-1!==n.indexOf("v"),i=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=i&&this.parser.options.ecmaVersion>=9)},nh.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},nh.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var s=n.charCodeAt(e+1);return s>=56320&&s<=57343?(i<<10)+s-56613888:i},nh.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,s=n.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},nh.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},nh.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},nh.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},nh.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},nh.prototype.eatChars=function(e,t){void 0===t&&(t=!1);for(var n=this.pos,r=0,i=e;r<i.length;r+=1){var s=i[r],a=this.at(n,t);if(-1===a||a!==s)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0},eh.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var a=n.charAt(s);-1===t.indexOf(a)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===a&&(r=!0),"v"===a&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")},eh.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&function(e){for(var t in e)return!0;return!1}(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},eh.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}},eh.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new th(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},eh.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},eh.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},eh.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},eh.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},eh.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},eh.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},eh.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},eh.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},eh.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),r=e.eat(45);if(n||r){for(var i=0;i<n.length;i++){var s=n.charAt(i);n.indexOf(s,i+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(e);n||a||58!==e.current()||e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var l=a.charAt(o);(a.indexOf(l,o+1)>-1||n.indexOf(l)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1},eh.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},eh.regexp_eatModifiers=function(e){for(var t="",n=0;-1!==(n=e.current())&&eM(n);)t+=HT(n),e.advance();return t},eh.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},eh.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},eh.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!tM(t)&&(e.lastIntValue=t,e.advance(),!0)},eh.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!tM(n);)e.advance();return e.pos!==t},eh.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},eh.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1)i[r].separatedFrom(e.branchID)||e.raise("Duplicate capture group name");else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},eh.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},eh.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=HT(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=HT(e.lastIntValue);return!0}return!1},eh.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return OT(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},eh.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return BT(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},eh.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},eh.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},eh.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},eh.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},eh.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},eh.regexp_eatZero=function(e){return 48===e.current()&&!sM(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},eh.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},eh.regexp_eatControlLetter=function(e){var t=e.current();return!!nM(t)&&(e.lastIntValue=t%32,e.advance(),!0)},eh.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n,r=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(i&&s>=55296&&s<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}e.pos=a,e.lastIntValue=s}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(n=e.lastIntValue)>=0&&n<=1114111)return!0;i&&e.raise("Invalid unicode escape"),e.pos=r}return!1},eh.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},eh.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},eh.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),1;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=80===t)||112===t)){var r;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&2===r&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return 0},eh.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return 0},eh.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){tc(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},eh.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},eh.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";rM(t=e.current());)e.lastStringValue+=HT(t),e.advance();return""!==e.lastStringValue},eh.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";iM(t=e.current());)e.lastStringValue+=HT(t),e.advance();return""!==e.lastStringValue},eh.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},eh.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&2===n&&e.raise("Negated character class may contain strings"),!0}return!1},eh.regexp_classContents=function(e){return 93===e.current()?1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),1)},eh.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},eh.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||lM(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},eh.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},eh.regexp_classSetExpression=function(e){var t,n=1;if(this.regexp_eatClassSetRange(e));else if(t=this.regexp_eatClassSetOperand(e)){2===t&&(n=2);for(var r=e.pos;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?2!==t&&(n=1):e.raise("Invalid character in character class");if(r!==e.pos)return n;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return n}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return n;2===t&&(n=2)}},eh.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return-1!==n&&-1!==r&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},eh.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},eh.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&2===r&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null},eh.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null},eh.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},eh.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},eh.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e)&&(e.eat(98)?(e.lastIntValue=8,0):(e.pos=t,1)));var n=e.current();return!(n<0||n===e.lookahead()&&function(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}(n)||function(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}(n)||(e.advance(),e.lastIntValue=n,0))},eh.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return!!function(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}(t)&&(e.lastIntValue=t,e.advance(),!0)},eh.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!sM(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},eh.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},eh.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;sM(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},eh.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;aM(n=e.current());)e.lastIntValue=16*e.lastIntValue+oM(n),e.advance();return e.pos!==t},eh.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},eh.regexp_eatOctalDigit=function(e){var t=e.current();return lM(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},eh.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!aM(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+oM(i),e.advance()}return!0},rh=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new ac(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},(ih=mc.prototype).next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new rh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ih.getToken=function(){return this.next(),new rh(this)},"undefined"!=typeof Symbol&&(ih[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===qu.eof,value:t}}}}),ih.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(qu.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ih.readToken=function(e){return OT(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ih.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},ih.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=jT(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},ih.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!VT(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ih.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&Zu.test(String.fromCharCode(e))))break e;++this.pos}}},ih.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ih.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(qu.ellipsis)):(++this.pos,this.finishToken(qu.dot))},ih.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(qu.assign,2):this.finishOp(qu.slash,1)},ih.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?qu.star:qu.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=qu.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(qu.assign,n+1):this.finishOp(r,n)},ih.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(qu.assign,3):this.finishOp(124===e?qu.logicalOR:qu.logicalAND,2):61===t?this.finishOp(qu.assign,2):this.finishOp(124===e?qu.bitwiseOR:qu.bitwiseAND,1)},ih.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(qu.assign,2):this.finishOp(qu.bitwiseXOR,1)},ih.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Xu.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(qu.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(qu.assign,2):this.finishOp(qu.plusMin,1)},ih.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(qu.assign,n+1):this.finishOp(qu.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(qu.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ih.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(qu.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(qu.arrow)):this.finishOp(61===e?qu.eq:qu.prefix,1)},ih.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(qu.questionDot,2)}if(63===t)return e>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(qu.assign,3):this.finishOp(qu.coalesce,2)}return this.finishOp(qu.question,1)},ih.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,OT(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(qu.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+HT(e)+"'")},ih.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(qu.parenL);case 41:return++this.pos,this.finishToken(qu.parenR);case 59:return++this.pos,this.finishToken(qu.semi);case 44:return++this.pos,this.finishToken(qu.comma);case 91:return++this.pos,this.finishToken(qu.bracketL);case 93:return++this.pos,this.finishToken(qu.bracketR);case 123:return++this.pos,this.finishToken(qu.braceL);case 125:return++this.pos,this.finishToken(qu.braceR);case 58:return++this.pos,this.finishToken(qu.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(qu.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(qu.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+HT(e)+"'")},ih.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ih.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Xu.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new nh(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(Rr){}return this.finishToken(qu.regexp,{pattern:i,flags:a,value:l})},ih.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,l=0,u=null==t?1/0:t;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(r&&95===c)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=c;else{if((h=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;o=c,a=a*e+h}}return r&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=t&&this.pos-s!==t?null:a},ih.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=uM(this.input.slice(t,this.pos)),++this.pos):OT(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(qu.num,n)},ih.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=uM(this.input.slice(t,this.pos));return++this.pos,OT(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(qu.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),OT(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(t,this.pos),n?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(qu.num,a)},ih.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ih.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(VT(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(qu.string,t)},sh={},ih.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==sh)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ih.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw sh;this.raise(e,t)},ih.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==qu.template&&this.type!==qu.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(qu.template,e)):36===n?(this.pos+=2,this.finishToken(qu.dollarBraceL)):(++this.pos,this.finishToken(qu.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(VT(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ih.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(qu.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":"\n"===this.input[this.pos+1]&&++this.pos;case"\n":case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1}this.raise(this.start,"Unterminated template")},ih.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return HT(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return VT(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}},ih.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ih.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(BT(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?OT:BT)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=HT(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ih.readWord=function(){var e=this.readWord1(),t=qu.name;return this.keywords.test(e)&&(t=$u[e]),this.finishToken(t,e)},mc.acorn={Parser:mc,version:"8.15.0",defaultOptions:oc,Position:sc,SourceLocation:ac,getLineInfo:WT,Node:Lc,TokenType:Gu,tokTypes:qu,keywordTypes:$u,TokContext:Tc,tokContexts:Mc,isIdentifierChar:BT,isIdentifierStart:OT,Token:rh,isNewLine:VT,lineBreak:Xu,lineBreakG:Yu,nonASCIIwhitespace:Zu},(ah={}).Program=ah.BlockStatement=ah.StaticBlock=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t,"Statement")},ah.Statement=dM,ah.EmptyStatement=pM,ah.ExpressionStatement=ah.ParenthesizedExpression=ah.ChainExpression=function(e,t,n){return n(e.expression,t,"Expression")},ah.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},ah.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},ah.BreakStatement=ah.ContinueStatement=pM,ah.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},ah.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1)n(i[r],t)},ah.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1)n(i[r],t,"Statement")},ah.ReturnStatement=ah.YieldExpression=ah.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},ah.ThrowStatement=ah.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},ah.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},ah.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},ah.WhileStatement=ah.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},ah.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},ah.ForInStatement=ah.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},ah.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},ah.DebuggerStatement=pM,ah.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},ah.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1)n(i[r],t)},ah.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},ah.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1)n(i[r],t,"Pattern");n(e.body,t,e.expression?"Expression":"Statement")},ah.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},ah.VariablePattern=pM,ah.MemberPattern=dM,ah.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},ah.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Pattern")}},ah.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];"Property"===s.type?(s.computed&&n(s.key,t,"Expression"),n(s.value,t,"Pattern")):"RestElement"===s.type&&n(s.argument,t,"Pattern")}},ah.Expression=dM,ah.ThisExpression=ah.Super=ah.MetaProperty=pM,ah.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Expression")}},ah.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1)n(i[r],t)},ah.FunctionExpression=ah.ArrowFunctionExpression=ah.FunctionDeclaration,ah.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1)n(i[r],t,"Expression")},ah.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1)n(i[r],t);for(var s=0,a=e.expressions;s<a.length;s+=1)n(a[s],t,"Expression")},ah.TemplateElement=pM,ah.UnaryExpression=ah.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},ah.BinaryExpression=ah.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},ah.AssignmentExpression=ah.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},ah.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},ah.NewExpression=ah.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1)n(i[r],t,"Expression")},ah.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},ah.ExportNamedDeclaration=ah.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},ah.ExportAllDeclaration=function(e,t,n){e.exported&&n(e.exported,t),n(e.source,t,"Expression")},ah.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1)n(i[r],t);n(e.source,t,"Expression")},ah.ImportExpression=function(e,t,n){n(e.source,t,"Expression")},ah.ImportSpecifier=ah.ImportDefaultSpecifier=ah.ImportNamespaceSpecifier=ah.Identifier=ah.PrivateIdentifier=ah.Literal=pM,ah.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},ah.ClassDeclaration=ah.ClassExpression=function(e,t,n){return n(e,t,"Class")},ah.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},ah.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t)},ah.MethodDefinition=ah.PropertyDefinition=ah.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),e.value&&n(e.value,t,"Expression")},oh=["setup","draw","preload","deviceMoved","deviceTurned","deviceShaken","doubleClicked","mousePressed","mouseReleased","mouseMoved","mouseDragged","mouseClicked","mouseWheel","touchStarted","touchMoved","touchEnded","keyPressed","keyReleased","keyTyped","windowResized"],lh={fetchScript:async function(e){if(!e.src)return e.textContent;try{return await fetch(e.src).then(e=>e.text())}catch(t){return console.error("Error fetching script:",t),""}},extractUserDefinedVariablesAndFuncs:function(e){const t={variables:[],functions:[]};try{const o=cM(e,{ecmaVersion:2021,sourceType:"module",locations:!0});n=o,r={VariableDeclarator(e){if("Identifier"===e.id.type){const n=e.init&&["ArrowFunctionExpression","FunctionExpression"].includes(e.init.type)?"functions":"variables";t[n].push({name:e.id.name,line:e.loc.start.line+-1})}},FunctionDeclaration(e){e.id&&"Identifier"===e.id.type&&t.functions.push({name:e.id.name,line:e.loc.start.line+-1})},ClassDeclaration(e){e.id&&"Identifier"===e.id.type&&t.variables.push({name:e.id.name,line:e.loc.start.line+-1})}},i||(i=ah),function e(t,n,s){var a=s||t.type;i[a](t,n,e),r[a]&&r[a](t,n)}(n,s,a)}catch(o){console.error("Error parsing code:",o)}var n,r,i,s,a;return t},checkForConstsAndFuncs:function(e,t){const n=[...e.variables,...e.functions];function r(e,t,n){const r=`https://p5js.org/reference/p5/${t}`;return`${e} "${t}" on line ${n} is being redeclared and conflicts with a p5.js ${e.toLowerCase()}. p5.js reference: ${r}`}for(let{name:s,line:a}of n)if(void 0!==Et[s]){const e=r("Constant",s,a);return console.log(e),!0}const i=new Set(Object.getOwnPropertyNames(t.prototype).filter(e=>!e.startsWith("_")&&"constructor"!==e));for(let{name:s,line:a}of n)if(!oh.includes(s)&&i.has(s)){const e=r("Function",s,a);return console.log(e),!0}return!1},getUserCode:async function(){const e=document.querySelectorAll("script"),t=e[e.length-1];return await lh.fetchScript(t)},runFES:async function(e){const t=await lh.getUserCode(),n=lh.extractUserDefinedVariablesAndFuncs(t);lh.checkForConstsAndFuncs(n,e)}},"undefined"!=typeof p5&&fM(p5,p5.prototype),"undefined"!=typeof p5&&mM(p5,p5.prototype),"undefined"!=typeof p5&&gM(p5,p5.prototype),"undefined"!=typeof p5&&vM(p5,p5.prototype),"undefined"!=typeof p5&&yM(p5,p5.prototype),"undefined"!=typeof p5&&bM(p5,p5.prototype),"undefined"!=typeof p5&&xM(p5,p5.prototype),li(),bi(),Ni(),uh=class{constructor(e){this.columns=[],this.rows=[]}toString(e=","){let t=this.rows.map(e=>e.arr);return this.columns.some(e=>null===e)||(t=[this.columns,...t]),function(e,t={},n=e=>e){const r=Object.create(null);if(r.options=t,r.options.eof=void 0===r.options.eof||r.options.eof,r.row=1,r.col=1,r.output="",r.options.delimiter=void 0===r.options.delimiter?'"':t.delimiter,r.options.delimiter.length>1||0===r.options.delimiter.length)throw Error(`CSVError: delimiter must be one character [${r.options.separator}]`);if(r.options.separator=void 0===r.options.separator?",":t.separator,r.options.separator.length>1||0===r.options.separator.length)throw Error(`CSVError: separator must be one character [${r.options.separator}]`);const i=new RegExp(`${dC(r.options.delimiter)}|${dC(r.options.separator)}|\r\n|\n|\r`);return e.forEach((t,s)=>{let a="";switch(r.col=1,t.forEach((e,s)=>{"string"==typeof e&&(e=e.replace(new RegExp(r.options.delimiter,"g"),`${r.options.delimiter}${r.options.delimiter}`),e=i.test(e)?`${r.options.delimiter}${e}${r.options.delimiter}`:e),a+=n(e,r.row,r.col),s!==t.length-1&&(a+=r.options.separator),r.col++}),!0){case r.options.eof:case!r.options.eof&&s!==e.length-1:r.output+=`${a}\n`;break;default:r.output+=`${a}`}r.row++}),r.output}(t,{separator:e})}addRow(e){const t=e||new p5.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error(`invalid TableRow: ${t}`);return t.table=this,this.rows.push(t),t}removeRow(e){this.rows[e].table=null;const t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)}getRow(e){return this.rows[e]}getRows(){return this.rows}findRow(e,t){if("string"==typeof t){for(let n=0;n<this.rows.length;n++)if(this.rows[n].obj[this.columns.indexOf(t)]===e)return this.rows[n]}else for(let n=0;n<this.rows.length;n++)if(this.rows[n].arr[t]===e)return this.rows[n];return null}findRows(e,t){const n=[];if("string"==typeof t)for(let r=0;r<this.rows.length;r++)this.rows[r].obj[this.columns.indexOf(t)]===e&&n.push(this.rows[r]);else for(let r=0;r<this.rows.length;r++)this.rows[r].arr[t]===e&&n.push(this.rows[r]);return n}matchRow(e,t){if("number"==typeof t){for(let n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(let n=0;n<this.rows.length;n++)if(this.rows[n].obj[this.columns.indexOf(t)].match(e))return this.rows[n];return null}matchRows(e,t){const n=[];if("number"==typeof t)for(let r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(let r=0;r<this.rows.length;r++)this.rows[r].obj[this.columns.indexOf(t)].match(e)&&n.push(this.rows[r]);return n}getColumn(e){const t=[];if("string"==typeof e)for(let n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[this.columns.indexOf(e)]);else for(let n=0;n<this.rows.length;n++)t.push(this.rows[n].arr[e]);return t}clearRows(){delete this.rows,this.rows=[]}addColumn(e){const t=e||null;this.columns.push(t)}getColumnCount(){return this.columns.length}getRowCount(){return this.rows.length}removeTokens(e,t){const n=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),r=[];for(let s=0;s<e.length;s++)r.push(n(e.charAt(s)));const i=new RegExp(r.join("|"),"g");if(void 0===t)for(let s=0;s<this.columns.length;s++)for(let e=0;e<this.rows.length;e++){let t=this.rows[e].arr[s];t=t.replace(i,""),this.rows[e].arr[s]=t,this.rows[e].obj[this.columns[s]]=t}else if("string"==typeof t)for(let s=0;s<this.rows.length;s++){let e=this.rows[s].obj[t];e=e.replace(i,""),this.rows[s].obj[t]=e;const n=this.columns.indexOf(t);this.rows[s].arr[n]=e}else for(let s=0;s<this.rows.length;s++){let e=this.rows[s].arr[t];e=e.replace(i,""),this.rows[s].arr[t]=e,this.rows[s].obj[this.columns[t]]=e}}trim(e){const t=new RegExp(" ","g");if(void 0===e)for(let n=0;n<this.columns.length;n++)for(let e=0;e<this.rows.length;e++){let r=this.rows[e].arr[n];r=r.replace(t,""),this.rows[e].arr[n]=r,this.rows[e].obj[this.columns[n]]=r}else if("string"==typeof e)for(let n=0;n<this.rows.length;n++){let r=this.rows[n].obj[e];r=r.replace(t,""),this.rows[n].obj[e]=r;const i=this.columns.indexOf(e);this.rows[n].arr[i]=r}else for(let n=0;n<this.rows.length;n++){let r=this.rows[n].arr[e];r=r.replace(t,""),this.rows[n].arr[e]=r,this.rows[n].obj[this.columns[e]]=r}}removeColumn(e){let t,n;"string"==typeof e?(t=e,n=this.columns.indexOf(e)):(n=e,t=this.columns[e]);const r=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(r);for(let i=0;i<this.rows.length;i++){const e=this.rows[i].arr,r=e.splice(n+1,e.length);e.pop(),this.rows[i].arr=e.concat(r),delete this.rows[i].obj[t]}}set(e,t,n){this.rows[e].set(t,n)}setNum(e,t,n){this.rows[e].setNum(t,n)}setString(e,t,n){this.rows[e].setString(t,n)}get(e,t){return"string"==typeof t?this.rows[e].get(this.columns.indexOf(t)):this.rows[e].get(t)}getNum(e,t){return this.rows[e].getNum(t)}getString(e,t){return this.rows[e].getString(t)}getObject(e){const t={};let n,r,i;for(let s=0;s<this.rows.length;s++)if(n=this.rows[s].obj,"string"==typeof e){if(r=this.columns.indexOf(e),!(r>=0))throw new Error(`This table has no column named "${e}"`);i=n[e],t[i]=n}else t[s]=this.rows[s].obj;return t}getArray(){const e=[];for(let t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e}},"undefined"!=typeof p5&&_M(p5,p5.prototype),ch=class{constructor(e=[]){let t=e;this.arr=t,this.obj=Object.fromEntries(t.entries()),this.table=null}set(e,t){if("string"==typeof e){const n=this.table.columns.indexOf(e);if(!(n>=0))throw new Error(`This table has no column named "${e}"`);this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error(`Column #${e} is out of the range of this table`);{this.arr[e]=t;const n=this.table.columns[e];this.obj[n]=t}}}setNum(e,t){const n=parseFloat(t);this.set(e,n)}setString(e,t){const n=t.toString();this.set(e,n)}get(e){return"string"==typeof e?this.obj[this.table.columns.indexOf(e)]:this.arr[e]}getNum(e){let t;if(t="string"==typeof e?parseFloat(this.obj[this.table.columns.indexOf(e)]):parseFloat(this.arr[e]),"NaN"===t.toString())throw`Error: ${this.obj[e]} is NaN (Not a Number)`;return t}getString(e){return"string"==typeof e?this.obj[this.table.columns.indexOf(e)].toString():this.arr[e].toString()}},"undefined"!=typeof p5&&wM(p5,p5.prototype),li(),bi(),Ni(),"undefined"!=typeof p5&&SM(p5,p5.prototype),"undefined"!=typeof p5&&EM(p5,p5.prototype),"undefined"!=typeof p5&&CM(p5,p5.prototype),"undefined"!=typeof p5&&AM(p5,p5.prototype),"undefined"!=typeof p5&&TM(p5,p5.prototype),"undefined"!=typeof p5&&MM(p5,p5.prototype),"undefined"!=typeof p5&&DM(p5,p5.prototype),"undefined"!=typeof p5&&kM(p5,p5.prototype),li(),bi(),Ni(),"undefined"!=typeof p5&&FM(p5,p5.prototype),li(),hh={IDEOGRAPHIC:"ideographic",RIGHT_TO_LEFT:"rtl",LEFT_TO_RIGHT:"ltr",_CTX_MIDDLE:"middle",_TEXT_BOUNDS:"_textBoundsSingle",_FONT_BOUNDS:"_fontBoundsSingle",HANGING:"hanging",START:"start",END:"end"},"undefined"!=typeof p5&&IM(p5,p5.prototype),ph=m((dh=d({"node_modules/@japont/unicode-range/lib/index.js":e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function e(){}return e.parse=function(t){for(var n=new Set,r=0,i=t;r<i.length;r++){var s=i[r];if(!e.REGEXP.test(s))throw new TypeError('"'+s+'" is invalid unicode-range.');var a=s.match(e.REGEXP),o=a[1],l=a[2],u=a[3];if(o){if(/\?[^?]+$/.test(o))throw new TypeError('"'+s+'" is invalid unicode-range.');if(o.includes("?"))for(var c=o.replace(/\?/g,"0"),h=o.replace(/\?/g,"F"),d=0,p=e.parse(["U+"+c+"-"+h]);d<p.length;d++){var f=p[d];n.add(f)}else n.add(parseInt(o,16))}if(l&&u){var m=parseInt(l,16),g=parseInt(u,16);for(f=m;f<=g;f++)n.add(f)}}return Array.from(n).sort(function(e,t){return e-t})},e.stringify=function(t){for(var n,r=Array.from(new Set(t)).sort(function(e,t){return e-t}),i=[],s=0;s<r.length;s++){var a=r[s],o=r[s-1];n&&a-o!==1&&(i.push(e.rangeString(n,o)),n=a),n||(n=a),s===r.length-1&&(n===a?i.push(e.rangeString(a)):i.push(e.rangeString(n,a)))}return i},e.rangeString=function(e,t){return t&&e!==t?"U+"+e.toString(16)+"-"+t.toString(16):"U+"+e.toString(16)},e.REGEXP=/^u\+(?:([0-9a-f]?[0-9a-f?]{1,5})|([0-9a-f]{1,6})-([0-9a-f]{1,6}))?$/i,e}();e.UnicodeRange=t}}))()),fh=[{category:"control character",hexrange:["0000","001f"]},{category:"basic latin",hexrange:["0000","007f"]},{category:"latin-1 supplement",hexrange:["0080","00ff"]},{category:"latin extended-a",hexrange:["0100","017f"]},{category:"latin extended-b",hexrange:["0180","024f"]},{category:"ipa extensions",hexrange:["0250","02af"]},{category:"spacing modifier letters",hexrange:["02b0","02ff"]},{category:"combining diacritical marks",hexrange:["0300","036f"]},{category:"greek and coptic",hexrange:["0370","03ff"]},{category:"cyrillic",hexrange:["0400","04ff"]},{category:"cyrillic supplement",hexrange:["0500","052f"]},{category:"armenian",hexrange:["0530","058f"]},{category:"hebrew",hexrange:["0590","05ff"]},{category:"arabic",hexrange:["0600","06ff"]},{category:"syriac",hexrange:["0700","074f"]},{category:"arabic supplement",hexrange:["0750","077f"]},{category:"thaana",hexrange:["0780","07bf"]},{category:"nko",hexrange:["07c0","07ff"]},{category:"samaritan",hexrange:["0800","083f"]},{category:"mandaic",hexrange:["0840","085f"]},{category:"syriac supplement",hexrange:["0860","086f"]},{category:"arabic extended-b",hexrange:["0870","089f"]},{category:"arabic extended-a",hexrange:["08a0","08ff"]},{category:"devanagari",hexrange:["0900","097f"]},{category:"bengali",hexrange:["0980","09ff"]},{category:"gurmukhi",hexrange:["0a00","0a7f"]},{category:"gujarati",hexrange:["0a80","0aff"]},{category:"oriya",hexrange:["0b00","0b7f"]},{category:"tamil",hexrange:["0b80","0bff"]},{category:"telugu",hexrange:["0c00","0c7f"]},{category:"kannada",hexrange:["0c80","0cff"]},{category:"malayalam",hexrange:["0d00","0d7f"]},{category:"sinhala",hexrange:["0d80","0dff"]},{category:"thai",hexrange:["0e00","0e7f"]},{category:"lao",hexrange:["0e80","0eff"]},{category:"tibetan",hexrange:["0f00","0fff"]},{category:"myanmar",hexrange:["1000","109f"]},{category:"georgian",hexrange:["10a0","10ff"]},{category:"hangul jamo",hexrange:["1100","11ff"]},{category:"ethiopic",hexrange:["1200","137f"]},{category:"ethiopic supplement",hexrange:["1380","139f"]},{category:"cherokee",hexrange:["13a0","13ff"]},{category:"unified canadian aboriginal syllabics",hexrange:["1400","167f"]},{category:"ogham",hexrange:["1680","169f"]},{category:"runic",hexrange:["16a0","16ff"]},{category:"tagalog",hexrange:["1700","171f"]},{category:"hanunoo",hexrange:["1720","173f"]},{category:"buhid",hexrange:["1740","175f"]},{category:"tagbanwa",hexrange:["1760","177f"]},{category:"khmer",hexrange:["1780","17ff"]},{category:"mongolian",hexrange:["1800","18af"]},{category:"unified canadian aboriginal syllabics extended",hexrange:["18b0","18ff"]},{category:"limbu",hexrange:["1900","194f"]},{category:"tai le",hexrange:["1950","197f"]},{category:"new tai lue",hexrange:["1980","19df"]},{category:"khmer symbols",hexrange:["19e0","19ff"]},{category:"buginese",hexrange:["1a00","1a1f"]},{category:"tai tham",hexrange:["1a20","1aaf"]},{category:"combining diacritical marks extended",hexrange:["1ab0","1aff"]},{category:"balinese",hexrange:["1b00","1b7f"]},{category:"sundanese",hexrange:["1b80","1bbf"]},{category:"batak",hexrange:["1bc0","1bff"]},{category:"lepcha",hexrange:["1c00","1c4f"]},{category:"ol chiki",hexrange:["1c50","1c7f"]},{category:"cyrillic extended-c",hexrange:["1c80","1c8f"]},{category:"georgian extended",hexrange:["1c90","1cbf"]},{category:"sundanese supplement",hexrange:["1cc0","1ccf"]},{category:"vedic extensions",hexrange:["1cd0","1cff"]},{category:"phonetic extensions",hexrange:["1d00","1d7f"]},{category:"phonetic extensions supplement",hexrange:["1d80","1dbf"]},{category:"combining diacritical marks supplement",hexrange:["1dc0","1dff"]},{category:"latin extended additional",hexrange:["1e00","1eff"]},{category:"greek extended",hexrange:["1f00","1fff"]},{category:"general punctuation",hexrange:["2000","206f"]},{category:"superscripts and subscripts",hexrange:["2070","209f"]},{category:"currency symbols",hexrange:["20a0","20cf"]},{category:"combining diacritical marks for symbols",hexrange:["20d0","20ff"]},{category:"letterlike symbols",hexrange:["2100","214f"]},{category:"number forms",hexrange:["2150","218f"]},{category:"arrows",hexrange:["2190","21ff"]},{category:"mathematical operators",hexrange:["2200","22ff"]},{category:"miscellaneous technical",hexrange:["2300","23ff"]},{category:"control pictures",hexrange:["2400","243f"]},{category:"optical character recognition",hexrange:["2440","245f"]},{category:"enclosed alphanumerics",hexrange:["2460","24ff"]},{category:"box drawing",hexrange:["2500","257f"]},{category:"block elements",hexrange:["2580","259f"]},{category:"geometric shapes",hexrange:["25a0","25ff"]},{category:"miscellaneous symbols",hexrange:["2600","26ff"]},{category:"dingbats",hexrange:["2700","27bf"]},{category:"miscellaneous mathematical symbols-a",hexrange:["27c0","27ef"]},{category:"supplemental arrows-a",hexrange:["27f0","27ff"]},{category:"braille patterns",hexrange:["2800","28ff"]},{category:"supplemental arrows-b",hexrange:["2900","297f"]},{category:"miscellaneous mathematical symbols-b",hexrange:["2980","29ff"]},{category:"supplemental mathematical operators",hexrange:["2a00","2aff"]},{category:"miscellaneous symbols and arrows",hexrange:["2b00","2bff"]},{category:"glagolitic",hexrange:["2c00","2c5f"]},{category:"latin extended-c",hexrange:["2c60","2c7f"]},{category:"coptic",hexrange:["2c80","2cff"]},{category:"georgian supplement",hexrange:["2d00","2d2f"]},{category:"tifinagh",hexrange:["2d30","2d7f"]},{category:"ethiopic extended",hexrange:["2d80","2ddf"]},{category:"cyrillic extended-a",hexrange:["2de0","2dff"]},{category:"supplemental punctuation",hexrange:["2e00","2e7f"]},{category:"cjk radicals supplement",hexrange:["2e80","2eff"]},{category:"kangxi radicals",hexrange:["2f00","2fdf"]},{category:"ideographic description characters",hexrange:["2ff0","2fff"]},{category:"cjk symbols and punctuation",hexrange:["3000","303f"]},{category:"hiragana",hexrange:["3040","309f"]},{category:"katakana",hexrange:["30a0","30ff"]},{category:"bopomofo",hexrange:["3100","312f"]},{category:"hangul compatibility jamo",hexrange:["3130","318f"]},{category:"kanbun",hexrange:["3190","319f"]},{category:"bopomofo extended",hexrange:["31a0","31bf"]},{category:"cjk strokes",hexrange:["31c0","31ef"]},{category:"katakana phonetic extensions",hexrange:["31f0","31ff"]},{category:"enclosed cjk letters and months",hexrange:["3200","32ff"]},{category:"cjk compatibility",hexrange:["3300","33ff"]},{category:"cjk unified ideographs extension a",hexrange:["3400","4dbf"]},{category:"yijing hexagram symbols",hexrange:["4dc0","4dff"]},{category:"cjk unified ideographs",hexrange:["4e00","9fff"]},{category:"yi syllables",hexrange:["a000","a48f"]},{category:"yi radicals",hexrange:["a490","a4cf"]},{category:"lisu",hexrange:["a4d0","a4ff"]},{category:"vai",hexrange:["a500","a63f"]},{category:"cyrillic extended-b",hexrange:["a640","a69f"]},{category:"bamum",hexrange:["a6a0","a6ff"]},{category:"modifier tone letters",hexrange:["a700","a71f"]},{category:"latin extended-d",hexrange:["a720","a7ff"]},{category:"syloti nagri",hexrange:["a800","a82f"]},{category:"common indic number forms",hexrange:["a830","a83f"]},{category:"phags-pa",hexrange:["a840","a87f"]},{category:"saurashtra",hexrange:["a880","a8df"]},{category:"devanagari extended",hexrange:["a8e0","a8ff"]},{category:"kayah li",hexrange:["a900","a92f"]},{category:"rejang",hexrange:["a930","a95f"]},{category:"hangul jamo extended-a",hexrange:["a960","a97f"]},{category:"javanese",hexrange:["a980","a9df"]},{category:"myanmar extended-b",hexrange:["a9e0","a9ff"]},{category:"cham",hexrange:["aa00","aa5f"]},{category:"myanmar extended-a",hexrange:["aa60","aa7f"]},{category:"tai viet",hexrange:["aa80","aadf"]},{category:"meetei mayek extensions",hexrange:["aae0","aaff"]},{category:"ethiopic extended-a",hexrange:["ab00","ab2f"]},{category:"latin extended-e",hexrange:["ab30","ab6f"]},{category:"cherokee supplement",hexrange:["ab70","abbf"]},{category:"meetei mayek",hexrange:["abc0","abff"]},{category:"hangul syllables",hexrange:["ac00","d7af"]},{category:"hangul jamo extended-b",hexrange:["d7b0","d7ff"]},{category:"high surrogates",hexrange:["d800","db7f"]},{category:"high private use surrogates",hexrange:["db80","dbff"]},{category:"low surrogates",hexrange:["dc00","dfff"]},{category:"private use area",hexrange:["e000","f8ff"]},{category:"cjk compatibility ideographs",hexrange:["f900","faff"]},{category:"alphabetic presentation forms",hexrange:["fb00","fb4f"]},{category:"arabic presentation forms-a",hexrange:["fb50","fdff"]},{category:"variation selectors",hexrange:["fe00","fe0f"]},{category:"vertical forms",hexrange:["fe10","fe1f"]},{category:"combining half marks",hexrange:["fe20","fe2f"]},{category:"cjk compatibility forms",hexrange:["fe30","fe4f"]},{category:"small form variants",hexrange:["fe50","fe6f"]},{category:"arabic presentation forms-b",hexrange:["fe70","feff"]},{category:"halfwidth and fullwidth forms",hexrange:["ff00","ffef"]},{category:"specials",hexrange:["fff0","ffff"]},{category:"linear b syllabary",hexrange:["10000","1007f"]},{category:"linear b ideograms",hexrange:["10080","100ff"]},{category:"aegean numbers",hexrange:["10100","1013f"]},{category:"ancient greek numbers",hexrange:["10140","1018f"]},{category:"ancient symbols",hexrange:["10190","101cf"]},{category:"phaistos disc",hexrange:["101d0","101ff"]},{category:"lycian",hexrange:["10280","1029f"]},{category:"carian",hexrange:["102a0","102df"]},{category:"coptic epact numbers",hexrange:["102e0","102ff"]},{category:"old italic",hexrange:["10300","1032f"]},{category:"gothic",hexrange:["10330","1034f"]},{category:"old permic",hexrange:["10350","1037f"]},{category:"ugaritic",hexrange:["10380","1039f"]},{category:"old persian",hexrange:["103a0","103df"]},{category:"deseret",hexrange:["10400","1044f"]},{category:"shavian",hexrange:["10450","1047f"]},{category:"osmanya",hexrange:["10480","104af"]},{category:"osage",hexrange:["104b0","104ff"]},{category:"elbasan",hexrange:["10500","1052f"]},{category:"caucasian albanian",hexrange:["10530","1056f"]},{category:"vithkuqi",hexrange:["10570","105bf"]},{category:"linear a",hexrange:["10600","1077f"]},{category:"latin extended-f",hexrange:["10780","107bf"]},{category:"cypriot syllabary",hexrange:["10800","1083f"]},{category:"imperial aramaic",hexrange:["10840","1085f"]},{category:"palmyrene",hexrange:["10860","1087f"]},{category:"nabataean",hexrange:["10880","108af"]},{category:"hatran",hexrange:["108e0","108ff"]},{category:"phoenician",hexrange:["10900","1091f"]},{category:"lydian",hexrange:["10920","1093f"]},{category:"meroitic hieroglyphs",hexrange:["10980","1099f"]},{category:"meroitic cursive",hexrange:["109a0","109ff"]},{category:"kharoshthi",hexrange:["10a00","10a5f"]},{category:"old south arabian",hexrange:["10a60","10a7f"]},{category:"old north arabian",hexrange:["10a80","10a9f"]},{category:"manichaean",hexrange:["10ac0","10aff"]},{category:"avestan",hexrange:["10b00","10b3f"]},{category:"inscriptional parthian",hexrange:["10b40","10b5f"]},{category:"inscriptional pahlavi",hexrange:["10b60","10b7f"]},{category:"psalter pahlavi",hexrange:["10b80","10baf"]},{category:"old turkic",hexrange:["10c00","10c4f"]},{category:"old hungarian",hexrange:["10c80","10cff"]},{category:"hanifi rohingya",hexrange:["10d00","10d3f"]},{category:"rumi numeral symbols",hexrange:["10e60","10e7f"]},{category:"yezidi",hexrange:["10e80","10ebf"]},{category:"arabic extended-c",hexrange:["10ec0","10eff"]},{category:"old sogdian",hexrange:["10f00","10f2f"]},{category:"sogdian",hexrange:["10f30","10f6f"]},{category:"old uyghur",hexrange:["10f70","10faf"]},{category:"chorasmian",hexrange:["10fb0","10fdf"]},{category:"elymaic",hexrange:["10fe0","10fff"]},{category:"brahmi",hexrange:["11000","1107f"]},{category:"kaithi",hexrange:["11080","110cf"]},{category:"sora sompeng",hexrange:["110d0","110ff"]},{category:"chakma",hexrange:["11100","1114f"]},{category:"mahajani",hexrange:["11150","1117f"]},{category:"sharada",hexrange:["11180","111df"]},{category:"sinhala archaic numbers",hexrange:["111e0","111ff"]},{category:"khojki",hexrange:["11200","1124f"]},{category:"multani",hexrange:["11280","112af"]},{category:"khudawadi",hexrange:["112b0","112ff"]},{category:"grantha",hexrange:["11300","1137f"]},{category:"newa",hexrange:["11400","1147f"]},{category:"tirhuta",hexrange:["11480","114df"]},{category:"siddham",hexrange:["11580","115ff"]},{category:"modi",hexrange:["11600","1165f"]},{category:"mongolian supplement",hexrange:["11660","1167f"]},{category:"takri",hexrange:["11680","116cf"]},{category:"ahom",hexrange:["11700","1174f"]},{category:"dogra",hexrange:["11800","1184f"]},{category:"warang citi",hexrange:["118a0","118ff"]},{category:"dives akuru",hexrange:["11900","1195f"]},{category:"nandinagari",hexrange:["119a0","119ff"]},{category:"zanabazar square",hexrange:["11a00","11a4f"]},{category:"soyombo",hexrange:["11a50","11aaf"]},{category:"unified canadian aboriginal syllabics extended-a",hexrange:["11ab0","11abf"]},{category:"pau cin hau",hexrange:["11ac0","11aff"]},{category:"devanagari extended-a",hexrange:["11b00","11b5f"]},{category:"bhaiksuki",hexrange:["11c00","11c6f"]},{category:"marchen",hexrange:["11c70","11cbf"]},{category:"masaram gondi",hexrange:["11d00","11d5f"]},{category:"gunjala gondi",hexrange:["11d60","11daf"]},{category:"makasar",hexrange:["11ee0","11eff"]},{category:"kawi",hexrange:["11f00","11f5f"]},{category:"lisu supplement",hexrange:["11fb0","11fbf"]},{category:"tamil supplement",hexrange:["11fc0","11fff"]},{category:"cuneiform",hexrange:["12000","123ff"]},{category:"cuneiform numbers and punctuation",hexrange:["12400","1247f"]},{category:"early dynastic cuneiform",hexrange:["12480","1254f"]},{category:"cypro-minoan",hexrange:["12f90","12fff"]},{category:"egyptian hieroglyphs",hexrange:["13000","1342f"]},{category:"egyptian hieroglyph format controls",hexrange:["13430","1345f"]},{category:"anatolian hieroglyphs",hexrange:["14400","1467f"]},{category:"bamum supplement",hexrange:["16800","16a3f"]},{category:"mro",hexrange:["16a40","16a6f"]},{category:"tangsa",hexrange:["16a70","16acf"]},{category:"bassa vah",hexrange:["16ad0","16aff"]},{category:"pahawh hmong",hexrange:["16b00","16b8f"]},{category:"medefaidrin",hexrange:["16e40","16e9f"]},{category:"miao",hexrange:["16f00","16f9f"]},{category:"ideographic symbols and punctuation",hexrange:["16fe0","16fff"]},{category:"tangut",hexrange:["17000","187ff"]},{category:"tangut components",hexrange:["18800","18aff"]},{category:"khitan small script",hexrange:["18b00","18cff"]},{category:"tangut supplement",hexrange:["18d00","18d7f"]},{category:"kana extended-b",hexrange:["1aff0","1afff"]},{category:"kana supplement",hexrange:["1b000","1b0ff"]},{category:"kana extended-a",hexrange:["1b100","1b12f"]},{category:"small kana extension",hexrange:["1b130","1b16f"]},{category:"nushu",hexrange:["1b170","1b2ff"]},{category:"duployan",hexrange:["1bc00","1bc9f"]},{category:"shorthand format controls",hexrange:["1bca0","1bcaf"]},{category:"znamenny musical notation",hexrange:["1cf00","1cfcf"]},{category:"byzantine musical symbols",hexrange:["1d000","1d0ff"]},{category:"musical symbols",hexrange:["1d100","1d1ff"]},{category:"ancient greek musical notation",hexrange:["1d200","1d24f"]},{category:"kaktovik numerals",hexrange:["1d2c0","1d2df"]},{category:"mayan numerals",hexrange:["1d2e0","1d2ff"]},{category:"tai xuan jing symbols",hexrange:["1d300","1d35f"]},{category:"counting rod numerals",hexrange:["1d360","1d37f"]},{category:"mathematical alphanumeric symbols",hexrange:["1d400","1d7ff"]},{category:"sutton signwriting",hexrange:["1d800","1daaf"]},{category:"latin extended-g",hexrange:["1df00","1dfff"]},{category:"glagolitic supplement",hexrange:["1e000","1e02f"]},{category:"cyrillic extended-d",hexrange:["1e030","1e08f"]},{category:"nyiakeng puachue hmong",hexrange:["1e100","1e14f"]},{category:"toto",hexrange:["1e290","1e2bf"]},{category:"wancho",hexrange:["1e2c0","1e2ff"]},{category:"nag mundari",hexrange:["1e4d0","1e4ff"]},{category:"ethiopic extended-b",hexrange:["1e7e0","1e7ff"]},{category:"mende kikakui",hexrange:["1e800","1e8df"]},{category:"adlam",hexrange:["1e900","1e95f"]},{category:"indic siyaq numbers",hexrange:["1ec70","1ecbf"]},{category:"ottoman siyaq numbers",hexrange:["1ed00","1ed4f"]},{category:"arabic mathematical alphabetic symbols",hexrange:["1ee00","1eeff"]},{category:"mahjong tiles",hexrange:["1f000","1f02f"]},{category:"domino tiles",hexrange:["1f030","1f09f"]},{category:"playing cards",hexrange:["1f0a0","1f0ff"]},{category:"enclosed alphanumeric supplement",hexrange:["1f100","1f1ff"]},{category:"enclosed ideographic supplement",hexrange:["1f200","1f2ff"]},{category:"miscellaneous symbols and pictographs",hexrange:["1f300","1f5ff"]},{category:"emoticons (emoji)",hexrange:["1f600","1f64f"]},{category:"ornamental dingbats",hexrange:["1f650","1f67f"]},{category:"transport and map symbols",hexrange:["1f680","1f6ff"]},{category:"alchemical symbols",hexrange:["1f700","1f77f"]},{category:"geometric shapes extended",hexrange:["1f780","1f7ff"]},{category:"supplemental arrows-c",hexrange:["1f800","1f8ff"]},{category:"supplemental symbols and pictographs",hexrange:["1f900","1f9ff"]},{category:"chess symbols",hexrange:["1fa00","1fa6f"]},{category:"symbols and pictographs extended-a",hexrange:["1fa70","1faff"]},{category:"symbols for legacy computing",hexrange:["1fb00","1fbff"]},{category:"cjk unified ideographs extension b",hexrange:["20000","2a6df"]},{category:"cjk unified ideographs extension c",hexrange:["2a700","2b73f"]},{category:"cjk unified ideographs extension d",hexrange:["2b740","2b81f"]},{category:"cjk unified ideographs extension e",hexrange:["2b820","2ceaf"]},{category:"cjk unified ideographs extension f",hexrange:["2ceb0","2ebef"]},{category:"cjk unified ideographs extension i",hexrange:["2ebf0","2ee5f"]},{category:"cjk compatibility ideographs supplement",hexrange:["2f800","2fa1f"]},{category:"cjk unified ideographs extension g",hexrange:["30000","3134f"]},{category:"cjk unified ideographs extension h",hexrange:["31350","323af"]},{category:"tags",hexrange:["e0000","e007f"]},{category:"variation selectors supplement",hexrange:["e0100","e01ef"]},{category:"supplementary private use area-a",hexrange:["f0000","fffff"]},{category:"supplementary private use area-b",hexrange:["100000","10ffff"]}],mh=256,gh=286,vh=30,yh=15,bh=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),xh=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wh=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RM(Sh=new Array(576)),RM(Eh=new Array(60)),RM(Ch=new Array(512)),RM(Ah=new Array(256)),RM(Th=new Array(29)),RM(Mh=new Array(vh)),Fh=e=>e<256?Ch[e]:Ch[256+(e>>>7)],Ih=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Rh=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Ih(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Lh=(e,t,n)=>{Rh(e,n[2*t],n[2*t+1])},Ph=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Oh=e=>{16===e.bi_valid?(Ih(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},Bh=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,c,h,d,p,f,m=0;for(d=0;d<=yh;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)c=e.heap[u],d=n[2*n[2*c+1]+1]+1,d>l&&(d=l,m++),n[2*c+1]=d,c>r||(e.bl_count[d]++,p=0,c>=o&&(p=a[c-o]),f=n[2*c],e.opt_len+=f*(d+p),s&&(e.static_len+=f*(i[2*c+1]+p)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(c=e.bl_count[d];0!==c;)h=e.heap[--u],h>r||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),c--)}},Uh=(e,t,n)=>{const r=new Array(16);let i,s,a=0;for(i=1;i<=yh;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=Ph(r[t]++,t))}},zh=()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(Th[r]=n,e=0;e<1<<bh[r];e++)Ah[n++]=r;for(Ah[n-1]=r,i=0,r=0;r<16;r++)for(Mh[r]=i,e=0;e<1<<xh[r];e++)Ch[i++]=r;for(i>>=7;r<vh;r++)for(Mh[r]=i<<7,e=0;e<1<<xh[r]-7;e++)Ch[256+i++]=r;for(t=0;t<=yh;t++)s[t]=0;for(e=0;e<=143;)Sh[2*e+1]=8,e++,s[8]++;for(;e<=255;)Sh[2*e+1]=9,e++,s[9]++;for(;e<=279;)Sh[2*e+1]=7,e++,s[7]++;for(;e<=287;)Sh[2*e+1]=8,e++,s[8]++;for(Uh(Sh,287,s),e=0;e<vh;e++)Eh[2*e+1]=5,Eh[2*e]=Ph(e,5);Dh=new LM(Sh,bh,257,gh,yh),kh=new LM(Eh,xh,0,vh,yh),Nh=new LM(new Array(0),_h,0,19,7)},Vh=e=>{let t;for(t=0;t<gh;t++)e.dyn_ltree[2*t]=0;for(t=0;t<vh;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},jh=e=>{e.bi_valid>8?Ih(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Gh=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},Hh=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Gh(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Gh(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Wh=(e,t,n)=>{let r,i,s,a,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0===r?Lh(e,i,t):(s=Ah[i],Lh(e,s+mh+1,t),a=bh[s],0!==a&&(i-=Th[s],Rh(e,i,a)),r--,s=Fh(r),Lh(e,s,n),a=xh[s],0!==a&&(r-=Mh[s],Rh(e,r,a)))}while(o<e.sym_next);Lh(e,256,t)},$h=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,o,l,u=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=u,a=e.heap_len>>1;a>=1;a--)Hh(e,n,a);l=s;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Hh(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,n[2*l]=n[2*a]+n[2*o],e.depth[l]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,n[2*a+1]=n[2*o+1]=l,e.heap[1]=l++,Hh(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Bh(e,t),Uh(n,u,e.bl_count)},qh=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++o<l&&i===a||(o<u?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))},Xh=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++o<l&&i===a)){if(o<u)do{Lh(e,i,e.bl_tree)}while(0!==--o);else 0!==i?(i!==s&&(Lh(e,i,e.bl_tree),o--),Lh(e,16,e.bl_tree),Rh(e,o-3,2)):o<=10?(Lh(e,17,e.bl_tree),Rh(e,o-3,3)):(Lh(e,18,e.bl_tree),Rh(e,o-11,7));o=0,s=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}},Yh=e=>{let t;for(qh(e,e.dyn_ltree,e.l_desc.max_code),qh(e,e.dyn_dtree,e.d_desc.max_code),$h(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*wh[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},Zh=(e,t,n,r)=>{let i;for(Rh(e,t-257,5),Rh(e,n-1,5),Rh(e,r-4,4),i=0;i<r;i++)Rh(e,e.bl_tree[2*wh[i]+1],3);Xh(e,e.dyn_ltree,t-1),Xh(e,e.dyn_dtree,n-1)},Kh=e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<mh;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},Qh=!1,ed=(e,t,n,r)=>{let i,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=Kh(e)),$h(e,e.l_desc),$h(e,e.d_desc),a=Yh(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?Jh(e,t,n,r):4===e.strategy||s===i?(Rh(e,2+(r?1:0),3),Wh(e,Sh,Eh)):(Rh(e,4+(r?1:0),3),Zh(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Wh(e,e.dyn_ltree,e.dyn_dtree)),Vh(e),r&&jh(e)},td={_tr_init:e=>{Qh||(zh(),Qh=!0),e.l_desc=new PM(e.dyn_ltree,Dh),e.d_desc=new PM(e.dyn_dtree,kh),e.bl_desc=new PM(e.bl_tree,Nh),e.bi_buf=0,e.bi_valid=0,Vh(e)},_tr_stored_block:Jh=(e,t,n,r)=>{Rh(e,0+(r?1:0),3),jh(e),Ih(e,n),Ih(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},_tr_flush_block:ed,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ah[n]+mh+1)]++,e.dyn_dtree[2*Fh(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Rh(e,2,3),Lh(e,256,Sh),Oh(e)}},nd=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,s=s+i|0}while(--a);i%=65521,s%=65521}return i|s<<16},rd=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})()),id=(e,t,n,r)=>{const i=rd,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},sd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ad={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},({_tr_init:od,_tr_stored_block:ld,_tr_flush_block:ud,_tr_tally:cd,_tr_align:hd}=td),({Z_NO_FLUSH:dd,Z_PARTIAL_FLUSH:pd,Z_FULL_FLUSH:fd,Z_FINISH:md,Z_BLOCK:gd,Z_OK:vd,Z_STREAM_END:yd,Z_STREAM_ERROR:bd,Z_DATA_ERROR:xd,Z_BUF_ERROR:_d,Z_DEFAULT_COMPRESSION:wd,Z_FILTERED:Sd,Z_HUFFMAN_ONLY:Ed,Z_RLE:Cd,Z_FIXED:Ad,Z_DEFAULT_STRATEGY:Td,Z_UNKNOWN:Md,Z_DEFLATED:Dd}=ad),Nd=30,Fd=19,Id=2*(kd=286)+1,Rd=15,Ld=258,Pd=262,Od=42,Bd=113,Ud=666,zd=(e,t)=>(e.msg=sd[t],t),Vd=e=>2*e-(e>4?9:0),jd=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Gd=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)},Hd=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Wd=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},$d=(e,t)=>{ud(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Wd(e.strm)},qd=(e,t)=>{e.pending_buf[e.pending++]=t},Xd=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Yd=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=nd(e.adler,t,i,n):2===e.state.wrap&&(e.adler=id(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Zd=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-Pd?e.strstart-(e.w_size-Pd):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+Ld;let p=u[s+a-1],f=u[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,u[n+a]===f&&u[n+a-1]===p&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<d);if(r=Ld-(d-s),s=d-Ld,r>a){if(e.match_start=t,a=r,r>=o)break;p=u[s+a-1],f=u[s+a]}}}while((t=h[t&c])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead},Kd=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Pd)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Gd(e),r+=t),0===e.strm.avail_in)break;if(n=Yd(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Hd(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Hd(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Pd&&0!==e.strm.avail_in)},Jd=(e,t)=>{let n,r;for(;;){if(e.lookahead<Pd){if(Kd(e),e.lookahead<Pd&&t===dd)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Hd(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Pd&&(e.match_length=Zd(e,n)),e.match_length>=3)if(r=cd(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Hd(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Hd(e,e.ins_h,e.window[e.strstart+1]);else r=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&($d(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===md?($d(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&($d(e,!1),0===e.strm.avail_out)?1:2},ep=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Pd){if(Kd(e),e.lookahead<Pd&&t===dd)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Hd(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Pd&&(e.match_length=Zd(e,n),e.match_length<=5&&(e.strategy===Sd||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=cd(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Hd(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&($d(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=cd(e,0,e.window[e.strstart-1]),r&&$d(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=cd(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===md?($d(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&($d(e,!1),0===e.strm.avail_out)?1:2},tp=(e,t)=>{let n,r,i,s;const a=e.window;for(;;){if(e.lookahead<=Ld){if(Kd(e),e.lookahead<=Ld&&t===dd)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=e.strstart+Ld;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=Ld-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=cd(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&($d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===md?($d(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&($d(e,!1),0===e.strm.avail_out)?1:2},np=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(Kd(e),0===e.lookahead)){if(t===dd)return 1;break}if(e.match_length=0,n=cd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&($d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===md?($d(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&($d(e,!1),0===e.strm.avail_out)?1:2},rp=[new OM(0,0,0,0,Qd=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==md||t===dd||n!==r+e.strm.avail_in))break;a=t===md&&n===r+e.strm.avail_in?1:0,ld(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Wd(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Yd(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==dd&&t!==md&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Yd(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=s||(r||t===md)&&t!==dd&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=t===md&&0===e.strm.avail_in&&n===r?1:0,ld(e,e.block_start,n,a),e.block_start+=n,Wd(e.strm)),a?3:1)}),new OM(4,4,8,4,Jd),new OM(4,5,16,8,Jd),new OM(4,6,32,32,Jd),new OM(4,4,16,16,ep),new OM(8,16,32,32,ep),new OM(8,16,128,128,ep),new OM(8,32,128,256,ep),new OM(32,128,258,1024,ep),new OM(32,258,258,4096,ep)],ip=e=>{e.window_size=2*e.w_size,jd(e.head),e.max_lazy_match=rp[e.level].max_lazy,e.good_match=rp[e.level].good_length,e.nice_match=rp[e.level].nice_length,e.max_chain_length=rp[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0},sp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Od&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Bd&&t.status!==Ud?1:0},up={deflateInit:(e,t)=>lp(e,t,Dd,15,8,Td),deflateInit2:lp=(e,t,n,r,i,s)=>{if(!e)return bd;let a=1;if(t===wd&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==Dd||r<8||r>15||t<0||t>9||s<0||s>Ad||8===r&&1!==a)return zd(e,bd);8===r&&(r=9);const o=new BM;return e.state=o,o.strm=e,o.status=Od,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=n,op(e)},deflateReset:op=e=>{const t=ap(e);return t===vd&&ip(e.state),t},deflateResetKeep:ap=e=>{if(sp(e))return zd(e,bd);e.total_in=e.total_out=0,e.data_type=Md;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Od:Bd,e.adler=2===t.wrap?0:1,t.last_flush=-2,od(t),vd},deflateSetHeader:(e,t)=>sp(e)||2!==e.state.wrap?bd:(e.state.gzhead=t,vd),deflate:(e,t)=>{if(sp(e)||t>gd||t<0)return e?zd(e,bd):bd;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Ud&&t!==md)return zd(e,0===e.avail_out?_d:bd);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Wd(e),0===e.avail_out)return n.last_flush=-1,vd}else if(0===e.avail_in&&Vd(t)<=Vd(r)&&t!==md)return zd(e,_d);if(n.status===Ud&&0!==e.avail_in)return zd(e,_d);if(n.status===Od&&0===n.wrap&&(n.status=Bd),n.status===Od){let t=Dd+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Ed||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Xd(n,t),0!==n.strstart&&(Xd(n,e.adler>>>16),Xd(n,65535&e.adler)),e.adler=1,n.status=Bd,Wd(e),0!==n.pending)return n.last_flush=-1,vd}if(57===n.status)if(e.adler=0,qd(n,31),qd(n,139),qd(n,8),n.gzhead)qd(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),qd(n,255&n.gzhead.time),qd(n,n.gzhead.time>>8&255),qd(n,n.gzhead.time>>16&255),qd(n,n.gzhead.time>>24&255),qd(n,9===n.level?2:n.strategy>=Ed||n.level<2?4:0),qd(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(qd(n,255&n.gzhead.extra.length),qd(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=id(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(qd(n,0),qd(n,0),qd(n,0),qd(n,0),qd(n,0),qd(n,9===n.level?2:n.strategy>=Ed||n.level<2?4:0),qd(n,3),n.status=Bd,Wd(e),0!==n.pending)return n.last_flush=-1,vd;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=id(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Wd(e),0!==n.pending)return n.last_flush=-1,vd;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=id(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=id(e.adler,n.pending_buf,n.pending-r,r)),Wd(e),0!==n.pending)return n.last_flush=-1,vd;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,qd(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=id(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=id(e.adler,n.pending_buf,n.pending-r,r)),Wd(e),0!==n.pending)return n.last_flush=-1,vd;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,qd(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=id(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Wd(e),0!==n.pending))return n.last_flush=-1,vd;qd(n,255&e.adler),qd(n,e.adler>>8&255),e.adler=0}if(n.status=Bd,Wd(e),0!==n.pending)return n.last_flush=-1,vd}if(0!==e.avail_in||0!==n.lookahead||t!==dd&&n.status!==Ud){let r=0===n.level?Qd(n,t):n.strategy===Ed?np(n,t):n.strategy===Cd?tp(n,t):rp[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Ud),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),vd;if(2===r&&(t===pd?hd(n):t!==gd&&(ld(n,0,0,!1),t===fd&&(jd(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Wd(e),0===e.avail_out))return n.last_flush=-1,vd}return t!==md?vd:n.wrap<=0?yd:(2===n.wrap?(qd(n,255&e.adler),qd(n,e.adler>>8&255),qd(n,e.adler>>16&255),qd(n,e.adler>>24&255),qd(n,255&e.total_in),qd(n,e.total_in>>8&255),qd(n,e.total_in>>16&255),qd(n,e.total_in>>24&255)):(Xd(n,e.adler>>>16),Xd(n,65535&e.adler)),Wd(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?vd:yd)},deflateEnd:e=>{if(sp(e))return bd;const t=e.state.status;return e.state=null,t===Bd?zd(e,xd):vd},deflateSetDictionary:(e,t)=>{let n=t.length;if(sp(e))return bd;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Od||r.lookahead)return bd;if(1===i&&(e.adler=nd(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(jd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Kd(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Hd(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Kd(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,r.wrap=i,vd},deflateInfo:"pako deflate (from Nodeca project)"},cp=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),hp=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)cp(n,t)&&(e[t]=n[t])}}return e},dp={assign:hp,flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let t=e[r];n.set(t,i),i+=t.length}return n}},pp=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Lr){pp=!1}fp=new Uint8Array(256);for(let e=0;e<256;e++)fp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;var t,Ir;fp[254]=fp[254]=1,mp=(e,t)=>{if(t<65534&&e.subarray&&pp)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n},gp={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){s[i++]=t;continue}let a=fp[t];if(a>4)s[i++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return mp(s,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+fp[e[n]]>t?n:t}},vp=UM,yp=Object.prototype.toString,({Z_NO_FLUSH:bp,Z_SYNC_FLUSH:xp,Z_FULL_FLUSH:_p,Z_FINISH:wp,Z_OK:Sp,Z_STREAM_END:Ep,Z_DEFAULT_COMPRESSION:Cp,Z_DEFAULT_STRATEGY:Ap,Z_DEFLATED:Tp}=ad),zM.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?wp:bp,"string"==typeof e?n.input=gp.string2buf(e):"[object ArrayBuffer]"===yp.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===xp||s===_p)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=up.deflate(n,s),i===Ep)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=up.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Sp;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},zM.prototype.onData=function(e){this.chunks.push(e)},zM.prototype.onEnd=function(e){e===Sp&&(this.result=dp.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Mp={Deflate:zM,deflate:VM,deflateRaw:jM,gzip:GM,constants:ad},Dp=16209,kp=function(e,t){let n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_,w,S,E,C;const A=e.state;n=e.next_in,E=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),o=A.dmax,l=A.wsize,u=A.whave,c=A.wnext,h=A.window,d=A.hold,p=A.bits,f=A.lencode,m=A.distcode,g=(1<<A.lenbits)-1,v=(1<<A.distbits)-1;e:do{p<15&&(d+=E[n++]<<p,p+=8,d+=E[n++]<<p,p+=8),y=f[d&g];t:for(;;){if(b=y>>>24,d>>>=b,p-=b,b=y>>>16&255,0===b)C[i++]=65535&y;else{if(!(16&b)){if(64&b){if(32&b){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Dp;break e}y=f[(65535&y)+(d&(1<<b)-1)];continue t}for(x=65535&y,b&=15,b&&(p<b&&(d+=E[n++]<<p,p+=8),x+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=E[n++]<<p,p+=8,d+=E[n++]<<p,p+=8),y=m[d&v];;){if(b=y>>>24,d>>>=b,p-=b,b=y>>>16&255,16&b){if(_=65535&y,b&=15,p<b&&(d+=E[n++]<<p,p+=8,p<b&&(d+=E[n++]<<p,p+=8)),_+=d&(1<<b)-1,_>o){e.msg="invalid distance too far back",A.mode=Dp;break e}if(d>>>=b,p-=b,b=i-s,_>b){if(b=_-b,b>u&&A.sane){e.msg="invalid distance too far back",A.mode=Dp;break e}if(w=0,S=h,0===c){if(w+=l-b,b<x){x-=b;do{C[i++]=h[w++]}while(--b);w=i-_,S=C}}else if(c<b){if(w+=l+c-b,b-=c,b<x){x-=b;do{C[i++]=h[w++]}while(--b);if(w=0,c<x){b=c,x-=b;do{C[i++]=h[w++]}while(--b);w=i-_,S=C}}}else if(w+=c-b,b<x){x-=b;do{C[i++]=h[w++]}while(--b);w=i-_,S=C}for(;x>2;)C[i++]=S[w++],C[i++]=S[w++],C[i++]=S[w++],x-=3;x&&(C[i++]=S[w++],x>1&&(C[i++]=S[w++]))}else{w=i-_;do{C[i++]=C[w++],C[i++]=C[w++],C[i++]=C[w++],x-=3}while(x>2);x&&(C[i++]=C[w++],x>1&&(C[i++]=C[w++]))}break}if(64&b){e.msg="invalid distance code",A.mode=Dp;break e}y=m[(65535&y)+(d&(1<<b)-1)]}}break}}while(n<r&&i<a);x=p>>3,n-=x,p-=x<<3,d&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),A.hold=d,A.bits=p},Np=15,Fp=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ip=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Rp=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Lp=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Pp=(e,t,n,r,i,s,a,o)=>{const l=o.bits;let u,c,h,d,p,f,m=0,g=0,v=0,y=0,b=0,x=0,_=0,w=0,S=0,E=0,C=null;const A=new Uint16Array(16),T=new Uint16Array(16);let M,D,k,N=null;for(m=0;m<=Np;m++)A[m]=0;for(g=0;g<r;g++)A[t[n+g]]++;for(b=l,y=Np;y>=1&&0===A[y];y--);if(b>y&&(b=y),0===y)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(v=1;v<y&&0===A[v];v++);for(b<v&&(b=v),w=1,m=1;m<=Np;m++)if(w<<=1,w-=A[m],w<0)return-1;if(w>0&&(0===e||1!==y))return-1;for(T[1]=0,m=1;m<Np;m++)T[m+1]=T[m]+A[m];for(g=0;g<r;g++)0!==t[n+g]&&(a[T[t[n+g]]++]=g);if(0===e?(C=N=a,f=20):1===e?(C=Fp,N=Ip,f=257):(C=Rp,N=Lp,f=0),E=0,g=0,m=v,p=s,x=b,_=0,h=-1,S=1<<b,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){M=m-_,a[g]+1<f?(D=0,k=a[g]):a[g]>=f?(D=N[a[g]-f],k=C[a[g]-f]):(D=96,k=0),u=1<<m-_,c=1<<x,v=c;do{c-=u,i[p+(E>>_)+c]=M<<24|D<<16|k}while(0!==c);for(u=1<<m-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,g++,0===--A[m]){if(m===y)break;m=t[n+a[g]]}if(m>b&&(E&d)!==h){for(0===_&&(_=b),p+=v,x=m-_,w=1<<x;x+_<y&&(w-=A[x+_],!(w<=0));)x++,w<<=1;if(S+=1<<x,1===e&&S>852||2===e&&S>592)return 1;h=E&d,i[h]=b<<24|x<<16|p-s}}return 0!==E&&(i[p+E]=m-_<<24|4194304),o.bits=b,0},({Z_FINISH:Op,Z_BLOCK:Bp,Z_TREES:Up,Z_OK:zp,Z_STREAM_END:Vp,Z_NEED_DICT:jp,Z_STREAM_ERROR:Gp,Z_DATA_ERROR:Hp,Z_MEM_ERROR:Wp,Z_BUF_ERROR:$p,Z_DEFLATED:qp}=ad),Xp=16180,Yp=16190,Zp=16191,Kp=16192,Qp=16194,Jp=16199,ef=16200,tf=16206,nf=16209,rf=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24),sf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Xp||t.mode>16211?1:0},lf=(e,t)=>{let n;if(sf(e))return Gp;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Gp:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,of(e))},uf=(e,t)=>{if(!e)return Gp;const n=new HM;e.state=n,n.strm=e,n.window=null,n.mode=Xp;const r=lf(e,t);return r!==zp&&(e.state=null),r},cf=!0,pf=e=>{if(cf){hf=new Int32Array(512),df=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Pp(1,e.lens,0,288,hf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Pp(2,e.lens,0,32,df,0,e.work,{bits:5}),cf=!1}e.lencode=hf,e.lenbits=9,e.distcode=df,e.distbits=5},ff=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},mf={inflateReset:of=e=>{if(sf(e))return Gp;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,af(e)},inflateReset2:lf,inflateResetKeep:af=e=>{if(sf(e))return Gp;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Xp,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,zp},inflateInit:e=>uf(e,15),inflateInit2:uf,inflate:(e,t)=>{let n,r,i,s,a,o,l,u,c,h,d,p,f,m,g,v,y,b,x,_,w,S,E=0;const C=new Uint8Array(4);let A,T;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sf(e)||!e.output||!e.input&&0!==e.avail_in)return Gp;n=e.state,n.mode===Zp&&(n.mode=Kp),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,h=o,d=l,S=zp;e:for(;;)switch(n.mode){case Xp:if(0===n.wrap){n.mode=Kp;break}for(;c<16;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&u,C[1]=u>>>8&255,n.check=id(n.check,C,2,0),u=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=nf;break}if((15&u)!==qp){e.msg="unknown compression method",n.mode=nf;break}if(u>>>=4,c-=4,w=8+(15&u),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=nf;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:Zp,u=0,c=0;break;case 16181:for(;c<16;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==qp){e.msg="unknown compression method",n.mode=nf;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=nf;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&u,C[1]=u>>>8&255,n.check=id(n.check,C,2,0)),u=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(C[0]=255&u,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,n.check=id(n.check,C,4,0)),u=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(C[0]=255&u,C[1]=u>>>8&255,n.check=id(n.check,C,2,0)),u=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(C[0]=255&u,C[1]=u>>>8&255,n.check=id(n.check,C,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>o&&(p=o),p&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),w)),512&n.flags&&4&n.wrap&&(n.check=id(n.check,r,p,s)),o-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;p=0;do{w=r[s+p++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&p<o);if(512&n.flags&&4&n.wrap&&(n.check=id(n.check,r,p,s)),o-=p,s+=p,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;p=0;do{w=r[s+p++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&p<o);if(512&n.flags&&4&n.wrap&&(n.check=id(n.check,r,p,s)),o-=p,s+=p,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=nf;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Zp;break;case 16189:for(;c<32;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}e.adler=n.check=rf(u),u=0,c=0,n.mode=Yp;case Yp:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,jp;e.adler=n.check=1,n.mode=Zp;case Zp:if(t===Bp||t===Up)break e;case Kp:if(n.last){u>>>=7&c,c-=7&c,n.mode=tf;break}for(;c<3;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}switch(n.last=1&u,u>>>=1,c-=1,3&u){case 0:n.mode=16193;break;case 1:if(pf(n),n.mode=Jp,t===Up){u>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=nf}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=nf;break}if(n.length=65535&u,u=0,c=0,n.mode=Qp,t===Up)break e;case Qp:n.mode=16195;case 16195:if(p=n.length,p){if(p>o&&(p=o),p>l&&(p=l),0===p)break e;i.set(r.subarray(s,s+p),a),o-=p,s+=p,l-=p,a+=p,n.length-=p;break}n.mode=Zp;break;case 16196:for(;c<14;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=nf;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.lens[M[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},S=Pp(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid code lengths set",n.mode=nf;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[u&(1<<n.lenbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(y<16)u>>>=g,c-=g,n.lens[n.have++]=y;else{if(16===y){for(T=g+2;c<T;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=nf;break}w=n.lens[n.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===y){for(T=g+3;c<T;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}u>>>=g,c-=g,w=0,p=3+(7&u),u>>>=3,c-=3}else{for(T=g+7;c<T;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}u>>>=g,c-=g,w=0,p=11+(127&u),u>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=nf;break}for(;p--;)n.lens[n.have++]=w}}if(n.mode===nf)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=nf;break}if(n.lenbits=9,A={bits:n.lenbits},S=Pp(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid literal/lengths set",n.mode=nf;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},S=Pp(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,S){e.msg="invalid distances set",n.mode=nf;break}if(n.mode=Jp,t===Up)break e;case Jp:n.mode=ef;case ef:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,kp(e,d),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,n.mode===Zp&&(n.back=-1);break}for(n.back=0;E=n.lencode[u&(1<<n.lenbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(v&&!(240&v)){for(b=g,x=v,_=y;E=n.lencode[_+((u&(1<<b+x)-1)>>b)],g=E>>>24,v=E>>>16&255,y=65535&E,!(b+g<=c);){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=Zp;break}if(64&v){e.msg="invalid literal/length code",n.mode=nf;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(T=n.extra;c<T;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;E=n.distcode[u&(1<<n.distbits)-1],g=E>>>24,v=E>>>16&255,y=65535&E,!(g<=c);){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(!(240&v)){for(b=g,x=v,_=y;E=n.distcode[_+((u&(1<<b+x)-1)>>b)],g=E>>>24,v=E>>>16&255,y=65535&E,!(b+g<=c);){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=g,c-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=nf;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(T=n.extra;c<T;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=nf;break}n.mode=16204;case 16204:if(0===l)break e;if(p=d-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=nf;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[a++]=m[f++]}while(--p);0===n.length&&(n.mode=ef);break;case 16205:if(0===l)break e;i[a++]=n.length,l--,n.mode=ef;break;case tf:if(n.wrap){for(;c<32;){if(0===o)break e;o--,u|=r[s++]<<c,c+=8}if(d-=l,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?id(n.check,i,d,a-d):nd(n.check,i,d,a-d)),d=l,4&n.wrap&&(n.flags?u:rf(u))!==n.check){e.msg="incorrect data check",n.mode=nf;break}u=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break e;o--,u+=r[s++]<<c,c+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=nf;break}u=0,c=0}n.mode=16208;case 16208:S=Vp;break e;case nf:S=Hp;break e;case 16210:return Wp;default:return Gp}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,(n.wsize||d!==e.avail_out&&n.mode<nf&&(n.mode<tf||t!==Op))&&ff(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?id(n.check,i,d,e.next_out-d):nd(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Zp?128:0)+(n.mode===Jp||n.mode===Qp?256:0),(0===h&&0===d||t===Op)&&S===zp&&(S=$p),S},inflateEnd:e=>{if(sf(e))return Gp;let t=e.state;return t.window&&(t.window=null),e.state=null,zp},inflateGetHeader:(e,t)=>{if(sf(e))return Gp;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,zp):Gp},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return sf(e)?Gp:(r=e.state,0!==r.wrap&&r.mode!==Yp?Gp:r.mode===Yp&&(i=1,i=nd(i,t,n,0),i!==r.check)?Hp:(s=ff(e,t,n,n),s?(r.mode=16210,Wp):(r.havedict=1,zp)))},inflateInfo:"pako inflate (from Nodeca project)"},gf=WM,vf=Object.prototype.toString,({Z_NO_FLUSH:yf,Z_FINISH:bf,Z_OK:xf,Z_STREAM_END:_f,Z_NEED_DICT:wf,Z_STREAM_ERROR:Sf,Z_DATA_ERROR:Ef,Z_MEM_ERROR:Cf}=ad),$M.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=t===~~t?t:!0===t?bf:yf,"[object ArrayBuffer]"===vf.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=mf.inflate(n,a),s===wf&&i&&(s=mf.inflateSetDictionary(n,i),s===xf?s=mf.inflate(n,a):s===Ef&&(s=wf));n.avail_in>0&&s===_f&&n.state.wrap>0&&0!==e[n.next_in];)mf.inflateReset(n),s=mf.inflate(n,a);switch(s){case Sf:case Ef:case wf:case Cf:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===_f))if("string"===this.options.to){let e=gp.utf8border(n.output,n.next_out),t=n.next_out-e,i=gp.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==xf||0!==o){if(s===_f)return s=mf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},$M.prototype.onData=function(e){this.chunks.push(e)},$M.prototype.onEnd=function(e){e===xf&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=dp.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Af={Inflate:$M,inflate:qM,inflateRaw:XM,ungzip:qM,constants:ad},({Deflate:Tf,deflate:Mf,deflateRaw:Df,gzip:kf}=Mp),({Inflate:Nf,inflate:Ff,inflateRaw:If,ungzip:Rf}=Af),Lf={inflate:Ff},(Pf={}).parse=function(e){var t=Pf.B,n=function(e,t,n,r){var i=Pf.T,s={cmap:i.cmap,head:i.head,hhea:i.hhea,maxp:i.maxp,hmtx:i.hmtx,name:i.name,"OS/2":i.OS2,post:i.post,loca:i.loca,kern:i.kern,glyf:i.glyf,"CFF ":i.CFF,GSUB:i.GSUB,CBLC:i.CBLC,CBDT:i.CBDT,"SVG ":i.SVG,COLR:i.colr,CPAL:i.cpal,sbix:i.sbix,fvar:i.fvar,gvar:i.gvar,avar:i.avar,HVAR:i.HVAR},a={_data:e,_index:t,_offset:n};for(var o in s){var l=Pf.findTable(e,o,n);if(l){var u=l[0],c=r[u];null==c&&(c=s[o].parseTab(e,u,l[1],a)),a[o]=r[u]=c}}return a},r=new Uint8Array(e);let i;119==r[0]&&(i=r,r=function(e){var n=t.readUshort(e,12),r=t.readUint(e,16),i=new Uint8Array(r),s=12+16*n;t.writeASCII(i,0,"OTTO"),t.writeUshort(i,4,n);for(var a=44,o=0;o<n;o++){var l=t.readASCII(e,a,4),u=t.readUint(e,a+4),c=t.readUint(e,a+8),h=t.readUint(e,a+12);a+=20;var d=e.slice(u,u+c);c!=h&&(d=Lf.inflate(d));var p=12+16*o;t.writeASCII(i,p,l),t.writeUint(i,p+8,s),t.writeUint(i,p+12,h),i.set(d,s),s+=h}return i}(r));var s={};if("ttcf"==t.readASCII(r,0,4)){var a=4;t.readUshort(r,a),a+=2,t.readUshort(r,a),a+=2;var o=t.readUint(r,a);a+=4;for(var l=[],u=0;u<o;u++){var c=t.readUint(r,a);a+=4,l.push(n(r,u,c,s))}return l}var h=n(r,0,0,s);h._compressedData=i;var d=h.fvar;if(d){var p=[h];for(u=0;u<d[1].length;u++){var f=d[1][u],m={};for(var g in p.push(m),h)m[g]=h[g];m._index=u;var v=m.name=JSON.parse(JSON.stringify(m.name));v.fontSubfamily=f[0],null==f[3]&&(f[3]=(v.fontFamily+"-"+v.fontSubfamily).replaceAll(" ","")),v.postScriptName=f[3]}return p}return[h]},Pf.findTable=function(e,t,n){for(var r=Pf.B,i=r.readUshort(e,n+4),s=n+12,a=0;a<i;a++){var o=r.readASCII(e,s,4);r.readUint(e,s+4);var l=r.readUint(e,s+8),u=r.readUint(e,s+12);if(o==t)return[l,u];s+=16}return null},Pf.T={},Pf.B={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,t){return Pf.B.readShort(e,t)/16384},readInt:function(e,t){var n=Pf.B.t.uint8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t],Pf.B.t.int32[0]},readInt8:function(e,t){return Pf.B.t.uint8[0]=e[t],Pf.B.t.int8[0]},readShort:function(e,t){return Pf.B.t.uint16[0]=e[t]<<8|e[t+1],Pf.B.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUshorts:function(e,t,n){for(var r=[],i=0;i<n;i++){var s=Pf.B.readUshort(e,t+2*i);r.push(s)}return r},readUint:function(e,t){var n=Pf.B.t.uint8;return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],Pf.B.t.uint32[0]},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readUint64:function(e,t){return 4294967296*Pf.B.readUint(e,t)+Pf.B.readUint(e,t+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var s=e[t++]<<8|e[t++];r+=String.fromCharCode(s)}return r},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,t,n){var r=Pf.B._tdec;return r&&0==t&&n==e.length?r.decode(e):Pf.B.readASCII(e,t,n)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},t:(t=new ArrayBuffer(8),{buff:t,int8:new Int8Array(t),uint8:new Uint8Array(t),int16:new Int16Array(t),uint16:new Uint16Array(t),int32:new Int32Array(t),uint32:new Uint32Array(t)})},Pf.T.CFF={parseTab:function(e,t,n){var r=Pf.B,i=Pf.T.CFF;(e=new Uint8Array(e.buffer,t,n))[t=0],e[++t],e[++t],e[++t],t++;var s=[];t=i.readIndex(e,t,s);for(var a=[],o=0;o<s.length-1;o++)a.push(r.readASCII(e,t+s[o],s[o+1]-s[o]));t+=s[s.length-1];var l=[];t=i.readIndex(e,t,l);var u=[];for(o=0;o<l.length-1;o++)u.push(i.readDict(e,t+l[o],t+l[o+1]));t+=l[l.length-1];var c=u[0],h=[];t=i.readIndex(e,t,h);var d=[];for(o=0;o<h.length-1;o++)d.push(r.readASCII(e,t+h[o],h[o+1]-h[o]));if(t+=h[h.length-1],i.readSubrs(e,t,c),c.CharStrings&&(c.CharStrings=i.readBytes(e,c.CharStrings)),c.ROS){t=c.FDArray;var p=[];for(t=i.readIndex(e,t,p),c.FDArray=[],o=0;o<p.length-1;o++){var f=i.readDict(e,t+p[o],t+p[o+1]);i._readFDict(e,f,d),c.FDArray.push(f)}t+=p[p.length-1],t=c.FDSelect,c.FDSelect=[];var m=e[t];if(t++,3!=m)throw m;var g=r.readUshort(e,t);for(t+=2,o=0;o<g+1;o++)c.FDSelect.push(r.readUshort(e,t),e[t+2]),t+=3}return c.charset&&(c.charset=i.readCharset(e,c.charset,c.CharStrings.length)),i._readFDict(e,c,d),c},_readFDict:function(e,t,n){var r,i=Pf.T.CFF;for(var s in t.Private&&(r=t.Private[1],t.Private=i.readDict(e,r,r+t.Private[0]),t.Private.Subrs&&i.readSubrs(e,r+t.Private.Subrs,t.Private)),t)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(s)&&(t[s]=n[t[s]-426+35])},readSubrs:function(e,t,n){n.Subrs=Pf.T.CFF.readBytes(e,t);var r,i=n.Subrs.length+1;r=i<1240?107:i<33900?1131:32768,n.Bias=r},readBytes:function(e,t){Pf.B;var n=[];t=Pf.T.CFF.readIndex(e,t,n);for(var r=[],i=n.length-1,s=e.byteOffset+t,a=0;a<i;a++){var o=n[a];r.push(new Uint8Array(e.buffer,s+o,n[a+1]-o))}return r},tableSE:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],glyphByUnicode:function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},glyphBySE:function(e,t){return t<0||t>255?-1:Pf.T.CFF.glyphByUnicode(e,Pf.T.CFF.tableSE[t])},readCharset:function(e,t,n){var r=Pf.B,i=[".notdef"],s=e[t];if(t++,0==s)for(var a=0;a<n;a++){var o=r.readUshort(e,t);t+=2,i.push(o)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;i.length<n;){o=r.readUshort(e,t),t+=2;var l=0;for(1==s?(l=e[t],t++):(l=r.readUshort(e,t),t+=2),a=0;a<=l;a++)i.push(o),o++}}return i},readIndex:function(e,t,n){var r=Pf.B,i=r.readUshort(e,t)+1,s=e[t+=2];if(t++,1==s)for(var a=0;a<i;a++)n.push(e[t+a]);else if(2==s)for(a=0;a<i;a++)n.push(r.readUshort(e,t+2*a));else if(3==s)for(a=0;a<i;a++)n.push(16777215&r.readUint(e,t+3*a-1));else if(4==s)for(a=0;a<i;a++)n.push(r.readUint(e,t+4*a));else if(1!=i)throw"unsupported offset size: "+s+", count: "+i;return(t+=i*s)-1},getCharString:function(e,t,n){var r=Pf.B,i=e[t],s=e[t+1];e[t+2],e[t+3],e[t+4];var a=1,o=null,l=null;i<=20&&(o=i,a=1),12==i&&(o=100*i+s,a=2),21<=i&&i<=27&&(o=i,a=1),28==i&&(l=r.readShort(e,t+1),a=3),29<=i&&i<=31&&(o=i,a=1),32<=i&&i<=246&&(l=i-139,a=1),247<=i&&i<=250&&(l=256*(i-247)+s+108,a=2),251<=i&&i<=254&&(l=256*-(i-251)-s-108,a=2),255==i&&(l=r.readInt(e,t+1)/65535,a=5),n.val=null!=l?l:"o"+o,n.size=a},readCharString:function(e,t,n){for(var r=t+n,i=Pf.B,s=[];t<r;){var a=e[t],o=e[t+1];e[t+2],e[t+3],e[t+4];var l=1,u=null,c=null;a<=20&&(u=a,l=1),12==a&&(u=100*a+o,l=2),19!=a&&20!=a||(u=a,l=2),21<=a&&a<=27&&(u=a,l=1),28==a&&(c=i.readShort(e,t+1),l=3),29<=a&&a<=31&&(u=a,l=1),32<=a&&a<=246&&(c=a-139,l=1),247<=a&&a<=250&&(c=256*(a-247)+o+108,l=2),251<=a&&a<=254&&(c=256*-(a-251)-o-108,l=2),255==a&&(c=i.readInt(e,t+1)/65535,l=5),s.push(null!=c?c:"o"+u),t+=l}return s},readDict:function(e,t,n){for(var r=Pf.B,i={},s=[];t<n;){var a=e[t],o=e[t+1];e[t+2],e[t+3],e[t+4];var l=1,u=null,c=null;if(28==a&&(c=r.readShort(e,t+1),l=3),29==a&&(c=r.readInt(e,t+1),l=5),32<=a&&a<=246&&(c=a-139,l=1),247<=a&&a<=250&&(c=256*(a-247)+o+108,l=2),251<=a&&a<=254&&(c=256*-(a-251)-o-108,l=2),255==a)throw c=r.readInt(e,t+1)/65535,l=5,"unknown number";if(30==a){var h=[];for(l=1;;){var d=e[t+l];l++;var p=d>>4,f=15&d;if(15!=p&&h.push(p),15!=f&&h.push(f),15==f)break}for(var m="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<h.length;v++)m+=g[h[v]];c=parseFloat(m)}a<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],l=1,12==a&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold","","","LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend","","","","","","","ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][o],l=2)),null!=u?(i[u]=1==s.length?s[0]:s,s=[]):s.push(c),t+=l}return i}},Pf.T.cmap={parseTab:function(e,t,n){var r={tables:[],ids:{},off:t};e=new Uint8Array(e.buffer,t,n),t=0;var i=Pf.B,s=i.readUshort,a=Pf.T.cmap;s(e,t);var o=s(e,t+=2);t+=2;for(var l=[],u=0;u<o;u++){var c=s(e,t),h=s(e,t+=2);t+=2;var d=i.readUint(e,t);t+=4;var p="p"+c+"e"+h,f=l.indexOf(d);if(-1==f){f=r.tables.length;var m={};l.push(d);var g=m.format=s(e,d);0==g?m=a.parse0(e,d,m):4==g?m=a.parse4(e,d,m):6==g?m=a.parse6(e,d,m):12==g&&(m=a.parse12(e,d,m)),r.tables.push(m)}null!=r.ids[p]&&console.log("multiple tables for one platform+encoding: "+p),r.ids[p]=f}return r},parse0:function(e,t,n){var r=Pf.B;t+=2;var i=r.readUshort(e,t);t+=2,r.readUshort(e,t),t+=2,n.map=[];for(var s=0;s<i-6;s++)n.map.push(e[t+s]);return n},parse4:function(e,t,n){var r=Pf.B,i=r.readUshort,s=r.readUshorts,a=t,o=i(e,t+=2);i(e,t+=2);var l=i(e,t+=2);t+=2;var u=l>>>1;n.searchRange=i(e,t),t+=2,n.entrySelector=i(e,t),t+=2,n.rangeShift=i(e,t),t+=2,n.endCount=s(e,t,u),t+=2*u,t+=2,n.startCount=s(e,t,u),t+=2*u,n.idDelta=[];for(var c=0;c<u;c++)n.idDelta.push(r.readShort(e,t)),t+=2;return n.idRangeOffset=s(e,t,u),t+=2*u,n.glyphIdArray=s(e,t,a+o-t>>1),n},parse6:function(e,t,n){var r=Pf.B;t+=2,r.readUshort(e,t),t+=2,r.readUshort(e,t),t+=2,n.firstCode=r.readUshort(e,t),t+=2;var i=r.readUshort(e,t);t+=2,n.glyphIdArray=[];for(var s=0;s<i;s++)n.glyphIdArray.push(r.readUshort(e,t)),t+=2;return n},parse12:function(e,t,n){var r=Pf.B.readUint;r(e,t+=4),r(e,t+=4);var i=3*r(e,t+=4);t+=4;for(var s=n.groups=new Uint32Array(i),a=0;a<i;a+=3)s[a]=r(e,t+(a<<2)),s[a+1]=r(e,t+(a<<2)+4),s[a+2]=r(e,t+(a<<2)+8);return n}},Pf.T.CBLC={parseTab:function(e,t,n){var r=Pf.B,i=t;r.readUshort(e,t),t+=2,r.readUshort(e,t),t+=2;var s=r.readUint(e,t);t+=4;for(var a=[],o=0;o<s;o++){var l=r.readUint(e,t);t+=4,r.readUint(e,t),t+=4,r.readUint(e,t),t+=4,t+=4,t+=24,r.readUshort(e,t),t+=2,r.readUshort(e,t),t+=2,t+=4;for(var u=i+l,c=0;c<3;c++){var h=r.readUshort(e,u);u+=2;var d=r.readUshort(e,u);u+=2;var p=r.readUint(e,u);u+=4;var f=d-h+1,m=i+l+p,g=r.readUshort(e,m);if(m+=2,1!=g)throw g;var v=r.readUshort(e,m);m+=2;var y=r.readUint(e,m);m+=4;for(var b=[],x=0;x<f;x++){var _=r.readUint(e,m+4*x);b.push(y+_)}a.push([h,d,v,b])}}return a}},Pf.T.CBDT={parseTab:function(e,t,n){return Pf.B,new Uint8Array(e.buffer,e.byteOffset+t,n)}},Pf.T.glyf={parseTab:function(e,t,n,r){for(var i=[],s=r.maxp.numGlyphs,a=0;a<s;a++)i.push(null);return i},_parseGlyf:function(e,t){var n=Pf.B,r=e._data,i=e.loca;if(i[t]==i[t+1])return null;var s=Pf.findTable(r,"glyf",e._offset)[0]+i[t],a={};if(a.noc=n.readShort(r,s),s+=2,a.xMin=n.readShort(r,s),s+=2,a.yMin=n.readShort(r,s),s+=2,a.xMax=n.readShort(r,s),s+=2,a.yMax=n.readShort(r,s),s+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var o=0;o<a.noc;o++)a.endPts.push(n.readUshort(r,s)),s+=2;var l=n.readUshort(r,s);if(s+=2,r.length-s<l)return null;a.instructions=n.readBytes(r,s,l),s+=l;var u=a.endPts[a.noc-1]+1;for(a.flags=[],o=0;o<u;o++){var c=r[s];if(s++,a.flags.push(c),8&c){var h=r[s];s++;for(var d=0;d<h;d++)a.flags.push(c),o++}}for(a.xs=[],o=0;o<u;o++){var p=!!(2&a.flags[o]),f=!!(16&a.flags[o]);p?(a.xs.push(f?r[s]:-r[s]),s++):f?a.xs.push(0):(a.xs.push(n.readShort(r,s)),s+=2)}for(a.ys=[],o=0;o<u;o++)p=!!(4&a.flags[o]),f=!!(32&a.flags[o]),p?(a.ys.push(f?r[s]:-r[s]),s++):f?a.ys.push(0):(a.ys.push(n.readShort(r,s)),s+=2);var m=0,g=0;for(o=0;o<u;o++)m+=a.xs[o],g+=a.ys[o],a.xs[o]=m,a.ys[o]=g}else{var v;a.parts=[];do{v=n.readUshort(r,s),s+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=n.readUshort(r,s),s+=2,1&v){var b=n.readShort(r,s);s+=2;var x=n.readShort(r,s);s+=2}else b=n.readInt8(r,s),s++,x=n.readInt8(r,s),s++;2&v?(y.m.tx=b,y.m.ty=x):(y.p1=b,y.p2=x),8&v?(y.m.a=y.m.d=n.readF2dot14(r,s),s+=2):64&v?(y.m.a=n.readF2dot14(r,s),s+=2,y.m.d=n.readF2dot14(r,s),s+=2):128&v&&(y.m.a=n.readF2dot14(r,s),s+=2,y.m.b=n.readF2dot14(r,s),s+=2,y.m.c=n.readF2dot14(r,s),s+=2,y.m.d=n.readF2dot14(r,s),s+=2)}while(32&v);if(256&v){var _=n.readUshort(r,s);for(s+=2,a.instr=[],o=0;o<_;o++)a.instr.push(r[s]),s++}}return a}},Pf.T.head={parseTab:function(e,t,n){var r=Pf.B,i={};return r.readFixed(e,t),t+=4,i.fontRevision=r.readFixed(e,t),t+=4,r.readUint(e,t),t+=4,r.readUint(e,t),t+=4,i.flags=r.readUshort(e,t),t+=2,i.unitsPerEm=r.readUshort(e,t),t+=2,i.created=r.readUint64(e,t),t+=8,i.modified=r.readUint64(e,t),t+=8,i.xMin=r.readShort(e,t),t+=2,i.yMin=r.readShort(e,t),t+=2,i.xMax=r.readShort(e,t),t+=2,i.yMax=r.readShort(e,t),t+=2,i.macStyle=r.readUshort(e,t),t+=2,i.lowestRecPPEM=r.readUshort(e,t),t+=2,i.fontDirectionHint=r.readShort(e,t),t+=2,i.indexToLocFormat=r.readShort(e,t),t+=2,i.glyphDataFormat=r.readShort(e,t),t+=2,i}},Pf.T.hhea={parseTab:function(e,t,n){var r=Pf.B,i={};r.readFixed(e,t),t+=4;for(var s=["ascender","descender","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","res0","res1","res2","res3","metricDataFormat","numberOfHMetrics"],a=0;a<s.length;a++){var o=s[a];i[o]=("advanceWidthMax"==o||"numberOfHMetrics"==o?r.readUshort:r.readShort)(e,t+2*a)}return i}},Pf.T.hmtx={parseTab:function(e,t,n,r){for(var i=Pf.B,s=[],a=[],o=r.maxp.numGlyphs,l=r.hhea.numberOfHMetrics,u=0,c=0,h=0;h<l;)u=i.readUshort(e,t+(h<<2)),c=i.readShort(e,t+(h<<2)+2),s.push(u),a.push(c),h++;for(;h<o;)s.push(u),a.push(c),h++;return{aWidth:s,lsBearing:a}}},Pf.T.kern={parseTab:function(e,t,n,r){var i=Pf.B,s=Pf.T.kern;if(1==i.readUshort(e,t))return s.parseV1(e,t,n,r);var a=i.readUshort(e,t+2);t+=4;for(var o={glyph1:[],rval:[]},l=0;l<a;l++){t+=2,n=i.readUshort(e,t),t+=2;var u=i.readUshort(e,t);t+=2;var c=u>>>8;0==(c&=15)&&(t=s.readFormat0(e,t,o))}return o},parseV1:function(e,t,n,r){var i=Pf.B,s=Pf.T.kern;i.readFixed(e,t);var a=i.readUint(e,t+4);t+=8;for(var o={glyph1:[],rval:[]},l=0;l<a;l++){i.readUint(e,t),t+=4;var u=i.readUshort(e,t);t+=2,i.readUshort(e,t),t+=2,255&u||(t=s.readFormat0(e,t,o))}return o},readFormat0:function(e,t,n){var r=Pf.B,i=r.readUshort,s=-1,a=i(e,t);i(e,t+2),i(e,t+4),i(e,t+6),t+=8;for(var o=0;o<a;o++){var l=i(e,t),u=i(e,t+=2);t+=2;var c=r.readShort(e,t);t+=2,l!=s&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(u),h.vals.push(c),s=l}return t}},Pf.T.loca={parseTab:function(e,t,n,r){var i=Pf.B,s=[],a=r.head.indexToLocFormat,o=r.maxp.numGlyphs+1;if(0==a)for(var l=0;l<o;l++)s.push(i.readUshort(e,t+(l<<1))<<1);if(1==a)for(l=0;l<o;l++)s.push(i.readUint(e,t+(l<<2)));return s}},Pf.T.maxp={parseTab:function(e,t,n){var r=Pf.B,i=r.readUshort,s={};return r.readUint(e,t),t+=4,s.numGlyphs=i(e,t),t+=2,s}},Pf.T.name={parseTab:function(e,t,n){var r=Pf.B,i={};r.readUshort(e,t),t+=2;var s=r.readUshort(e,t);t+=2;for(var a=r.readUshort(e,t),o=(t+=2)-6+a,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=r.readUshort,c=0;c<s;c++){var h=u(e,t),d=u(e,t+=2),p=u(e,t+=2),f=u(e,t+=2),m=u(e,t+=2),g=u(e,t+=2);t+=2;var v,y=o+g;0==h||3==h&&0==d||1==h&&25==d?v=r.readUnicode(e,y,m/2):0==d?v=r.readASCII(e,y,m):1==d||3==d||4==d||5==d||10==d?v=r.readUnicode(e,y,m/2):1==h?(v=r.readASCII(e,y,m),console.log("reading unknown MAC encoding "+d+" as ASCII")):(console.log("unknown encoding "+d+", platformID: "+h),v=r.readASCII(e,y,m));var b="p"+h+","+p.toString(16);null==i[b]&&(i[b]={});var x=l[f];null==x&&(x="_"+f),i[b][x]=v,i[b]._lang=p}var _=Pf.T.name.selectOne(i),w="fontFamily";if(null==_[w])for(var S in i)null!=i[S][w]&&(_[w]=i[S][w]);return _},selectOne:function(e){var t,n="postScriptName";for(var r in e)if(null!=e[r][n]&&1033==e[r]._lang)return e[r];for(var r in e)if(null!=e[r][n]&&0==e[r]._lang)return e[r];for(var r in e)if(null!=e[r][n]&&3084==e[r]._lang)return e[r];for(var r in e)if(null!=e[r][n])return e[r];for(var r in e){t=e[r];break}return console.log("returning name table with languageID "+t._lang),null==t[n]&&null!=t.ID&&(t[n]=t.ID),t}},Pf.T.OS2={parseTab:function(e,t,n){var r=Pf.B.readUshort(e,t);t+=2;var i=Pf.T.OS2,s={};if(0==r)i.version0(e,t,s);else if(1==r)i.version1(e,t,s);else if(2==r||3==r||4==r)i.version2(e,t,s);else{if(5!=r)throw"unknown OS/2 table version: "+r;i.version5(e,t,s)}return s},version0:function(e,t,n){var r=Pf.B;return n.xAvgCharWidth=r.readShort(e,t),t+=2,n.usWeightClass=r.readUshort(e,t),t+=2,n.usWidthClass=r.readUshort(e,t),t+=2,n.fsType=r.readUshort(e,t),t+=2,n.ySubscriptXSize=r.readShort(e,t),t+=2,n.ySubscriptYSize=r.readShort(e,t),t+=2,n.ySubscriptXOffset=r.readShort(e,t),t+=2,n.ySubscriptYOffset=r.readShort(e,t),t+=2,n.ySuperscriptXSize=r.readShort(e,t),t+=2,n.ySuperscriptYSize=r.readShort(e,t),t+=2,n.ySuperscriptXOffset=r.readShort(e,t),t+=2,n.ySuperscriptYOffset=r.readShort(e,t),t+=2,n.yStrikeoutSize=r.readShort(e,t),t+=2,n.yStrikeoutPosition=r.readShort(e,t),t+=2,n.sFamilyClass=r.readShort(e,t),t+=2,n.panose=r.readBytes(e,t,10),t+=10,n.ulUnicodeRange1=r.readUint(e,t),t+=4,n.ulUnicodeRange2=r.readUint(e,t),t+=4,n.ulUnicodeRange3=r.readUint(e,t),t+=4,n.ulUnicodeRange4=r.readUint(e,t),t+=4,n.achVendID=r.readASCII(e,t,4),t+=4,n.fsSelection=r.readUshort(e,t),t+=2,n.usFirstCharIndex=r.readUshort(e,t),t+=2,n.usLastCharIndex=r.readUshort(e,t),t+=2,n.sTypoAscender=r.readShort(e,t),t+=2,n.sTypoDescender=r.readShort(e,t),t+=2,n.sTypoLineGap=r.readShort(e,t),t+=2,n.usWinAscent=r.readUshort(e,t),t+=2,n.usWinDescent=r.readUshort(e,t),t+=2},version1:function(e,t,n){var r=Pf.B;return t=Pf.T.OS2.version0(e,t,n),n.ulCodePageRange1=r.readUint(e,t),t+=4,n.ulCodePageRange2=r.readUint(e,t),t+=4},version2:function(e,t,n){var r=Pf.B,i=r.readUshort;return t=Pf.T.OS2.version1(e,t,n),n.sxHeight=r.readShort(e,t),t+=2,n.sCapHeight=r.readShort(e,t),t+=2,n.usDefault=i(e,t),t+=2,n.usBreak=i(e,t),t+=2,n.usMaxContext=i(e,t),t+=2},version5:function(e,t,n){var r=Pf.B.readUshort;return t=Pf.T.OS2.version2(e,t,n),n.usLowerOpticalPointSize=r(e,t),t+=2,n.usUpperOpticalPointSize=r(e,t),t+=2}},Pf.T.post={parseTab:function(e,t,n){var r=Pf.B,i={};return i.version=r.readFixed(e,t),t+=4,i.italicAngle=r.readFixed(e,t),t+=4,i.underlinePosition=r.readShort(e,t),t+=2,i.underlineThickness=r.readShort(e,t),t+=2,i}},Pf.T.SVG={parseTab:function(e,t,n){var r=Pf.B,i={entries:[],svgs:[]},s=t;r.readUshort(e,t),t+=2;var a=r.readUint(e,t);t+=4,r.readUint(e,t),t+=4,t=a+s;var o=r.readUshort(e,t);t+=2;for(var l=0;l<o;l++){var u=r.readUshort(e,t);t+=2;var c=r.readUshort(e,t);t+=2;var h=r.readUint(e,t);t+=4;var d=r.readUint(e,t);t+=4;var p=new Uint8Array(e.buffer,s+h+a,d);31==p[0]&&139==p[1]&&8==p[2]&&(p=Lf.inflate(p));for(var f=r.readUTF8(p,0,p.length),m=u;m<=c;m++)i.entries[m]=i.svgs.length;i.svgs.push(f)}return i}},Pf.T.sbix={parseTab:function(e,t,n,r){for(var i=r.maxp.numGlyphs,s=t,a=Pf.B,o=a.readUint(e,t+4),l=[],u=o-1;u<o;u++)for(var c=s+a.readUint(e,t+8+4*u),h=0;h<i;h++){var d=a.readUint(e,c+4+4*h),p=a.readUint(e,c+4+4*h+4);if(d!=p){var f=c+d,m=a.readASCII(e,f+4,4);if("png "!=m)throw m;l[h]=new Uint8Array(e.buffer,e.byteOffset+f+8,p-d-8)}else l[h]=null}return l}},Pf.T.colr={parseTab:function(e,t,n){var r=Pf.B,i=t;t+=2;var s=r.readUshort(e,t);t+=2;var a=r.readUint(e,t);t+=4;var o=r.readUint(e,t);t+=4;var l=r.readUshort(e,t);t+=2;for(var u={},c=i+a,h=0;h<s;h++)u["g"+r.readUshort(e,c)]=[r.readUshort(e,c+2),r.readUshort(e,c+4)],c+=6;var d=[];for(c=i+o,h=0;h<l;h++)d.push(r.readUshort(e,c),r.readUshort(e,c+2)),c+=4;return[u,d]}},Pf.T.cpal={parseTab:function(e,t,n){var r=Pf.B,i=t,s=r.readUshort(e,t);if(t+=2,0==s){r.readUshort(e,t),t+=2,r.readUshort(e,t),t+=2;var a=r.readUshort(e,t);t+=2;var o=r.readUint(e,t);return t+=4,new Uint8Array(e.buffer,i+o,4*a)}throw s}},Pf.T.GSUB={parseTab:function(e,t,n,r){var i=Pf.B,s=i.readUshort;i.readUint;var a=t;s(e,a),s(e,a+=2),s(e,a+=2);var o=s(e,a+=2);s(e,a+=2),a+=2;var l={},u=s(e,a=t+o);a+=2;for(var c=0;c<u;c++){var h=i.readASCII(e,a,4);s(e,a+=4),a+=2,l[h]=!0}return l}},Pf.T.fvar={parseTab:function(e,t,n,r){var i=r.name,s=t,a=Pf.B,o=[],l=[];s+=8;var u=a.readUshort(e,s);s+=2,s+=2;var c=a.readUshort(e,s);s+=2;var h=a.readUshort(e,s);s+=2;for(var d=0;d<u;d++){var p=a.readASCII(e,s,4),f=a.readFixed(e,s+4),m=a.readFixed(e,s+8),g=a.readFixed(e,s+12),v=a.readUshort(e,s+16),y=a.readUshort(e,s+18);o.push([p,f,m,g,v,i["_"+y]]),s+=20}for(d=0;d<c;d++){for(var b=a.readUshort(e,s),x=null,_=(v=a.readUshort(e,s+2),[]),w=0;w<u;w++)_.push(a.readFixed(e,s+4+4*w));s+=4+4*u,2==(3&h)&&(x=a.readUshort(e,s),s+=2),l.push([i["_"+b],v,_,x])}return[o,l]}},Pf.T.gvar=function(){var e=Pf.B;function t(t,n,r){for(var i=[],s=0;s<r;s++)i.push(e.readF2dot14(t,n+2*s));return i}function n(n,r,i,s,a){for(var o=[],l=0;l<i;l++){var u=e.readUshort(n,r);r+=2;var c=e.readUshort(n,r),h=61440&c;c&=4095,r+=2;var d=null,p=null,f=null;32768&h&&(d=t(n,r,s),r+=2*s),16384&h&&(p=t(n,r,s),r+=2*s),16384&h&&(f=t(n,r,s),r+=2*s),o.push([u,c,h,p,d,f])}return o}function r(t,n,r){var i=t[n];if(n++,0==i)return[[],n];127<i&&(i=(127&i)<<8|t[n++]);for(var s=[],a=0;s.length<i;){var o=t[n];n++;var l=!!(128&o);o=1+(127&o);for(var u=0;u<o;u++){var c=0;l?(c=e.readUshort(t,n),n+=2):(c=t[n],n++),a+=c,s.push(a)}}return[s,n]}return{parseTab:function(i,s,a,o){var l=s+4,u=e.readUshort(i,l);l+=2;var c=e.readUshort(i,l);l+=2;var h=e.readUint(i,l);l+=4;var d=e.readUshort(i,l);l+=2,e.readUshort(i,l),l+=2;var p=e.readUint(i,l);l+=4;for(var f=[],m=0;m<d+1;m++)f.push(e.readUint(i,l+4*m));var g=[],v=[],y=[];for(l=s+h,m=0;m<c;m++){var b=t(i,l+m*u*2,u),x=[],_=[];g.push(b),v.push(x),y.push(_);for(var w=0;w<u;w++)x[w]=Math.min(b[w],0),_[w]=Math.max(b[w],0)}var S=new Int8Array(i.buffer),E=[];for(m=0;m<d;m++){l=s+p+f[m];var C=e.readUshort(i,l);l+=2;var A=32768&C;C&=4095;var T=e.readUshort(i,l),M=n(i,l+=2,C,u),D=[];E.push(D),l=s+p+f[m]+T;var k=null;A&&(k=(F=r(i,l))[0],l=F[1]);for(var N=0;N<C;N++){var F,I=M[N],R=l+I[0],L=k;8192&I[2]&&(L=(F=r(i,l))[0],l=F[1]);for(var P=[];l<R;){var O=i[l++],B=1+(63&O);if(128&O)for(w=0;w<B;w++)P.push(0);else if(64&O){for(w=0;w<B;w++)P.push(e.readShort(i,l+2*w));l+=2*B}else{for(w=0;w<B;w++)P.push(S[l+w]);l+=B}}var U=I[1];if(D.push([[I[3]?I[3]:v[U],I[4]?I[4]:g[U],I[5]?I[5]:y[U]],P,0==L.length?null:L]),0!=L.length&&2*L.length!=P.length)throw"e"}}return E}}}(),Pf.T.avar={parseTab:function(e,t,n,r){var i=t,s=Pf.B,a=[];i+=6;var o=s.readUshort(e,i);i+=2;for(var l=0;l<o;l++){var u=s.readUshort(e,i);i+=2;var c=[];a.push(c);for(var h=0;h<u;h++){var d=s.readF2dot14(e,i),p=s.readF2dot14(e,i+2);i+=4,c.push(d,p)}}return a}},Pf.T.HVAR={parseTab:function(e,t,n,r){var i=t,s=t,a=Pf.B;i+=4;var o=a.readUint(e,i);i+=4;var l=a.readUint(e,i);i+=4;var u=a.readUint(e,i);i+=4;var c=a.readUint(e,i);if(i+=4,0!=u||0!=c)throw u;var h=i=s+o,d=a.readUshort(e,i);if(i+=2,1!=d)throw"e";var p=a.readUint(e,i);i+=4;var f=a.readUshort(e,i);i+=2;for(var m=[],g=0;g<f;g++)m.push(a.readUint(e,i+4*g));i+=4*f,i=h+p;var v=a.readUshort(e,i);i+=2;var y=a.readUshort(e,i);i+=2;var b=[];for(g=0;g<y;g++){var x=[[],[],[]];b.push(x);for(var _=0;_<v;_++)x[0].push(a.readF2dot14(e,i+0)),x[1].push(a.readF2dot14(e,i+2)),x[2].push(a.readF2dot14(e,i+4)),i+=6}var w=new Int8Array(e.buffer),S=[];for(g=0;g<m.length;g++){i=s+o+m[g];var E=[];S.push(E);var C=a.readUshort(e,i);i+=2;var A=a.readUshort(e,i);if(i+=2,32768&A)throw"e";y=a.readUshort(e,i),i+=2;var T=[];for(_=0;_<y;_++)T.push(a.readUshort(e,i+2*_));i+=2*y;for(var M=0;M<C;M++){for(var D=[],k=0;k<y;k++)D.push(k<A?a.readShort(e,i):w[i]),i+=k<A?2:1;var N=new Array(b.length);for(N.fill(0),E.push(N),_=0;_<T.length;_++)N[T[_]]=D[_]}}if(i=s+l,0!=(d=e[i++]))throw"e";var F=e[i++],I=a.readUshort(e,i);i+=2;var R=1+((48&F)>>4),L=[];for(g=0;g<I;g++){var P=0;1==R?P=e[i++]:(P=a.readUshort(e,i),i+=2);var O=P>>1+(15&F),B=P&(1<<1+(15&F))-1;L.push(S[O][B])}return[b,L]}},Pf.U=function(){var e=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},n=function(e,t,n,r,i,s,a){e.cmds.push("C"),e.crds.push(t,n,r,i,s,a)},r=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},i=function(e){e.cmds.push("Z")};function s(e,t,n,r){var i=t[n],s=t[n+1],a=e.kern;if(a){var o=a.glyph1.indexOf(i);if(-1!=o){var l=a.rval[o].glyph2.indexOf(s);if(-1!=l)return[0,0,a.rval[o].vals[l],0]}}return[0,0,0,0]}function a(e,t,n){for(var r=0,i=~~(e.length/t);r+1!=i;){var s=r+(i-r>>>1);e[s*t]<=n?r=s:i=s}return r*t}for(var o,l,u=[9,10,11,12,13,32,133,160,5760,6158,8232,8233,8239,8288,12288,65279],c={},h=0;h<u.length;h++)c[u[h]]=1;for(h=8192;h<=8205;h++)c[h]=1;function d(e,t){if(null==e._ctab){for(var n=e.cmap,r=-1,i=["p3e10","p0e4","p3e1","p1e0","p0e3","p0e1","p3e0","p3e5"],s=0;s<i.length;s++)if(null!=n.ids[i[s]]){r=n.ids[i[s]];break}if(-1==r)throw"no familiar platform and encoding!";e._ctab=n.tables[r]}var o=e._ctab,l=o.format,u=-1;if(0==l)u=t>=o.map.length?0:o.map[t];else if(4==l){var h=o.endCount;if(u=0,t<=h[h.length-1]){var d=a(h,1,t);h[d]<t&&d++,t>=o.startCount[d]&&(u=65535&(0!=o.idRangeOffset[d]?o.glyphIdArray[t-o.startCount[d]+(o.idRangeOffset[d]>>1)-(o.idRangeOffset.length-d)]:t+o.idDelta[d]))}}else if(6==l){var p=t-o.firstCode,f=o.glyphIdArray;u=p<0||p>=f.length?0:f[p]}else{if(12!=l)throw"unknown cmap table format "+o.format;var m=o.groups;u=0,t<=m[m.length-2]&&m[s=a(m,3,t)]<=t&&t<=m[s+1]&&(u=m[s+2]+(t-m[s]))}var g=e["SVG "],v=e.loca;return 0==u||null!=e["CFF "]||null!=g&&null!=g.entries[u]||!v||v[u]!=v[u+1]||null!=c[t]||(u=0),u}function p(e,t,n,r){var i={cmds:[],crds:[]};e.fvar&&(null==r&&(r=e.fvar[1][e._index][2]),r=g(e,r));var s=e["SVG "],a=e["CFF "],o=e.COLR,l=e.CBLC,u=e.CBDT,c=e.sbix,h=window.UPNG,d=null;if(l&&h)for(var m=0;m<l.length;m++)l[m][0]<=t&&t<=l[m][1]&&(d=l[m]);if(d||c&&c[t]){if(d&&17!=d[2])throw"not a PNG";null==e.__tmp&&(e.__tmp={});var v=e.__tmp["g"+t];if(null==v){var y,x;if(c)x=(y=c[t]).length;else{var _=d[3][t-d[0]]+5;x=u[_+1]<<16|u[_+2]<<8|u[_+3],_+=4,y=new Uint8Array(u.buffer,u.byteOffset+_,x)}var w="";for(m=0;m<x;m++)w+=String.fromCharCode(y[m]);v=e.__tmp["g"+t]="data:image/png;base64,"+btoa(w)}i.cmds.push(v);var S=1.15*e.head.unitsPerEm,E=Math.round(S),C=Math.round(S),A=Math.round(.15*-C);i.crds.push(0,C+A,E,C+A,E,A,0,A)}else if(s&&s.entries[t]){var T=s.entries[t];if(null!=T){if("number"==typeof T){var M=s.svgs[T];if("string"==typeof M){var D=(new DOMParser).parseFromString(M,"image/svg+xml");M=s.svgs[T]=D.getElementsByTagName("svg")[0]}T=Pf.U.SVG.toPath(M,t),s.entries[t]=T}i=T}}else if(1!=n&&o&&o[0]["g"+t]&&o[0]["g"+t][1]>1){function z(e){var t=e.toString(16);return(1==t.length?"0":"")+t}var k=e.CPAL,N=o[0]["g"+t];for(m=0;m<N[1];m++){var F=N[0]+m,I=o[1][2*F],R=4*o[1][2*F+1],L=p(e,I,I==t),P="#"+z(k[R+2])+z(k[R+1])+z(k[R+0]);i.cmds.push(P),i.cmds=i.cmds.concat(L.cmds),i.crds=i.crds.concat(L.crds),i.cmds.push("X")}}else if(a){var O=a.Private,B={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:O?O.defaultWidthX:0,open:!1};if(a.ROS){for(var U=0;a.FDSelect[U+2]<=t;)U+=2;O=a.FDArray[a.FDSelect[U+1]].Private}b(a.CharStrings[t],B,a,O,i)}else e.glyf&&f(t,e,i,r);return{cmds:i.cmds,crds:i.crds}}function f(n,s,a,o){var l=s.glyf[n];null==l&&(l=s.glyf[n]=Pf.T.glyf._parseGlyf(s,n)),null!=l&&(l.noc>-1?function(n,s,a,o,l){var u=n.xs,c=n.ys;if(s.fvar&&l){u=u.slice(0),c=c.slice(0);for(var h=s.gvar,d=h?h[a]:null,p=0;p<d.length;p++){var f=m(d[p][0],l);if(!(f<1e-9)){var g=d[p][1],y=d[p][2];if(y&&(g=d[p][1]=v(g,y,u,c,n.endPts),d[p][2]=null),g.length==2*u.length+8)for(var b=0;b<u.length;b++)u[b]+=f*g[b],c[b]+=f*g[b+u.length+4]}}}for(var x=0;x<n.noc;x++){var _=0==x?0:n.endPts[x-1]+1,w=n.endPts[x];for(b=_;b<=w;b++){var S=b==_?w:b-1,E=b==w?_:b+1,C=1&n.flags[b],A=1&n.flags[S],T=1&n.flags[E],M=u[b],D=c[b];if(b==_)if(C){if(!A){e(o,M,D);continue}e(o,u[S],c[S])}else A?e(o,u[S],c[S]):e(o,Math.floor(.5*(u[S]+M)),Math.floor(.5*(c[S]+D)));C?A&&t(o,M,D):T?r(o,M,D,u[E],c[E]):r(o,M,D,Math.floor(.5*(M+u[E])),Math.floor(.5*(D+c[E])))}i(o)}}(l,s,n,a,o):function(e,t,n,r,i){var s=[0,0,0,0,0,0],a=[0,0,0,0,0,0],o=e.parts.length;if(t.fvar&&i)for(var l=t.gvar,u=l?l[n]:null,c=0;c<u.length;c++){var h=m(u[c][0],i);if(!(h<1e-6)){var d=u[c][1],p=u[c][2];if(null==p)for(var g=0;g<o;g++)s[g]+=h*d[g],a[g]+=h*d[g+o+4];else for(var v=0;v<p.length;v++)s[g=p[v]]+=h*d[0],a[g]+=h*d[0+o]}}for(v=0;v<o;v++){var y={cmds:[],crds:[]},b=e.parts[v];f(b.glyphIndex,t,y,i);var x=b.m,_=x.tx+s[v],w=x.ty+a[v];for(g=0;g<y.crds.length;g+=2){var S=y.crds[g],E=y.crds[g+1];r.crds.push(S*x.a+E*x.c+_),r.crds.push(S*x.b+E*x.d+w)}for(g=0;g<y.cmds.length;g++)r.cmds.push(y.cmds[g])}}(l,s,n,a,o))}function m(e,t){t.length;for(var n=1,r=e[0],i=e[1],s=e[2],a=0;a<t.length;a++)n*=r[a]>i[a]||i[a]>s[a]||r[a]<0&&s[a]>0&&0!=i[a]||0==i[a]?1:t[a]<r[a]||t[a]>s[a]?0:t[a]==i[a]?1:t[a]<i[a]?(t[a]-r[a])/(i[a]-r[a]):(s[a]-t[a])/(s[a]-i[a]);return n}function g(e,t){for(var n=e.fvar,r=e.avar,i=n?n[0]:null,s=[],a=0;a<i.length;a++){var o=i[a][1],l=i[a][2],u=i[a][3],c=Math.max(o,Math.min(u,t[a]));if(s[a]=c<l?(l-c)/(o-l):c>l?(c-l)/(u-l):0,r&&-1!=s[a]){for(var h=r[a],d=0;d<h.length&&!(h[d]>=s[a]);d+=2);var p=(s[a]-h[d-2])/(h[d]-h[d-2]);s[a]=p*h[d+1]+(1-p)*h[d-1]}}return s}function v(e,t,n,r,i){var s=n.length,a=new Array(2*s+8);a.fill(0);for(var o=0;o<s;o++){var l=0,u=0,c=t.indexOf(o);if(-1!=c)l=e[c],u=e[t.length+c];else{for(var h=0;i[h]<o;)h++;for(var d=0==h?0:i[h-1]+1,p=i[h],f=-1,m=-1,g=0;g<t.length;g++)(v=t[g])<d||v>p||v>=s||(f=g,-1==m&&(m=g));for(g=0;g<t.length;g++){var v;if(!((v=t[g])<d||v>p||v>=s)&&(v<o&&(f=g),o<v)){m=g;break}}for(var y=0;y<2;y++){var b=0==y?n:r,x=y*t.length,_=0,w=b[t[f]],S=b[t[m]],E=b[o],C=e[x+f],A=e[x+m];if(w==S)_=C==A?C:0;else if(E<=Math.min(w,S))_=w<S?C:A;else if(Math.max(w,S)<=E)_=w<S?A:C;else{var T=(E-w)/(S-w);_=T*A+(1-T)*C}0==y?l=_:u=_}}a[o]=l,a[s+4+o]=u}return a}function y(e,t,n,r){for(var i=t>>1,s=n>>1,a=new Uint8Array(i*s*4),o=new Uint32Array(e.buffer),l=new Uint32Array(a.buffer),u=0;u<s;u++)for(var c=0;c<i;c++){var h=u*i+c,d=(u<<1)*t+(c<<1),p=o[d],f=o[d+1],m=o[d+t],g=o[d+t+1],v=p>>>24,y=f>>>24,b=m>>>24,x=g>>>24,_=v+y+b+x;if(1020==_){var w=(p>>>0&255)+(f>>>0&255)+(m>>>0&255)+(g>>>0&255)+2>>>2,S=(p>>>8&255)+(f>>>8&255)+(m>>>8&255)+(g>>>8&255)+2>>>2,E=(p>>>16&255)+(f>>>16&255)+(m>>>16&255)+(g>>>16&255)+2>>>2;l[h]=255<<24|E<<16|S<<8|w}else if(0==_)l[h]=0;else{var C=1/_;w=~~((w=(p>>>0&255)*v+(f>>>0&255)*y+(m>>>0&255)*b+(g>>>0&255)*x)*C+.5),S=~~((S=(p>>>8&255)*v+(f>>>8&255)*y+(m>>>8&255)*b+(g>>>8&255)*x)*C+.5),E=~~((E=(p>>>16&255)*v+(f>>>16&255)*y+(m>>>16&255)*b+(g>>>16&255)*x)*C+.5),l[h]=_+2>>>2<<24|E<<16|S<<8|w}}return{buff:a,w:i,h:s}}function b(r,s,a,o,l){for(var u=s.stack,c=s.nStems,h=s.haveWidth,d=s.width,p=s.open,f=0,m=s.x,g=s.y,v=0,y=0,x=0,_=0,w=0,S=0,E=0,C=0,A=0,T=0,M=Pf.T.CFF,D=o.nominalWidthX,k={val:0,size:0};f<r.length;){M.getCharString(r,f,k);var N=k.val;if(f+=k.size,"o1"==N||"o18"==N)u.length%2!=0&&!h&&(d=u.shift()+D),c+=u.length>>1,u.length=0,h=!0;else if("o3"==N||"o23"==N)u.length%2!=0&&!h&&(d=u.shift()+D),c+=u.length>>1,u.length=0,h=!0;else if("o4"==N)u.length>1&&!h&&(d=u.shift()+D,h=!0),p&&i(l),g+=u.pop(),e(l,m,g),p=!0;else if("o5"==N)for(;u.length>0;)m+=u.shift(),g+=u.shift(),t(l,m,g);else if("o6"==N||"o7"==N)for(var F=u.length,I="o6"==N,R=0;R<F;R++){var L=u.shift();I?m+=L:g+=L,I=!I,t(l,m,g)}else if("o8"==N||"o24"==N){F=u.length;for(var P=0;P+6<=F;)v=m+u.shift(),y=g+u.shift(),x=v+u.shift(),_=y+u.shift(),m=x+u.shift(),g=_+u.shift(),n(l,v,y,x,_,m,g),P+=6;"o24"==N&&(m+=u.shift(),g+=u.shift(),t(l,m,g))}else{if("o11"==N)break;if("o1234"==N||"o1235"==N||"o1236"==N||"o1237"==N)"o1234"==N&&(y=g,x=(v=m+u.shift())+u.shift(),T=_=y+u.shift(),S=_,C=g,m=(E=(w=(A=x+u.shift())+u.shift())+u.shift())+u.shift(),n(l,v,y,x,_,A,T),n(l,w,S,E,C,m,g)),"o1235"==N&&(v=m+u.shift(),y=g+u.shift(),x=v+u.shift(),_=y+u.shift(),A=x+u.shift(),T=_+u.shift(),w=A+u.shift(),S=T+u.shift(),E=w+u.shift(),C=S+u.shift(),m=E+u.shift(),g=C+u.shift(),u.shift(),n(l,v,y,x,_,A,T),n(l,w,S,E,C,m,g)),"o1236"==N&&(v=m+u.shift(),y=g+u.shift(),x=v+u.shift(),T=_=y+u.shift(),S=_,E=(w=(A=x+u.shift())+u.shift())+u.shift(),C=S+u.shift(),m=E+u.shift(),n(l,v,y,x,_,A,T),n(l,w,S,E,C,m,g)),"o1237"==N&&(v=m+u.shift(),y=g+u.shift(),x=v+u.shift(),_=y+u.shift(),A=x+u.shift(),T=_+u.shift(),w=A+u.shift(),S=T+u.shift(),E=w+u.shift(),C=S+u.shift(),Math.abs(E-m)>Math.abs(C-g)?m=E+u.shift():g=C+u.shift(),n(l,v,y,x,_,A,T),n(l,w,S,E,C,m,g));else if("o14"==N){if(u.length>0&&4!=u.length&&!h&&(d=u.shift()+a.nominalWidthX,h=!0),4==u.length){var O=u.shift(),B=u.shift(),U=u.shift(),z=u.shift(),V=M.glyphBySE(a,U),j=M.glyphBySE(a,z);b(a.CharStrings[V],s,a,o,l),s.x=O,s.y=B,b(a.CharStrings[j],s,a,o,l)}p&&(i(l),p=!1)}else if("o19"==N||"o20"==N)u.length%2!=0&&!h&&(d=u.shift()+D),c+=u.length>>1,u.length=0,h=!0,f+=c+7>>3;else if("o21"==N)u.length>2&&!h&&(d=u.shift()+D,h=!0),g+=u.pop(),m+=u.pop(),p&&i(l),e(l,m,g),p=!0;else if("o22"==N)u.length>1&&!h&&(d=u.shift()+D,h=!0),m+=u.pop(),p&&i(l),e(l,m,g),p=!0;else if("o25"==N){for(;u.length>6;)m+=u.shift(),g+=u.shift(),t(l,m,g);v=m+u.shift(),y=g+u.shift(),x=v+u.shift(),_=y+u.shift(),m=x+u.shift(),g=_+u.shift(),n(l,v,y,x,_,m,g)}else if("o26"==N)for(u.length%2&&(m+=u.shift());u.length>0;)v=m,y=g+u.shift(),m=x=v+u.shift(),g=(_=y+u.shift())+u.shift(),n(l,v,y,x,_,m,g);else if("o27"==N)for(u.length%2&&(g+=u.shift());u.length>0;)y=g,x=(v=m+u.shift())+u.shift(),_=y+u.shift(),m=x+u.shift(),n(l,v,y,x,_,m,g=_);else if("o10"==N||"o29"==N){var G="o10"==N?o:a;if(0==u.length)console.log("error: empty stack");else{var H=u.pop(),W=G.Subrs[H+G.Bias];s.x=m,s.y=g,s.nStems=c,s.haveWidth=h,s.width=d,s.open=p,b(W,s,a,o,l),m=s.x,g=s.y,c=s.nStems,h=s.haveWidth,d=s.width,p=s.open}}else if("o30"==N||"o31"==N){var $=u.length,q=(P=0,"o31"==N);for(P+=$-(F=-3&$);P<F;)q?(y=g,x=(v=m+u.shift())+u.shift(),g=(_=y+u.shift())+u.shift(),F-P==5?(m=x+u.shift(),P++):m=x,q=!1):(v=m,y=g+u.shift(),x=v+u.shift(),_=y+u.shift(),m=x+u.shift(),F-P==5?(g=_+u.shift(),P++):g=_,q=!0),n(l,v,y,x,_,m,g),P+=4}else{if("o"==(N+"").charAt(0))throw console.log("Unknown operation: "+N,r),N;u.push(N)}}}s.x=m,s.y=g,s.nStems=c,s.haveWidth=h,s.width=d,s.open=p}return{shape:function(e,t,n){null==n&&(n={}),n.ltr,n.fts;var r=n.axs;e.fvar&&null==r&&(r=e.fvar[1][e._index][2]);var i=e.HVAR;r&&i&&(r=g(e,r));for(var a=[],o=0;o<t.length;o++){var l=t.codePointAt(o);l>65535&&o++,a.push(d(e,l))}var u=[];for(o=0;o<a.length;o++){var c=s(e,a,o),h=a[o],p=e.hmtx.aWidth[h]+c[2];if(i&&i[1][h])for(var f=i[1][h],v=0;v<i[0].length;v++)p+=m(i[0][v],r)*f[v];u.push({g:h,cl:o,dx:0,dy:0,ax:p,ay:0})}return u},shapeToPath:function(e,t,n){var r,i,s={cmds:[],crds:[]},a=0,o=0;n&&(r=n.clr,i=n.axs);for(var l=0;l<t.length;l++){for(var u=t[l],c=p(e,u.g,!1,i),h=c.crds,d=0;d<h.length;d+=2)s.crds.push(h[d]+a+u.dx),s.crds.push(h[d+1]+o+u.dy);for(r&&s.cmds.push(r),d=0;d<c.cmds.length;d++)s.cmds.push(c.cmds[d]);var f=s.cmds.length;r&&0!=f&&"X"!=s.cmds[f-1]&&s.cmds.push("X"),a+=u.ax,o+=u.ay}return{cmds:s.cmds,crds:s.crds}},codeToGlyph:d,glyphToPath:p,pathToSVG:function(e,t){var n=e.cmds,r=e.crds;function i(e){return parseFloat(e.toFixed(t))}null==t&&(t=5);for(var s=[],a=0,o={M:2,L:2,Q:4,C:6},l=0,u=0,c=0,h=0,d=0,p=0,f=0;f<n.length;f++){var m,g,v,y,b=n[f],x=o[b]?o[b]:0,_=[];if("L"==b)m=r[a]-l,g=r[a+1]-u,v=i(m+c),y=i(g+h),"Z"==n[f+1]&&r[a]==d&&r[a+1]==p?(v=m,y=g):0==v&&0==y||(0==v?_.push("v",y):0==y?_.push("h",v):_.push("l",v,y));else{_.push(b.toLowerCase());for(var w=0;w<x;w+=2)m=r[a+w]-l,g=r[a+w+1]-u,v=i(m+c),y=i(g+h),_.push(v,y)}0!=x&&(c+=m-v,h+=g-y);var S=_;for(w=0;w<S.length;w++)s.push(S[w]);0!=x&&(l=r[(a+=x)-2],u=r[a-1]),"M"==b&&(d=l,p=u),"Z"==b&&(l=d,u=p)}return function(e){for(var t=[],n=!1,r="",i=0;i<e.length;i++){var s=e[i],a="number"==typeof s;if(!a){if(s==r&&1==s.length&&"m"!=s)continue;r=s}n&&a&&s>=0&&t.push(" "),t.push(s),n=a}return t.join("")}(s)},SVGToPath:function(e){var t={cmds:[],crds:[]};return Pf.U.SVG.svgToPath(e,t),{cmds:t.cmds,crds:t.crds}},pathToContext:function(e,t){for(var n=0,r=e.cmds,i=e.crds,s=0;s<r.length;s++){var a=r[s];if("M"==a)t.moveTo(i[n],i[n+1]),n+=2;else if("L"==a)t.lineTo(i[n],i[n+1]),n+=2;else if("C"==a)t.bezierCurveTo(i[n],i[n+1],i[n+2],i[n+3],i[n+4],i[n+5]),n+=6;else if("Q"==a)t.quadraticCurveTo(i[n],i[n+1],i[n+2],i[n+3]),n+=4;else if("d"==a[0]){var u=window.UPNG,c=i[n],h=i[n+1],d=i[n+2],p=i[n+3],f=i[n+4],m=i[n+5],g=i[n+6],v=i[n+7];if(n+=8,null==u){t.moveTo(c,h),t.lineTo(d,p),t.lineTo(f,m),t.lineTo(g,v),t.closePath();continue}for(var b=d-c,x=p-h,_=g-c,w=v-h,S=atob(a.slice(22)),E=new Uint8Array(S.length),C=0;C<S.length;C++)E[C]=S.charCodeAt(C);for(var A=u.decode(E.buffer),T=A.width,M=A.height,D=new Uint8Array(u.toRGBA8(A)[0]),k=t.getTransform(),N=Math.sqrt(Math.abs(k.a*k.d-k.b*k.c))*Math.sqrt(_*_+w*w)/M;N<.5;){var F=y(D,T,M);D=F.buff,T=F.w,M=F.h,N*=2}null==o&&(o=document.createElement("canvas"),l=o.getContext("2d")),o.width==T&&o.height==M||(o.width=T,o.height=M),l.putImageData(new ImageData(new Uint8ClampedArray(D.buffer),T,M),0,0),t.save(),t.transform(b,x,_,w,c,h),t.scale(1/T,1/M),t.drawImage(o,0,0),t.restore()}else if("#"==a.charAt(0)||"r"==a.charAt(0))t.beginPath(),t.fillStyle=a;else if("O"==a.charAt(0)&&"OX"!=a){t.beginPath();var I=a.split("-");t.lineWidth=parseFloat(I[2]),t.lineCap=["butt","round","square"][parseFloat(I[3])],t.lineJoin=["miter","round","bevel"][parseFloat(I[4])],t.miterLimit=parseFloat(I[5]),t.lineDashOffset=parseFloat(I[6]),t.setLineDash(I[7].split(",").map(parseFloat)),t.strokeStyle=I[1]}else"Z"==a?t.closePath():"X"==a?t.fill():"OX"==a&&t.stroke()}},initHB:function(e,t){var n=function(e){var t=0;return 4294967168&e?4294965248&e?4294901760&e?4292870144&e||(t=4):t=3:t=2:t=1,t};fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e)}).then(function(e){console.log("HB ready");var r,i,s,a,o,l,u,c,h,d,p=e.instance.exports,f=p.memory;Pf.U.shapeHB=function(e,t,m){var g=e._data,v=e.name.postScriptName,y=m.ltr,b=m.fts,x=m.axs;if(e.fvar&&null==x&&(x=e.fvar[1][e._index][2]),r=new Uint8Array(f.buffer),i=new Uint32Array(f.buffer),s=new Int32Array(f.buffer),a=new Float32Array(f.buffer),o!=v&&(null!=l&&(p.hb_blob_destroy(l),p.free(u),p.hb_face_destroy(c),p.hb_font_destroy(h)),u=p.malloc(g.byteLength),r.set(g,u),l=p.hb_blob_create(u,g.byteLength,2,0,0),c=p.hb_face_create(l,e._index),h=p.hb_font_create(c),o=v),null!=window.TextEncoder){null==d&&(d=new window.TextEncoder("utf8"));var _=p.hb_buffer_create(),w=d.encode(t),S=w.length,E=p.malloc(S);r.set(w,E),p.hb_buffer_add_utf8(_,E,S,0,S),p.free(E);var C=Pf.B,A=0;if(b){A=p.malloc(16*b.length);for(var T=0;T<b.length;T++){var M=b[T],D=(F=A+16*T)>>>2;C.writeASCII(r,F,M[0].split("").reverse().join("")),i[D+1]=M[1],i[D+2]=M[2],i[D+3]=M[3]}}var k=0;if(x&&e.fvar){var N=e.fvar[0];for(k=p.malloc(8*x.length),T=0;T<x.length;T++){var F;D=(F=k+8*T)>>>2,C.writeASCII(r,F,N[T][0].split("").reverse().join("")),a[D+1]=x[T]}}x&&p.hb_font_set_variations(h,k,x.length),p.hb_buffer_set_direction(_,y?4:5),p.hb_buffer_guess_segment_properties(_),p.hb_shape(h,_,A,b?b.length:0);var I=function(e){for(var t=p.hb_buffer_get_length(e),n=[],r=p.hb_buffer_get_glyph_infos(e,0)>>>2,a=p.hb_buffer_get_glyph_positions(e,0)>>>2,o=0;o<t;++o){var l=r+5*o,u=a+5*o;n.push({g:i[l+0],cl:i[l+2],ax:s[u+0],ay:s[u+1],dx:s[u+2],dy:s[u+3]})}return n}(_);p.hb_buffer_destroy(_),b&&p.free(A),x&&p.free(k);var R=I.slice(0);y||R.reverse();var L=0,P=0;for(T=1;T<R.length;T++){for(var O=R[T],B=O.cl;;){var U=t.codePointAt(L),z=n(U);if(!(P+z<=B))break;P+=z,L+=U<=65535?1:2}O.cl=L}return I}alert("Your browser is too old. Please, update it.")},t()})}}}(),Bf=m((Of=d({"node_modules/@davepagurek/bezier-path/build/bezier-path.js":(e,t)=>{var n,r;n=self,r=()=>{return e={177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BezierPath=void 0;const r=n(558),i=n(188);t.BezierPath=class{constructor(e){this.samples=[],this.segments=e;const t=e.map(e=>e.getTotalLength()),n=[0];for(let r=1;r<t.length;r++)n.push(n[r-1]+t[r-1]);this._totalLength=n[n.length-1]+t[t.length-1];const s=e.map(e=>Math.max(4,Math.ceil(e.getTotalLength()/r.BezierSegment.sampleSpacing()))),a=s.reduce((e,t)=>e+t),o=1/a/10,l=this._totalLength/a;this.samples.push({dist:0,pt:this.segments[0].A,tan:this.segments[0].tangentAtParameter(0),segIdx:0,t:0}),e.forEach((e,t)=>{const r=s[t],a=(0,i.times)(r+1).map(e=>e/r),u=a.map(t=>e.pointAtParameter(t));let c;for(let n=0;n<4;n++){c=(0,i.times)(r).map(e=>Math.hypot(u[e+1].x-u[e].x,u[e+1].y-u[e].y));const t=c.map(e=>e-l);let n=0;for(let r=1;r<a.length-1;r++)n+=t[r-1],a[r]-=o*n,u[r]=e.pointAtParameter(a[r])}let h=0;u.slice(1).forEach((e,r)=>{h+=c[r],this.samples.push({dist:n[t]+h,pt:e,tan:this.segments[t].tangentAtParameter(a[r+1]),segIdx:t,t:a[r+1]})})}),this._jumps=[],this.segmentStartEnds=[{start:0,end:0}];for(let r=1;r<this.samples.length;r++){const e=this.samples[r-1],t=this.samples[r];if(t.segIdx===e.segIdx?this.segmentStartEnds[this.segmentStartEnds.length-1].end=t.dist:this.segmentStartEnds[t.segIdx]={start:t.dist,end:t.dist},e.segIdx!==t.segIdx&&(this.segments[e.segIdx].D.x!==this.segments[t.segIdx].A.x||this.segments[e.segIdx].D.y!==this.segments[t.segIdx].A.y)){const n=(e.dist+t.dist)/2,i={dist:n-1e-8,pt:this.segments[e.segIdx].D,tan:this.segments[e.segIdx].tangentAtParameter(1),segIdx:e.segIdx,t:1},s={dist:n+1e-8,pt:this.segments[t.segIdx].A,tan:this.segments[t.segIdx].tangentAtParameter(0),segIdx:t.segIdx,t:0};this._jumps.push(n),this.samples.splice(r,0,i,s),r+=2}}}jumps(){return[...this._jumps]}getTotalLength(){return this._totalLength}findClosestSampleIdx(e){let t=0,n=this.samples.length-1;for(;t<n;){const r=Math.floor((t+n)/2);if(this.samples[r].dist>e)n=r-1;else{if(!(this.samples[r].dist<e))return r;t=r+1}}return Math.max(0,Math.min(this.samples.length-1,Math.floor((t+n)/2)))}getPointAtLength(e,t=!1){if(e<=0)return this.samples[0].pt;if(e>=this._totalLength)return this.samples[this.samples.length-1].pt;const n=this.findClosestSampleIdx(e),r=this.samples[n].dist<e?Math.min(n+1,this.samples.length-1):Math.max(0,n-1),i=Math.abs(this.samples[r].dist-this.samples[n].dist)<1e-6?0:(e-this.samples[n].dist)/(this.samples[r].dist-this.samples[n].dist);if(t||this.samples[n].segIdx>this.samples[r].segIdx)return{x:(1-i)*this.samples[n].pt.x+i*this.samples[r].pt.x,y:(1-i)*this.samples[n].pt.y+i*this.samples[r].pt.y};if(this.samples[n].segIdx!==this.samples[r].segIdx){if(i<.5){const e=this.segments[this.samples[n].segIdx],t=2*i,r=(1-t)*this.samples[n].t+t;return e.pointAtParameter(r)}{const e=this.segments[this.samples[r].segIdx],t=2*(i-.5)*this.samples[r].t;return e.pointAtParameter(t)}}{const e=this.segments[this.samples[n].segIdx],t=(1-i)*this.samples[n].t+i*this.samples[r].t;return e.pointAtParameter(t)}}getAngleAtLength(e,t=!1){const n=this.getTangentAtLength(e,t);return Math.atan2(n.y,n.x)}getTangentAtLength(e,t=!1){if(e<=0)return this.samples[0].tan;if(e>=this._totalLength)return this.samples[this.samples.length-1].tan;const n=this.findClosestSampleIdx(e),r=this.samples[n].dist<e?Math.min(n+1,this.samples.length-1):Math.max(0,n-1),i=(e-this.samples[n].dist)/(this.samples[r].dist-this.samples[n].dist);if(t||this.samples[n].segIdx>this.samples[r].segIdx){let e=(1-i)*this.samples[n].tan.x+i*this.samples[r].tan.x,t=(1-i)*this.samples[n].tan.y+i*this.samples[r].tan.y;const s=Math.max(Math.hypot(e,t),1e-4);return e/=s,t/=s,{x:e,y:t}}if(this.samples[n].segIdx!==this.samples[r].segIdx){if(i<.5){const e=this.segments[this.samples[n].segIdx],t=2*i,r=(1-t)*this.samples[n].t+t;return e.tangentAtParameter(r)}{const e=this.segments[this.samples[r].segIdx],t=2*(i-.5)*this.samples[r].t;return e.tangentAtParameter(t)}}{const e=this.segments[this.samples[n].segIdx],t=(1-i)*this.samples[n].t+i*this.samples[r].t;return e.tangentAtParameter(t)}}}},558:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BezierSegment=void 0;const r=n(188);class i{constructor(e,t,n,r){this._totalLength=void 0,this.A=e,this.B=t,this.C=n,this.D=r}static sampleSpacing(){return 2}tangentAtParameter(e){const t=Math.max(0,Math.min(1,e));if(0===t||1===t){let e,n;0===t?this.A.x===this.B.x&&this.A.y===this.B.y?(e=this.C.x-this.A.x,n=this.C.y-this.A.y):(e=this.B.x-this.A.x,n=this.B.y-this.A.y):this.D.x===this.C.x&&this.D.y===this.C.y?(e=this.D.x-this.B.x,n=this.D.y-this.B.y):(e=this.D.x-this.C.x,n=this.D.y-this.C.y);const r=Math.hypot(e,n);return Math.abs(r)>1e-4&&(e/=r,n/=r),{x:e,y:n}}const n=1-t;let r=3*this.D.x*Math.pow(t,2)-3*this.C.x*Math.pow(t,2)+6*this.C.x*n*t-6*this.B.x*n*t+3*this.B.x*Math.pow(n,2)-3*this.A.x*Math.pow(n,2),i=3*this.D.y*Math.pow(t,2)-3*this.C.y*Math.pow(t,2)+6*this.C.y*n*t-6*this.B.y*n*t+3*this.B.y*Math.pow(n,2)-3*this.A.y*Math.pow(n,2);const s=Math.hypot(r,i);return Math.abs(s)>1e-4&&(r/=s,i/=s),{x:r,y:i}}isLinear(){return this.A.x===this.B.x&&this.A.y===this.B.y&&this.C.x===this.D.x&&this.C.y===this.D.y}pointAtParameter(e){const t=Math.max(0,Math.min(1,e));return{x:Math.pow(1-t,3)*this.A.x+3*Math.pow(1-t,2)*t*this.B.x+3*(1-t)*Math.pow(t,2)*this.C.x+Math.pow(t,3)*this.D.x,y:Math.pow(1-t,3)*this.A.y+3*Math.pow(1-t,2)*t*this.B.y+3*(1-t)*Math.pow(t,2)*this.C.y+Math.pow(t,3)*this.D.y}}getTotalLength(){if(void 0===this._totalLength)if(this.isLinear())this._totalLength=Math.hypot(this.D.x-this.A.x,this.D.y-this.A.y);else{const e=Math.max(10,Math.ceil((Math.hypot(this.B.x-this.A.x,this.B.y-this.A.y)+Math.hypot(this.C.x-this.B.x,this.C.y-this.B.y)+Math.hypot(this.D.x-this.C.x,this.D.y-this.C.y))/i.sampleSpacing())),t=(0,r.times)(e).map(t=>this.pointAtParameter(t/(e-1)));let n=0;for(let r=1;r<t.length;r++)n+=Math.hypot(t[r].x-t[r-1].x,t[r].y-t[r-1].y);this._totalLength=n}return this._totalLength}}t.BezierSegment=i},729:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createFromCommands=t.create=t.createFromElement=t.createFromCircle=t.createFromLine=t.createFromPath=void 0;const r=n(821),i=n(558),s={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};t.createFromPath=e=>{const t=function(e){const t=e.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").trim().split(/\s*,|\s+/),n=[];let r="",i={};for(;t.length>0;){let e=t.shift();s.hasOwnProperty(e)?r=e:t.unshift(e),i={type:r},s[r].forEach(n=>{e=t.shift(),i[n]=parseFloat(e)}),"M"===r?r="L":"m"===r&&(r="l"),n.push(i)}return n}(e.getAttribute("d"));if(t.length<2)throw new Error(`Path doesn't have enough commands: ${JSON.stringify(t)}`);if("M"!==t[0].type)throw new Error(`Path starts with ${t[0].type} instead of M!`);let n={x:t[0].x,y:t[0].y};t.shift();const a=[];for(;t.length>0;){const e=t.shift();if("C"===e.type)a.push(new i.BezierSegment(n,{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:e.x,y:e.y})),n={x:e.x,y:e.y};else if("L"===e.type)a.push(new i.BezierSegment(n,n,{x:e.x,y:e.y},{x:e.x,y:e.y})),n={x:e.x,y:e.y};else if("H"===e.type)a.push(new i.BezierSegment(n,n,{x:e.x,y:n.y},{x:e.x,y:n.y})),n={x:e.x,y:n.y};else if("V"===e.type)a.push(new i.BezierSegment(n,n,{x:n.x,y:e.y},{x:n.x,y:e.y})),n={x:n.x,y:e.y};else if("Z"!==e.type)throw new Error(`Unsupported path command ${e.type}; use only H, V, M, L, C, Z!`)}return new r.BezierPath(a)},t.createFromLine=e=>{const[t,n,s,a]=["x1","x2","y1","y2"].map(t=>parseFloat(e.getAttribute(t)||"0"));return new r.BezierPath([new i.BezierSegment({x:t,y:s},{x:t,y:s},{x:n,y:a},{x:n,y:a})])},t.createFromCircle=e=>{const[t,n,s]=["cx","cy","r"].map(t=>parseFloat(e.getAttribute(t)||"0")),a=1.3;return new r.BezierPath([new i.BezierSegment({x:t-s,y:n},{x:t-s,y:n-a*s},{x:t+s,y:n-a*s},{x:t+s,y:n}),new i.BezierSegment({x:t+s,y:n},{x:t+s,y:n+a*s},{x:t-s,y:n+a*s},{x:t-s,y:n})])},t.createFromElement=e=>{const n=e.tagName.toLowerCase();if("path"===n)return(0,t.createFromPath)(e);if("line"===n)return(0,t.createFromLine)(e);if("circle"===n)return(0,t.createFromCircle)(e);throw new Error(`Unsupported SVG tag: ${n}`)},t.create=e=>{const t=[];for(let n=1;n<e.length;n++){const r=e[n-1],s=e[n];t.push(new i.BezierSegment(r.pt,r.right||r.pt,s.left||s.pt,s.pt))}return new r.BezierPath(t)},t.createFromCommands=e=>{const t=e.slice();if(t.length<2)throw new Error(`Path doesn't have enough commands: ${JSON.stringify(t)}`);if("M"!==t[0].type)throw new Error(`Path starts with ${t[0].type} instead of M!`);let n={x:t[0].x,y:t[0].y},s=Object.assign({},n);const a=[];for(;t.length>0;){const e=t.shift();if("M"===e.type)s={x:e.x,y:e.y},n=s;else if("C"===e.type)a.push(new i.BezierSegment(n,{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:e.x,y:e.y})),n={x:e.x,y:e.y};else if("L"===e.type)e.x===n.x&&e.y===n.y||a.push(new i.BezierSegment(n,n,{x:e.x,y:e.y},{x:e.x,y:e.y})),n={x:e.x,y:e.y};else if("H"===e.type)e.x!==n.x&&a.push(new i.BezierSegment(n,n,{x:e.x,y:n.y},{x:e.x,y:n.y})),n={x:e.x,y:n.y};else if("V"===e.type)e.y!==n.y&&a.push(new i.BezierSegment(n,n,{x:n.x,y:e.y},{x:n.x,y:e.y})),n={x:n.x,y:e.y};else if("Q"===e.type)a.push(new i.BezierSegment(n,{x:n.x+2/3*(e.x1-n.x),y:n.y+2/3*(e.y1-n.y)},{x:e.x+2/3*(e.x1-e.x),y:e.y+2/3*(e.y1-e.y)},{x:e.x,y:e.y})),n={x:e.x,y:e.y};else{if("Z"!==e.type)throw new Error(`Unsupported path command ${e.type}; use only H, V, M, L, C, Z!`);Math.hypot(n.x-s.x,n.y-s.y)>0&&a.push(new i.BezierSegment(n,n,s,s))}}return new r.BezierPath(a)}},821:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(177),t),i(n(558),t),i(n(729),t),i(n(856),t)},856:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.times=void 0,t.times=function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}}},t={},function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}(821);var e,t},"object"==typeof e&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof e?e.BezierPath=r():n.BezierPath=r()}}))()),li(),Uf={M:2,L:2,C:6,Q:4},zf=["ttf","otf","woff"],Vf=new RegExp(`\\.(${zf.join("|")})`,"i"),jf=new RegExp(`([^/]+)(\\.(?:${zf.join("|")}))`,"i"),Gf="Sorry, only TTF, OTF and WOFF files are supported.",Hf=["weight","stretch","style"],Wf=class{constructor(e,t,n,r,i){if(!(t instanceof FontFace))throw Error("FontFace is required");this._pInst=e,this.name=n,this.path=r,this.data=i,this.face=t}static hasGlyphData(e){let{font:t}=e;return"object"==typeof t&&void 0!==t.data}fontBounds(e,t,n,r,i,s){({width:r,height:i,options:s}=this._parseArgs(r,i,s));let a=s?.graphics?._renderer||this._pInst._renderer;if(!a)throw Error("p5 or graphics required for fontBounds()");return a.fontBounds(e,t,n,r,i)}textBounds(e,t,n,r,i,s){({width:r,height:i,options:s}=this._parseArgs(r,i,s));let a=s?.graphics?._renderer||this._pInst._renderer;if(!a)throw Error("p5 or graphics required for fontBounds()");return a.textBounds(e,t,n,r,i)}textToPaths(e,t,n,r,i,s){if(({width:r,height:i,options:s}=this._parseArgs(r,i,s)),!this.data)throw Error('No font data available for "'+this.name+'"\nTry downloading a local copy of the font file');return this._lineateAndPathify(e,t,n,r,i,s).map(e=>e.glyphs).flat().map(e=>e.path.commands).flat()}textToPoints(e,t,n,r,i,s){return this.textToContours(e,t,n,r,i,s).reduce((e,t)=>(e.push(...t),e),[])}textToContours(e,t=0,n=0,r,i,s){({width:r,height:i,options:s}=this._parseArgs(r,i,s));const a=this.textToPaths(e,t,n,r,i,s),o=[];for(const l of a)"M"===l[0]&&o.push([]),o[o.length-1].push(l);return o.map(e=>function(e,t,n){const r=(e,t)=>{const n=e.length;return e[t<0?t%n+n:t%n]},i=(e,t,n,r)=>{if(!r)return 0===s(e,t,n);void 0===i.tmpPoint1&&(i.tmpPoint1=[],i.tmpPoint2=[]);const a=i.tmpPoint1,o=i.tmpPoint2;a.x=t.x-e.x,a.y=t.y-e.y,o.x=n.x-t.x,o.y=n.y-t.y;const l=a.x*o.x+a.y*o.y,u=Math.sqrt(a.x*a.x+a.y*a.y),c=Math.sqrt(o.x*o.x+o.y*o.y);return Math.acos(l/(u*c))<r},s=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]),a=(0,Bf.createFromCommands)($f(e));let o=((e,t)=>{if("object"!=typeof e)e=t;else for(const n in t)void 0===e[n]&&(e[n]=t[n]);return e})(t,{sampleFactor:.1,simplifyThreshold:0});const l=Math.max(1,Math.ceil(a.getTotalLength()*o.sampleFactor));let u=[];const c=n._pInst.angleMode(),h=n._pInst.DEGREES;for(let d=0;d<l;d++){const e=a.getTotalLength()*(1===l?0:d/(l-1));u.push({...a.getPointAtLength(e),get angle(){const t=a.getAngleAtLength(e);return c===h?180*t/Math.PI:t},get alpha(){return this.angle}})}return o.simplifyThreshold&&((e,t)=>{t=t||0;for(let n=e.length-1;e.length>3&&n>=0;--n)i(r(e,n-1),r(e,n),r(e,n+1),t)&&e.splice(n%e.length,1)})(u,o.simplifyThreshold),u}(e,s,this))}textToModel(e,t,n,r,i,s){({width:r,height:i,options:s}=this._parseArgs(r,i,s));const a=s?.extrude||0,o=this.textToContours(e,t,n,r,i,s),l=this._pInst.buildGeometry(()=>{if(0===a){const e=this._pInst._renderer._validateFaces;this._pInst._renderer._validateFaces=!0,this._pInst.beginShape(),this._pInst.normal(0,0,1);for(const t of o){this._pInst.beginContour();for(const{x:e,y:n}of t)this._pInst.vertex(e,n);this._pInst.endContour(this._pInst.CLOSE)}this._pInst.endShape(),this._pInst._renderer._validateFaces=e}else{const e=this._pInst._renderer._validateFaces;this._pInst._renderer._validateFaces=!0;for(const t of[1,-1]){this._pInst.beginShape();for(const e of o){this._pInst.beginContour();for(const{x:n,y:r}of e)this._pInst.vertex(n,r,t*a*.5);this._pInst.endContour(this._pInst.CLOSE)}this._pInst.endShape()}this._pInst._renderer._validateFaces=e;for(const t of o){this._pInst.beginShape(this._pInst.QUAD_STRIP);for(const e of t)for(const t of[-1,1])this._pInst.vertex(e.x,e.y,t*a*.5);this._pInst.endShape()}}});if(0!==a){l.computeNormals();for(const e of l.faces)if(e.every(e=>l.vertices[e].z<=.5*-a+.1)){for(const t of e)l.vertexNormals[t].set(0,0,-1);e.reverse()}}return l}variations(){let e={};if(this.data){let t=this.face?.axes;t&&t.forEach(t=>{e[t.tag]=t.value})}return Hf.forEach(t=>{let n=this.face[t];"normal"!==n&&(e[t]=e[t]||n)}),e}metadata(){let e=this.data?.name||{};for(let t in this.face)/^load/.test(t)||(e[t]=e[t]||this.face[t]);return e}static async list(e=!1){if(e){console.log("There are",document.fonts.size,"font-faces\n");let e=0;for(let t of document.fonts.values()){console.log("FontFace: {");for(let e in t)console.log("  "+e+": "+t[e]);console.log("}\n"),"loaded"===t.status&&e++}console.log(e+" loaded")}return await Array.from(document.fonts)}_verticalAlign(e){const{sCapHeight:t}=this.data?.["OS/2"]||{},{unitsPerEm:n=1e3}=this.data?.head||{},{ascender:r=0,descender:i=0}=this.data?.hhea||{};return((t||r+i)/2-r/2)*e/n}_lineateAndPathify(e,t,n,r,i,s={}){let a=s?.graphics?._renderer||this._pInst._renderer,o=a.drawingContext.textBaseline,{lines:l,bounds:u}=a._computeBounds(hh._FONT_BOUNDS,e,t,n,r,i,{ignoreRectMode:!0,...s});l=this._position(a,l,u,r,i);let c=this.data?.head?.unitsPerEm||1e3,h=a.states.textSize/c;const d=this._currentAxes(a);let p=l.map(e=>this._lineToGlyphs(e,{scale:h,axs:d}));return a.drawingContext.textBaseline=o,p}_currentAxes(e){let t;return(this.data?.fvar?.length??0)>0&&(t=this.data.fvar[0].map(([t,n,r,i,s,a])=>{if(!e)return r;if("wght"===t)return e.states.fontWeight;if("wdth"===t)return 100;if(e.textCanvas().style.fontVariationSettings){const n=new RegExp(`\\b${t}s+(d+)`).exec(e.textCanvas().style.fontVariationSettings);return n?parseInt(n[1]):r}return r})),t}_textToPathPoints(e,t,n,r,i,s){({width:r,height:i,options:s}=this._parseArgs(r,i,s));let a=this.textToPaths(e,t,n,r,i,s);const o=(e,t,n,r)=>{if(fn.dist(t.x,t.y,n.x,n.y)>r){let i={x:(t.x+n.x)/2,y:(t.y+n.y)/2};e.push(i),o(e,t,i,r),o(e,i,n,r)}};let l=[],{textSize:u}=this._pInst._renderer.states,c=u/this.data.head.unitsPerEm*500;for(let h=0;h<a.length;h++){let{type:e,data:t}=a[h];if("Z"!==e){let n={x:t[t.length-2],y:t[t.length-1]};"L"===e&&l.length&&!s?.nodivide>0&&o(l,l[l.length-1],n,c),l.push(n)}}return l}_parseArgs(e,t,n={}){return"object"==typeof e?(n=e,e=t=void 0):"object"==typeof t&&(n=t,t=void 0),{width:e,height:t,options:n}}_position(e,t,n,r,i){let{textAlign:s,textLeading:a}=e.states,o=this._measureTextDefault(e,"X").fontBoundingBoxAscent;return t.map((t,l)=>{let u=n.x,c=n.y+l*a+o,h=e._fontWidthSingle(t);if("center"===s?u+=(n.w-h)/2:"right"===s&&(u+=n.w-h),void 0!==r)switch(e.states.rectMode){case Pe:u-=r/2,c-=i/2;break;case Re:u-=r,c-=i}return{text:t,x:u,y:c}})}_lineToGlyphs(e,{scale:t=1,axs:n}={}){if(!this.data)throw Error('No font data available for "'+this.name+'"\nTry downloading a local copy of the font file');let r=Pf.U.shape(this.data,e.text,{axs:n});return e.glyphShapes=r,e.glyphs=this._shapeToPaths(r,e,{scale:t,axs:n}),e}_positionGlyphs(e,t){let n=t?.graphics?._renderer||this._pInst._renderer;const r=this._currentAxes(n),i=Pf.U.shape(this.data,e,{axs:r}),s=[];let a=0;for(const o of i)s.push({x:a,index:o.g,shape:o}),a+=o.ax;return s}_singleShapeToPath(e,{scale:t=1,x:n=0,y:r=0,lineX:i=0,lineY:s=0,axs:a}={}){let o=this.data,l=0,{g:u,ax:c,ay:h,dx:d,dy:p}=e,{crds:f,cmds:m}=Pf.U.glyphToPath(o,u,!0,a),g={path:{commands:[]}};for(let v=0;v<m.length;v++){let e=m[v],a=[e];if(e in Uf){let o=Uf[e];for(let e=0;e<o;e+=2){let o=i+(f[e+l]+n+d)*t,u=s+(f[e+l+1]+r+p)*-t;a.push(o),a.push(u)}l+=o}g.path.commands.push(a)}return{glyph:g,ax:c,ay:h}}_shapeToPaths(e,t,{scale:n=1,axs:r}={}){let i=0,s=0,a=[];if(e.length!==t.text.length)throw Error("Invalid shape data");for(let o=0;o<e.length;o++){const{glyph:l,ax:u,ay:c}=this._singleShapeToPath(e[o],{scale:n,x:i,y:s,lineX:t.x,lineY:t.y,axs:r});a.push(l),i+=u,s+=c}return a}_measureTextDefault(e,t){let{textAlign:n,textBaseline:r}=e.states,i=e.textDrawingContext();i.textAlign="left",i.textBaseline="alphabetic";let s=i.measureText(t);return i.textAlign=n,i.textBaseline=r,s}drawPaths(e,t,n){e.strokeStyle=n?.stroke||e.strokeStyle,e.fillStyle=n?.fill||e.fillStyle,e.beginPath(),t.forEach(([t,...n])=>{"M"===t?e.moveTo(...n):"L"===t?e.lineTo(...n):"C"===t?e.bezierCurveTo(...n):"Q"===t?e.quadraticCurveTo(...n):"Z"===t&&e.closePath()}),n?.fill&&e.fill(),n?.stroke&&e.stroke()}_pathsToCommands(e,t){let n=[];for(let r=0;r<e.length;r++){let{x:i,y:s,path:a}=e[r],{crds:o,cmds:l}=a;for(let e=0,r=0;r<l.length;r++){let a=l[r],u={type:a,data:[]};if("M"===a||"L"===a)u.data.push(i+o[e]*t,s+o[e+1]*-t),e+=2;else if("C"===a){for(let n=0;n<6;n+=2)u.data.push(i+o[e+n]*t,s+o[e+n+1]*-t);e+=6}else if("Q"===a){for(let n=0;n<4;n+=2)u.data.push(i+o[e+n]*t,s+o[e+n+1]*-t);e+=4}n.push(u)}}return n}},$f=e=>e.map(e=>{const t=e[0];switch(t){case"Z":return{type:t};case"M":case"L":{const[,n,r]=e;return{type:t,x:n,y:r}}case"Q":{const[,n,r,i,s]=e;return{type:t,x1:n,y1:r,x:i,y:s}}case"C":{const[,n,r,i,s,a,o]=e;return{type:t,x1:n,y1:r,x2:i,y2:s,x:a,y:o}}default:throw new Error(`Unexpected path command: ${t}`)}}),"undefined"!=typeof p5&&KM(p5,p5.prototype),li(),bi(),Ni(),dh(),Of(),qf={OPERATION:"operation",LITERAL:"literal",VARIABLE:"variable",CONSTANT:"constant",STRUCT:"struct",PHI:"phi",STATEMENT:"statement",ASSIGNMENT:"assignment"},Xf=Object.fromEntries(Object.entries(qf).map(([e,t])=>[t,e])),Yf={[qf.OPERATION]:["opCode","dependsOn","dimension","baseType"],[qf.LITERAL]:["value","dimension","baseType"],[qf.VARIABLE]:["identifier","dimension","baseType"],[qf.CONSTANT]:["value","dimension","baseType"],[qf.STRUCT]:[""],[qf.PHI]:["dependsOn","phiBlocks","dimension","baseType"],[qf.STATEMENT]:["statementType"],[qf.ASSIGNMENT]:["dependsOn"]},Zf={DISCARD:"discard",BREAK:"break",EXPRESSION:"expression",EMPTY:"empty"},Kf={FLOAT:"float",INT:"int",BOOL:"bool",MAT:"mat",DEFER:"defer",SAMPLER2D:"sampler2D"},Qf={[Kf.FLOAT]:3,[Kf.INT]:2,[Kf.BOOL]:1,[Kf.MAT]:0,[Kf.DEFER]:-1,[Kf.SAMPLER2D]:-10},Jf={float1:{fnName:"float",baseType:Kf.FLOAT,dimension:1,priority:3},float2:{fnName:"vec2",baseType:Kf.FLOAT,dimension:2,priority:3},float3:{fnName:"vec3",baseType:Kf.FLOAT,dimension:3,priority:3},float4:{fnName:"vec4",baseType:Kf.FLOAT,dimension:4,priority:3},int1:{fnName:"int",baseType:Kf.INT,dimension:1,priority:2},int2:{fnName:"ivec2",baseType:Kf.INT,dimension:2,priority:2},int3:{fnName:"ivec3",baseType:Kf.INT,dimension:3,priority:2},int4:{fnName:"ivec4",baseType:Kf.INT,dimension:4,priority:2},bool1:{fnName:"bool",baseType:Kf.BOOL,dimension:1,priority:1},bool2:{fnName:"bvec2",baseType:Kf.BOOL,dimension:2,priority:1},bool3:{fnName:"bvec3",baseType:Kf.BOOL,dimension:3,priority:1},bool4:{fnName:"bvec4",baseType:Kf.BOOL,dimension:4,priority:1},mat2:{fnName:"mat2x2",baseType:Kf.MAT,dimension:2,priority:0},mat3:{fnName:"mat3x3",baseType:Kf.MAT,dimension:3,priority:0},mat4:{fnName:"mat4x4",baseType:Kf.MAT,dimension:4,priority:0},defer:{fnName:null,baseType:Kf.DEFER,dimension:null,priority:-1},sampler2D:{fnName:"sampler2D",baseType:Kf.SAMPLER2D,dimension:1,priority:-10}},em=function(e){let t=void 0===e.type?e:e.type;const n={name:e.name,properties:[],typeName:t.typeName};for(const r of t.properties){const e=nm[r.type.typeName];n.properties.push({name:r.name,dataType:e})}return n},tm={FLOAT:{baseType:Kf.FLOAT,dimension:null,priority:3},INT:{baseType:Kf.INT,dimension:null,priority:2},BOOL:{baseType:Kf.BOOL,dimension:null,priority:1}},nm=Object.fromEntries(Object.values(Jf).filter(e=>null!==e.fnName).map(e=>[e.fnName,e])),im=[{arity:"unary",name:"not",symbol:"!",opCode:(rm={Binary:{ADD:0,SUBTRACT:1,MULTIPLY:2,DIVIDE:3,MODULO:4,EQUAL:5,NOT_EQUAL:6,GREATER_THAN:7,GREATER_EQUAL:8,LESS_THAN:9,LESS_EQUAL:10,LOGICAL_AND:11,LOGICAL_OR:12,MEMBER_ACCESS:13},Unary:{LOGICAL_NOT:100,NEGATE:101,PLUS:102,SWIZZLE:103},Nary:{FUNCTION_CALL:200,CONSTRUCTOR:201},ControlFlow:{RETURN:300,JUMP:301,BRANCH_IF_FALSE:302,DISCARD:303,BREAK:304}}).Unary.LOGICAL_NOT},{arity:"unary",name:"neg",symbol:"-",opCode:rm.Unary.NEGATE},{arity:"unary",name:"plus",symbol:"+",opCode:rm.Unary.PLUS},{arity:"binary",name:"add",symbol:"+",opCode:rm.Binary.ADD},{arity:"binary",name:"sub",symbol:"-",opCode:rm.Binary.SUBTRACT},{arity:"binary",name:"mult",symbol:"*",opCode:rm.Binary.MULTIPLY},{arity:"binary",name:"div",symbol:"/",opCode:rm.Binary.DIVIDE},{arity:"binary",name:"mod",symbol:"%",opCode:rm.Binary.MODULO},{arity:"binary",name:"equalTo",symbol:"==",opCode:rm.Binary.EQUAL},{arity:"binary",name:"notEqual",symbol:"!=",opCode:rm.Binary.NOT_EQUAL},{arity:"binary",name:"greaterThan",symbol:">",opCode:rm.Binary.GREATER_THAN},{arity:"binary",name:"greaterEqual",symbol:">=",opCode:rm.Binary.GREATER_EQUAL},{arity:"binary",name:"lessThan",symbol:"<",opCode:rm.Binary.LESS_THAN},{arity:"binary",name:"lessEqual",symbol:"<=",opCode:rm.Binary.LESS_EQUAL},{arity:"binary",name:"and",symbol:"&&",opCode:rm.Binary.LOGICAL_AND},{arity:"binary",name:"or",symbol:"||",opCode:rm.Binary.LOGICAL_OR}],rm.Binary.ADD,rm.Binary.SUBTRACT,rm.Binary.MULTIPLY,rm.Binary.DIVIDE,rm.Binary.MODULO,rm.Binary.EQUAL,rm.Binary.NOT_EQUAL,rm.Binary.GREATER_THAN,rm.Binary.GREATER_EQUAL,rm.Binary.LESS_THAN,rm.Binary.LESS_EQUAL,rm.Binary.LOGICAL_AND,rm.Binary.LOGICAL_OR,sm={},am={},om={};for(const{symbol:e,opCode:n,name:r,arity:i}of im)sm[n]=e,"unary"===i&&(am[e]=r),"binary"===i&&(om[e]=r);lm={GLOBAL:"global",FUNCTION:"function",BRANCH:"branch",IF_COND:"if_cond",IF_BODY:"if_body",ELSE_COND:"else_cond",SCOPE_START:"scope_start",SCOPE_END:"scope_end",FOR:"for",MERGE:"merge",DEFAULT:"default"},Object.fromEntries(Object.entries(lm).map(([e,t])=>[t,e])),um={float1:"float",float2:"vec2",float3:"vec3",float4:"vec4",int1:"int",int2:"ivec2",int3:"ivec3",int4:"ivec4",bool1:"bool",bool2:"bvec2",bool3:"bvec3",bool4:"bvec4",mat2:"mat2x2",mat3:"mat3x3",mat4:"mat4x4"},cm={[lm.DEFAULT]:(e,t,n)=>{const{dag:r,cfg:i}=t,s=i.blockInstructions[e]||[];for(const a of s){const e=r.nodeTypes[a];if(oD(r,a)){const e=hm.generateDeclaration(n,r,a);n.write(e)}e===qf.STATEMENT&&hm.generateStatement(n,r,a),e===qf.ASSIGNMENT&&(hm.generateAssignment(n,r,a),n.visitedNodes.add(a))}},[lm.BRANCH](e,t,n){const{dag:r,cfg:i}=t,s=i.blockInstructions[e]||[];for(const a of s){const e=sD(r,a);if(e.nodeType===qf.PHI){const t=e.dependsOn||[];if(t.length>0){const e=t[0],r=n.tempNames[e];if(r){n.tempNames[a]=r;continue}}const i="T"+n.nextTempID++;n.tempNames[a]=i;const s=aD(r,a),o=hm.getTypeName(s.baseType,s.dimension);n.write(`${o} ${i};`)}}this[lm.DEFAULT](e,t,n)},[lm.IF_COND](e,t,n){const{dag:r,cfg:i}=t,s=i.blockConditions[e],a=hm.generateExpression(n,r,s);n.write(`if (${a})`),this[lm.DEFAULT](e,t,n)},[lm.ELSE_COND](e,t,n){n.write("else"),this[lm.DEFAULT](e,t,n)},[lm.IF_BODY](e,t,n){this[lm.DEFAULT](e,t,n),this.assignPhiNodeValues(e,t,n)},[lm.SCOPE_START](e,t,n){n.write("{"),n.indent++},[lm.SCOPE_END](e,t,n){n.indent--,n.write("}")},[lm.MERGE](e,t,n){this[lm.DEFAULT](e,t,n)},[lm.FUNCTION](e,t,n){this[lm.DEFAULT](e,t,n)},[lm.FOR](e,t,n){const{dag:r,cfg:i}=t,s=i.blockInstructions[e]||[];n.write("for (");const a=n.suppressSemicolon;for(let o=0;o<s.length;o++){const e=s[o],t=sD(r,e);if(n.suppressSemicolon=o===s.length-1,oD(r,e)){const t=hm.generateDeclaration(n,r,e);n.write(t)}t.nodeType===qf.STATEMENT&&hm.generateStatement(n,r,e),t.nodeType===qf.ASSIGNMENT&&(hm.generateAssignment(n,r,e),n.visitedNodes.add(e))}n.suppressSemicolon=a,n.write(")")},assignPhiNodeValues(e,t,n){const{dag:r,cfg:i}=t,s=i.outgoingEdges[e]||[];for(const a of s){const t=i.blockInstructions[a]||[];for(const i of t){const t=sD(r,i);if(t.nodeType===qf.PHI){const s=t.phiBlocks?.indexOf(e);if(-1!==s&&s<t.dependsOn.length){const e=t.dependsOn[s],a=n.tempNames[i];if(a&&null!==e){const t=hm.generateExpression(n,r,e);n.write(`${a} = ${t};`)}}}}}}},hm={hookEntry:e=>`(${e.parameters.flatMap(e=>`${e.qualifiers?.length?e.qualifiers.join(" "):""}${e.type.typeName} ${e.name}`).join(", ")}) {`,getTypeName(e,t){const n=um[e+t];return n||e},generateUniformDeclaration(e,t){return`${this.getTypeName(t.baseType,t.dimension)} ${e}`},generateStatement(e,t,n){const r=sD(t,n),i=e.suppressSemicolon?"":";";if(r.statementType===Zf.DISCARD)e.write(`discard${i}`);else if(r.statementType===Zf.BREAK)e.write(`break${i}`);else if(r.statementType===Zf.EXPRESSION){const n=r.dependsOn[0],s=this.generateExpression(e,t,n);e.write(`${s}${i}`)}else r.statementType===Zf.EMPTY&&e.write(i)},generateAssignment(e,t,n){const r=sD(t,n),i=r.dependsOn[0],s=r.dependsOn[1],a=this.generateExpression(e,t,i),o=this.generateExpression(e,t,s),l=e.suppressSemicolon?"":";";a&&o&&a!==o&&e.write(`${a} = ${o}${l}`)},generateDeclaration(e,t,n){const r=this.generateExpression(e,t,n),i="T"+e.nextTempID++;e.tempNames[n]=i;const s=aD(t,n);return`${this.getTypeName(s.baseType,s.dimension)} ${i} = ${r};`},generateReturnStatement(e,t,n,r){const i=e.dag,s=sD(i,n);if(QM(s.baseType)){const e=r;for(let n=0;n<e.properties.length;n++){const r=e.properties[n],a=this.generateExpression(t,i,s.dependsOn[n]);r.name!==a&&t.write(`${s.identifier}.${r.name} = ${a};`)}}t.write(`return ${this.generateExpression(t,i,n)};`)},generateExpression(e,t,n){const r=sD(t,n);if(e.tempNames?.[n])return e.tempNames[n];switch(r.nodeType){case qf.LITERAL:return r.baseType===Kf.FLOAT?r.value.toFixed(4):r.value;case qf.VARIABLE:if(e.shaderContext&&e.strandsContext?.sharedVariables?.has(r.identifier)){const t=e.strandsContext.sharedVariables.get(r.identifier);"vertex"===e.shaderContext?t.usedInVertex=!0:"fragment"===e.shaderContext&&(t.usedInFragment=!0)}return r.identifier;case qf.OPERATION:const i=r.usedBy.length>0;if(r.opCode===rm.Nary.CONSTRUCTOR)return r.baseType===Kf.SAMPLER2D?this.generateExpression(e,t,r.dependsOn[0]):`${this.getTypeName(r.baseType,r.dimension)}(${r.dependsOn.map(n=>this.generateExpression(e,t,n)).join(", ")})`;if(r.opCode===rm.Nary.FUNCTION_CALL){const n=r.dependsOn.map(n=>this.generateExpression(e,t,n));return`${r.identifier}(${n.join(", ")})`}if(r.opCode===rm.Binary.MEMBER_ACCESS){const[n,i]=r.dependsOn;return`${this.generateExpression(e,t,n)}.${this.generateExpression(e,t,i)}`}if(r.opCode===rm.Unary.SWIZZLE){const n=r.dependsOn[0];return`${this.generateExpression(e,t,n)}.${r.swizzle}`}if(2===r.dependsOn.length){const[n,s]=r.dependsOn,a=this.generateExpression(e,t,n),o=this.generateExpression(e,t,s);if(r.opCode===rm.Binary.MODULO){const e=sD(t,n),r=sD(t,s);return e.baseType===Kf.FLOAT||r.baseType===Kf.FLOAT?`mod(${a}, ${o})`:`(${a} % ${o})`}const l=sm[r.opCode];return i?`(${a} ${l} ${o})`:`${a} ${l} ${o}`}if(r.opCode===rm.Unary.LOGICAL_NOT||r.opCode===rm.Unary.NEGATE||r.opCode===rm.Unary.PLUS){const[n]=r.dependsOn,i=this.generateExpression(e,t,n);return`${sm[r.opCode]}${i}`}case qf.PHI:if(r.identifier)return r.identifier;if(e.tempNames?.[n])return e.tempNames[n];{const n=r.dependsOn.filter(e=>null!==e);if(n.length>0)return this.generateExpression(e,t,n[0]);throw new Error("No valid inputs for node")}case qf.ASSIGNMENT:eD("ASSIGNMENT nodes should not be used as expressions");default:eD(`${Xf[r.nodeType]} code generation not implemented yet`)}},generateBlock(e,t,n){const r=t.cfg.blockTypes[e];(cm[r]||cm[lm.DEFAULT]).call(cm,e,t,n)}},dm=d({"node_modules/estraverse/estraverse.js":e=>{!function e(t){var n,r,i,s,a,o;function l(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?l(n):n);return r}function u(e,t){this.parent=e,this.key=t}function c(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function h(){}function d(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function p(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function f(e,t){for(var n=e.length-1;n>=0;--n)if(e[n].node===t)return!0;return!1}function m(e,t){return(new h).traverse(e,t)}function g(e,t){var n=function(e,t){for(var n,r,i=e.length,s=0;i;)t(e[r=s+(n=i>>>1)])?i=n:(s=r+1,i-=n+1);return s}(t,function(t){return t.range[0]>e.range[0]});return e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),(n-=1)>=0&&(e.extendedRange[0]=t[n].range[1]),e}return n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},r={Break:s={},Skip:a={},Remove:o={}},u.prototype.replace=function(e){this.parent[this.key]=e},u.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},h.prototype.path=function(){var e,t,n,r,i;function s(e,t){if(Array.isArray(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)s(i,this.__leavelist[e].path);return s(i,this.__current.path),i},h.prototype.type=function(){return this.current().type||this.__current.wrap},h.prototype.parents=function(){var e,t,n=[];for(e=1,t=this.__leavelist.length;e<t;++e)n.push(this.__leavelist[e].node);return n},h.prototype.current=function(){return this.__current.node},h.prototype.__execute=function(e,t){var n,r=void 0;return n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},h.prototype.notify=function(e){this.__state=e},h.prototype.skip=function(){this.notify(a)},h.prototype.break=function(){this.notify(s)},h.prototype.remove=function(){this.notify(o)},h.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=i,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},h.prototype.traverse=function(e,t){var n,r,i,o,l,u,h,m,g,v,y,b;for(this.__initialize(e,t),b={},n=this.__worklist,r=this.__leavelist,n.push(new c(e,null,null,null)),r.push(new c(null,null,null,null));n.length;)if((i=n.pop())!==b){if(i.node){if(u=this.__execute(t.enter,i),this.__state===s||u===s)return;if(n.push(b),r.push(i),this.__state===a||u===a)continue;if(l=(o=i.node).type||i.wrap,!(v=this.__keys[l])){if(!this.__fallback)throw new Error("Unknown node type "+l+".");v=this.__fallback(o)}for(m=v.length;(m-=1)>=0;)if(y=o[h=v[m]])if(Array.isArray(y)){for(g=y.length;(g-=1)>=0;)if(y[g]&&!f(r,y[g])){if(p(l,v[m]))i=new c(y[g],[h,g],"Property",null);else{if(!d(y[g]))continue;i=new c(y[g],[h,g],null,null)}n.push(i)}}else if(d(y)){if(f(r,y))continue;n.push(new c(y,h,null,null))}}}else if(i=r.pop(),u=this.__execute(t.leave,i),this.__state===s||u===s)return},h.prototype.replace=function(e,t){var n,r,i,l,h,f,m,g,v,y,b,x,_;function w(e){var t,r,i,s;if(e.ref.remove())for(r=e.ref.key,s=e.ref.parent,t=n.length;t--;)if((i=n[t]).ref&&i.ref.parent===s){if(i.ref.key<r)break;--i.ref.key}}for(this.__initialize(e,t),b={},n=this.__worklist,r=this.__leavelist,f=new c(e,null,null,new u(x={root:e},"root")),n.push(f),r.push(f);n.length;)if((f=n.pop())!==b){if(void 0!==(h=this.__execute(t.enter,f))&&h!==s&&h!==a&&h!==o&&(f.ref.replace(h),f.node=h),this.__state!==o&&h!==o||(w(f),f.node=null),this.__state===s||h===s)return x.root;if((i=f.node)&&(n.push(b),r.push(f),this.__state!==a&&h!==a)){if(l=i.type||f.wrap,!(v=this.__keys[l])){if(!this.__fallback)throw new Error("Unknown node type "+l+".");v=this.__fallback(i)}for(m=v.length;(m-=1)>=0;)if(y=i[_=v[m]])if(Array.isArray(y)){for(g=y.length;(g-=1)>=0;)if(y[g]){if(p(l,v[m]))f=new c(y[g],[_,g],"Property",new u(y,g));else{if(!d(y[g]))continue;f=new c(y[g],[_,g],null,new u(y,g))}n.push(f)}}else d(y)&&n.push(new c(y,_,null,new u(i,_)))}}else if(f=r.pop(),void 0!==(h=this.__execute(t.leave,f))&&h!==s&&h!==a&&h!==o&&f.ref.replace(h),this.__state!==o&&h!==o||w(f),this.__state===s||h===s)return x.root;return x.root},t.Syntax=n,t.traverse=m,t.replace=function(e,t){return(new h).replace(e,t)},t.attachComments=function(e,t,n){var i,s,a,o,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(a=0,s=t.length;a<s;a+=1)(i=l(t[a])).extendedRange=[0,e.range[0]],u.push(i);e.leadingComments=u}return e}for(a=0,s=t.length;a<s;a+=1)u.push(g(l(t[a]),n));return o=0,m(e,{enter:function(e){for(var t;o<u.length&&!((t=u[o]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(o,1)):o+=1;return o===u.length?r.Break:u[o].extendedRange[0]>e.range[1]?r.Skip:void 0}}),o=0,m(e,{leave:function(e){for(var t;o<u.length&&(t=u[o],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(o,1)):o+=1;return o===u.length?r.Break:u[o].extendedRange[0]>e.range[1]?r.Skip:void 0}}),e},t.VisitorKeys=i,t.VisitorOption=r,t.Controller=h,t.cloneEnvironment=function(){return e({})},t}(e)}}),pm=d({"node_modules/esutils/lib/ast.js":(e,t)=>{!function(){function e(e){if(null==e)return!1;switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}t.exports={isExpression:function(e){if(null==e)return!1;switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1},isStatement:e,isIterationStatement:function(e){if(null==e)return!1;switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1},isSourceElement:function(t){return e(t)||null!=t&&"FunctionDeclaration"===t.type},isProblematicIfStatement:function(e){var t;if("IfStatement"!==e.type)return!1;if(null==e.alternate)return!1;t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0;t=n(t)}while(t);return!1},trailingStatement:n}}()}}),fm=d({"node_modules/esutils/lib/code.js":(e,t)=>{!function(){var e,n,r,i,s,a={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function o(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(Math.floor((e-65536)/1024)+55296)+String.fromCharCode((e-65536)%1024+56320)}for(e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],r=new Array(128),s=0;s<128;++s)r[s]=s>=97&&s<=122||s>=65&&s<=90||36===s||95===s;for(i=new Array(128),s=0;s<128;++s)i[s]=s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||36===s||95===s;t.exports={isDecimalDigit:function(e){return 48<=e&&e<=57},isHexDigit:function(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function(e){return e>=48&&e<=55},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&n.indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return e<128?r[e]:a.NonAsciiIdentifierStart.test(o(e))},isIdentifierPartES5:function(e){return e<128?i[e]:a.NonAsciiIdentifierPart.test(o(e))},isIdentifierStartES6:function(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(o(t))},isIdentifierPartES6:function(t){return t<128?i[t]:e.NonAsciiIdentifierPart.test(o(t))}}}()}}),mm=d({"node_modules/esutils/lib/keyword.js":(e,t)=>{!function(){var e=fm();function n(e,t){return!(!t&&"yield"===e)&&r(e,t)}function r(e,t){if(t&&function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function i(e,t){return"null"===e||"true"===e||"false"===e||n(e,t)}function s(e,t){return"null"===e||"true"===e||"false"===e||r(e,t)}function a(t){var n,r,i;if(0===t.length)return!1;if(i=t.charCodeAt(0),!e.isIdentifierStartES5(i))return!1;for(n=1,r=t.length;n<r;++n)if(i=t.charCodeAt(n),!e.isIdentifierPartES5(i))return!1;return!0}function o(e,t){return 1024*(e-55296)+(t-56320)+65536}function l(t){var n,r,i,s,a;if(0===t.length)return!1;for(a=e.isIdentifierStartES6,n=0,r=t.length;n<r;++n){if(55296<=(i=t.charCodeAt(n))&&i<=56319){if(++n>=r)return!1;if(!(56320<=(s=t.charCodeAt(n))&&s<=57343))return!1;i=o(i,s)}if(!a(i))return!1;a=e.isIdentifierPartES6}return!0}t.exports={isKeywordES5:n,isKeywordES6:r,isReservedWordES5:i,isReservedWordES6:s,isRestrictedWord:function(e){return"eval"===e||"arguments"===e},isIdentifierNameES5:a,isIdentifierNameES6:l,isIdentifierES5:function(e,t){return a(e)&&!i(e,t)},isIdentifierES6:function(e,t){return l(e)&&!s(e,t)}}}()}}),gm=d({"node_modules/esutils/lib/utils.js":e=>{e.ast=pm(),e.code=fm(),e.keyword=mm()}}),vm=d({"node_modules/source-map/lib/base64.js":e=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");e.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},e.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}}}),ym=d({"node_modules/source-map/lib/base64-vlq.js":e=>{var t=vm();e.encode=function(e){var n,r="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{n=31&i,(i>>>=5)>0&&(n|=32),r+=t.encode(n)}while(i>0);return r},e.decode=function(e,n,r){var i,s,a,o,l=e.length,u=0,c=0;do{if(n>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=t.decode(e.charCodeAt(n++))))throw new Error("Invalid base64 digit: "+e.charAt(n-1));i=!!(32&s),u+=(s&=31)<<c,c+=5}while(i);r.value=(o=(a=u)>>1,1&~a?o:-o),r.rest=n}}}),bm=d({"node_modules/source-map/lib/util.js":e=>{e.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function r(e){var n=e.match(t);return n?{scheme:n[1],auth:n[2],host:n[3],port:n[4],path:n[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(t){var n=t,s=r(t);if(s){if(!s.path)return t;n=s.path}for(var a,o=e.isAbsolute(n),l=n.split(/\/+/),u=0,c=l.length-1;c>=0;c--)"."===(a=l[c])?l.splice(c,1):".."===a?u++:u>0&&(""===a?(l.splice(c+1,u),u=0):(l.splice(c,2),u--));return""===(n=l.join("/"))&&(n=o?"/":"."),s?(s.path=n,i(s)):n}function a(e,t){""===e&&(e="."),""===t&&(t=".");var a=r(t),o=r(e);if(o&&(e=o.path||"/"),a&&!a.scheme)return o&&(a.scheme=o.scheme),i(a);if(a||t.match(n))return t;if(o&&!o.host&&!o.path)return o.host=t,i(o);var l="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=l,i(o)):l}e.urlParse=r,e.urlGenerate=i,e.normalize=s,e.join=a,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var o=!("__proto__"in Object.create(null));function l(e){return e}function u(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function c(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=o?l:function(e){return u(e)?"$"+e:e},e.fromSetString=o?l:function(e){return u(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,n){var r=c(e.source,t.source);return 0!==r||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)||n||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=e.generatedLine-t.generatedLine)?r:c(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=c(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:c(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=c(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:c(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){var o=r(n);if(!o)throw new Error("sourceMapURL could not be parsed");if(o.path){var l=o.path.lastIndexOf("/");l>=0&&(o.path=o.path.substring(0,l+1))}t=a(i(o),t)}return s(t)}}}),xm=d({"node_modules/source-map/lib/array-set.js":e=>{var t=bm(),n=Object.prototype.hasOwnProperty,r="undefined"!=typeof Map;function i(){this._array=[],this._set=r?new Map:Object.create(null)}i.fromArray=function(e,t){for(var n=new i,r=0,s=e.length;r<s;r++)n.add(e[r],t);return n},i.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(e,i){var s=r?e:t.toSetString(e),a=r?this.has(e):n.call(this._set,s),o=this._array.length;a&&!i||this._array.push(e),a||(r?this._set.set(e,o):this._set[s]=o)},i.prototype.has=function(e){if(r)return this._set.has(e);var i=t.toSetString(e);return n.call(this._set,i)},i.prototype.indexOf=function(e){if(r){var i=this._set.get(e);if(i>=0)return i}else{var s=t.toSetString(e);if(n.call(this._set,s))return this._set[s]}throw new Error('"'+e+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},e.ArraySet=i}}),_m=d({"node_modules/source-map/lib/mapping-list.js":e=>{var t=bm();function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}n.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},n.prototype.add=function(e){var n,r,i,s,a,o;n=this._last,r=e,i=n.generatedLine,s=r.generatedLine,a=n.generatedColumn,o=r.generatedColumn,s>i||s==i&&o>=a||t.compareByGeneratedPositionsInflated(n,r)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.MappingList=n}}),wm=d({"node_modules/source-map/lib/source-map-generator.js":e=>{var t=ym(),n=bm(),r=xm().ArraySet,i=_m().MappingList;function s(e){e||(e={}),this._file=n.getArg(e,"file",null),this._sourceRoot=n.getArg(e,"sourceRoot",null),this._skipValidation=n.getArg(e,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new i,this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(e){var t=e.sourceRoot,r=new s({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=t&&(i.source=n.relative(t,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),r.addMapping(i)}),e.sources.forEach(function(i){var s=i;null!==t&&(s=n.relative(t,i)),r._sources.has(s)||r._sources.add(s);var a=e.sourceContentFor(i);null!=a&&r.setSourceContent(i,a)}),r},s.prototype.addMapping=function(e){var t=n.getArg(e,"generated"),r=n.getArg(e,"original",null),i=n.getArg(e,"source",null),s=n.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,i,s),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=s&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:i,name:s})},s.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=n.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(e,t,i){var s=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');s=e.file}var a=this._sourceRoot;null!=a&&(s=n.relative(a,s));var o=new r,l=new r;this._mappings.unsortedForEach(function(t){if(t.source===s&&null!=t.originalLine){var r=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=r.source&&(t.source=r.source,null!=i&&(t.source=n.join(i,t.source)),null!=a&&(t.source=n.relative(a,t.source)),t.originalLine=r.line,t.originalColumn=r.column,null!=r.name&&(t.name=r.name))}var u=t.source;null==u||o.has(u)||o.add(u);var c=t.name;null==c||l.has(c)||l.add(c)},this),this._sources=o,this._names=l,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=i&&(t=n.join(i,t)),null!=a&&(t=n.relative(a,t)),this.setSourceContent(t,r))},this)},s.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},s.prototype._serializeMappings=function(){for(var e,r,i,s,a=0,o=1,l=0,u=0,c=0,h=0,d="",p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(e="",(r=p[f]).generatedLine!==o)for(a=0;r.generatedLine!==o;)e+=";",o++;else if(f>0){if(!n.compareByGeneratedPositionsInflated(r,p[f-1]))continue;e+=","}e+=t.encode(r.generatedColumn-a),a=r.generatedColumn,null!=r.source&&(s=this._sources.indexOf(r.source),e+=t.encode(s-h),h=s,e+=t.encode(r.originalLine-1-u),u=r.originalLine-1,e+=t.encode(r.originalColumn-l),l=r.originalColumn,null!=r.name&&(i=this._names.indexOf(r.name),e+=t.encode(i-c),c=i)),d+=e}return d},s.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=n.relative(t,e));var r=n.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)},s.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.SourceMapGenerator=s}}),Sm=d({"node_modules/source-map/lib/binary-search.js":e=>{function t(n,r,i,s,a,o){var l=Math.floor((r-n)/2)+n,u=a(i,s[l],!0);return 0===u?l:u>0?r-l>1?t(l,r,i,s,a,o):o==e.LEAST_UPPER_BOUND?r<s.length?r:-1:l:l-n>1?t(n,l,i,s,a,o):o==e.LEAST_UPPER_BOUND?l:n<0?-1:n}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(n,r,i,s){if(0===r.length)return-1;var a=t(-1,r.length,n,r,i,s||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===i(r[a],r[a-1],!0);)--a;return a}}}),Em=d({"node_modules/source-map/lib/quick-sort.js":e=>{function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,r,i,s){if(i<s){var a=i-1;t(e,(c=i,h=s,Math.round(c+Math.random()*(h-c))),s);for(var o=e[s],l=i;l<s;l++)r(e[l],o)<=0&&t(e,a+=1,l);t(e,a+1,l);var u=a+1;n(e,r,i,u-1),n(e,r,u+1,s)}var c,h}e.quickSort=function(e,t){n(e,t,0,e.length-1)}}}),Cm=d({"node_modules/source-map/lib/source-map-consumer.js":e=>{var t=bm(),n=Sm(),r=xm().ArraySet,i=ym(),s=Em().quickSort;function a(e,n){var r=e;return"string"==typeof e&&(r=t.parseSourceMapInput(e)),null!=r.sections?new u(r,n):new o(r,n)}function o(e,n){var i=e;"string"==typeof e&&(i=t.parseSourceMapInput(e));var s=t.getArg(i,"version"),a=t.getArg(i,"sources"),o=t.getArg(i,"names",[]),l=t.getArg(i,"sourceRoot",null),u=t.getArg(i,"sourcesContent",null),c=t.getArg(i,"mappings"),h=t.getArg(i,"file",null);if(s!=this._version)throw new Error("Unsupported version: "+s);l&&(l=t.normalize(l)),a=a.map(String).map(t.normalize).map(function(e){return l&&t.isAbsolute(l)&&t.isAbsolute(e)?t.relative(l,e):e}),this._names=r.fromArray(o.map(String),!0),this._sources=r.fromArray(a,!0),this._absoluteSources=this._sources.toArray().map(function(e){return t.computeSourceURL(l,e,n)}),this.sourceRoot=l,this.sourcesContent=u,this._mappings=c,this._sourceMapURL=n,this.file=h}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function u(e,n){var i=e;"string"==typeof e&&(i=t.parseSourceMapInput(e));var s=t.getArg(i,"version"),o=t.getArg(i,"sections");if(s!=this._version)throw new Error("Unsupported version: "+s);this._sources=new r,this._names=new r;var l={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var r=t.getArg(e,"offset"),i=t.getArg(r,"line"),s=t.getArg(r,"column");if(i<l.line||i===l.line&&s<l.column)throw new Error("Section offsets must be ordered and non-overlapping.");return l=r,{generatedOffset:{generatedLine:i+1,generatedColumn:s+1},consumer:new a(t.getArg(e,"map"),n)}})}a.fromSourceMap=function(e,t){return o.fromSourceMap(e,t)},a.prototype._version=3,a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),a.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},a.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.prototype.eachMapping=function(e,n,r){var i,s=n||null;switch(r||a.GENERATED_ORDER){case a.GENERATED_ORDER:i=this._generatedMappings;break;case a.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;i.map(function(e){var n=null===e.source?null:this._sources.at(e.source);return{source:n=t.computeSourceURL(o,n,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,s)},a.prototype.allGeneratedPositionsFor=function(e){var r=t.getArg(e,"line"),i={source:t.getArg(e,"source"),originalLine:r,originalColumn:t.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var s=[],a=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,n.LEAST_UPPER_BOUND);if(a>=0){var o=this._originalMappings[a];if(void 0===e.column)for(var l=o.originalLine;o&&o.originalLine===l;)s.push({line:t.getArg(o,"generatedLine",null),column:t.getArg(o,"generatedColumn",null),lastColumn:t.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:t.getArg(o,"generatedLine",null),column:t.getArg(o,"generatedColumn",null),lastColumn:t.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a]}return s},e.SourceMapConsumer=a,o.prototype=Object.create(a.prototype),o.prototype.consumer=a,o.prototype._findSourceIndex=function(e){var n,r=e;if(null!=this.sourceRoot&&(r=t.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==e)return n;return-1},o.fromSourceMap=function(e,n){var i=Object.create(o.prototype),a=i._names=r.fromArray(e._names.toArray(),!0),u=i._sources=r.fromArray(e._sources.toArray(),!0);i.sourceRoot=e._sourceRoot,i.sourcesContent=e._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=e._file,i._sourceMapURL=n,i._absoluteSources=i._sources.toArray().map(function(e){return t.computeSourceURL(i.sourceRoot,e,n)});for(var c=e._mappings.toArray().slice(),h=i.__generatedMappings=[],d=i.__originalMappings=[],p=0,f=c.length;p<f;p++){var m=c[p],g=new l;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=u.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=a.indexOf(m.name)),d.push(g)),h.push(g)}return s(i.__originalMappings,t.compareByOriginalPositions),i},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),o.prototype._parseMappings=function(e,n){for(var r,a,o,u,c,h=1,d=0,p=0,f=0,m=0,g=0,v=e.length,y=0,b={},x={},_=[],w=[];y<v;)if(";"===e.charAt(y))h++,y++,d=0;else if(","===e.charAt(y))y++;else{for((r=new l).generatedLine=h,u=y;u<v&&!this._charIsMappingSeparator(e,u);u++);if(o=b[a=e.slice(y,u)])y+=a.length;else{for(o=[];y<u;)i.decode(e,y,x),c=x.value,y=x.rest,o.push(c);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");b[a]=o}r.generatedColumn=d+o[0],d=r.generatedColumn,o.length>1&&(r.source=m+o[1],m+=o[1],r.originalLine=p+o[2],p=r.originalLine,r.originalLine+=1,r.originalColumn=f+o[3],f=r.originalColumn,o.length>4&&(r.name=g+o[4],g+=o[4])),w.push(r),"number"==typeof r.originalLine&&_.push(r)}s(w,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,s(_,t.compareByOriginalPositions),this.__originalMappings=_},o.prototype._findMapping=function(e,t,r,i,s,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return n.search(e,t,s,a)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var n={generatedLine:t.getArg(e,"line"),generatedColumn:t.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(e,"bias",a.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var s=t.getArg(i,"source",null);null!==s&&(s=this._sources.at(s),s=t.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var o=t.getArg(i,"name",null);return null!==o&&(o=this._names.at(o)),{source:s,line:t.getArg(i,"originalLine",null),column:t.getArg(i,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},o.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i,s=e;if(null!=this.sourceRoot&&(s=t.relative(this.sourceRoot,s)),null!=this.sourceRoot&&(i=t.urlParse(this.sourceRoot))){var a=s.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!i.path||"/"==i.path)&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(n)return null;throw new Error('"'+s+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var n=t.getArg(e,"source");if((n=this._findSourceIndex(n))<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:t.getArg(e,"line"),originalColumn:t.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(e,"bias",a.GREATEST_LOWER_BOUND));if(i>=0){var s=this._originalMappings[i];if(s.source===r.source)return{line:t.getArg(s,"generatedLine",null),column:t.getArg(s,"generatedColumn",null),lastColumn:t.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},e.BasicSourceMapConsumer=o,u.prototype=Object.create(a.prototype),u.prototype.constructor=a,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),u.prototype.originalPositionFor=function(e){var r={generatedLine:t.getArg(e,"line"),generatedColumn:t.getArg(e,"column")},i=n.search(r,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),s=this._sections[i];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(-1!==r.consumer._findSourceIndex(t.getArg(e,"source"))){var i=r.consumer.generatedPositionFor(e);if(i)return{line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},u.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],a=i.consumer._generatedMappings,o=0;o<a.length;o++){var l=a[o],u=i.consumer._sources.at(l.source);u=t.computeSourceURL(i.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;l.name&&(c=i.consumer._names.at(l.name),this._names.add(c),c=this._names.indexOf(c));var h={source:u,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:c};this.__generatedMappings.push(h),"number"==typeof h.originalLine&&this.__originalMappings.push(h)}s(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),s(this.__originalMappings,t.compareByOriginalPositions)},e.IndexedSourceMapConsumer=u}}),Am=d({"node_modules/source-map/lib/source-node.js":e=>{var t=wm().SourceMapGenerator,n=bm(),r=/(\r?\n)/,i="$$$isSourceNode$$$";function s(e,t,n,r,s){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==s?null:s,this[i]=!0,null!=r&&this.add(r)}s.fromStringWithSourceMap=function(e,t,i){var a=new s,o=e.split(r),l=0,u=function(){return e()+(e()||"");function e(){return l<o.length?o[l++]:void 0}},c=1,h=0,d=null;return t.eachMapping(function(e){if(null!==d){if(!(c<e.generatedLine)){var t=(n=o[l]||"").substr(0,e.generatedColumn-h);return o[l]=n.substr(e.generatedColumn-h),h=e.generatedColumn,p(d,t),void(d=e)}p(d,u()),c++,h=0}for(;c<e.generatedLine;)a.add(u()),c++;if(h<e.generatedColumn){var n=o[l]||"";a.add(n.substr(0,e.generatedColumn)),o[l]=n.substr(e.generatedColumn),h=e.generatedColumn}d=e},this),l<o.length&&(d&&p(d,u()),a.add(o.splice(l).join(""))),t.sources.forEach(function(e){var r=t.sourceContentFor(e);null!=r&&(null!=i&&(e=n.join(i,e)),a.setSourceContent(e,r))}),a;function p(e,t){if(null===e||void 0===e.source)a.add(t);else{var r=i?n.join(i,e.source):e.source;a.add(new s(e.originalLine,e.originalColumn,r,t,e.name))}}},s.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},s.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[i]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},s.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[i]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},s.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[i]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},s.prototype.setSourceContent=function(e,t){this.sourceContents[n.toSetString(e)]=t},s.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][i]&&this.children[t].walkSourceContents(e);var s=Object.keys(this.sourceContents);for(t=0,r=s.length;t<r;t++)e(n.fromSetString(s[t]),this.sourceContents[s[t]])},s.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},s.prototype.toStringWithSourceMap=function(e){var n={code:"",line:1,column:0},r=new t(e),i=!1,s=null,a=null,o=null,l=null;return this.walk(function(e,t){n.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&a===t.line&&o===t.column&&l===t.name||r.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name}),s=t.source,a=t.line,o=t.column,l=t.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),s=null,i=!1);for(var u=0,c=e.length;u<c;u++)10===e.charCodeAt(u)?(n.line++,n.column=0,u+1===c?(s=null,i=!1):i&&r.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:n.line,column:n.column},name:t.name})):n.column++}),this.walkSourceContents(function(e,t){r.setSourceContent(e,t)}),{code:n.code,map:r}},e.SourceNode=s}}),Tm=d({"node_modules/source-map/source-map.js":e=>{e.SourceMapGenerator=wm().SourceMapGenerator,e.SourceMapConsumer=Cm().SourceMapConsumer,e.SourceNode=Am().SourceNode}}),Mm=p({bin:()=>Im,default:()=>Hm,dependencies:()=>Um,description:()=>km,devDependencies:()=>Vm,engines:()=>Pm,files:()=>Rm,homepage:()=>Nm,license:()=>jm,main:()=>Fm,maintainers:()=>Om,name:()=>Dm,optionalDependencies:()=>zm,repository:()=>Bm,scripts:()=>Gm,version:()=>Lm}),Wm=h({"node_modules/escodegen/package.json":()=>{Hm={name:Dm="escodegen",description:km="ECMAScript code generator",homepage:Nm="http://github.com/estools/escodegen",main:Fm="escodegen.js",bin:Im={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:Rm=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:Lm="2.1.0",engines:Pm={node:">=6.0"},maintainers:Om=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:Bm={type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:Um={estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1"},optionalDependencies:zm={"source-map":"~0.6.1"},devDependencies:Vm={acorn:"^8.0.4",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^4.0.2","gulp-eslint":"^6.0.0","gulp-mocha":"^7.0.2",minimist:"^1.2.5",optionator:"^0.9.1",semver:"^7.3.4"},license:jm="BSD-2-Clause",scripts:Gm={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}}}),qm=m(($m=d({"node_modules/escodegen/escodegen.js":e=>{!function(){var t,n,r,i,s,a,o,l,u,c,h,d,p,f,m,v,y,b,x,_,w,S,E,C,A=dm(),T=gm();function M(e){return Y.Statement.hasOwnProperty(e.type)}t=A.Syntax,r={"??":(n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22}).Coalesce,"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var D=32,k=33;function N(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function F(e){var t=e.length;return t&&T.code.isLineTerminator(e.charCodeAt(t-1))}function I(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function R(e,t){var n,r;function i(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(n in t)t.hasOwnProperty(n)&&(i(r=t[n])?i(e[n])?R(e[n],r):e[n]=R({},r):e[n]=r);return e}function L(e,t){return 8232==(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function P(e,t){var n;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(n=e.toString(16).toUpperCase(),o||e>255?"\\u"+"0000".slice(n.length)+n:0!==e||T.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(n.length)+n:"\\0")}function O(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}function B(e){var t,n,r,i="";for(t=0,n=e.length;t<n;++t)r=e[t],i+=Array.isArray(r)?B(r):r;return i}function U(e,t){if(!_)return Array.isArray(e)?B(e):e;if(null==t){if(e instanceof i)return e;t={}}return null==t.loc?new i(null,null,_,e,t.name||null):new i(t.loc.start.line,t.loc.start.column,!0===_?t.loc.source||null:_,e,t.name||null)}function z(){return p||" "}function V(e,t){var n,r,i,s=U(e).toString();return 0===s.length?[t]:0===(n=U(t).toString()).length?[e]:(r=s.charCodeAt(s.length-1),i=n.charCodeAt(0),(43===r||45===r)&&r===i||T.code.isIdentifierPartES5(r)&&T.code.isIdentifierPartES5(i)||47===r&&105===i?[e,z(),t]:T.code.isWhiteSpace(r)||T.code.isLineTerminator(r)||T.code.isWhiteSpace(i)||T.code.isLineTerminator(i)?[e,t]:[e,p,t])}function j(e){return[s,e]}function G(e){var t=s;e(s+=a),s=t}function H(e,t){if("Line"===e.type){if(F(e.value))return"//"+e.value;var n="//"+e.value;return S||(n+="\n"),n}return b.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?function(e,t){var n,r,i,a,o,l,u=e.split(/\r\n|[\r\n]/),c=Number.MAX_VALUE;for(n=1,r=u.length;n<r;++n){for(i=u[n],a=0;a<i.length&&T.code.isWhiteSpace(i.charCodeAt(a));)++a;c>a&&(c=a)}for(void 0!==t?(o=s,"*"===u[1][c]&&(t+=" "),s=t):(1&c&&--c,o=s),n=1,r=u.length;n<r;++n)l=U(j(u[n].slice(c))),u[n]=_?l.join(""):l;return s=o,u.join("\n")}("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function W(e,n){var r,i,o,l,u,c,h,d,p,f,m,g;if(e.leadingComments&&e.leadingComments.length>0){if(l=n,S){for(n=[],d=(o=e.leadingComments[0]).extendedRange,p=o.range,(g=((m=w.substring(d[0],p[0])).match(/\n/g)||[]).length)>0?(n.push(N("\n",g)),n.push(j(H(o)))):(n.push(m),n.push(H(o))),f=p,r=1,i=e.leadingComments.length;r<i;r++)p=(o=e.leadingComments[r]).range,g=(w.substring(f[1],p[0]).match(/\n/g)||[]).length,n.push(N("\n",g)),n.push(j(H(o))),f=p;g=(w.substring(p[1],d[1]).match(/\n/g)||[]).length,n.push(N("\n",g))}else for(o=e.leadingComments[0],n=[],v&&e.type===t.Program&&0===e.body.length&&n.push("\n"),n.push(H(o)),F(U(n).toString())||n.push("\n"),r=1,i=e.leadingComments.length;r<i;++r)F(U(h=[H(o=e.leadingComments[r])]).toString())||h.push("\n"),n.push(j(h));n.push(j(l))}if(e.trailingComments)if(S)d=(o=e.trailingComments[0]).extendedRange,p=o.range,(g=((m=w.substring(d[0],p[0])).match(/\n/g)||[]).length)>0?(n.push(N("\n",g)),n.push(j(H(o)))):(n.push(m),n.push(H(o)));else for(u=!F(U(n).toString()),c=N(" ",function(e){var t;for(t=e.length-1;t>=0&&!T.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}(U([s,n,a]).toString())),r=0,i=e.trailingComments.length;r<i;++r)o=e.trailingComments[r],u?(n=0===r?[n,a]:[n,c]).push(H(o,c)):n=[n,j(H(o))],r===i-1||F(U(n).toString())||(n=[n,"\n"]);return n}function $(e,t,n){var r,i=0;for(r=e;r<t;r++)"\n"===w[r]&&i++;for(r=1;r<i;r++)n.push(d)}function q(e,t,n){return t<n?["(",e,")"]:e}function X(e){var t,n,r=e.split(/\r\n|\n/);for(t=1,n=r.length;t<n;t++)r[t]=d+s+r[t];return r}function Y(){}function Z(e){return U(e.name,e)}function K(e,t){return e.async?"async"+(t?z():p):""}function Q(e){return e.generator&&!b.moz.starlessGenerator?"*"+p:""}function J(e){var t=e.value,n="";return t.async&&(n+=K(t,!e.computed)),t.generator&&(n+=Q(t)?"*":""),n}function ee(e){var t=new Y;if(M(e))return t.generateStatement(e,1);if(function(e){return Y.Expression.hasOwnProperty(e.type)}(e))return t.generateExpression(e,n.Sequence,7);throw new Error("Unknown node type: "+e.type)}Y.prototype.maybeBlock=function(e,n){var r,i,s=this;return i=!b.comment||!e.leadingComments,e.type===t.BlockStatement&&i?[p,this.generateStatement(e,n)]:e.type===t.EmptyStatement&&i?";":(G(function(){r=[d,j(s.generateStatement(e,n))]}),r)},Y.prototype.maybeBlockSuffix=function(e,n){var r=F(U(n).toString());return e.type!==t.BlockStatement||b.comment&&e.leadingComments||r?r?[n,s]:[n,d,s]:[n,p]},Y.prototype.generatePattern=function(e,n,r){return e.type===t.Identifier?Z(e):this.generateExpression(e,n,r)},Y.prototype.generateFunctionParams=function(e){var r,i,s,a=!1;if(e.type!==t.ArrowFunctionExpression||e.rest||e.defaults&&0!==e.defaults.length||1!==e.params.length||e.params[0].type!==t.Identifier){for((s=e.type===t.ArrowFunctionExpression?[K(e,!1)]:[]).push("("),e.defaults&&(a=!0),r=0,i=e.params.length;r<i;++r)a&&e.defaults[r]?s.push(this.generateAssignment(e.params[r],e.defaults[r],"=",n.Assignment,7)):s.push(this.generatePattern(e.params[r],n.Assignment,7)),r+1<i&&s.push(","+p);e.rest&&(e.params.length&&s.push(","+p),s.push("..."),s.push(Z(e.rest))),s.push(")")}else s=[K(e,!0),Z(e.params[0])];return s},Y.prototype.generateFunctionBody=function(e){var r,i=this.generateFunctionParams(e);return e.type===t.ArrowFunctionExpression&&(i.push(p),i.push("=>")),e.expression?(i.push(p),"{"===(r=this.generateExpression(e.body,n.Assignment,7)).toString().charAt(0)&&(r=["(",r,")"]),i.push(r)):i.push(this.maybeBlock(e.body,9)),i},Y.prototype.generateIterationForStatement=function(e,r,i){var s=["for"+(r.await?z()+"await":"")+p+"("],a=this;return G(function(){r.left.type===t.VariableDeclaration?G(function(){s.push(r.left.kind+z()),s.push(a.generateStatement(r.left.declarations[0],0))}):s.push(a.generateExpression(r.left,n.Call,7)),s=V(s,e),s=[V(s,a.generateExpression(r.right,n.Assignment,7)),")"]}),s.push(this.maybeBlock(r.body,i)),s},Y.prototype.generatePropertyKey=function(e,t){var r=[];return t&&r.push("["),r.push(this.generateExpression(e,n.Assignment,7)),t&&r.push("]"),r},Y.prototype.generateAssignment=function(e,t,r,i,s){return n.Assignment<i&&(s|=1),q([this.generateExpression(e,n.Call,s),p+r+p,this.generateExpression(t,n.Assignment,s)],n.Assignment,i)},Y.prototype.semicolon=function(e){return!m&&e&D?"":";"},Y.Statement={BlockStatement:function(e,t){var n,r,i=["{",d],s=this;return G(function(){0===e.body.length&&S&&(n=e.range)[1]-n[0]>2&&("\n"===(r=w.substring(n[0]+1,n[1]-1))[0]&&(i=["{"]),i.push(r));var a,o,l,u=1;for(8&t&&(u|=16),a=0,o=e.body.length;a<o;++a)S&&(0===a&&(e.body[0].leadingComments&&(n=e.body[0].leadingComments[0].extendedRange,"\n"===(r=w.substring(n[0],n[1]))[0]&&(i=["{"])),e.body[0].leadingComments||$(e.range[0],e.body[0].range[0],i)),a>0&&(e.body[a-1].trailingComments||e.body[a].leadingComments||$(e.body[a-1].range[1],e.body[a].range[0],i))),a===o-1&&(u|=D),l=e.body[a].leadingComments&&S?s.generateStatement(e.body[a],u):j(s.generateStatement(e.body[a],u)),i.push(l),F(U(l).toString())||S&&a<o-1&&e.body[a+1].leadingComments||i.push(d),S&&a===o-1&&(e.body[a].trailingComments||$(e.body[a].range[1],e.range[1],i))}),i.push(j("}")),i},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(e,t){var r=["{",d],i=this;return G(function(t){var s,a;for(s=0,a=e.body.length;s<a;++s)r.push(t),r.push(i.generateExpression(e.body[s],n.Sequence,7)),s+1<a&&r.push(d)}),F(U(r).toString())||r.push(d),r.push(s),r.push("}"),r},ClassDeclaration:function(e,t){var r,i=["class"];return e.id&&(i=V(i,this.generateExpression(e.id,n.Sequence,7))),e.superClass&&(r=V("extends",this.generateExpression(e.superClass,n.Unary,7)),i=V(i,r)),i.push(p),i.push(this.generateStatement(e.body,k)),i},DirectiveStatement:function(e,t){return b.raw&&e.raw?e.raw+this.semicolon(t):function(e){var t,n,r,i="double"===c?'"':"'";for(t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t))){i='"';break}if(34===r){i="'";break}92===r&&++t}return i+e+i}(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var r=V("do",this.maybeBlock(e.body,1));return V(r=this.maybeBlockSuffix(e.body,r),["while"+p+"(",this.generateExpression(e.test,n.Sequence,7),")"+this.semicolon(t)])},CatchClause:function(e,t){var r,i=this;return G(function(){var t;e.param?(r=["catch"+p+"(",i.generateExpression(e.param,n.Sequence,7),")"],e.guard&&(t=i.generateExpression(e.guard,n.Sequence,7),r.splice(2,0," if ",t))):r=["catch"]}),r.push(this.maybeBlock(e.body,1)),r},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDefaultDeclaration:function(e,t){var r=["export"],i=t&D?k:1;return r=V(r,"default"),r=M(e.declaration)?V(r,this.generateStatement(e.declaration,i)):V(r,this.generateExpression(e.declaration,n.Assignment,7)+this.semicolon(t))},ExportNamedDeclaration:function(e,r){var i,a=["export"],o=this;return i=r&D?k:1,e.declaration?V(a,this.generateStatement(e.declaration,i)):(e.specifiers&&(0===e.specifiers.length?a=V(a,"{"+p+"}"):e.specifiers[0].type===t.ExportBatchSpecifier?a=V(a,this.generateExpression(e.specifiers[0],n.Sequence,7)):(a=V(a,"{"),G(function(t){var r,i;for(a.push(d),r=0,i=e.specifiers.length;r<i;++r)a.push(t),a.push(o.generateExpression(e.specifiers[r],n.Sequence,7)),r+1<i&&a.push(","+d)}),F(U(a).toString())||a.push(d),a.push(s+"}")),e.source?a=V(a,["from"+p,this.generateExpression(e.source,n.Sequence,7),this.semicolon(r)]):a.push(this.semicolon(r))),a)},ExportAllDeclaration:function(e,t){return["export"+p,"*"+p,"from"+p,this.generateExpression(e.source,n.Sequence,7),this.semicolon(t)]},ExpressionStatement:function(e,r){var i,s,a,o;return 123===(s=U(i=[this.generateExpression(e.expression,n.Sequence,7)]).toString()).charCodeAt(0)||"class"===(a=s).slice(0,5)&&(123===(o=a.charCodeAt(5))||T.code.isWhiteSpace(o)||T.code.isLineTerminator(o))||function(e){var t;return"function"===e.slice(0,8)&&(40===(t=e.charCodeAt(8))||T.code.isWhiteSpace(t)||42===t||T.code.isLineTerminator(t))}(s)||function(e){var t,n,r;if("async"!==e.slice(0,5))return!1;if(!T.code.isWhiteSpace(e.charCodeAt(5)))return!1;for(n=6,r=e.length;n<r&&T.code.isWhiteSpace(e.charCodeAt(n));++n);return n!==r&&"function"===e.slice(n,n+8)&&(40===(t=e.charCodeAt(n+8))||T.code.isWhiteSpace(t)||42===t||T.code.isLineTerminator(t))}(s)||y&&16&r&&e.expression.type===t.Literal&&"string"==typeof e.expression.value?i=["(",i,")"+this.semicolon(r)]:i.push(this.semicolon(r)),i},ImportDeclaration:function(e,r){var i,a,o=this;return 0===e.specifiers.length?["import",p,this.generateExpression(e.source,n.Sequence,7),this.semicolon(r)]:(i=["import"],a=0,e.specifiers[a].type===t.ImportDefaultSpecifier&&(i=V(i,[this.generateExpression(e.specifiers[a],n.Sequence,7)]),++a),e.specifiers[a]&&(0!==a&&i.push(","),e.specifiers[a].type===t.ImportNamespaceSpecifier?i=V(i,[p,this.generateExpression(e.specifiers[a],n.Sequence,7)]):(i.push(p+"{"),e.specifiers.length-a===1?(i.push(p),i.push(this.generateExpression(e.specifiers[a],n.Sequence,7)),i.push(p+"}"+p)):(G(function(t){var r,s;for(i.push(d),r=a,s=e.specifiers.length;r<s;++r)i.push(t),i.push(o.generateExpression(e.specifiers[r],n.Sequence,7)),r+1<s&&i.push(","+d)}),F(U(i).toString())||i.push(d),i.push(s+"}"+p)))),i=V(i,["from"+p,this.generateExpression(e.source,n.Sequence,7),this.semicolon(r)]))},VariableDeclarator:function(e,t){var r=1&t?7:6;return e.init?[this.generateExpression(e.id,n.Assignment,r),p,"=",p,this.generateExpression(e.init,n.Assignment,r)]:this.generatePattern(e.id,n.Assignment,r)},VariableDeclaration:function(e,t){var n,r,i,s,a,o=this;function l(){for(s=e.declarations[0],b.comment&&s.leadingComments?(n.push("\n"),n.push(j(o.generateStatement(s,a)))):(n.push(z()),n.push(o.generateStatement(s,a))),r=1,i=e.declarations.length;r<i;++r)s=e.declarations[r],b.comment&&s.leadingComments?(n.push(","+d),n.push(j(o.generateStatement(s,a)))):(n.push(","+p),n.push(o.generateStatement(s,a)))}return n=[e.kind],a=1&t?1:0,e.declarations.length>1?G(l):l(),n.push(this.semicolon(t)),n},ThrowStatement:function(e,t){return[V("throw",this.generateExpression(e.argument,n.Sequence,7)),this.semicolon(t)]},TryStatement:function(e,t){var n,r,i,s=["try",this.maybeBlock(e.block,1)];if(s=this.maybeBlockSuffix(e.block,s),e.handlers)for(n=0,r=e.handlers.length;n<r;++n)s=V(s,this.generateStatement(e.handlers[n],1)),(e.finalizer||n+1!==r)&&(s=this.maybeBlockSuffix(e.handlers[n].body,s));else{for(n=0,r=(i=e.guardedHandlers||[]).length;n<r;++n)s=V(s,this.generateStatement(i[n],1)),(e.finalizer||n+1!==r)&&(s=this.maybeBlockSuffix(i[n].body,s));if(e.handler)if(Array.isArray(e.handler))for(n=0,r=e.handler.length;n<r;++n)s=V(s,this.generateStatement(e.handler[n],1)),(e.finalizer||n+1!==r)&&(s=this.maybeBlockSuffix(e.handler[n].body,s));else s=V(s,this.generateStatement(e.handler,1)),e.finalizer&&(s=this.maybeBlockSuffix(e.handler.body,s))}return e.finalizer&&(s=V(s,["finally",this.maybeBlock(e.finalizer,1)])),s},SwitchStatement:function(e,t){var r,i,s,a,o,l=this;if(G(function(){r=["switch"+p+"(",l.generateExpression(e.discriminant,n.Sequence,7),")"+p+"{"+d]}),e.cases)for(o=1,s=0,a=e.cases.length;s<a;++s)s===a-1&&(o|=D),i=j(this.generateStatement(e.cases[s],o)),r.push(i),F(U(i).toString())||r.push(d);return r.push(j("}")),r},SwitchCase:function(e,r){var i,s,a,o,l,u=this;return G(function(){for(i=e.test?[V("case",u.generateExpression(e.test,n.Sequence,7)),":"]:["default:"],a=0,(o=e.consequent.length)&&e.consequent[0].type===t.BlockStatement&&(s=u.maybeBlock(e.consequent[0],1),i.push(s),a=1),a===o||F(U(i).toString())||i.push(d),l=1;a<o;++a)a===o-1&&r&D&&(l|=D),s=j(u.generateStatement(e.consequent[a],l)),i.push(s),a+1===o||F(U(s).toString())||i.push(d)}),i},IfStatement:function(e,r){var i,s,a=this;return G(function(){i=["if"+p+"(",a.generateExpression(e.test,n.Sequence,7),")"]}),s=1,r&D&&(s|=D),e.alternate?(i.push(this.maybeBlock(e.consequent,1)),i=this.maybeBlockSuffix(e.consequent,i),i=e.alternate.type===t.IfStatement?V(i,["else ",this.generateStatement(e.alternate,s)]):V(i,V("else",this.maybeBlock(e.alternate,s)))):i.push(this.maybeBlock(e.consequent,s)),i},ForStatement:function(e,r){var i,s=this;return G(function(){i=["for"+p+"("],e.init?e.init.type===t.VariableDeclaration?i.push(s.generateStatement(e.init,0)):(i.push(s.generateExpression(e.init,n.Sequence,6)),i.push(";")):i.push(";"),e.test?(i.push(p),i.push(s.generateExpression(e.test,n.Sequence,7)),i.push(";")):i.push(";"),e.update?(i.push(p),i.push(s.generateExpression(e.update,n.Sequence,7)),i.push(")")):i.push(")")}),i.push(this.maybeBlock(e.body,r&D?k:1)),i},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&D?k:1)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&D?k:1)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&D?k:1)]},Program:function(e,t){var n,r,i,s,a=e.body.length;for(n=[v&&a>0?"\n":""],s=17,i=0;i<a;++i)v||i!==a-1||(s|=D),S&&(0===i&&(e.body[0].leadingComments||$(e.range[0],e.body[i].range[0],n)),i>0&&(e.body[i-1].trailingComments||e.body[i].leadingComments||$(e.body[i-1].range[1],e.body[i].range[0],n))),r=j(this.generateStatement(e.body[i],s)),n.push(r),i+1<a&&!F(U(r).toString())&&(S&&e.body[i+1].leadingComments||n.push(d)),S&&i===a-1&&(e.body[i].trailingComments||$(e.body[i].range[1],e.range[1],n));return n},FunctionDeclaration:function(e,t){return[K(e,!0),"function",Q(e)||z(),e.id?Z(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(e,t){return e.argument?[V("return",this.generateExpression(e.argument,n.Sequence,7)),this.semicolon(t)]:["return"+this.semicolon(t)]},WhileStatement:function(e,t){var r,i=this;return G(function(){r=["while"+p+"(",i.generateExpression(e.test,n.Sequence,7),")"]}),r.push(this.maybeBlock(e.body,t&D?k:1)),r},WithStatement:function(e,t){var r,i=this;return G(function(){r=["with"+p+"(",i.generateExpression(e.object,n.Sequence,7),")"]}),r.push(this.maybeBlock(e.body,t&D?k:1)),r}},I(Y.prototype,Y.Statement),Y.Expression={SequenceExpression:function(e,t,r){var i,s,a;for(n.Sequence<t&&(r|=1),i=[],s=0,a=e.expressions.length;s<a;++s)i.push(this.generateExpression(e.expressions[s],n.Assignment,r)),s+1<a&&i.push(","+p);return q(i,n.Sequence,t)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.right,e.operator,t,n)},ArrowFunctionExpression:function(e,t,r){return q(this.generateFunctionBody(e),n.ArrowFunction,t)},ConditionalExpression:function(e,t,r){return n.Conditional<t&&(r|=1),q([this.generateExpression(e.test,n.Coalesce,r),p+"?"+p,this.generateExpression(e.consequent,n.Assignment,r),p+":"+p,this.generateExpression(e.alternate,n.Assignment,r)],n.Conditional,t)},LogicalExpression:function(e,t,n){return"??"===e.operator&&(n|=64),this.BinaryExpression(e,t,n)},BinaryExpression:function(e,t,i){var s,a,o,l,u,c=r[e.operator];return a="**"===e.operator?n.Postfix:c,o="**"===e.operator?c:c+1,c<t&&(i|=1),s=47===(u=(l=this.generateExpression(e.left,a,i)).toString()).charCodeAt(u.length-1)&&T.code.isIdentifierPartES5(e.operator.charCodeAt(0))?[l,z(),e.operator]:V(l,e.operator),l=this.generateExpression(e.right,o,i),"/"===e.operator&&"/"===l.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===l.toString().slice(0,3)?(s.push(z()),s.push(l)):s=V(s,l),"in"!==e.operator||1&i?("||"===e.operator||"&&"===e.operator)&&64&i?["(",s,")"]:q(s,c,t):["(",s,")"]},CallExpression:function(e,t,r){var i,s,a=[this.generateExpression(e.callee,n.Call,3)];for(e.optional&&a.push("?."),a.push("("),i=0,s=e.arguments.length;i<s;++i)a.push(this.generateExpression(e.arguments[i],n.Assignment,7)),i+1<s&&a.push(","+p);return a.push(")"),2&r?q(a,n.Call,t):["(",a,")"]},ChainExpression:function(e,t,r){return n.OptionalChaining<t&&(r|=2),q(this.generateExpression(e.expression,n.OptionalChaining,r),n.OptionalChaining,t)},NewExpression:function(e,t,r){var i,s,a,o=e.arguments.length,l=4&r&&!f&&0===o?5:1;if(i=V("new",this.generateExpression(e.callee,n.New,l)),!(4&r)||f||o>0){for(i.push("("),s=0,a=o;s<a;++s)i.push(this.generateExpression(e.arguments[s],n.Assignment,7)),s+1<a&&i.push(","+p);i.push(")")}return q(i,n.New,t)},MemberExpression:function(e,r,i){var s,a=[this.generateExpression(e.object,n.Call,2&i?3:1)];return e.computed?(e.optional&&a.push("?."),a.push("["),a.push(this.generateExpression(e.property,n.Sequence,2&i?7:5)),a.push("]")):(e.optional||e.object.type!==t.Literal||"number"!=typeof e.object.value||(s=U(a).toString()).indexOf(".")<0&&!/[eExX]/.test(s)&&T.code.isDecimalDigit(s.charCodeAt(s.length-1))&&!(s.length>=2&&48===s.charCodeAt(0))&&a.push(" "),a.push(e.optional?"?.":"."),a.push(Z(e.property))),q(a,n.Member,r)},MetaProperty:function(e,t,r){var i=[];return i.push("string"==typeof e.meta?e.meta:Z(e.meta)),i.push("."),i.push("string"==typeof e.property?e.property:Z(e.property)),q(i,n.Member,t)},UnaryExpression:function(e,t,r){var i,s,a,o,l=this.generateExpression(e.argument,n.Unary,7);return""===p?i=V(e.operator,l):(i=[e.operator],e.operator.length>2?i=V(i,l):(o=(a=U(i).toString()).charCodeAt(a.length-1),s=l.toString().charCodeAt(0),(43===o||45===o)&&o===s||T.code.isIdentifierPartES5(o)&&T.code.isIdentifierPartES5(s)?(i.push(z()),i.push(l)):i.push(l))),q(i,n.Unary,t)},YieldExpression:function(e,t,r){var i;return i=e.delegate?"yield*":"yield",e.argument&&(i=V(i,this.generateExpression(e.argument,n.Yield,7))),q(i,n.Yield,t)},AwaitExpression:function(e,t,r){return q(V(e.all?"await*":"await",this.generateExpression(e.argument,n.Await,7)),n.Await,t)},UpdateExpression:function(e,t,r){return e.prefix?q([e.operator,this.generateExpression(e.argument,n.Unary,7)],n.Unary,t):q([this.generateExpression(e.argument,n.Postfix,7),e.operator],n.Postfix,t)},FunctionExpression:function(e,t,n){var r=[K(e,!0),"function"];return e.id?(r.push(Q(e)||z()),r.push(Z(e.id))):r.push(Q(e)||p),r.push(this.generateFunctionBody(e)),r},ArrayPattern:function(e,t,n){return this.ArrayExpression(e,t,n,!0)},ArrayExpression:function(e,t,r,i){var a,o,l=this;return e.elements.length?(o=!i&&e.elements.length>1,a=["[",o?d:""],G(function(t){var r,i;for(r=0,i=e.elements.length;r<i;++r)e.elements[r]?(a.push(o?t:""),a.push(l.generateExpression(e.elements[r],n.Assignment,7))):(o&&a.push(t),r+1===i&&a.push(",")),r+1<i&&a.push(","+(o?d:p))}),o&&!F(U(a).toString())&&a.push(d),a.push(o?s:""),a.push("]"),a):"[]"},RestElement:function(e,t,n){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,r){var i,s=["class"];return e.id&&(s=V(s,this.generateExpression(e.id,n.Sequence,7))),e.superClass&&(i=V("extends",this.generateExpression(e.superClass,n.Unary,7)),s=V(s,i)),s.push(p),s.push(this.generateStatement(e.body,k)),s},MethodDefinition:function(e,t,n){var r,i;return r=e.static?["static"+p]:[],i="get"===e.kind||"set"===e.kind?[V(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[J(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)],V(r,i)},Property:function(e,t,r){return"get"===e.kind||"set"===e.kind?[e.kind,z(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?"AssignmentPattern"===e.value.type?this.AssignmentPattern(e.value,n.Sequence,7):this.generatePropertyKey(e.key,e.computed):e.method?[J(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+p,this.generateExpression(e.value,n.Assignment,7)]},ObjectExpression:function(e,t,r){var i,a,o,l,u=this;return e.properties.length?(i=e.properties.length>1,G(function(){o=u.generateExpression(e.properties[0],n.Sequence,7)}),i||(l=U(o).toString(),/[\r\n]/g.test(l))?(G(function(t){var r,s;if(a=["{",d,t,o],i)for(a.push(","+d),r=1,s=e.properties.length;r<s;++r)a.push(t),a.push(u.generateExpression(e.properties[r],n.Sequence,7)),r+1<s&&a.push(","+d)}),F(U(a).toString())||a.push(d),a.push(s),a.push("}"),a):["{",p,o,p,"}"]):"{}"},AssignmentPattern:function(e,t,n){return this.generateAssignment(e.left,e.right,"=",t,n)},ObjectPattern:function(e,r,i){var a,o,l,u,c,h=this;if(!e.properties.length)return"{}";if(u=!1,1===e.properties.length)(c=e.properties[0]).type===t.Property&&c.value.type!==t.Identifier&&(u=!0);else for(o=0,l=e.properties.length;o<l;++o)if((c=e.properties[o]).type===t.Property&&!c.shorthand){u=!0;break}return a=["{",u?d:""],G(function(t){var r,i;for(r=0,i=e.properties.length;r<i;++r)a.push(u?t:""),a.push(h.generateExpression(e.properties[r],n.Sequence,7)),r+1<i&&a.push(","+(u?d:p))}),u&&!F(U(a).toString())&&a.push(d),a.push(u?s:""),a.push("}"),a},ThisExpression:function(e,t,n){return"this"},Super:function(e,t,n){return"super"},Identifier:function(e,t,n){return Z(e)},ImportDefaultSpecifier:function(e,t,n){return Z(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,n){var r=["*"],i=e.id||e.local;return i&&r.push(p+"as"+z()+Z(i)),r},ImportSpecifier:function(e,t,n){var r=e.imported,i=[r.name],s=e.local;return s&&s.name!==r.name&&i.push(z()+"as"+z()+Z(s)),i},ExportSpecifier:function(e,t,n){var r=e.local,i=[r.name],s=e.exported;return s&&s.name!==r.name&&i.push(z()+"as"+z()+Z(s)),i},Literal:function(e,n,r){var i;if(e.hasOwnProperty("raw")&&x&&b.raw)try{if((i=x(e.raw).body[0].expression).type===t.Literal&&i.value===e.value)return e.raw}catch(Rr){}return e.regex?"/"+e.regex.pattern+"/"+e.regex.flags:"bigint"==typeof e.value?e.value.toString()+"n":e.bigint?e.bigint+"n":null===e.value?"null":"string"==typeof e.value?function(e){var t,n,r,i,s,a="",l=0,u=0;for(t=0,n=e.length;t<n;++t){if(39===(r=e.charCodeAt(t)))++l;else if(34===r)++u;else if(47===r&&o)a+="\\";else{if(T.code.isLineTerminator(r)||92===r){a+=O(r);continue}if(!T.code.isIdentifierPartES5(r)&&(o&&r<32||!o&&!h&&(r<32||r>126))){a+=P(r,e.charCodeAt(t+1));continue}}a+=String.fromCharCode(r)}if(s=(i=!("double"===c||"auto"===c&&u<l))?"'":'"',!(i?l:u))return s+a+s;for(e=a,a=s,t=0,n=e.length;t<n;++t)(39===(r=e.charCodeAt(t))&&i||34===r&&!i)&&(a+="\\"),a+=String.fromCharCode(r);return a+s}(e.value):"number"==typeof e.value?function(e){var t,n,r,i,s;if(e!=e)throw new Error("Numeric literal whose value is NaN");if(e<0||0===e&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0)return o?"null":l?"1e400":"1e+400";if(t=""+e,!l||t.length<3)return t;for(n=t.indexOf("."),o||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"),i=0,(s=r.indexOf("e"))>0&&(i=+r.slice(s+1),r=r.slice(0,s)),n>=0&&(i-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),s=0;48===r.charCodeAt(r.length+s-1);)--s;return 0!==s&&(i-=s,r=r.slice(0,s)),0!==i&&(r+="e"+i),(r.length<t.length||u&&e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r),t}(e.value):"boolean"==typeof e.value?e.value?"true":"false":function(e){var t,n,r,i,s,a,o,l=e.toString();if(e.source){if(!(t=l.match(/\/([^/]*)$/)))return l;for(n=t[1],l="",a=!1,o=!1,r=0,i=e.source.length;r<i;++r)s=e.source.charCodeAt(r),o?(l+=L(s,o),o=!1):(a?93===s&&(a=!1):47===s?l+="\\":91===s&&(a=!0),l+=L(s,o),o=92===s);return"/"+l+"/"+n}return l}(e.value)},GeneratorExpression:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression:function(e,r,i){var s,a,o,l,u=this;return s=e.type===t.GeneratorExpression?["("]:["["],b.moz.comprehensionExpressionStartsWithAssignment&&(l=this.generateExpression(e.body,n.Assignment,7),s.push(l)),e.blocks&&G(function(){for(a=0,o=e.blocks.length;a<o;++a)l=u.generateExpression(e.blocks[a],n.Sequence,7),a>0||b.moz.comprehensionExpressionStartsWithAssignment?s=V(s,l):s.push(l)}),e.filter&&(s=V(s,"if"+p),l=this.generateExpression(e.filter,n.Sequence,7),s=V(s,["(",l,")"])),b.moz.comprehensionExpressionStartsWithAssignment||(l=this.generateExpression(e.body,n.Assignment,7),s=V(s,l)),s.push(e.type===t.GeneratorExpression?")":"]"),s},ComprehensionBlock:function(e,r,i){var s;return s=V(s=e.left.type===t.VariableDeclaration?[e.left.kind,z(),this.generateStatement(e.left.declarations[0],0)]:this.generateExpression(e.left,n.Call,7),e.of?"of":"in"),s=V(s,this.generateExpression(e.right,n.Sequence,7)),["for"+p+"(",s,")"]},SpreadElement:function(e,t,r){return["...",this.generateExpression(e.argument,n.Assignment,7)]},TaggedTemplateExpression:function(e,t,r){var i=3;return 2&r||(i=1),q([this.generateExpression(e.tag,n.Call,i),this.generateExpression(e.quasi,n.Primary,4)],n.TaggedTemplate,t)},TemplateElement:function(e,t,n){return e.value.raw},TemplateLiteral:function(e,t,r){var i,s,a=["`"];for(i=0,s=e.quasis.length;i<s;++i)a.push(this.generateExpression(e.quasis[i],n.Primary,7)),i+1<s&&(a.push("${"+p),a.push(this.generateExpression(e.expressions[i],n.Sequence,7)),a.push(p+"}"));return a.push("`"),a},ModuleSpecifier:function(e,t,n){return this.Literal(e,t,n)},ImportExpression:function(e,t,r){return q(["import(",this.generateExpression(e.source,n.Assignment,7),")"],n.Call,t)}},I(Y.prototype,Y.Expression),Y.prototype.generateExpression=function(e,r,i){var s,a=e.type||t.Property;return b.verbatim&&e.hasOwnProperty(b.verbatim)?function(e,t){var r=e[b.verbatim];return U("string"==typeof r?q(X(r),n.Sequence,t):q(X(r.content),null!=r.precedence?r.precedence:n.Sequence,t),e)}(e,r):(s=this[a](e,r,i),b.comment&&(s=W(e,s)),U(s,e))},Y.prototype.generateStatement=function(e,n){var r,i=this[e.type](e,n);return b.comment&&(i=W(e,i)),r=U(i).toString(),e.type!==t.Program||v||""!==d||"\n"!==r.charAt(r.length-1)||(i=_?U(i).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")),U(i,e)},E={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},C={indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},e.version=(Wm(),g(Mm).default).version,e.generate=function(t,n){var r,g,E={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null};return null!=n?("string"==typeof n.indent&&(E.format.indent.style=n.indent),"number"==typeof n.base&&(E.format.indent.base=n.base),n=R(E,n),a=n.format.indent.style,s="string"==typeof n.base?n.base:N(a,n.format.indent.base)):(a=(n=E).format.indent.style,s=N(a,n.format.indent.base)),o=n.format.json,l=n.format.renumber,u=!o&&n.format.hexadecimal,c=o?"double":n.format.quotes,h=n.format.escapeless,d=n.format.newline,p=n.format.space,n.format.compact&&(d=p=a=s=""),f=n.format.parentheses,m=n.format.semicolons,v=n.format.safeConcatenation,y=n.directive,x=o?null:n.parse,_=n.sourceMap,w=n.sourceCode,S=n.format.preserveBlankLines&&null!==w,b=n,_&&(i=e.browser?global.sourceMap.SourceNode:Tm().SourceNode),r=ee(t),_?(g=r.toStringWithSourceMap({file:n.file,sourceRoot:n.sourceMapRoot}),n.sourceContent&&g.map.setSourceContent(n.sourceMap,n.sourceContent),n.sourceMapWithCode?g:g.map.toString()):(g={code:r.toString(),map:null},n.sourceMapWithCode?g:g.code)},e.attachComments=A.attachComments,e.Precedence=R({},n),e.browser=!1,e.FORMAT_MINIFY=E,e.FORMAT_DEFAULTS=C}()}}))()),Xm=0,Ym={UnaryExpression(e,t,n){if(n.some(uD))return;const r=am[e.operator],i=e=>{e.type="CallExpression",e.callee={type:"Identifier",name:`__p5.${r}`},e.arguments=[e.argument]};if("MemberExpression"===e.type){const t=e.argument.property.name;[["x","y","z","w"],["r","g","b","a"],["s","t","p","q"]].some(e=>[...t].every(t=>e.includes(t)))&&"MemberExpression"===e.argument.type?(e.type="MemberExpression",e.object={type:"CallExpression",callee:{type:"Identifier",name:`__p5.${r}`},arguments:[e.argument.object]},e.property={type:"Identifier",name:t}):i(e)}else i(e);delete e.argument,delete e.operator},BreakStatement(e,t,n){n.some(uD)||(e.callee={type:"Identifier",name:"__p5.break"},e.arguments=[],e.type="CallExpression")},VariableDeclarator(e,t,n){if(!n.some(uD)){if(uD(e.init)){const t={type:"Literal",value:e.id.name};e.init.arguments.unshift(t)}if(function(e){return"CallExpression"===e?.type&&("Identifier"===e.callee?.type&&(e.callee?.name.startsWith("varying")||e.callee?.name.startsWith("shared"))||"MemberExpression"===e.callee?.type&&(e.callee?.property.name.startsWith("varying")||e.callee?.property.name.startsWith("shared")))}(e.init)){const n={type:"Literal",value:e.id.name};e.init.arguments.unshift(n),t.varyings[e.id.name]=n}}},Identifier(e,t,n){n.some(uD)||t.varyings[e.name]&&!n.some(t=>"AssignmentExpression"===t.type&&t.left===e)&&(e.type="ExpressionStatement",e.expression={type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:e.name},property:{type:"Identifier",name:"getValue"}},arguments:[]})},ArrayExpression(e,t,n){if(n.some(uD))return;const r=JSON.parse(JSON.stringify(e));e.type="CallExpression",e.callee={type:"Identifier",name:"__p5.strandsNode"},e.arguments=[r]},AssignmentExpression(e,t,n){if(!n.some(uD)){if("="!==e.operator){const t=lD(e.operator.replace("=","")),n={type:"CallExpression",callee:{type:"MemberExpression",object:e.left,property:{type:"Identifier",name:t}},arguments:[e.right]};e.operator="=",e.right=n}if(t.varyings[e.left.name])e.type="ExpressionStatement",e.expression={type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:e.left.name},property:{type:"Identifier",name:"bridge"}},arguments:[e.right]};else if("MemberExpression"===e.left.type){let n=null;if("Identifier"===e.left.object.type&&t.varyings[e.left.object.name]?n=e.left.object.name:"ExpressionStatement"===e.left.object.type&&"CallExpression"===e.left.object.expression?.type&&"MemberExpression"===e.left.object.expression.callee?.type&&"getValue"===e.left.object.expression.callee.property?.name&&"Identifier"===e.left.object.expression.callee.object?.type&&t.varyings[e.left.object.expression.callee.object.name]&&(n=e.left.object.expression.callee.object.name),n){const t=e.left.property.name;e.type="ExpressionStatement",e.expression={type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:n},property:{type:"Identifier",name:"bridgeSwizzle"}},arguments:[{type:"Literal",value:t},e.right]}}}}},BinaryExpression(e,t,n){n.some(uD)||(["Literal","ArrayExpression","Identifier"].includes(e.left.type)&&(e.left={type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsNode"},arguments:[e.left]}),e.type="CallExpression",e.callee={type:"MemberExpression",object:e.left,property:{type:"Identifier",name:lD(e.operator)}},e.arguments=[e.right])},IfStatement(e,t,n){if(n.some(uD))return;const r=e.test,i={type:"ArrowFunctionExpression",params:[],body:"BlockStatement"===e.consequent.type?e.consequent:{type:"BlockStatement",body:[e.consequent]}};let s,a={type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsIf"},arguments:[r,i]};s=e.alternate?{type:"ArrowFunctionExpression",params:[],body:"BlockStatement"===e.alternate.type?e.alternate:{type:"BlockStatement",body:[e.alternate]}}:{type:"ArrowFunctionExpression",params:[],body:{type:"BlockStatement",body:[]}},a={type:"CallExpression",callee:{type:"MemberExpression",object:a,property:{type:"Identifier",name:"Else"}},arguments:[s]};const o=new Set,l=e=>{if("BlockStatement"!==e.type)return;const t=new Set;for(const n of e.body)if("VariableDeclaration"===n.type)for(const e of n.declarations)"Identifier"===e.id.type&&t.add(e.id.name);for(const n of e.body)if("ExpressionStatement"===n.type&&"AssignmentExpression"===n.expression.type){const e=n.expression.left;"Identifier"===e.type?t.has(e.name)||o.add(e.name):"MemberExpression"===e.type&&"Identifier"===e.object.type&&(t.has(e.object.name)||o.add(e.object.name))}else"BlockStatement"===n.type&&l(n)};if(l(i.body),l(s.body),o.size>0){const t=(e,t)=>{if("BlockStatement"===e.type){const n=new Map,r=[];for(const e of t){const t=`__copy_${e}_${Xm++}`;n.set(e,t),r.push({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:t},init:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"Identifier",name:e},property:{type:"Identifier",name:"copy"},computed:!1},arguments:[]}}],kind:"let"})}const i=e=>{if(e&&"object"==typeof e){"Identifier"===e.type&&n.has(e.name)?e.name=n.get(e.name):"MemberExpression"===e.type&&"Identifier"===e.object.type&&n.has(e.object.name)&&(e.object.name=n.get(e.object.name)),"AssignmentExpression"!==e.type||"Identifier"!==e.left.type||!n.has(e.left.name)||"Literal"!==e.right.type&&"ArrayExpression"!==e.right.type||(e.right={type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsNode"},arguments:[e.right]});for(const t in e)e.hasOwnProperty(t)&&"parent"!==t&&(Array.isArray(e[t])?e[t].forEach(i):"object"==typeof e[t]&&i(e[t]))}};e.body.forEach(i),e.body.unshift(...r);const s={type:"ObjectExpression",properties:Array.from(t).map(e=>({type:"Property",key:{type:"Identifier",name:e},value:{type:"Identifier",name:n.get(e)},kind:"init",computed:!1,shorthand:!1}))};e.body.push({type:"ReturnStatement",argument:s})}};t(i.body,o),t(s.body,o);const n="__block_"+Xm++,r=[];for(const e of o)r.push({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:e},right:{type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsNode"},arguments:[{type:"Identifier",name:e}]}}});r.push({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:n},init:a}],kind:"const"});for(const e of o)r.push({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:e},right:{type:"MemberExpression",object:{type:"Identifier",name:n},property:{type:"Identifier",name:e},computed:!1}}});e.type="BlockStatement",e.body=r}else e.type="ExpressionStatement",e.expression=a;delete e.test,delete e.consequent,delete e.alternate},UpdateExpression(e,t,n){if(n.some(uD))return;let r;if("++"===e.operator)r="+";else{if("--"!==e.operator)return;r="-"}const i={type:"AssignmentExpression",operator:"=",left:e.argument,right:{type:"BinaryExpression",operator:r,left:e.argument,right:{type:"Literal",value:1}}};Object.assign(e,i),delete e.prefix,this.BinaryExpression(e.right,t,[...n,e]),this.AssignmentExpression(e,t,n)},ForStatement(e,t,n){if(n.some(uD))return;let r;if(e.init&&"VariableDeclaration"===e.init.type){let t=e.init.declarations[0].init;t={type:"ExpressionStatement",expression:t}.expression,r={type:"ArrowFunctionExpression",params:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:t}]}}}else r={type:"ArrowFunctionExpression",params:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"Literal",value:0}}]}};let i=e.test||{type:"Literal",value:!0};if("VariableDeclaration"===e.init?.type){const t=e.init.declarations[0].id.name;i=this.replaceIdentifierReferences(i,t,"loopVar")}i={type:"ExpressionStatement",expression:i}.expression;const s={type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"loopVar"}],body:i};let a;if(e.update){let t=e.update;if("VariableDeclaration"===e.init?.type){const n=e.init.declarations[0].id.name;t=this.replaceIdentifierReferences(t,n,"loopVar")}t={type:"ExpressionStatement",expression:t}.expression,a={type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"loopVar"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:t}]}}}else a={type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"loopVar"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"Identifier",name:"loopVar"}}]}};let o="BlockStatement"===e.body.type?e.body:{type:"BlockStatement",body:[e.body]};if("VariableDeclaration"===e.init?.type){const t=e.init.declarations[0].id.name;o=this.replaceIdentifierReferences(o,t,"loopVar")}const l={type:"ArrowFunctionExpression",params:[{type:"Identifier",name:"loopVar"},{type:"Identifier",name:"vars"}],body:o},u=new Set,c=(e,t=new Set)=>{if("BlockStatement"!==e.type)return;const n=new Set([...t]);for(const r of e.body)if("VariableDeclaration"===r.type)for(const e of r.declarations)"Identifier"===e.id.type&&n.add(e.id.name);for(const r of e.body)if("ExpressionStatement"===r.type&&"AssignmentExpression"===r.expression.type){const e=r.expression.left;"Identifier"===e.type?n.has(e.name)||u.add(e.name):"MemberExpression"===e.type&&"Identifier"===e.object.type&&(n.has(e.object.name)||u.add(e.object.name))}else"BlockStatement"===r.type&&c(r,n)};if(c(l.body),u.size>0){((e,t)=>{if("BlockStatement"===e.type){const n=new Map,r=[];for(const e of t){const t=`__copy_${e}_${Xm++}`;n.set(e,t),r.push({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:t},init:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"MemberExpression",object:{type:"Identifier",name:"vars"},property:{type:"Identifier",name:e},computed:!1},property:{type:"Identifier",name:"copy"},computed:!1},arguments:[]}}],kind:"let"})}const i=e=>{if(e&&"object"==typeof e){"Identifier"===e.type&&n.has(e.name)&&(e.name=n.get(e.name));for(const t in e)e.hasOwnProperty(t)&&"parent"!==t&&(Array.isArray(e[t])?e[t].forEach(i):"object"==typeof e[t]&&i(e[t]))}};e.body.forEach(i),e.body.unshift(...r);const s={type:"ObjectExpression",properties:Array.from(t).map(e=>({type:"Property",key:{type:"Identifier",name:e},value:{type:"Identifier",name:n.get(e)},kind:"init",computed:!1,shorthand:!1}))};e.body.push({type:"ReturnStatement",argument:s})}})(l.body,u);const t="__block_"+Xm++,n=[],i=[];for(const e of u)i.push({type:"Property",key:{type:"Identifier",name:e},value:{type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsNode"},arguments:[{type:"Identifier",name:e}]},kind:"init",method:!1,shorthand:!1,computed:!1});const o={type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsFor"},arguments:[r,s,a,l,{type:"ObjectExpression",properties:i}]};n.push({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:t},init:o}],kind:"const"});for(const e of u)n.push({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:e},right:{type:"MemberExpression",object:{type:"Identifier",name:t},property:{type:"Identifier",name:e},computed:!1}}});e.type="BlockStatement",e.body=n}else e.type="ExpressionStatement",e.expression={type:"CallExpression",callee:{type:"Identifier",name:"__p5.strandsFor"},arguments:[r,s,a,l,{type:"ObjectExpression",properties:[]}]};delete e.init,delete e.test,delete e.update},replaceIdentifierReferences(e,t,n){if(!e||"object"!=typeof e)return e;const r=e=>{if(!e||"object"!=typeof e)return e;if("Identifier"===e.type&&e.name===t)return{...e,name:n};const i={...e};for(const t in e)e.hasOwnProperty(t)&&"parent"!==t&&(Array.isArray(e[t])?i[t]=e[t].map(r):"object"==typeof e[t]&&(i[t]=r(e[t])));return i};return r(e)}},Zm={acos:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],acosh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],asin:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],asinh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],atan:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],atanh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],cos:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],cosh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],degrees:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],radians:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],sin:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],sinh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],tan:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],tanh:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],abs:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.FLOAT],returnType:tm.INT,isp5Function:!0}],ceil:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],clamp:[{params:[tm.FLOAT,tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1},{params:[tm.FLOAT,Jf.float1,Jf.float1],returnType:tm.FLOAT,isp5Function:!1},{params:[tm.INT,tm.INT,tm.INT],returnType:tm.INT,isp5Function:!1},{params:[tm.INT,Jf.int1,Jf.int1],returnType:tm.INT,isp5Function:!1}],dFdx:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],dFdy:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],exp:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],exp2:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],floor:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],fma:[{params:[tm.FLOAT,tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],fract:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],fwidth:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],inversesqrt:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],log:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],log2:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],max:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.FLOAT,Jf.float1],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.INT,tm.INT],returnType:tm.INT,isp5Function:!0},{params:[tm.INT,Jf.int1],returnType:tm.INT,isp5Function:!0}],min:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.FLOAT,Jf.float1],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.INT,tm.INT],returnType:tm.INT,isp5Function:!0},{params:[tm.INT,Jf.int1],returnType:tm.INT,isp5Function:!0}],mix:[{params:[tm.FLOAT,tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1},{params:[tm.FLOAT,tm.FLOAT,Jf.float1],returnType:tm.FLOAT,isp5Function:!1},{params:[tm.FLOAT,tm.FLOAT,tm.BOOL],returnType:tm.FLOAT,isp5Function:!1}],mod:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0},{params:[tm.FLOAT,Jf.float1],returnType:tm.FLOAT,isp5Function:!0}],pow:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],round:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],roundEven:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],sign:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1},{params:[tm.INT],returnType:tm.INT,isp5Function:!1}],smoothstep:[{params:[tm.FLOAT,tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1},{params:[Jf.float1,Jf.float1,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],sqrt:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],step:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],trunc:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],cross:[{params:[Jf.float3,Jf.float3],returnType:Jf.float3,isp5Function:!0}],distance:[{params:[tm.FLOAT,tm.FLOAT],returnType:Jf.float1,isp5Function:!0}],dot:[{params:[tm.FLOAT,tm.FLOAT],returnType:Jf.float1,isp5Function:!0}],equal:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.BOOL,isp5Function:!1},{params:[tm.INT,tm.INT],returnType:tm.BOOL,isp5Function:!1},{params:[tm.BOOL,tm.BOOL],returnType:tm.BOOL,isp5Function:!1}],faceforward:[{params:[tm.FLOAT,tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],length:[{params:[tm.FLOAT],returnType:Jf.float1,isp5Function:!1}],normalize:[{params:[tm.FLOAT],returnType:tm.FLOAT,isp5Function:!0}],notEqual:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.BOOL,isp5Function:!1},{params:[tm.INT,tm.INT],returnType:tm.BOOL,isp5Function:!1},{params:[tm.BOOL,tm.BOOL],returnType:tm.BOOL,isp5Function:!1}],reflect:[{params:[tm.FLOAT,tm.FLOAT],returnType:tm.FLOAT,isp5Function:!1}],refract:[{params:[tm.FLOAT,tm.FLOAT,Jf.float1],returnType:tm.FLOAT,isp5Function:!1}],texture:[{params:[Jf.sampler2D,Jf.float2],returnType:Jf.float4,isp5Function:!0}],getTexture:[{params:[Jf.sampler2D,Jf.float2],returnType:Jf.float4,isp5Function:!0}]},Km=class e{constructor(e,t,n){this.id=e,this.strandsContext=n,this.dimension=t;const r=sD(this.strandsContext.dag,this.id);r&&r.identifier&&(this._originalIdentifier=r.identifier,this._originalBaseType=r.baseType,this._originalDimension=r.dimension)}copy(){return yD(this.id,this.dimension,this.strandsContext)}bridge(t){const{dag:n,cfg:r}=this.strandsContext,i=sD(n,this.id)?.baseType??Kf.FLOAT;let s;if(s=t instanceof e?t.id:AD(this.strandsContext,{baseType:i,dimension:this.dimension},t).id,this._originalIdentifier){const{id:e}=xD(this.strandsContext,{baseType:this._originalBaseType,dimension:this._originalDimension},this._originalIdentifier),t=rD(n,iD({nodeType:qf.ASSIGNMENT,dependsOn:[e,s],phiBlocks:[]}));gD(r,r.currentBlock,t),this.strandsContext.globalAssignments.push(t);const i=iD({nodeType:qf.VARIABLE,baseType:this._originalBaseType,dimension:this._originalDimension,identifier:this._originalIdentifier});this.id=rD(n,i)}else this.id=s;return this}bridgeSwizzle(t,n){const{dag:r,cfg:i}=this.strandsContext,s=sD(r,this.id)?.baseType??Kf.FLOAT;let a;if(a=n instanceof e?n.id:AD(this.strandsContext,{baseType:s,dimension:this.dimension},n).id,this._originalIdentifier){const{id:e}=xD(this.strandsContext,{baseType:this._originalBaseType,dimension:this._originalDimension},this._originalIdentifier),n=rD(r,iD({nodeType:qf.OPERATION,opCode:rm.Unary.SWIZZLE,baseType:this._originalBaseType,dimension:t.length,swizzle:t,dependsOn:[e]})),s=rD(r,iD({nodeType:qf.ASSIGNMENT,dependsOn:[n,a],phiBlocks:[]}));gD(i,i.currentBlock,s),this.strandsContext.globalAssignments.push(s);const o=iD({nodeType:qf.VARIABLE,baseType:this._originalBaseType,dimension:this._originalDimension,identifier:this._originalIdentifier});this.id=rD(r,o)}else this.id=a;return this}getValue(){if(this._originalIdentifier){const{id:e,dimension:t}=xD(this.strandsContext,{baseType:this._originalBaseType,dimension:this._originalDimension},this._originalIdentifier);return yD(e,t,this.strandsContext)}return this}},Qm=class{constructor(e,t,n){this.branches=[{condition:t,branchCallback:n,blockType:lm.IF_BODY}],this.ctx=e}ElseIf(e,t){return this.branches.push({condition:e,branchCallback:t,blockType:lm.IF_BODY}),this}Else(e=()=>({})){this.branches.push({condition:null,branchCallback:e,blockType:lm.IF_BODY});const t=function(e,t){const n=e.cfg,r=t.branches,i=fD(n,lm.MERGE),s=[],a=[],o={},l={},u=fD(n,lm.BRANCH);mD(n,n.currentBlock,u),mD(n,u,i);let c=u;for(let h=0;h<r.length;h++){const{condition:e,branchCallback:t,blockType:o}=r[h];if(null!==e){const t=fD(n,lm.IF_COND);mD(n,c,t),hD(n,t),n.blockConditions[t]=e.id,c=t,dD(n)}else{const e=fD(n,lm.ELSE_COND);mD(n,c,e),c=e}const u=fD(n,lm.SCOPE_START);mD(n,c,u);const d=fD(n,o);mD(n,u,d),hD(n,d);const p=t();for(const n in p)l[n]?l[n].push({value:p[n],blockId:d}):l[n]=[{value:p[n],blockId:d}];s.push(p);const f=fD(n,lm.DEFAULT);mD(n,n.currentBlock,f),a.push(f),dD(n);const m=fD(n,lm.SCOPE_END);mD(n,f,m),mD(n,m,i),c=u}pD(n,u);for(const h in l)o[h]=ND(e,l[h],h);dD(n);for(let h=0;h<s.length;h++){const t=s[h],r=a[h];pD(n,r);for(const i in t)if(o[i]){const s=o[i].id,a=t[i].id,l={nodeType:qf.ASSIGNMENT,dependsOn:[s,a],phiBlocks:[]};gD(n,r,rD(e.dag,l))}dD(n)}return hD(n,i),o}(this.ctx,this),n={};for(const[r,i]of Object.entries(t))n[r]=yD(i.id,i.dimension,this.ctx);return n}},Jm=class{constructor(e,t,n,r,i,s){this.strandsContext=e,this.initialCb=t,this.conditionCb=n,this.updateCb=r,this.bodyCb=i,this.initialVars=s}build(){const e=this.strandsContext.cfg,t=fD(e,lm.MERGE),n=fD(e,lm.BRANCH);mD(e,e.currentBlock,n),mD(e,n,t);const{initialVar:r,phiNode:i}=this.initializeLoopVariable(e,n);hD(e,e.currentBlock);const s=yD(i.id,i.dimension,this.strandsContext),a=this.conditionCb(s),o=this.updateCb(s);dD(e),this.loopIsBounded(r,a,o)?this.buildBoundedLoop(e,n,t,r,i,a,o):this.buildUnboundedLoop(e,n,t,r,i,a,o);const l=this.phiNodesForBody;pD(e,n);for(const[c,h]of Object.entries(this.bodyResults))if("loopVar"!==c&&l[c]){const e=l[c].id,t=sD(this.strandsContext.dag,e);t.dependsOn.length>1&&(t.dependsOn[1]=h.id),t.phiInputs&&t.phiInputs.length>1&&(t.phiInputs[1].value=h)}dD(e),pD(e,n);for(const[c,h]of Object.entries(this.initialVars))if("loopVar"!==c&&l[c]){const t=l[c].id,r=h.id,i=iD({nodeType:qf.ASSIGNMENT,dependsOn:[t,r],phiBlocks:[]});gD(e,n,rD(this.strandsContext.dag,i))}dD(e),pD(e,this.finalBodyBlock);for(const[c,h]of Object.entries(this.bodyResults))if("loopVar"!==c&&l[c]){const t=l[c].id,n=h.id,r=iD({nodeType:qf.ASSIGNMENT,dependsOn:[t,n],phiBlocks:[]}),i=rD(this.strandsContext.dag,r);gD(e,this.finalBodyBlock,i)}dD(e);const u={};for(const[c,h]of Object.entries(l))u[c]=yD(h.id,h.dimension,this.strandsContext);return hD(e,t),u}buildBoundedLoop(e,t,n,r,i,s,a){const o=fD(e,lm.FOR);if(mD(e,t,o),hD(e,o),r){const t=iD({nodeType:qf.ASSIGNMENT,dependsOn:[i.id,r.id],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,t))}const l=iD({nodeType:qf.STATEMENT,statementType:Zf.EXPRESSION,dependsOn:[s.id],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,l));const u=iD({nodeType:qf.ASSIGNMENT,dependsOn:[i.id,a.id],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,u)),dD(e);const c=e.blockInstructions[o]||[],h=r?3:2;if(c.length!==h)throw new Error(`FOR block must have exactly ${h} statements, got ${c.length}`);const d=fD(e,lm.SCOPE_START);mD(e,o,d);const p=fD(e,lm.DEFAULT);this.bodyBlock=p,mD(e,d,p),this.executeBodyCallback(e,t,p,i);const f=fD(e,lm.SCOPE_END);mD(e,p,f),mD(e,f,n)}buildUnboundedLoop(e,t,n,r,i,s,a){const o=fD(e,lm.FOR);if(mD(e,t,o),hD(e,o),r){const t=iD({nodeType:qf.ASSIGNMENT,dependsOn:[i.id,r.id],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,t))}else{const t=iD({nodeType:qf.STATEMENT,statementType:Zf.EMPTY,dependsOn:[],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,t))}const l=iD({nodeType:qf.STATEMENT,statementType:Zf.EMPTY,dependsOn:[],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,l));const u=iD({nodeType:qf.STATEMENT,statementType:Zf.EMPTY,dependsOn:[],phiBlocks:[]});gD(e,o,rD(this.strandsContext.dag,u)),dD(e);const c=fD(e,lm.SCOPE_START);mD(e,o,c);const h=fD(e,lm.DEFAULT);mD(e,c,h),hD(e,h);const d=s,p=this.createLogicalNotNode(d),f=fD(e,lm.IF_COND);mD(e,h,f),e.blockConditions[f]=p.id;const m=fD(e,lm.DEFAULT);mD(e,f,m),hD(e,m);const g=iD({nodeType:qf.STATEMENT,statementType:Zf.BREAK,dependsOn:[],phiBlocks:[]});gD(e,m,rD(this.strandsContext.dag,g)),dD(e),mD(e,m,n),dD(e);const v=fD(e,lm.DEFAULT);this.bodyBlock=v,mD(e,h,v),this.executeBodyCallback(e,t,v,i);const y=fD(e,lm.DEFAULT);mD(e,v,y),hD(e,y);const b=iD({nodeType:qf.ASSIGNMENT,dependsOn:[i.id,a.id],phiBlocks:[]});gD(e,y,rD(this.strandsContext.dag,b)),dD(e);const x=fD(e,lm.SCOPE_END);mD(e,y,x),mD(e,x,h),mD(e,h,n)}initializeLoopVariable(e,t){hD(e,t);let n=this.initialCb();if(!(n instanceof Km)){const{id:e,dimension:t}=AD(this.strandsContext,{baseType:Kf.FLOAT,dimension:1},n);n=yD(e,t,this.strandsContext)}const r=ND(this.strandsContext,[{value:n,blockId:t},{value:n,blockId:t}],"loopVar");return dD(e),{initialVar:n,phiNode:r}}createLogicalNotNode(e){const t=iD({nodeType:qf.OPERATION,opCode:rm.Unary.LOGICAL_NOT,baseType:Kf.BOOL,dimension:1,dependsOn:[e.id],phiBlocks:[],usedBy:[]});return yD(rD(this.strandsContext.dag,t),1,this.strandsContext)}executeBodyCallback(e,t,n,r){hD(e,n);const i={},s={};pD(e,t);for(const[o,l]of Object.entries(this.initialVars))if("loopVar"!==o){const e=ND(this.strandsContext,[{value:l,blockId:t},{value:l,blockId:n}],o);s[o]=e,i[o]=yD(e.id,e.dimension,this.strandsContext)}dD(e);const a=yD(r.id,r.dimension,this.strandsContext);this.bodyResults=this.bodyCb(a,i),this.phiNodesForBody=s,this.finalBodyBlock=e.currentBlock,dD(e)}loopIsBounded(e,t,n){if(!t)return!1;const r=sD(this.strandsContext.dag,t.id);if(r.nodeType!==qf.OPERATION)return!1;if(!r.dependsOn||2!==r.dependsOn.length)return!1;const i=yD(r.dependsOn[0],1,this.strandsContext),s=yD(r.dependsOn[1],1,this.strandsContext),a=this.nodeUsesOnlyLiterals(i),o=this.nodeUsesOnlyLiterals(s);return a||o}nodeUsesOnlyLiterals(e){const t=sD(this.strandsContext.dag,e.id);switch(t.nodeType){case qf.LITERAL:return!0;case qf.VARIABLE:case qf.PHI:return!1;case qf.OPERATION:if(t.dependsOn)for(const e of t.dependsOn){const t=yD(e,1,this.strandsContext);if(!this.nodeUsesOnlyLiterals(t))return!1}return!0;default:return!1}}},eg="// Based on https://github.com/stegu/webgl-noise/blob/22434e04d7753f7e949e8d724ab3da2864c17a0f/src/noise3D.glsl\n// MIT licensed, adapted for p5.strands\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+10.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat baseNoise(vec3 v)\n{\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n          i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n        + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n      + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 105.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n        dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat noise(vec3 st) {\n  float result = 0.0;\n  float amplitude = 1.0;\n  float frequency = 1.0;\n\n  for (int i = 0; i < 4; i++) {\n    result += amplitude * baseNoise(st * frequency);\n    frequency *= 2.0;\n    amplitude *= 0.5;\n  }\n\n  return result;\n}\n",$m(),"undefined"!=typeof p5&&p5.registerAddon(RD),li(),bi(),Ni(),dh(),Of(),$m(),li(),dh(),Of(),li(),bi(),Ni(),tg=()=>{if(void 0===window._setupDone){if(!window.mocha){const e=new Event("p5Ready");window.dispatchEvent(e),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!xs.instance&&new xs}}else console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")},ng=()=>new Promise((e,t)=>{"complete"===document.readyState?e():window.addEventListener("load",e,!1)}),rg="undefined"==typeof IS_MINIFIED?_a():Promise.resolve(),li(),bi(),Ni(),dh(),Of(),$m(),(Ir=xs).registerAddon(sC),Ir.registerAddon(aC),Ir.registerAddon(oC),Ir.registerAddon(lC),Ir.registerAddon(QE),function(e){e.registerAddon(UC),e.registerAddon(zC),e.registerAddon(VC),e.registerAddon(jC),e.registerAddon(GC)}(xs),function(e){e.registerAddon(HE),e.registerAddon(GE),e.registerAddon(uC)}(xs),function(e){e.registerAddon(fA),e.registerAddon(gA),e.registerAddon(LT),e.registerAddon(fM),e.registerAddon(mM)}(xs),function(e){e.registerAddon(gM)}(xs),function(e){e.registerAddon(vM),e.registerAddon(XE),e.registerAddon(rC),e.registerAddon(qE)}(xs),function(e){e.registerAddon(yM),e.registerAddon(bM),e.registerAddon(xM)}(xs),function(e){e.registerAddon(xC),e.registerAddon(SC),e.registerAddon(tC),e.registerAddon(pC),e.registerAddon(CC),e.registerAddon(IC)}(xs),function(e){e.registerAddon(wC),e.registerAddon(_M),e.registerAddon(wM),e.registerAddon($E)}(xs),function(e){e.registerAddon(SM),e.registerAddon(EM),e.registerAddon(CM),e.registerAddon(bC),e.registerAddon(AM),e.registerAddon(ZE)}(xs),function(e){e.registerAddon(TM),e.registerAddon(MM),e.registerAddon(DM)}(xs),LD(xs),function(e){e.registerAddon(IM),e.registerAddon(KM)}(xs),Promise.all([ng(),rg]).then(tg),ig=d({"node_modules/react/cjs/react-jsx-runtime.production.js":e=>{var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(e,n,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==n.key&&(i=""+n.key),"key"in n)for(var s in r={},n)"key"!==s&&(r[s]=n[s]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:void 0!==n?n:null,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r}}),sg=m(d({"node_modules/react/jsx-runtime.js":(e,t)=>{t.exports=ig()}})()),ag="undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),og=1e3,lg=1001,ug=1002,cg=1003,hg=1004,dg=1005,pg=1006,fg=1007,mg=1008,gg=1009,vg=1010,yg=1011,bg=1012,xg=1013,_g=1014,wg=1015,Sg=1016,Eg=1017,Cg=1018,Ag=35902,Tg=35899,Mg=1021,Dg=1022,kg=1023,Ng=1027,Fg=1028,Ig=1029,Rg=1030,Lg=1031,Pg=1033,Og=33776,Bg=33777,Ug=33778,zg=33779,Vg=35840,jg=35841,Gg=35842,Hg=35843,Wg=36196,$g=37492,qg=37496,Xg=37808,Yg=37809,Zg=37810,Kg=37811,Qg=37812,Jg=37813,ev=37814,tv=37815,nv=37816,rv=37817,iv=37818,sv=37819,av=37820,ov=37821,lv=36492,uv=36494,cv=36495,hv=36283,dv=36284,pv=36285,fv=36286,mv=2300,gv=2301,vv=2302,yv=3201,bv="srgb",xv="srgb-linear",_v="linear",wv="srgb",Sv=7680,Ev=2e3,Cv=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}},Av=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Tv=Math.PI/180,Mv=180/Math.PI,Dv=class e{constructor(t=0,n=0){e.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=jD(this.x,e.x,t.x),this.y=jD(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=jD(this.x,e,t),this.y=jD(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jD(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jD(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},kv=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,a){let o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(c!==f||o!==h||l!==d||u!==p){let e=1-a;const t=o*h+l*d+u*p+c*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,a=Math.sin(a*s)/i}const i=a*n;if(o=o*e+h*i,l=l*e+d*i,u=u*e+p*i,c=c*e+f*i,e===1-a){const e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],o=n[r+1],l=n[r+2],u=n[r+3],c=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=a*p+u*c+o*d-l*h,e[t+1]=o*p+u*h+l*c-a*d,e[t+2]=l*p+u*d+a*h-o*c,e[t+3]=u*p-a*c-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=o(n/2),d=o(r/2),p=o(i/2);switch(s){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=n+a+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-o)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(u-o)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(o+u)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jD(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+s*a+r*l-i*o,this._y=r*u+s*o+i*a-n*l,this._z=i*u+s*l+n*o-r*a,this._w=s*u-n*a-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(o),u=Math.atan2(l,a),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=s*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Nv=class e{constructor(t=0,n=0,r=0){e.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Iv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Iv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,l=2*(s*r-a*n),u=2*(a*t-i*r),c=2*(i*n-s*t);return this.x=t+o*l+s*c-a*u,this.y=n+o*u+a*l-i*c,this.z=r+o*c+i*u-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=jD(this.x,e.x,t.x),this.y=jD(this.y,e.y,t.y),this.z=jD(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=jD(this.x,e,t),this.y=jD(this.y,e,t),this.z=jD(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jD(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Fv.copy(this).projectOnVector(e),this.sub(Fv)}reflect(e){return this.sub(Fv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jD(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Fv=new Nv,Iv=new kv,Rv=class e{constructor(t,n,r,i,s,a,o,l,u){e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,s,a,o,l,u)}set(e,t,n,r,i,s,a,o,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=s*f+a*v+o*x,i[3]=s*m+a*y+o*_,i[6]=s*g+a*b+o*w,i[1]=l*f+u*v+c*x,i[4]=l*m+u*y+c*_,i[7]=l*g+u*b+c*w,i[2]=h*f+d*v+p*x,i[5]=h*m+d*y+p*_,i[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-n*i*u+n*a*o+r*i*l-r*s*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=u*s-a*l,h=a*o-u*i,d=l*i-s*o,p=t*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=c*f,e[1]=(r*l-u*n)*f,e[2]=(a*n-r*s)*f,e[3]=h*f,e[4]=(u*t-r*o)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Lv.makeScale(e,t)),this}rotate(e){return this.premultiply(Lv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Lv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}},Lv=new Rv,Pv={},Ov=(new Rv).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Bv=(new Rv).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),Uv=ZD(),Vv=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===zv&&(zv=qD("canvas")),zv.width=e.width,zv.height=e.height;const t=zv.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=zv}return n.toDataURL(t)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=qD("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*KD(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*KD(t[e]/255)):t[e]=KD(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},jv=0,Gv=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jv++}),this.uuid=VD(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(JD(r[t].image)):e.push(JD(r[t]))}else e=JD(r);n.url=e}return t||(e.images[this.uuid]=n),n}},Hv=0,Wv=new Nv,($v=class e extends Cv{constructor(t=e.DEFAULT_IMAGE,n=e.DEFAULT_MAPPING,r=lg,i=lg,s=pg,a=mg,o=kg,l=gg,u=e.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hv++}),this.uuid=VD(),this.name="",this.source=new Gv(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Dv(0,0),this.repeat=new Dv(1,1),this.center=new Dv(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rv,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Wv).x}get height(){return this.source.getSize(Wv).y}get depth(){return this.source.getSize(Wv).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n:console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case og:e.x=e.x-Math.floor(e.x);break;case lg:e.x=e.x<0?0:1;break;case ug:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case og:e.y=e.y-Math.floor(e.y);break;case lg:e.y=e.y<0?0:1;break;case ug:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}).DEFAULT_IMAGE=null,$v.DEFAULT_MAPPING=300,$v.DEFAULT_ANISOTROPY=1,qv=class e{constructor(t=0,n=0,r=0,i=1){e.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,a=.1,o=e.elements,l=o[0],u=o[4],c=o[8],h=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(u-h)<s&&Math.abs(c-f)<s&&Math.abs(p-m)<s){if(Math.abs(u+h)<a&&Math.abs(c+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,y=(u+h)/4,b=(c+f)/4,x=(p+m)/4;return e>o&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):o>v?o<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=y/r,i=x/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(c-f)/v,this.z=(h-u)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=jD(this.x,e.x,t.x),this.y=jD(this.y,e.y,t.y),this.z=jD(this.z,e.z,t.z),this.w=jD(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=jD(this.x,e,t),this.y=jD(this.y,e,t),this.z=jD(this.z,e,t),this.w=jD(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jD(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Xv=class extends Cv{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pg,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new qv(0,0,e,t),this.scissorTest=!1,this.viewport=new qv(0,0,e,t);const r={width:e,height:t,depth:n.depth},i=new $v(r);this.textures=[];const s=n.count;for(let a=0;a<s;a++)this.textures[a]=i.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:pg,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new Gv(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Yv=class extends Xv{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},Zv=class extends $v{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=cg,this.minFilter=cg,this.wrapR=lg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},Kv=class extends $v{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=cg,this.minFilter=cg,this.wrapR=lg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Qv=class{constructor(e=new Nv(1/0,1/0,1/0),t=new Nv(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ey.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ey.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ey.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,ey):ey.fromBufferAttribute(r,t),ey.applyMatrix4(e.matrixWorld),this.expandByPoint(ey);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),ty.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),ty.copy(n.boundingBox)),ty.applyMatrix4(e.matrixWorld),this.union(ty)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ey),ey.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ly),uy.subVectors(this.max,ly),ny.subVectors(e.a,ly),ry.subVectors(e.b,ly),iy.subVectors(e.c,ly),sy.subVectors(ry,ny),ay.subVectors(iy,ry),oy.subVectors(ny,iy);let t=[0,-sy.z,sy.y,0,-ay.z,ay.y,0,-oy.z,oy.y,sy.z,0,-sy.x,ay.z,0,-ay.x,oy.z,0,-oy.x,-sy.y,sy.x,0,-ay.y,ay.x,0,-oy.y,oy.x,0];return!!ek(t,ny,ry,iy,uy)&&(t=[1,0,0,0,1,0,0,0,1],!!ek(t,ny,ry,iy,uy)&&(cy.crossVectors(sy,ay),t=[cy.x,cy.y,cy.z],ek(t,ny,ry,iy,uy)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ey).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ey).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Jv[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jv[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jv[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jv[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jv[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jv[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jv[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jv[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jv)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Jv=[new Nv,new Nv,new Nv,new Nv,new Nv,new Nv,new Nv,new Nv],ey=new Nv,ty=new Qv,ny=new Nv,ry=new Nv,iy=new Nv,sy=new Nv,ay=new Nv,oy=new Nv,ly=new Nv,uy=new Nv,cy=new Nv,hy=new Nv,dy=new Qv,py=new Nv,fy=new Nv,my=class{constructor(e=new Nv,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):dy.setFromPoints(e).getCenter(n);let r=0;for(let i=0,s=e.length;i<s;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;py.subVectors(e,this.center);const t=py.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(py,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(fy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(py.copy(e.center).add(fy)),this.expandByPoint(py.copy(e.center).sub(fy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},gy=new Nv,vy=new Nv,yy=new Nv,by=new Nv,xy=new Nv,_y=new Nv,wy=new Nv,Sy=class{constructor(e=new Nv,t=new Nv(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gy)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=gy.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gy.copy(this.origin).addScaledVector(this.direction,t),gy.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){vy.copy(e).add(t).multiplyScalar(.5),yy.copy(t).sub(e).normalize(),by.copy(this.origin).sub(vy);const i=.5*e.distanceTo(t),s=-this.direction.dot(yy),a=by.dot(this.direction),o=-by.dot(yy),l=by.lengthSq(),u=Math.abs(1-s*s);let c,h,d,p;if(u>0)if(c=s*o-a,h=s*a-o,p=i*u,c>=0)if(h>=-p)if(h<=p){const e=1/u;c*=e,h*=e,d=c*(c+s*h+2*a)+h*(s*c+h+2*o)+l}else h=i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+l;else h=-i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+l;else h<=-p?(c=Math.max(0,-(-s*i+a)),h=c>0?-i:Math.min(Math.max(-i,-o),i),d=-c*c+h*(h+2*o)+l):h<=p?(c=0,h=Math.min(Math.max(-i,-o),i),d=h*(h+2*o)+l):(c=Math.max(0,-(s*i+a)),h=c>0?i:Math.min(Math.max(-i,-o),i),d=-c*c+h*(h+2*o)+l);else h=s>0?-i:i,c=Math.max(0,-(s*h+a)),d=-c*c+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(vy).addScaledVector(yy,h),d}intersectSphere(e,t){gy.subVectors(e.center,this.origin);const n=gy.dot(this.direction),r=gy.dot(gy)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,o;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),n>s||i>r?null:((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),c>=0?(a=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,gy)}intersectTriangle(e,t,n,r,i){xy.subVectors(t,e),_y.subVectors(n,e),wy.crossVectors(xy,_y);let s,a=this.direction.dot(wy);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}by.subVectors(this.origin,e);const o=s*this.direction.dot(_y.crossVectors(by,_y));if(o<0)return null;const l=s*this.direction.dot(xy.cross(by));if(l<0)return null;if(o+l>a)return null;const u=-s*by.dot(wy);return u<0?null:this.at(u/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},Ey=class e{constructor(t,n,r,i,s,a,o,l,u,c,h,d,p,f,m,g){e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,s,a,o,l,u,c,h,d,p,f,m,g)}set(e,t,n,r,i,s,a,o,l,u,c,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new e).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Cy.setFromMatrixColumn(e,0).length(),i=1/Cy.setFromMatrixColumn(e,1).length(),s=1/Cy.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=s*u,n=s*c,r=a*u,i=a*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=s*l,t[1]=s*c,t[5]=s*u,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e-i*a,t[4]=-s*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=s*u,t[9]=i-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*u,n=s*c,r=a*u,i=a*c;t[0]=o*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=s*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ty,e,My)}lookAt(e,t,n){const r=this.elements;return Ny.subVectors(e,t),0===Ny.lengthSq()&&(Ny.z=1),Ny.normalize(),Dy.crossVectors(n,Ny),0===Dy.lengthSq()&&(1===Math.abs(n.z)?Ny.x+=1e-4:Ny.z+=1e-4,Ny.normalize(),Dy.crossVectors(n,Ny)),Dy.normalize(),ky.crossVectors(Ny,Dy),r[0]=Dy.x,r[4]=ky.x,r[8]=Ny.x,r[1]=Dy.y,r[5]=ky.y,r[9]=Ny.y,r[2]=Dy.z,r[6]=ky.z,r[10]=Ny.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],E=r[12],C=r[1],A=r[5],T=r[9],M=r[13],D=r[2],k=r[6],N=r[10],F=r[14],I=r[3],R=r[7],L=r[11],P=r[15];return i[0]=s*_+a*C+o*D+l*I,i[4]=s*w+a*A+o*k+l*R,i[8]=s*S+a*T+o*N+l*L,i[12]=s*E+a*M+o*F+l*P,i[1]=u*_+c*C+h*D+d*I,i[5]=u*w+c*A+h*k+d*R,i[9]=u*S+c*T+h*N+d*L,i[13]=u*E+c*M+h*F+d*P,i[2]=p*_+f*C+m*D+g*I,i[6]=p*w+f*A+m*k+g*R,i[10]=p*S+f*T+m*N+g*L,i[14]=p*E+f*M+m*F+g*P,i[3]=v*_+y*C+b*D+x*I,i[7]=v*w+y*A+b*k+x*R,i[11]=v*S+y*T+b*N+x*L,i[15]=v*E+y*M+b*F+x*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*o*c-r*l*c-i*a*h+n*l*h+r*a*d-n*o*d)+e[7]*(+t*o*d-t*l*h+i*s*h-r*s*d+r*l*u-i*o*u)+e[11]*(+t*l*c-t*a*d-i*s*c+n*s*d+i*a*u-n*l*u)+e[15]*(-r*a*u-t*o*c+t*a*h+r*s*c-n*s*h+n*o*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*h*l+f*o*d-a*m*d-c*o*g+a*h*g,y=p*h*l-u*m*l-p*o*d+s*m*d+u*o*g-s*h*g,b=u*f*l-p*c*l+p*a*d-s*f*d-u*a*g+s*c*g,x=p*c*o-u*f*o-p*a*h+s*f*h+u*a*m-s*c*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*w,e[2]=(a*m*i-f*o*i+f*r*l-n*m*l-a*r*g+n*o*g)*w,e[3]=(c*o*i-a*h*i-c*r*l+n*h*l+a*r*d-n*o*d)*w,e[4]=y*w,e[5]=(u*m*i-p*h*i+p*r*d-t*m*d-u*r*g+t*h*g)*w,e[6]=(p*o*i-s*m*i-p*r*l+t*m*l+s*r*g-t*o*g)*w,e[7]=(s*h*i-u*o*i+u*r*l-t*h*l-s*r*d+t*o*d)*w,e[8]=b*w,e[9]=(p*c*i-u*f*i-p*n*d+t*f*d+u*n*g-t*c*g)*w,e[10]=(s*f*i-p*a*i+p*n*l-t*f*l-s*n*g+t*a*g)*w,e[11]=(u*a*i-s*c*i-u*n*l+t*c*l+s*n*d-t*a*d)*w,e[12]=x*w,e[13]=(u*f*r-p*c*r+p*n*h-t*f*h-u*n*m+t*c*m)*w,e[14]=(p*a*r-s*f*r-p*n*o+t*f*o+s*n*m-t*a*m)*w,e[15]=(s*c*r-u*a*r+u*n*o-t*c*o-s*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,l=i*s,u=i*a;return this.set(l*s+n,l*a-r*o,l*o+r*a,0,l*a+r*o,u*a+n,u*o-r*s,0,l*o-r*a,u*o+r*s,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,l=i+i,u=s+s,c=a+a,h=i*l,d=i*u,p=i*c,f=s*u,m=s*c,g=a*c,v=o*l,y=o*u,b=o*c,x=n.x,_=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Cy.set(r[0],r[1],r[2]).length();const s=Cy.set(r[4],r[5],r[6]).length(),a=Cy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ay.copy(this);const o=1/i,l=1/s,u=1/a;return Ay.elements[0]*=o,Ay.elements[1]*=o,Ay.elements[2]*=o,Ay.elements[4]*=l,Ay.elements[5]*=l,Ay.elements[6]*=l,Ay.elements[8]*=u,Ay.elements[9]*=u,Ay.elements[10]*=u,t.setFromRotationMatrix(Ay),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s,a=2e3,o=!1){const l=this.elements,u=2*i/(t-e),c=2*i/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let p,f;if(o)p=i/(s-i),f=s*i/(s-i);else if(2e3===a)p=-(s+i)/(s-i),f=-2*s*i/(s-i);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);p=-s/(s-i),f=-s*i/(s-i)}return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,i,s,a=2e3,o=!1){const l=this.elements,u=2/(t-e),c=2/(n-r),h=-(t+e)/(t-e),d=-(n+r)/(n-r);let p,f;if(o)p=1/(s-i),f=s/(s-i);else if(2e3===a)p=-2/(s-i),f=-(s+i)/(s-i);else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=-1/(s-i),f=-i/(s-i)}return l[0]=u,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=c,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Cy=new Nv,Ay=new Ey,Ty=new Nv(0,0,0),My=new Nv(1,1,1),Dy=new Nv,ky=new Nv,Ny=new Nv,Fy=new Ey,Iy=new kv,(Ry=class e{constructor(t=0,n=0,r=0,i=e.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],o=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(jD(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-jD(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(jD(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-jD(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(jD(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-jD(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Fy.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Fy,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Iy.setFromEuler(this),this.setFromQuaternion(Iy,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}).DEFAULT_ORDER="XYZ",Ly=class{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}},Py=0,Oy=new Nv,By=new kv,Uy=new Ey,zy=new Nv,Vy=new Nv,jy=new Nv,Gy=new kv,Hy=new Nv(1,0,0),Wy=new Nv(0,1,0),$y=new Nv(0,0,1),qy={type:"added"},Xy={type:"removed"},Yy={type:"childadded",child:null},Zy={type:"childremoved",child:null},Ky=class e extends Cv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Py++}),this.uuid=VD(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=e.DEFAULT_UP.clone();const t=new Nv,n=new Ry,r=new kv,i=new Nv(1,1,1);n._onChange(function(){r.setFromEuler(n,!1)}),r._onChange(function(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ey},normalMatrix:{value:new Rv}}),this.matrix=new Ey,this.matrixWorld=new Ey,this.matrixAutoUpdate=e.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=e.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ly,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return By.setFromAxisAngle(e,t),this.quaternion.multiply(By),this}rotateOnWorldAxis(e,t){return By.setFromAxisAngle(e,t),this.quaternion.premultiply(By),this}rotateX(e){return this.rotateOnAxis(Hy,e)}rotateY(e){return this.rotateOnAxis(Wy,e)}rotateZ(e){return this.rotateOnAxis($y,e)}translateOnAxis(e,t){return Oy.copy(e).applyQuaternion(this.quaternion),this.position.add(Oy.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Hy,e)}translateY(e){return this.translateOnAxis(Wy,e)}translateZ(e){return this.translateOnAxis($y,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Uy.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?zy.copy(e):zy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Uy.lookAt(Vy,zy,this.up):Uy.lookAt(zy,Vy,this.up),this.quaternion.setFromRotationMatrix(Uy),r&&(Uy.extractRotation(r.matrixWorld),By.setFromRotationMatrix(Uy),this.quaternion.premultiply(By.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(qy),Yy.child=e,this.dispatchEvent(Yy),Yy.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Xy),Zy.child=e,this.dispatchEvent(Zy),Zy.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Uy.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Uy.multiply(e.parent.matrixWorld)),e.applyMatrix4(Uy),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(qy),Yy.child=e,this.dispatchEvent(Yy),Yy.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vy,e,jy),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vy,Gy,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(e=>({...e})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),u=s(e.animations),c=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}},Ky.DEFAULT_UP=new Nv(0,1,0),Ky.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ky.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,Qy=new Nv,Jy=new Nv,eb=new Nv,tb=new Nv,nb=new Nv,rb=new Nv,ib=new Nv,sb=new Nv,ab=new Nv,ob=new Nv,lb=new qv,ub=new qv,cb=new qv,hb=class e{constructor(e=new Nv,t=new Nv,n=new Nv){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Qy.subVectors(e,t),r.cross(Qy);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Qy.subVectors(r,t),Jy.subVectors(n,t),eb.subVectors(e,t);const s=Qy.dot(Qy),a=Qy.dot(Jy),o=Qy.dot(eb),l=Jy.dot(Jy),u=Jy.dot(eb),c=s*l-a*a;if(0===c)return i.set(0,0,0),null;const h=1/c,d=(l*o-a*u)*h,p=(s*u-a*o)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,tb)&&tb.x>=0&&tb.y>=0&&tb.x+tb.y<=1}static getInterpolation(e,t,n,r,i,s,a,o){return null===this.getBarycoord(e,t,n,r,tb)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(i,tb.x),o.addScaledVector(s,tb.y),o.addScaledVector(a,tb.z),o)}static getInterpolatedAttribute(e,t,n,r,i,s){return lb.setScalar(0),ub.setScalar(0),cb.setScalar(0),lb.fromBufferAttribute(e,t),ub.fromBufferAttribute(e,n),cb.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(lb,i.x),s.addScaledVector(ub,i.y),s.addScaledVector(cb,i.z),s}static isFrontFacing(e,t,n,r){return Qy.subVectors(n,t),Jy.subVectors(e,t),Qy.cross(Jy).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qy.subVectors(this.c,this.b),Jy.subVectors(this.a,this.b),.5*Qy.cross(Jy).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return e.getNormal(this.a,this.b,this.c,t)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,r,i,s){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,s)}containsPoint(t){return e.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return e.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;nb.subVectors(r,n),rb.subVectors(i,n),sb.subVectors(e,n);const o=nb.dot(sb),l=rb.dot(sb);if(o<=0&&l<=0)return t.copy(n);ab.subVectors(e,r);const u=nb.dot(ab),c=rb.dot(ab);if(u>=0&&c<=u)return t.copy(r);const h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return s=o/(o-u),t.copy(n).addScaledVector(nb,s);ob.subVectors(e,i);const d=nb.dot(ob),p=rb.dot(ob);if(p>=0&&d<=p)return t.copy(i);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(rb,a);const m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return ib.subVectors(i,r),a=(c-u)/(c-u+(d-p)),t.copy(r).addScaledVector(ib,a);const g=1/(m+f+h);return s=f*g,a=h*g,t.copy(n).addScaledVector(nb,s).addScaledVector(rb,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},db={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pb={h:0,s:0,l:0},fb={h:0,s:0,l:0},mb=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=bv){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Uv.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=Uv.workingColorSpace){return this.r=e,this.g=t,this.b=n,Uv.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=Uv.workingColorSpace){var i;if(e=(e%(i=1)+i)%i,t=jD(t,0,1),n=jD(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=tk(i,r,e+1/3),this.g=tk(i,r,e),this.b=tk(i,r,e-1/3)}return Uv.colorSpaceToWorking(this,r),this}setStyle(e,t=bv){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=bv){const n=db[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=KD(e.r),this.g=KD(e.g),this.b=KD(e.b),this}copyLinearToSRGB(e){return this.r=QD(e.r),this.g=QD(e.g),this.b=QD(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=bv){return Uv.workingToColorSpace(gb.copy(this),e),65536*Math.round(jD(255*gb.r,0,255))+256*Math.round(jD(255*gb.g,0,255))+Math.round(jD(255*gb.b,0,255))}getHexString(e=bv){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Uv.workingColorSpace){Uv.workingToColorSpace(gb.copy(this),t);const n=gb.r,r=gb.g,i=gb.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let o,l;const u=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=u<=.5?e/(s+a):e/(2-s-a),s){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=u,e}getRGB(e,t=Uv.workingColorSpace){return Uv.workingToColorSpace(gb.copy(this),t),e.r=gb.r,e.g=gb.g,e.b=gb.b,e}getStyle(e=bv){Uv.workingToColorSpace(gb.copy(this),e);const t=gb.r,n=gb.g,r=gb.b;return"srgb"!==e?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(pb),this.setHSL(pb.h+e,pb.s+t,pb.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(pb),e.getHSL(fb);const n=GD(pb.h,fb.h,t),r=GD(pb.s,fb.s,t),i=GD(pb.l,fb.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},gb=new mb,mb.NAMES=db,vb=0,yb=class extends Cv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vb++}),this.uuid=VD(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mb(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sv,this.stencilZFail=Sv,this.stencilZPass=Sv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),100!==this.blendEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(n.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(n.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},bb=class extends yb{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mb(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ry,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},xb=new Nv,_b=new Dv,wb=0,Sb=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:wb++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=wg,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_b.fromBufferAttribute(this,t),_b.applyMatrix3(e),this.setXY(t,_b.x,_b.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)xb.fromBufferAttribute(this,t),xb.applyMatrix3(e),this.setXYZ(t,xb.x,xb.y,xb.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)xb.fromBufferAttribute(this,t),xb.applyMatrix4(e),this.setXYZ(t,xb.x,xb.y,xb.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xb.fromBufferAttribute(this,t),xb.applyNormalMatrix(e),this.setXYZ(t,xb.x,xb.y,xb.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xb.fromBufferAttribute(this,t),xb.transformDirection(e),this.setXYZ(t,xb.x,xb.y,xb.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=HD(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=WD(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=HD(t,this.array)),t}setX(e,t){return this.normalized&&(t=WD(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=HD(t,this.array)),t}setY(e,t){return this.normalized&&(t=WD(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=HD(t,this.array)),t}setZ(e,t){return this.normalized&&(t=WD(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=HD(t,this.array)),t}setW(e,t){return this.normalized&&(t=WD(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=WD(t,this.array),n=WD(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=WD(t,this.array),n=WD(n,this.array),r=WD(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=WD(t,this.array),n=WD(n,this.array),r=WD(r,this.array),i=WD(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}},Eb=class extends Sb{constructor(e,t,n){super(new Uint16Array(e),t,n)}},Cb=class extends Sb{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Ab=class extends Sb{constructor(e,t,n){super(new Float32Array(e),t,n)}},Tb=0,Mb=new Ey,Db=new Ky,kb=new Nv,Nb=new Qv,Fb=new Qv,Ib=new Nv,Rb=class e extends Cv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Tb++}),this.uuid=VD(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($D(e)?Cb:Eb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Rv).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Mb.makeRotationFromQuaternion(e),this.applyMatrix4(Mb),this}rotateX(e){return Mb.makeRotationX(e),this.applyMatrix4(Mb),this}rotateY(e){return Mb.makeRotationY(e),this.applyMatrix4(Mb),this}rotateZ(e){return Mb.makeRotationZ(e),this.applyMatrix4(Mb),this}translate(e,t,n){return Mb.makeTranslation(e,t,n),this.applyMatrix4(Mb),this}scale(e,t,n){return Mb.makeScale(e,t,n),this.applyMatrix4(Mb),this}lookAt(e){return Db.lookAt(e),Db.updateMatrix(),this.applyMatrix4(Db.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kb).negate(),this.translate(kb.x,kb.y,kb.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new Ab(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Qv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Nv(-1/0,-1/0,-1/0),new Nv(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Nb.setFromBufferAttribute(e),this.morphTargetsRelative?(Ib.addVectors(this.boundingBox.min,Nb.min),this.boundingBox.expandByPoint(Ib),Ib.addVectors(this.boundingBox.max,Nb.max),this.boundingBox.expandByPoint(Ib)):(this.boundingBox.expandByPoint(Nb.min),this.boundingBox.expandByPoint(Nb.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new my);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Nv,1/0);if(e){const n=this.boundingSphere.center;if(Nb.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Fb.setFromBufferAttribute(n),this.morphTargetsRelative?(Ib.addVectors(Nb.min,Fb.min),Nb.expandByPoint(Ib),Ib.addVectors(Nb.max,Fb.max),Nb.expandByPoint(Ib)):(Nb.expandByPoint(Fb.min),Nb.expandByPoint(Fb.max))}Nb.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Ib.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Ib));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],a=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Ib.fromBufferAttribute(s,t),a&&(kb.fromBufferAttribute(e,t),Ib.add(kb)),r=Math.max(r,n.distanceToSquared(Ib))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Sb(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),a=[],o=[];for(let S=0;S<n.count;S++)a[S]=new Nv,o[S]=new Nv;const l=new Nv,u=new Nv,c=new Nv,h=new Dv,d=new Dv,p=new Dv,f=new Nv,m=new Nv;function g(e,t,r){l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,t),c.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),u.sub(l),c.sub(l),d.sub(h),p.sub(h);const s=1/(d.x*p.y-p.x*d.y);isFinite(s)&&(f.copy(u).multiplyScalar(p.y).addScaledVector(c,-d.y).multiplyScalar(s),m.copy(c).multiplyScalar(d.x).addScaledVector(u,-p.x).multiplyScalar(s),a[e].add(f),a[t].add(f),a[r].add(f),o[e].add(m),o[t].add(m),o[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let S=0,E=v.length;S<E;++S){const t=v[S],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const y=new Nv,b=new Nv,x=new Nv,_=new Nv;function w(e){x.fromBufferAttribute(r,e),_.copy(x);const t=a[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),b.crossVectors(_,t);const n=b.dot(o[e])<0?-1:1;s.setXYZW(e,y.x,y.y,y.z,n)}for(let S=0,E=v.length;S<E;++S){const t=v[S],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)w(e.getX(r+0)),w(e.getX(r+1)),w(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Sb(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Nv,i=new Nv,s=new Nv,a=new Nv,o=new Nv,l=new Nv,u=new Nv,c=new Nv;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),u.subVectors(s,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(u),o.add(u),l.add(u),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),u.subVectors(s,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ib.fromBufferAttribute(e,t),Ib.normalize(),e.setXYZ(t,Ib.x,Ib.y,Ib.z)}toNonIndexed(){function t(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let a=0,o=0;for(let l=0,u=t.length;l<u;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)s[o++]=n[a++]}return new Sb(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new e,r=this.index.array,i=this.attributes;for(const e in i){const s=t(i[e],r);n.setAttribute(e,s)}const s=this.morphAttributes;for(const e in s){const i=[],a=s[e];for(let e=0,n=a.length;e<n;e++){const n=t(a[e],r);i.push(n)}n.morphAttributes[e]=i}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,o=a.length;e<o;e++){const t=a[e];n.addGroup(t.start,t.count,t.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere=a.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,u=s.length;l<u;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Lb=new Ey,Pb=new Sy,Ob=new my,Bb=new Nv,Ub=new Nv,zb=new Nv,Vb=new Nv,jb=new Nv,Gb=new Nv,Hb=new Nv,Wb=new Nv,$b=class extends Ky{constructor(e=new Rb,t=new bb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){Gb.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],o=i[n];0!==r&&(jb.fromBufferAttribute(o,e),s?Gb.addScaledVector(jb,r):Gb.addScaledVector(jb.sub(t),r))}t.add(Gb)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Ob.copy(n.boundingSphere),Ob.applyMatrix4(i),Pb.copy(e.ray).recast(e.near),!1===Ob.containsPoint(Pb.origin)){if(null===Pb.intersectSphere(Ob,Bb))return;if(Pb.origin.distanceToSquared(Bb)>(e.far-e.near)**2)return}Lb.copy(i).invert(),Pb.copy(e.ray).applyMatrix4(Lb),null!==n.boundingBox&&!1===Pb.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Pb)}}_computeIntersections(e,t,n){let r;const i=this.geometry,s=this.material,a=i.index,o=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,f=h.length;p<f;p++){const i=h[p],o=s[i.materialIndex];for(let s=Math.max(i.start,d.start),h=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));s<h;s+=3)r=nk(this,o,e,n,l,u,c,a.getX(s),a.getX(s+1),a.getX(s+2)),r&&(r.faceIndex=Math.floor(s/3),r.face.materialIndex=i.materialIndex,t.push(r))}else for(let p=Math.max(0,d.start),f=Math.min(a.count,d.start+d.count);p<f;p+=3)r=nk(this,s,e,n,l,u,c,a.getX(p),a.getX(p+1),a.getX(p+2)),r&&(r.faceIndex=Math.floor(p/3),t.push(r));else if(void 0!==o)if(Array.isArray(s))for(let p=0,f=h.length;p<f;p++){const i=h[p],a=s[i.materialIndex];for(let s=Math.max(i.start,d.start),h=Math.min(o.count,Math.min(i.start+i.count,d.start+d.count));s<h;s+=3)r=nk(this,a,e,n,l,u,c,s,s+1,s+2),r&&(r.faceIndex=Math.floor(s/3),r.face.materialIndex=i.materialIndex,t.push(r))}else for(let p=Math.max(0,d.start),f=Math.min(o.count,d.start+d.count);p<f;p+=3)r=nk(this,s,e,n,l,u,c,p,p+1,p+2),r&&(r.faceIndex=Math.floor(p/3),t.push(r))}},qb=class e extends Rb{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const o=[],l=[],u=[],c=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,v){const y=s/m,b=p/g,x=s/2,_=p/2,w=f/2,S=m+1,E=g+1;let C=0,A=0;const T=new Nv;for(let a=0;a<E;a++){const s=a*b-_;for(let o=0;o<S;o++)T[e]=(o*y-x)*r,T[t]=s*i,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,u.push(T.x,T.y,T.z),c.push(o/m),c.push(1-a/g),C+=1}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+S*a,n=h+e+S*(a+1),r=h+(e+1)+S*(a+1),i=h+(e+1)+S*a;o.push(t,n,i),o.push(n,r,i),A+=6}a.addGroup(d,A,v),d+=A,h+=C}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new Ab(l,3)),this.setAttribute("normal",new Ab(u,3)),this.setAttribute("uv",new Ab(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(t){return new e(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}},Xb={clone:rk,merge:ik},Yb=class extends yb{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rk(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},Zb=class extends Ky{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ey,this.projectionMatrix=new Ey,this.projectionMatrixInverse=new Ey,this.coordinateSystem=Ev,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},Kb=new Nv,Qb=new Dv,Jb=new Dv,ex=class extends Zb{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Mv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Tv*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Mv*Math.atan(Math.tan(.5*Tv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Kb.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Kb.x,Kb.y).multiplyScalar(-e/Kb.z),Kb.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Kb.x,Kb.y).multiplyScalar(-e/Kb.z)}getViewSize(e,t){return this.getViewBounds(e,Qb,Jb),t.subVectors(Jb,Qb)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Tv*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/a,r*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},tx=-90,nx=class extends Ky{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ex(tx,1,e,t);r.layers=this.layers,this.add(r);const i=new ex(tx,1,e,t);i.layers=this.layers,this.add(i);const s=new ex(tx,1,e,t);s.layers=this.layers,this.add(s);const a=new ex(tx,1,e,t);a.layers=this.layers,this.add(a);const o=new ex(tx,1,e,t);o.layers=this.layers,this.add(o);const l=new ex(tx,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,s,a,o]=t;for(const l of t)this.remove(l);if(2e3===e)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,a,o,l,u]=this.children,c=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}},rx=class extends $v{constructor(e=[],t=301,n,r,i,s,a,o,l,u){super(e,t,n,r,i,s,a,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},ix=class extends Yv{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new rx([n,n,n,n,n,n]),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new qb(5,5,5),i=new Yb({name:"CubemapFromEquirect",uniforms:rk(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const s=new $b(r,i),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=pg),new nx(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const i=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(i)}},sx=class extends Ky{constructor(){super(),this.isGroup=!0,this.type="Group"}},ax={type:"move"},ox=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new sx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new sx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Nv,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Nv),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new sx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Nv,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Nv),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n),r=this._getHandJoint(l,s);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),o=.02,u=.005;l.inputState.pinching&&a>o+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ax)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new sx;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},lx=class extends Ky{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ry,this.environmentIntensity=1,this.environmentRotation=new Ry,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},ux=new Nv,cx=new Nv,hx=new Rv,dx=class{constructor(e=new Nv(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ux.subVectors(n,t).cross(cx.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ux),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||hx.getNormalMatrix(e),r=this.coplanarPoint(ux).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},px=new my,fx=new Dv(.5,.5),mx=new Nv,gx=class{constructor(e=new dx,t=new dx,n=new dx,r=new dx,i=new dx,s=new dx){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3,n=!1){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],p=i[8],f=i[9],m=i[10],g=i[11],v=i[12],y=i[13],b=i[14],x=i[15];if(r[0].setComponents(l-s,d-u,g-p,x-v).normalize(),r[1].setComponents(l+s,d+u,g+p,x+v).normalize(),r[2].setComponents(l+a,d+c,g+f,x+y).normalize(),r[3].setComponents(l-a,d-c,g-f,x-y).normalize(),n)r[4].setComponents(o,h,m,b).normalize(),r[5].setComponents(l-o,d-h,g-m,x-b).normalize();else if(r[4].setComponents(l-o,d-h,g-m,x-b).normalize(),2e3===t)r[5].setComponents(l+o,d+h,g+m,x+b).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);r[5].setComponents(o,h,m,b).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),px.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),px.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(px)}intersectsSprite(e){return px.center.set(0,0,0),px.radius=.7071067811865476+fx.distanceTo(e.center),px.applyMatrix4(e.matrixWorld),this.intersectsSphere(px)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(mx.x=r.normal.x>0?e.max.x:e.min.x,mx.y=r.normal.y>0?e.max.y:e.min.y,mx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}},vx=class extends $v{constructor(e,t,n=_g,r,i,s,a=cg,o=cg,l,u=1026,c=1){if(1026!==u&&1027!==u)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:c},r,i,s,a,o,u,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Gv(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}},yx=class extends $v{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}},bx=class e extends Rb{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,u=o+1,c=e/a,h=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<u;g++){const e=g*h-s;for(let t=0;t<l;t++){const n=t*c-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new Ab(p,3)),this.setAttribute("normal",new Ab(f,3)),this.setAttribute("uv",new Ab(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(t){return new e(t.width,t.height,t.widthSegments,t.heightSegments)}},xx=class extends Yb{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},_x=class extends yb{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},wx=class extends yb{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Sx=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(!(e>=i)){const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0;break n}break e}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let s=0;s!==r;++s)t[s]=n[i+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Ex=class extends Sx{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],o=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*n-t;break;case 2402:s=1,o=n+r[1]-r[0];break;default:s=e-1,o=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=i*u,this._offsetNext=s*u}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==a;++x)i[x]=g*s[u+x]+v*s[l+x]+y*s[o+x]+b*s[c+x];return i}},Cx=class extends Sx{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=(n-t)/(r-t),c=1-u;for(let h=0;h!==a;++h)i[h]=s[l+h]*c+s[o+h]*u;return i}},Ax=class extends Sx{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},(Tx=class{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ak(t,this.TimeBufferType),this.values=ak(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ak(e.times,Array),values:ak(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ax(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ex(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case mv:t=this.InterpolantFactoryMethodDiscrete;break;case gv:t=this.InterpolantFactoryMethodLinear;break;case vv:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mv;case this.InterpolantFactoryMethodLinear:return gv;case this.InterpolantFactoryMethodSmooth:return vv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=n.slice(i,s),this.values=this.values.slice(i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==i;o++){const t=n[o];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,s),e=!1;break}s=t}if(void 0!==r&&(a=r,ArrayBuffer.isView(a)&&!(a instanceof DataView)))for(let o=0,l=r.length;o!==l;++o){const t=r[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}var a;return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===vv,i=e.length-1;let s=1;for(let a=1;a<i;++a){let i=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[s+a]){i=!0;break}}}if(i){if(a!==s){e[s]=e[a];const r=a*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,a=0;a!==n;++a)t[r+a]=t[e+a];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}).prototype.ValueTypeName="",Tx.prototype.TimeBufferType=Float32Array,Tx.prototype.ValueBufferType=Float32Array,Tx.prototype.DefaultInterpolation=gv,(Mx=class extends Tx{constructor(e,t,n){super(e,t,n)}}).prototype.ValueTypeName="bool",Mx.prototype.ValueBufferType=Array,Mx.prototype.DefaultInterpolation=mv,Mx.prototype.InterpolantFactoryMethodLinear=void 0,Mx.prototype.InterpolantFactoryMethodSmooth=void 0,class extends Tx{constructor(e,t,n,r){super(e,t,n,r)}}.prototype.ValueTypeName="color",class extends Tx{constructor(e,t,n,r){super(e,t,n,r)}}.prototype.ValueTypeName="number",Dx=class extends Sx{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)kv.slerpFlat(i,0,s,l-a,s,l,o);return i}},(kx=class extends Tx{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new Dx(this.times,this.values,this.getValueSize(),e)}}).prototype.ValueTypeName="quaternion",kx.prototype.InterpolantFactoryMethodSmooth=void 0,(Nx=class extends Tx{constructor(e,t,n){super(e,t,n)}}).prototype.ValueTypeName="string",Nx.prototype.ValueBufferType=Array,Nx.prototype.DefaultInterpolation=mv,Nx.prototype.InterpolantFactoryMethodLinear=void 0,Nx.prototype.InterpolantFactoryMethodSmooth=void 0,class extends Tx{constructor(e,t,n,r){super(e,t,n,r)}}.prototype.ValueTypeName="vector",Fx=class extends Zb{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},Ix=class extends ex{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}},Rx=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},Lx="\\[\\]\\.:\\/",Px=new RegExp("["+Lx+"]","g"),Ox="[^"+Lx+"]",Bx="[^"+Lx.replace("\\.","")+"]",Ux=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ox)+/(WCOD+)?/.source.replace("WCOD",Bx)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ox)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ox)+"$"),zx=["material","materials","bones","map"],Vx=class{constructor(e,t,n){const r=n||jx.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},(jx=class e{constructor(t,n,r){this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Px,"")}static parseTrackName(e){const t=Ux.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==zx.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let e=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let n=0;n<t.length;n++)if(t[n].name===e){e=n;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==e){if(void 0===t[e])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[e]}}const a=t[i];if(void 0===a){const e=n.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+e+"."+i+" but it wasn't found.",t)}let o=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?o=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}).Composite=Vx,jx.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jx.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jx.prototype.GetterByBindingType=[jx.prototype._getValue_direct,jx.prototype._getValue_array,jx.prototype._getValue_arrayElement,jx.prototype._getValue_toArray],jx.prototype.SetterByBindingTypeAndVersioning=[[jx.prototype._setValue_direct,jx.prototype._setValue_direct_setNeedsUpdate,jx.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jx.prototype._setValue_array,jx.prototype._setValue_array_setNeedsUpdate,jx.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jx.prototype._setValue_arrayElement,jx.prototype._setValue_arrayElement_setNeedsUpdate,jx.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jx.prototype._setValue_fromArray,jx.prototype._setValue_fromArray_setNeedsUpdate,jx.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"180"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="180"),Gx={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},(Wx={basic:{uniforms:ik([(Hx={common:{diffuse:{value:new mb(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rv},alphaMap:{value:null},alphaMapTransform:{value:new Rv},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rv}},envmap:{envMap:{value:null},envMapRotation:{value:new Rv},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rv}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rv}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rv},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rv},normalScale:{value:new Dv(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rv},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rv}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rv}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rv}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mb(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mb(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rv},alphaTest:{value:0},uvTransform:{value:new Rv}},sprite:{diffuse:{value:new mb(16777215)},opacity:{value:1},center:{value:new Dv(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rv},alphaMap:{value:null},alphaMapTransform:{value:new Rv},alphaTest:{value:0}}}).common,Hx.specularmap,Hx.envmap,Hx.aomap,Hx.lightmap,Hx.fog]),vertexShader:Gx.meshbasic_vert,fragmentShader:Gx.meshbasic_frag},lambert:{uniforms:ik([Hx.common,Hx.specularmap,Hx.envmap,Hx.aomap,Hx.lightmap,Hx.emissivemap,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,Hx.fog,Hx.lights,{emissive:{value:new mb(0)}}]),vertexShader:Gx.meshlambert_vert,fragmentShader:Gx.meshlambert_frag},phong:{uniforms:ik([Hx.common,Hx.specularmap,Hx.envmap,Hx.aomap,Hx.lightmap,Hx.emissivemap,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,Hx.fog,Hx.lights,{emissive:{value:new mb(0)},specular:{value:new mb(1118481)},shininess:{value:30}}]),vertexShader:Gx.meshphong_vert,fragmentShader:Gx.meshphong_frag},standard:{uniforms:ik([Hx.common,Hx.envmap,Hx.aomap,Hx.lightmap,Hx.emissivemap,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,Hx.roughnessmap,Hx.metalnessmap,Hx.fog,Hx.lights,{emissive:{value:new mb(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gx.meshphysical_vert,fragmentShader:Gx.meshphysical_frag},toon:{uniforms:ik([Hx.common,Hx.aomap,Hx.lightmap,Hx.emissivemap,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,Hx.gradientmap,Hx.fog,Hx.lights,{emissive:{value:new mb(0)}}]),vertexShader:Gx.meshtoon_vert,fragmentShader:Gx.meshtoon_frag},matcap:{uniforms:ik([Hx.common,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,Hx.fog,{matcap:{value:null}}]),vertexShader:Gx.meshmatcap_vert,fragmentShader:Gx.meshmatcap_frag},points:{uniforms:ik([Hx.points,Hx.fog]),vertexShader:Gx.points_vert,fragmentShader:Gx.points_frag},dashed:{uniforms:ik([Hx.common,Hx.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gx.linedashed_vert,fragmentShader:Gx.linedashed_frag},depth:{uniforms:ik([Hx.common,Hx.displacementmap]),vertexShader:Gx.depth_vert,fragmentShader:Gx.depth_frag},normal:{uniforms:ik([Hx.common,Hx.bumpmap,Hx.normalmap,Hx.displacementmap,{opacity:{value:1}}]),vertexShader:Gx.meshnormal_vert,fragmentShader:Gx.meshnormal_frag},sprite:{uniforms:ik([Hx.sprite,Hx.fog]),vertexShader:Gx.sprite_vert,fragmentShader:Gx.sprite_frag},background:{uniforms:{uvTransform:{value:new Rv},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gx.background_vert,fragmentShader:Gx.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rv}},vertexShader:Gx.backgroundCube_vert,fragmentShader:Gx.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gx.cube_vert,fragmentShader:Gx.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gx.equirect_vert,fragmentShader:Gx.equirect_frag},distanceRGBA:{uniforms:ik([Hx.common,Hx.displacementmap,{referencePosition:{value:new Nv},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gx.distanceRGBA_vert,fragmentShader:Gx.distanceRGBA_frag},shadow:{uniforms:ik([Hx.lights,Hx.fog,{color:{value:new mb(0)},opacity:{value:1}}]),vertexShader:Gx.shadow_vert,fragmentShader:Gx.shadow_frag}}).physical={uniforms:ik([Wx.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rv},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rv},clearcoatNormalScale:{value:new Dv(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rv},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rv},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rv},sheen:{value:0},sheenColor:{value:new mb(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rv},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rv},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rv},transmissionSamplerSize:{value:new Dv},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rv},attenuationDistance:{value:0},attenuationColor:{value:new mb(0)},specularColor:{value:new mb(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rv},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rv},anisotropyVector:{value:new Dv},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rv}}]),vertexShader:Gx.meshphysical_vert,fragmentShader:Gx.meshphysical_frag},$x={r:0,b:0,g:0},qx=new Ry,Xx=new Ey,Yx=4,Zx=[.125,.215,.35,.446,.526,.582],Kx=20,Qx=new Fx,Jx=new mb,e_=null,t_=0,n_=0,r_=!1,i_=(1+Math.sqrt(5))/2,a_=[new Nv(-i_,s_=1/i_,0),new Nv(i_,s_,0),new Nv(-s_,0,i_),new Nv(s_,0,i_),new Nv(0,i_,-s_),new Nv(0,i_,s_),new Nv(-1,1,-1),new Nv(1,1,-1),new Nv(-1,1,1),new Nv(1,1,1)],o_=new Nv,l_=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,i={}){const{size:s=256,position:a=o_}=i;e_=this._renderer.getRenderTarget(),t_=this._renderer.getActiveCubeFace(),n_=this._renderer.getActiveMipmapLevel(),r_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o,a),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=bk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=yk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(e_,t_,n_),this._renderer.xr.enabled=r_,e.scissorTest=!1,vk(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),e_=this._renderer.getRenderTarget(),t_=this._renderer.getActiveCubeFace(),n_=this._renderer.getActiveMipmapLevel(),r_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:pg,minFilter:pg,generateMipmaps:!1,type:Sg,format:kg,colorSpace:xv,depthBuffer:!1},r=gk(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=gk(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-Yx+1+Zx.length;for(let a=0;a<s;a++){const s=Math.pow(2,i);n.push(s);let o=1/s;a>e-Yx?o=Zx[a-e+Yx-1]:0===a&&(o=0),r.push(o);const l=1/(s-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const x=new Rb;x.setAttribute("position",new Sb(v,f)),x.setAttribute("uv",new Sb(y,m)),x.setAttribute("faceIndex",new Sb(b,g)),t.push(x),i>Yx&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Kx),i=new Nv(0,1,0);return new Yb({name:"SphericalGaussianBlur",defines:{n:Kx,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new $b(this._lodPlanes[0],e);this._renderer.compile(t,Qx)}_sceneToCubeUV(e,t,n,r,i){const s=new ex(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(Jx),l.toneMapping=0,l.autoClear=!1,l.state.buffers.depth.getReversed()&&(l.setRenderTarget(r),l.clearDepth(),l.setRenderTarget(null));const h=new bb({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new $b(new qb,h);let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(Jx),p=!0);for(let m=0;m<6;m++){const t=m%3;0===t?(s.up.set(0,a[m],0),s.position.set(i.x,i.y,i.z),s.lookAt(i.x+o[m],i.y,i.z)):1===t?(s.up.set(0,0,a[m]),s.position.set(i.x,i.y,i.z),s.lookAt(i.x,i.y+o[m],i.z)):(s.up.set(0,a[m],0),s.position.set(i.x,i.y,i.z),s.lookAt(i.x,i.y,i.z+o[m]));const n=this._cubeSize;vk(r,t*n,m>2?n:0,n,n),l.setRenderTarget(r),p&&l.render(d,s),l.render(e,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=c,l.autoClear=u,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=bk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=yk());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new $b(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;vk(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,Qx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=a_[(r-i-1)%a_.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new $b(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*Kx-1),p=i/d,f=isFinite(i)?1+Math.floor(3*p):Kx;f>Kx&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${Kx}`);const m=[];let g=0;for(let b=0;b<Kx;++b){const e=b/p,t=Math.exp(-e*e/2);m.push(t),0===b?g+=t:b<f&&(g+=2*t)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-n;const y=this._sizeLods[r];vk(t,3*y*(r>v-Yx?r-v+Yx:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(u,Qx)}},u_=new $v,c_=new vx(1,1),h_=new Zv,d_=new Kv,p_=new rx,f_=[],m_=[],g_=new Float32Array(16),v_=new Float32Array(9),y_=new Float32Array(4),b_=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Nk;case 35664:return Fk;case 35665:return Ik;case 35666:return Rk;case 35674:return Lk;case 35675:return Pk;case 35676:return Ok;case 5124:case 35670:return Bk;case 35667:case 35671:return Uk;case 35668:case 35672:return zk;case 35669:case 35673:return Vk;case 5125:return jk;case 36294:return Gk;case 36295:return Hk;case 36296:return Wk;case 35678:case 36198:case 36298:case 36306:case 35682:return $k;case 35679:case 36299:case 36307:return qk;case 35680:case 36300:case 36308:case 36293:return Xk;case 36289:case 36303:case 36311:case 36292:return Yk}}(t.type)}},x_=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Zk;case 35664:return Kk;case 35665:return Qk;case 35666:return Jk;case 35674:return eN;case 35675:return tN;case 35676:return nN;case 5124:case 35670:return rN;case 35667:case 35671:return iN;case 35668:case 35672:return sN;case 35669:case 35673:return aN;case 5125:return oN;case 36294:return lN;case 36295:return uN;case 36296:return cN;case 35678:case 36198:case 36298:case 36306:case 35682:return hN;case 35679:case 36299:case 36307:return dN;case 35680:case 36300:case 36308:case 36293:return pN;case 36289:case 36303:case 36311:case 36292:return fN}}(t.type)}},__=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}},w_=/(\w+)(\])?(\[|\.)?/g,S_=class{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);gN(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}},E_=37297,C_=0,A_=new Rv,T_=new Nv,M_=/^[ \t]*#include +<([\w\d./]+)>/gm,D_=new Map,k_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,N_=0,F_=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new I_(e),t.set(e,n)),n}},I_=class{constructor(e){this.id=N_++,this.code=e,this.usedTimes=0}},R_=0,L_="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",P_="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",O_={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3},B_=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new yx(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Yb({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new $b(new bx(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},U_=class extends Cv{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",o=1,l=null,u=null,c=null,h=null,d=null,p=null;const f="undefined"!=typeof XRWebGLBinding,m=new B_,g={},v=t.getContextAttributes();let y=null,b=null;const x=[],_=[],w=new Dv;let S=null;const E=new ex;E.viewport=new qv;const C=new ex;C.viewport=new qv;const A=[E,C],T=new Ix;let M=null,D=null;function k(e){const t=_.indexOf(e.inputSource);if(-1===t)return;const n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function N(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",N),r.removeEventListener("inputsourceschange",F);for(let e=0;e<x.length;e++){const t=_[e];null!==t&&(_[e]=null,x[e].disconnect(t))}M=null,D=null,m.reset();for(const e in g)delete g[e];e.setRenderTarget(y),d=null,h=null,c=null,r=null,b=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(S),e.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}function F(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=_.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=_.length){_.push(n),r=e;break}if(null===_[e]){_[e]=n,r=e;break}}if(-1===r)break}const i=x[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new ox,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new ox,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new ox,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return null===c&&f&&(c=new XRWebGLBinding(r,t)),c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",N),r.addEventListener("inputsourceschange",F),!0!==v.xrCompatible&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(w),f&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,s=null,a=null;v.depth&&(a=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?Ng:1026,s=v.stencil?1020:_g);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:i};c=this.getBinding(),h=c.createProjectionLayer(o),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new Yv(h.textureWidth,h.textureHeight,{format:kg,type:gg,depthTexture:new vx(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),b=new Yv(d.framebufferWidth,d.framebufferHeight,{format:kg,type:gg,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await r.requestReferenceSpace(a),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const I=new Nv,R=new Nv;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),T.near=C.near=E.near=t,T.far=C.far=E.far=n,M===T.near&&D===T.far||(r.updateRenderState({depthNear:T.near,depthFar:T.far}),M=T.near,D=T.far),T.layers.mask=6|e.layers.mask,E.layers.mask=3&T.layers.mask,C.layers.mask=5&T.layers.mask;const i=e.parent,s=T.cameras;L(T,i);for(let r=0;r<s.length;r++)L(s[r],i);2===s.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(R),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+f,n=o+f,i=d-m,s=p+(r-m),c=l*o/n*t,h=u*o/n*t;e.projectionMatrix.makePerspective(i,s,c,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(T,E,C):T.projectionMatrix.copy(E.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Mv*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,T,i)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(T)},this.getCameraTexture=function(e){return g[e]};let P=null;const O=new lk;O.setAnimationLoop(function(t,i){if(u=i.getViewerPose(l||s),p=i,null!==u){const t=u.views;null!==d&&(e.setRenderTargetFramebuffer(b,d.framebuffer),e.setRenderTarget(b));let i=!1;t.length!==T.cameras.length&&(T.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let s=null;if(null!==d)s=d.getViewport(r);else{const t=c.getViewSubImage(h,r);s=t.viewport,0===n&&(e.setRenderTargetTextures(b,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(b))}let a=A[n];void 0===a&&(a=new ex,a.layers.enable(n),a.viewport=new qv,A[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===n&&(T.matrix.copy(a.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===i&&T.cameras.push(a)}const s=r.enabledFeatures;if(s&&s.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&f){c=n.getBinding();const e=c.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&m.init(e,r.renderState)}if(s&&s.includes("camera-access")&&f){e.state.unbindTexture(),c=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new yx,g[n]=e),e.sourceTexture=c.getCameraImage(n)}}}}for(let e=0;e<x.length;e++){const t=_[e],n=x[e];null!==t&&void 0!==n&&n.update(t,i,l||s)}P&&P(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}},z_=new Ry,V_=new Ey,j_=class{constructor(e={}){const{canvas:t=XD(),context:n=null,depth:r=!0,stencil:i=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:c=!1,reversedDepthBuffer:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=s;const p=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const b=this;let x=!1;this._outputColorSpace=bv;let _=0,w=0,S=null,E=-1,C=null;const A=new qv,T=new qv;let M=null;const D=new mb(0);let k=0,N=t.width,F=t.height,I=1,R=null,L=null;const P=new qv(0,0,N,F),O=new qv(0,0,N,F);let B=!1;const U=new gx;let z=!1,V=!1;const j=new Ey,G=new Nv,H=new qv,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let $=!1;function q(){return null===S?I:1}let X,Y,Z,K,Q,J,ee,te,ne,re,ie,se,ae,oe,le,ue,ce,he,de,pe,fe,me,ge,ve,ye=n;function be(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r180"),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===ye){const t="webgl2";if(ye=be(t,e),null===ye)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(je){throw console.error("THREE.WebGLRenderer: "+je.message),je}function xe(){X=new _k(ye),X.init(),me=new WN(ye,X),Y=new pk(ye,X,e,me),Z=new GN(ye,X),Y.reversedDepthBuffer&&h&&Z.buffers.depth.setReversed(!0),K=new Ek(ye),Q=new FN,J=new HN(ye,X,Z,Q,Y,me,K),ee=new mk(b),te=new xk(b),ne=new uk(ye),ge=new hk(ye,ne),re=new wk(ye,ne,K,ge),ie=new Ak(ye,re,ne,K),de=new Ck(ye,Y,J),ue=new fk(Q),se=new NN(b,ee,te,X,Y,ge,ue),ae=new $N(b,Q),oe=new PN,le=new VN(X),he=new ck(b,ee,te,Z,ie,d,o),ce=new jN(b,ie,Y),ve=new qN(ye,K,Y,Z),pe=new dk(ye,X,K),fe=new Sk(ye,X,K),K.programs=se.programs,b.capabilities=Y,b.extensions=X,b.properties=Q,b.renderLists=oe,b.shadowMap=ce,b.state=Z,b.info=K}xe();const _e=new U_(b,ye);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=K.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;xe(),K.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach(function(e){se.releaseProgram(e)}),e.isShaderMaterial&&se.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Ae(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Pe(e,t,n),e.side=0,e.needsUpdate=!0,Pe(e,t,n),e.side=2):Pe(e,t,n)}this.xr=_e,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(N,F,!1))},this.getSize=function(e){return e.set(N,F)},this.setSize=function(e,n,r=!0){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=e,F=n,t.width=Math.floor(e*I),t.height=Math.floor(n*I),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(N*I,F*I).floor()},this.setDrawingBufferSize=function(e,n,r){N=e,F=n,I=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),Z.viewport(A.copy(P).multiplyScalar(I).round())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),Z.scissor(T.copy(O).multiplyScalar(I).round())},this.getScissorTest=function(){return B},this.setScissorTest=function(e){Z.setScissorTest(B=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor(...arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=S.texture.type,t=1009===e||1014===e||1012===e||1020===e||1017===e||1018===e,n=he.getClearColor(),r=he.getClearAlpha(),i=n.r,s=n.g,a=n.b;t?(p[0]=i,p[1]=s,p[2]=a,p[3]=r,ye.clearBufferuiv(ye.COLOR,0,p)):(f[0]=i,f[1]=s,f[2]=a,f[3]=r,ye.clearBufferiv(ye.COLOR,0,f))}else r|=ye.COLOR_BUFFER_BIT}t&&(r|=ye.DEPTH_BUFFER_BIT),n&&(r|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),he.dispose(),oe.dispose(),le.dispose(),Q.dispose(),ee.dispose(),te.dispose(),ie.dispose(),ge.dispose(),ve.dispose(),se.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Me),_e.removeEventListener("sessionend",De),ke.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=W);const a=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=W),J.resetTextureUnits();const s=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===S?b.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:xv,l=(r.isMeshStandardMaterial?te:ee).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=0;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(f=b.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Q.get(r),x=g.state.lights;if(!0===z&&(!0===V||e!==C)){const t=e===C&&r.id===E;ue.setState(r,e,t)}let _=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputColorSpace!==o||i.isBatchedMesh&&!1===y.batching?_=!0:i.isBatchedMesh||!0!==y.batching?i.isBatchedMesh&&!0===y.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===y.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===y.instancing?_=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?_=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===y.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===y.instancingMorph&&null!==i.morphTexture||y.envMap!==l||!0===r.fog&&y.fog!==s?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ue.numPlanes&&y.numIntersection===ue.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,y.__version=r.version);let w=y.currentProgram;!0===_&&(w=Pe(r,t,i));let A=!1,T=!1,M=!1;const D=w.getUniforms(),k=y.uniforms;if(Z.useProgram(w.program)&&(A=!0,T=!0,M=!0),r.id!==E&&(E=r.id,T=!0),A||C!==e){Z.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),D.setValue(ye,"projectionMatrix",e.projectionMatrix),D.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=D.map.cameraPosition;void 0!==t&&t.setValue(ye,G.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&D.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,T=!0,M=!0)}if(i.isSkinnedMesh){D.setOptional(ye,i,"bindMatrix"),D.setOptional(ye,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(ye,"boneTexture",e.boneTexture,J))}i.isBatchedMesh&&(D.setOptional(ye,i,"batchingTexture"),D.setValue(ye,"batchingTexture",i._matricesTexture,J),D.setOptional(ye,i,"batchingIdTexture"),D.setValue(ye,"batchingIdTexture",i._indirectTexture,J),D.setOptional(ye,i,"batchingColorTexture"),null!==i._colorsTexture&&D.setValue(ye,"batchingColorTexture",i._colorsTexture,J));const N=n.morphAttributes;var R,L;if(void 0===N.position&&void 0===N.normal&&void 0===N.color||de.update(i,n,w),(T||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,D.setValue(ye,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(k.envMapIntensity.value=t.environmentIntensity),T&&(D.setValue(ye,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(L=M,(R=k).ambientLightColor.needsUpdate=L,R.lightProbe.needsUpdate=L,R.directionalLights.needsUpdate=L,R.directionalLightShadows.needsUpdate=L,R.pointLights.needsUpdate=L,R.pointLightShadows.needsUpdate=L,R.spotLights.needsUpdate=L,R.spotLightShadows.needsUpdate=L,R.rectAreaLights.needsUpdate=L,R.hemisphereLights.needsUpdate=L),s&&!0===r.fog&&ae.refreshFogUniforms(k,s),ae.refreshMaterialUniforms(k,r,I,F,g.state.transmissionRenderTarget[e.id]),S_.upload(ye,Oe(y),k,J)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(S_.upload(ye,Oe(y),k,J),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&D.setValue(ye,"center",i.center),D.setValue(ye,"modelViewMatrix",i.modelViewMatrix),D.setValue(ye,"normalMatrix",i.normalMatrix),D.setValue(ye,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ve.update(n,w),ve.bind(n,w)}}return w}(e,t,n,r,i);Z.setMaterial(r,a);let l=n.index,u=1;if(!0===r.wireframe){if(l=re.getWireframeAttribute(n),void 0===l)return;u=2}const c=n.drawRange,h=n.attributes.position;let d=c.start*u,p=(c.start+c.count)*u;null!==s&&(d=Math.max(d,s.start*u),p=Math.min(p,(s.start+s.count)*u)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;ge.setup(i,r,o,n,l);let v=pe;if(null!==l&&(m=ne.get(l),v=fe,v.setIndex(m)),i.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*q()),v.setMode(ye.LINES)):v.setMode(ye.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Z.setLineWidth(e*q()),i.isLineSegments?v.setMode(ye.LINES):i.isLineLoop?v.setMode(ye.LINE_LOOP):v.setMode(ye.LINE_STRIP)}else i.isPoints?v.setMode(ye.POINTS):i.isSprite&&v.setMode(ye.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)YD("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(X.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,s=l?ne.get(l).bytesPerElement:1,a=Q.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)a.setValue(ye,"_gl_DrawID",r),v.render(e[r]/s,t[r])}else if(i.isInstancedMesh)v.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t,n=null){null===n&&(n=e),g=le.get(n),g.init(t),y.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const s=t[i];Ae(s,n,e),r.add(s)}else Ae(t,n,e),r.add(t)}),g=y.pop(),r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){Q.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Te=null;function Me(){ke.stop()}function De(){ke.start()}const ke=new lk;function Ne(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||U.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ie.update(e),i=e.material;i.visible&&m.push(e,t,i,n,H.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||U.intersectsObject(e))){const t=ie.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),H.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),H.copy(t.boundingSphere.center)),H.applyMatrix4(e.matrixWorld).applyMatrix4(j)),Array.isArray(i)){const r=t.groups;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i[a.materialIndex];o&&o.visible&&m.push(e,t,o,n,H.z,a)}}else i.visible&&m.push(e,t,i,n,H.z,null)}const i=e.children;for(let s=0,a=i.length;s<a;s++)Ne(i[s],t,n,r)}function Fe(e,t,n,r){const i=e.opaque,s=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===z&&ue.setGlobalState(b.clippingPlanes,n),r&&Z.viewport(A.copy(r)),i.length>0&&Re(i,t,n),s.length>0&&Re(s,t,n),a.length>0&&Re(a,t,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Ie(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new Yv(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")||X.has("EXT_color_buffer_float")?Sg:gg,minFilter:mg,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Uv.workingColorSpace}));const s=g.state.transmissionRenderTarget[r.id],a=r.viewport||A;s.setSize(a.z*b.transmissionResolutionScale,a.w*b.transmissionResolutionScale);const o=b.getRenderTarget(),l=b.getActiveCubeFace(),u=b.getActiveMipmapLevel();b.setRenderTarget(s),b.getClearColor(D),k=b.getClearAlpha(),k<1&&b.setClearColor(16777215,.5),b.clear(),$&&he.render(n);const c=b.toneMapping;b.toneMapping=0;const h=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===z&&ue.setGlobalState(b.clippingPlanes,r),Re(e,n,r),J.updateMultisampleRenderTarget(s),J.updateRenderTargetMipmap(s),!1===X.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,s=t.length;i<s;i++){const s=t[i],a=s.object,o=s.geometry,l=s.material,u=s.group;if(2===l.side&&a.layers.test(r.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Le(a,n,r,o,l,u),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(J.updateMultisampleRenderTarget(s),J.updateRenderTargetMipmap(s))}b.setRenderTarget(o,l,u),b.setClearColor(D,k),void 0!==h&&(r.viewport=h),b.toneMapping=c}function Re(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=s.object,o=s.geometry,l=s.group;let u=s.material;!0===u.allowOverride&&null!==r&&(u=r),a.layers.test(n.layers)&&Le(a,t,n,o,u,l)}}function Le(e,t,n,r,i,s){e.onBeforeRender(b,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,s),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,s),i.side=0,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,s),i.side=2):b.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(b,t,n,r,i,s)}function Pe(e,t,n){!0!==t.isScene&&(t=W);const r=Q.get(e),i=g.state.lights,s=g.state.shadowsArray,a=i.state.version,o=se.getParameters(e,i.state,s,t,n),l=se.getProgramCacheKey(o);let u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===u&&(e.addEventListener("dispose",Ce),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Be(e,o),c}else o.uniforms=se.getUniforms(e),e.onBeforeCompile(o,b),c=se.acquireProgram(o,l),u.set(l,c),r.uniforms=o.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ue.uniform),Be(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=S_.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Be(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ke.setAnimationLoop(function(e){Te&&Te(e)}),"undefined"!=typeof self&&ke.setContext(self),this.setAnimationLoop=function(e){Te=e,_e.setAnimationLoop(e),null===e?ke.stop():ke.start()},_e.addEventListener("sessionstart",Me),_e.addEventListener("sessionend",De),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),g=le.get(e,y.length),g.init(t),y.push(g),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),U.setFromProjectionMatrix(j,Ev,t.reversedDepth),V=this.localClippingEnabled,z=ue.init(this.clippingPlanes,V),m=oe.get(e,v.length),m.init(),v.push(m),!0===_e.enabled&&!0===_e.isPresenting){const e=b.xr.getDepthSensingMesh();null!==e&&Ne(e,t,-1/0,b.sortObjects)}Ne(e,t,0,b.sortObjects),m.finish(),!0===b.sortObjects&&m.sort(R,L),$=!1===_e.enabled||!1===_e.isPresenting||!1===_e.hasDepthSensing(),$&&he.addToRenderList(m,e),this.info.render.frame++,!0===z&&ue.beginShadows();const n=g.state.shadowsArray;ce.render(n,e,t),!0===z&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=m.opaque,i=m.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,s=n.length;t<s;t++)Ie(r,i,e,n[t]);$&&he.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Fe(m,e,r,r.viewport)}}else i.length>0&&Ie(r,i,e,t),$&&he.render(e),Fe(m,e,t);null!==S&&0===w&&(J.updateMultisampleRenderTarget(S),J.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),ge.resetDefaultState(),E=-1,C=null,y.pop(),y.length>0?(g=y[y.length-1],!0===z&&ue.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){const r=Q.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Ue=ye.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){S=e,_=t,w=n;let r=!0,i=null,s=!1,a=!1;if(e){const o=Q.get(e);if(void 0!==o.__useDefaultFramebuffer)Z.bindFramebuffer(ye.FRAMEBUFFER,null),r=!1;else if(void 0===o.__webglFramebuffer)J.setupRenderTarget(e);else if(o.__hasExternalTextures)J.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const u=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(u[t])?u[t][n]:u[t],s=!0):i=e.samples>0&&!1===J.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(u)?u[n]:u,A.copy(e.viewport),T.copy(e.scissor),M=e.scissorTest}else A.copy(P).multiplyScalar(I).floor(),T.copy(O).multiplyScalar(I).floor(),M=B;if(0!==n&&(i=Ue),Z.bindFramebuffer(ye.FRAMEBUFFER,i)&&r&&Z.drawBuffers(e,i),Z.viewport(A),Z.scissor(T),Z.setScissorTest(M),s){const r=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=t;for(let t=0;t<e.textures.length;t++){const i=Q.get(e.textures[t]);ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0+t,i.__webglTexture,n,r)}}else if(null!==e&&0!==n){const t=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,a,o=0){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(l=l[a]),l){Z.bindFramebuffer(ye.FRAMEBUFFER,l);try{const a=e.textures[o],l=a.format,u=a.type;if(!Y.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Y.textureTypeReadable(u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&(e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,r,i,me.convert(l),me.convert(u),s))}finally{const e=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,s,a,o=0){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(l=l[a]),l){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){Z.bindFramebuffer(ye.FRAMEBUFFER,l);const a=e.textures[o],u=a.format,c=a.type;if(!Y.textureFormatReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Y.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const h=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.bufferData(ye.PIXEL_PACK_BUFFER,s.byteLength,ye.STREAM_READ),e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,r,i,me.convert(u),me.convert(c),0);const d=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(ye.FRAMEBUFFER,d);const p=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise(function(r,i){setTimeout(function s(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}},n)})}(ye,p,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,s),ye.deleteBuffer(h),ye.deleteSync(p),s}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),a=null!==t?t.x:0,o=null!==t?t.y:0;J.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,a,o,i,s),Z.unbindTexture()};const ze=ye.createFramebuffer(),Ve=ye.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,i=0,s=null){let a,o,l,u,c,h,d,p,f;null===s&&(0!==i?(YD("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),s=i,i=0):s=0);const m=e.isCompressedTexture?e.mipmaps[s]:e.image;if(null!==n)a=n.max.x-n.min.x,o=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,u=n.min.x,c=n.min.y,h=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-i);a=Math.floor(m.width*t),o=Math.floor(m.height*t),l=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,u=0,c=0,h=0}null!==r?(d=r.x,p=r.y,f=r.z):(d=0,p=0,f=0);const g=me.convert(t.format),v=me.convert(t.type);let y;t.isData3DTexture?(J.setTexture3D(t,0),y=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(J.setTexture2DArray(t,0),y=ye.TEXTURE_2D_ARRAY):(J.setTexture2D(t,0),y=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const b=ye.getParameter(ye.UNPACK_ROW_LENGTH),x=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),_=ye.getParameter(ye.UNPACK_SKIP_PIXELS),w=ye.getParameter(ye.UNPACK_SKIP_ROWS),S=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,m.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,m.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,u),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,c),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,h);const E=e.isDataArrayTexture||e.isData3DTexture,C=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=Q.get(e),r=Q.get(t),m=Q.get(n.__renderTarget),g=Q.get(r.__renderTarget);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,m.__webglFramebuffer),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<l;v++)E&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,i,h+v),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,s,f+v)),ye.blitFramebuffer(u,c,a,o,d,p,a,o,ye.DEPTH_BUFFER_BIT,ye.NEAREST);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,null),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==i||e.isRenderTargetTexture||Q.has(e)){const n=Q.get(e),r=Q.get(t);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,ze),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,Ve);for(let e=0;e<l;e++)E?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,n.__webglTexture,i,h+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,n.__webglTexture,i),C?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,r.__webglTexture,s,f+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,r.__webglTexture,s),0!==i?ye.blitFramebuffer(u,c,a,o,d,p,a,o,ye.COLOR_BUFFER_BIT,ye.NEAREST):C?ye.copyTexSubImage3D(y,s,d,p,f+e,u,c,a,o):ye.copyTexSubImage2D(y,s,d,p,u,c,a,o);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,null),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else C?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(y,s,d,p,f,a,o,l,g,v,m.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(y,s,d,p,f,a,o,l,g,m.data):ye.texSubImage3D(y,s,d,p,f,a,o,l,g,v,m):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,s,d,p,a,o,g,v,m.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,s,d,p,m.width,m.height,g,m.data):ye.texSubImage2D(ye.TEXTURE_2D,s,d,p,a,o,g,v,m);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,b),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,x),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,_),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,w),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,S),0===s&&t.generateMipmaps&&ye.generateMipmap(y),Z.unbindTexture()},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&J.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?J.setTextureCube(e,0):e.isData3DTexture?J.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?J.setTexture2DArray(e,0):J.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,Z.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ev}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Uv._getDrawingBufferColorSpace(e),t.unpackColorSpace=Uv._getUnpackColorSpace()}},G_={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"},H_=class{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},W_=new Fx(-1,1,1,-1,0,1),$_=new class extends Rb{constructor(){super(),this.setAttribute("position",new Ab([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ab([0,2,0,0,2,0],2))}},q_=class{constructor(e){this._mesh=new $b($_,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,W_)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},X_=class extends H_{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Yb?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Xb.clone(e.uniforms),this.material=new Yb({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new q_(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}},Y_=class extends H_{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let s,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,a=1):(s=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.color.setMask(!0),i.buffers.depth.setMask(!0),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}},Z_=class extends H_{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}},K_=class{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new Dv);this._width=n.width,this._height=n.height,(t=new Yv(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Sg})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new X_(G_),this.copyPass.material.blending=0,this.clock=new Rx}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const t=this.passes[r];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Y_&&(t instanceof Y_?n=!0:t instanceof Z_&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Dv);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}},Q_=class extends H_{constructor(e,t,n=null,r=null,i=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=i,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new mb}render(e,t,n){const r=e.autoClear;let i,s;e.autoClear=!1,null!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}},J_={name:"FilmShader",uniforms:{tDiffuse:{value:null},time:{value:0},intensity:{value:.5},grayscale:{value:!1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tuniform float intensity;\n\t\tuniform bool grayscale;\n\t\tuniform float time;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat noise = rand( fract( vUv + time ) );\n\n\t\t\tvec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );\n\n\t\t\tcolor = mix( base.rgb, color, intensity );\n\n\t\t\tif ( grayscale ) {\n\n\t\t\t\tcolor = vec3( luminance( color ) ); // assuming linear-srgb\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( color, base.a );\n\n\t\t}"},ew=class extends H_{constructor(e=.5,t=!1){super();const n=J_;this.uniforms=Xb.clone(n.uniforms),this.material=new Yb({name:n.name,uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),this.uniforms.intensity.value=e,this.uniforms.grayscale.value=t,this._fsQuad=new q_(this.material)}render(e,t,n,r){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=r,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}},tw={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:"\n\t\tprecision highp float;\n\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <tonemapping_pars_fragment>\n\t\t#include <colorspace_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\n\t\t\t// tone mapping\n\n\t\t\t#ifdef LINEAR_TONE_MAPPING\n\n\t\t\t\tgl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( REINHARD_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( CINEON_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( ACES_FILMIC_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( AGX_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( NEUTRAL_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( CUSTOM_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );\n\n\t\t\t#endif\n\n\t\t\t// color space\n\n\t\t\t#ifdef SRGB_TRANSFER\n\n\t\t\t\tgl_FragColor = sRGBTransferOETF( gl_FragColor );\n\n\t\t\t#endif\n\n\t\t}"},nw=class extends H_{constructor(){super(),this.uniforms=Xb.clone(tw.uniforms),this.material=new xx({name:tw.name,uniforms:this.uniforms,vertexShader:tw.vertexShader,fragmentShader:tw.fragmentShader}),this._fsQuad=new q_(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,this._outputColorSpace===e.outputColorSpace&&this._toneMapping===e.toneMapping||(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},"srgb"===Uv.getTransfer(this._outputColorSpace)&&(this.material.defines.SRGB_TRANSFER=""),1===this._toneMapping?this.material.defines.LINEAR_TONE_MAPPING="":2===this._toneMapping?this.material.defines.REINHARD_TONE_MAPPING="":3===this._toneMapping?this.material.defines.CINEON_TONE_MAPPING="":4===this._toneMapping?this.material.defines.ACES_FILMIC_TONE_MAPPING="":6===this._toneMapping?this.material.defines.AGX_TONE_MAPPING="":7===this._toneMapping?this.material.defines.NEUTRAL_TONE_MAPPING="":5===this._toneMapping&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),!0===this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}},rw=[{id:1,slug:"checkerboard3d",categories:["featured","creative"],title:"Checkerboard in Motion and 3D with Three.js",description:"Thrilled to see it featured by CodePen ",type:"video",videoSrc:"https://assets.codepen.io/9259849/5cc44ca4-52f5-4d90-98a1-0d993bc4b837.mp4",posterSrc:new URL("/assets/checkerboard3d-BXA__dxP.jpeg",""+n.meta.url).href},{id:2,slug:"katherinegroverfinejewelry",categories:["featured","for clients"],title:"Canvas Particle Animation for Katherine Grover Fine Jewelry",description:"Canvas Particle Animation using jewels from Katherine Grover Fine Jewelry",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/Subheading%20(12).mp4",posterSrc:new URL("/assets/grover-BaBdGsk-.jpeg",""+n.meta.url).href},{id:3,slug:"floatinglibrary",categories:["featured","for clients"],title:"Floating Three.js Library for Steven Shorkey",description:"A Three.js hero concept designed for an author looking beyond traditional book websites.",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/floatinglibrary.mp4",posterSrc:new URL("/assets/floatinglibrary-BML86isd.png",""+n.meta.url).href},{id:4,slug:"abstractolives",categories:["featured","creative"],title:"Design with a Splash of Code Using p5.js",description:"Thrilled to see it featured by CodePen ",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/abstract-olives.mp4",posterSrc:new URL("/assets/abstractolives-CO8uW2B_.jpeg",""+n.meta.url).href},{id:5,slug:"chargepoint",categories:["featured","research"],title:"React/AWS Dashboard for ChargePoint",description:"Microscopic UV-monitoring wearable",type:"image",imageSrc:new URL("/assets/chargepoint-CqMWySA2.png",""+n.meta.url).href},{id:6,slug:"meredithnorvell",categories:["featured","for clients"],title:"Wordpress Website for Meredith Norvell",description:"Designed and built with interactive book elements that steal the show",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/meredithnorvell.mp4",posterSrc:new URL("/assets/meredith-DQIJxl73.png",""+n.meta.url).href},{id:7,slug:"americanseasons",categories:["featured","for clients"],title:"Buzz-Worthy Animation for American Seasons",description:"In light of them opening for the season on Nantucket",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/seasons.mp4",posterSrc:new URL("/assets/seasons-B3i_PXWC.png",""+n.meta.url).href},{id:8,slug:"larq",categories:["featured","research"],title:"Filter Sensor Experiments for the LARQ PureVis Pitcher",description:"Designing and validating a capacitance-based system to track filter lifespan.",type:"image",imageSrc:new URL("/assets/larq-CuafkGX1.png",""+n.meta.url).href},{id:9,slug:"3dslicescountdown",categories:["featured","creative"],title:"3D Slices Countdown with Three.js",description:"A 3D countdown built from vertical ribbons that extrude forward to reveal each digit. Each ribbon samples a blurred digit field and offsets its geometry by row, creating a soft carved edge. I originally wanted to add stronger contour-line bands, but ended up keeping a subtle halo-like contour around the number for a calmer, more sculptural read.",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/3dslicescountdown.mp4",posterSrc:new URL("/assets/3dslicescountdown-DQBCzdPd.png",""+n.meta.url).href},{id:10,slug:"cherylfudge",categories:["featured","for clients"],title:"Cherylfudge.com",description:"A website design that compliments Cheryl Fudge's modern, dynamic art with a nod to Nantucket.",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/cfudge.mp4",posterSrc:new URL("/assets/cheryl-DIZ7QvfZ.png",""+n.meta.url).href},{id:11,slug:"uvsense",categories:["featured","research"],title:"Antenna Design for the Worldâ€™s Smallest UV Sensor",description:"Designed and validated a functional antenna for an ultra-compact wearable UV sensor, balancing size constraints with signal reliability.",type:"image",imageSrc:new URL("/assets/uv-sense-D8-viM-X.png",""+n.meta.url).href},{id:12,slug:"madewithlove",categories:["featured","for clients"],title:"Made With Love and p5.js",description:"When it comes together like this, itâ€™s Valentineâ€™s Day post-worthy",type:"video",videoSrc:"https://cdn.dribbble.com/userupload/40906361/file/original-391a3ed9ce0b7e144eca01fb724be566.mp4",posterSrc:new URL("/assets/madewithlove-DmBdmIOD.png",""+n.meta.url).href},{id:13,slug:"partana",categories:["featured","creative"],title:"Smear Effect for Templates",description:"First Template",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/partana.mp4",posterSrc:new URL("/assets/partana-Bj2399gb.png",""+n.meta.url).href},{id:14,slug:"aj",categories:["featured","for clients"],title:"Matter.js Animation for AJ Integrated",description:"Short film exploring movement and tension in oil and light",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/aj.mp4",posterSrc:new URL("/assets/aj-DKYtzLxW.png",""+n.meta.url).href},{id:15,slug:"ccnycposter",categories:["featured","creative"],title:"Creative Coding NYC Poster",description:"Exploring how timing and motion can make shapes appear through perception",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/ccnyc2.mp4",posterSrc:new URL("/assets/ccnyc-sgdxytuC.PNG",""+n.meta.url).href}],iw=e=>`${"/".endsWith("/")?"/":"//"}${e.startsWith("/")?e.slice(1):e}`,sw=d({"node_modules/react-ga4/dist/gtag.js":e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;"undefined"!=typeof window&&(void 0===window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(r=window).gtag.apply(r,t))}}}),aw=d({"node_modules/react-ga4/dist/format.js":e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e||"";return r&&(s=e.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,r){return n>0&&n+e.length!==r.length&&e.search(t)>-1&&":"!==r.charAt(n-2)&&("-"!==r.charAt(n+e.length)||"-"===r.charAt(n-1))&&r.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})),i&&(s=function(e){return function(e){return"string"==typeof e&&-1!==e.indexOf("@")}(e)?(console.warn("This arg looks like an email address, redacting."),n):e}(s)),s};var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i,n="REDACTED (Potential Email Address)"}}),ow=d({"node_modules/react-ga4/dist/ga4.js":e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=a(sw()),n=a(aw()),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],i=["title","location"],s=["page","hitType"];function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function g(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var y=function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"reset",function(){a.isInitialized=!1,a._testMode=!1,a._currentMeasurementId,a._hasLoadedGA=!1,a._isQueuing=!1,a._queueGtag=[]}),g(this,"_gtag",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];a._testMode||a._isQueuing?a._queueGtag.push(n):t.default.apply(void 0,n)}),g(this,"_loadGA",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!=typeof window&&"undefined"!=typeof document&&!a._hasLoadedGA){var r=document.createElement("script");r.async=!0,r.src="".concat(n,"?id=").concat(e),t&&r.setAttribute("nonce",t),document.body.appendChild(r),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},a._hasLoadedGA=!0}}),g(this,"_toGtagOptions",function(e){if(e){var t={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(e).reduce(function(e,n){var r=d(n,2),i=r[0],s=r[1];return t[i]?e[t[i]]=s:e[i]=s,e},{})}}),g(this,"initialize",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Require GA_MEASUREMENT_ID");var n="string"==typeof e?[{trackingId:e}]:e;a._currentMeasurementId=n[0].trackingId;var r=t.gaOptions,i=t.gtagOptions,s=t.nonce,o=t.testMode,l=void 0!==o&&o,c=t.gtagUrl;if(a._testMode=l,l||a._loadGA(a._currentMeasurementId,s,c),a.isInitialized||(a._gtag("js",new Date),n.forEach(function(e){var t=h(h(h({},a._toGtagOptions(h(h({},r),e.gaOptions))),i),e.gtagOptions);Object.keys(t).length?a._gtag("config",e.trackingId,t):a._gtag("config",e.trackingId)})),a.isInitialized=!0,!l){var d=u(a._queueGtag);for(a._queueGtag=[],a._isQueuing=!1;d.length;){var p=d.shift();a._gtag.apply(a,u(p)),"get"===p[0]&&(a._isQueuing=!0)}}}),g(this,"set",function(e){e?"object"===l(e)?(0===Object.keys(e).length&&console.warn("empty `fieldsObject` given to .set()"),a._gaCommand("set",e)):console.warn("Expected `fieldsObject` arg to be an Object"):console.warn("`fieldsObject` is required in .set()")}),g(this,"_gaCommandSendEvent",function(e,t,n,r,i){a._gtag("event",t,h(h({event_category:e,event_label:n,value:r},i&&{non_interaction:i.nonInteraction}),a._toGtagOptions(i)))}),g(this,"_gaCommandSendEventParameters",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommandSendEvent.apply(a,u(t.slice(1)));else{var i=t[0],s=i.eventCategory,l=i.eventAction,c=i.eventLabel,h=i.eventValue;i.hitType;var d=o(i,r);a._gaCommandSendEvent(s,l,c,h,d)}}),g(this,"_gaCommandSendTiming",function(e,t,n,r){a._gtag("event","timing_complete",{name:t,value:n,event_category:e,event_label:r})}),g(this,"_gaCommandSendPageview",function(e,t){if(t&&Object.keys(t).length){var n=a._toGtagOptions(t),r=n.title,s=n.location,l=o(n,i);a._gtag("event","page_view",h(h(h(h({},e&&{page_path:e}),r&&{page_title:r}),s&&{page_location:s}),l))}else e?a._gtag("event","page_view",{page_path:e}):a._gtag("event","page_view")}),g(this,"_gaCommandSendPageviewParameters",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommandSendPageview.apply(a,u(t.slice(1)));else{var r=t[0],i=r.page;r.hitType;var l=o(r,s);a._gaCommandSendPageview(i,l)}}),g(this,"_gaCommandSend",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="string"==typeof t[0]?t[0]:t[0].hitType;switch(r){case"event":a._gaCommandSendEventParameters.apply(a,t);break;case"pageview":a._gaCommandSendPageviewParameters.apply(a,t);break;case"timing":a._gaCommandSendTiming.apply(a,u(t.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(r));break;default:console.warn("Send command doesn't exist: ".concat(r))}}),g(this,"_gaCommandSet",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&(t[0]=g({},t[0],t[1])),a._gtag("set",a._toGtagOptions(t[0]))}),g(this,"_gaCommand",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];switch(e){case"send":a._gaCommandSend.apply(a,n);break;case"set":a._gaCommandSet.apply(a,n);break;default:console.warn("Command doesn't exist: ".concat(e))}}),g(this,"ga",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommand.apply(a,t);else{var r=t[0];a._gtag("get",a._currentMeasurementId,"client_id",function(e){a._isQueuing=!1;var t=a._queueGtag;for(r({get:function(t){return"clientId"===t?e:"trackingId"===t?a._currentMeasurementId:"apiVersion"===t?"1":void 0}});t.length;){var n=t.shift();a._gtag.apply(a,u(n))}}),a._isQueuing=!0}return a.ga}),g(this,"event",function(e,t){if("string"==typeof e)a._gtag("event",e,a._toGtagOptions(t));else{var r=e.action,i=e.category,s=e.label,o=e.value,l=e.nonInteraction,u=e.transport;if(!i||!r)return void console.warn("args.category AND args.action are required in event()");var c={hitType:"event",eventCategory:(0,n.default)(i),eventAction:(0,n.default)(r)};s&&(c.eventLabel=(0,n.default)(s)),void 0!==o&&("number"!=typeof o?console.warn("Expected `args.value` arg to be a Number."):c.eventValue=o),void 0!==l&&("boolean"!=typeof l?console.warn("`args.nonInteraction` must be a boolean."):c.nonInteraction=l),void 0!==u&&("string"!=typeof u?console.warn("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(u)&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),c.transport=u)),a._gaCommand("send",c)}}),g(this,"send",function(e){a._gaCommand("send",e)}),this.reset()}var a,c,p;return a=e,c=[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}],c&&m(a.prototype,c),p&&m(a,p),Object.defineProperty(a,"prototype",{writable:!1}),e}();e.GA4=y;var b=new y;e.default=b}}),uw=m((lw=d({"node_modules/react-ga4/dist/index.js":e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var i=r(n);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(s,o,l):s[o]=e[o]}return s.default=e,i&&i.set(e,s),s}(ow());function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}var i=n.GA4;e.ReactGAImplementation=i;var s=n.default;e.default=s}}))()),cw=1,hw=.6,dw=55,pw=10,fw=.04,mw=.17,gw="up",vw=60,yw=0,bw=1e3,xw=15e3,_w=7,ww="https://via.placeholder.com/800x1000.png?text=Try+uploading+your+own+photo",Sw=m(lw()),Ew="IKAT\nTEXT",Cw=100,Aw="#00204A",Tw="animated",Mw=12,Dw=7,kw=1200,Nw=.15,Fw=["Smear Effect","Ikat Text"],Iw=e=>e.trim().toLowerCase().replace(/\s+/g,"-"),Rw=e=>({x:e.clientX/window.innerWidth*2-1,y:-e.clientY/window.innerHeight*2+1}),new class{constructor(){this.mousePos=new r.Vector2(0,0),this.delta=new r.Vector2(0,0),this._hasPos=!1,this.trackMousePos()}trackMousePos(){window.addEventListener("mousemove",e=>this.setMousePos(e)),window.addEventListener("touchstart",e=>{e.touches&&e.touches[0]&&this.setMousePos(e.touches[0])},{passive:!1}),window.addEventListener("touchmove",e=>{e.touches&&e.touches[0]&&this.setMousePos(e.touches[0])},{passive:!1})}setMousePos(e){const{x:t,y:n}=Rw(e);this._hasPos?(this.delta.set(t-this.mousePos.x,n-this.mousePos.y),this.mousePos.set(t,n)):(this.mousePos.set(t,n),this.delta.set(0,0),this._hasPos=!0)}},Lw=[{id:1,slug:"checkerboard3d",categories:["featured","creative"],title:"Checkerboard in Motion and 3D",description:"Thrilled to see it featured by CodePen ",type:"video",videoSrc:"https://assets.codepen.io/9259849/5cc44ca4-52f5-4d90-98a1-0d993bc4b837.mp4",posterSrc:new URL("/assets/checkerboard3d-BXA__dxP.jpeg",""+n.meta.url).href},{id:2,slug:"katherinegroverfinejewelry",categories:["featured","for clients"],title:"Animation for Katherine Grover Fine Jewelry",description:"Canvas Particle Animation using jewels from Katherine Grover Fine Jewelry",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/Subheading%20(12).mp4",posterSrc:new URL("/assets/grover-BaBdGsk-.jpeg",""+n.meta.url).href},{id:3,slug:"ccnycposter",categories:["featured","creative"],title:"Creative Coding NYC Poster",description:"Exploring how timing and motion can make shapes appear through perception",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/cc.mp4",posterSrc:new URL("/assets/ccnyc-sgdxytuC.PNG",""+n.meta.url).href},{id:4,slug:"cherylfudge",categories:["featured","for clients"],title:"Cherylfudge.com",description:"A website design that compliments Cheryl Fudge's modern, dynamic art with a nod to Nantucket.",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/cfudge.mp4",posterSrc:new URL("/assets/cheryl-DIZ7QvfZ.png",""+n.meta.url).href},{id:5,slug:"americanseasons",categories:["featured","for clients"],title:"Buzz-Worthy Animation for American Seasons",description:"In light of them opening for the season on Nantucket",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/seasons.mp4",posterSrc:new URL("/assets/seasons-B3i_PXWC.png",""+n.meta.url).href},{id:6,slug:"meredithnorvell",categories:["featured","for clients"],title:"Website for Meredith Norvell",description:"Designed and built with interactive book elements that steal the show",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/meredithnorvell.mp4",posterSrc:new URL("/assets/meredith-DQIJxl73.png",""+n.meta.url).href},{id:7,slug:"aj",categories:["featured","for clients"],title:"Website for AJ",description:"Short film exploring movement and tension in oil and light",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/aj.mp4",posterSrc:new URL("/assets/aj-DKYtzLxW.png",""+n.meta.url).href},{id:8,slug:"madewithlove",categories:["featured","for clients"],title:"Made With Love",description:"When it comes together like this, itâ€™s Valentineâ€™s Day post-worthy",type:"video",videoSrc:"https://cdn.dribbble.com/userupload/40906361/file/original-391a3ed9ce0b7e144eca01fb724be566.mp4",posterSrc:new URL("/assets/madewithlove-DmBdmIOD.png",""+n.meta.url).href},{id:9,slug:"partana",categories:["featured","creative"],title:"Smear Effect",description:"First Template",type:"video",videoSrc:"https://hollandblumer.github.io/portfolio_videos/partana.mp4",posterSrc:new URL("/assets/partana-Bj2399gb.png",""+n.meta.url).href}],Pw={meredithnorvell:{slug:"meredithnorvell",title:"Meredithnorvell.com",tagLine:"Designed and built with interactive book elements that steal the show.",palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{video:"https://cdn.dribbble.com/userupload/40963070/file/original-9d0283154634708e5626d91e4a7f3adb.mp4",alt:"Meredith Norvell â€” hero still"},sections:[{type:"video",src:"https://cdn.dribbble.com/userupload/40963070/file/original-9d0283154634708e5626d91e4a7f3adb.mp4",caption:"Home page of meredithnorvell.com",loop:!0},{type:"text",content:"Meredithnorvell.com is for publishers and social media followers to visit and browse. In our first session, we pulled together what the client already had: her logo, color scheme, professional headshots, and a Pinterest board of inspiration for her upcoming book. We also walked through websites that stood out to her and unpacked what she liked about them.\n\nTowards the end of the meeting, I pulled up elements that caught my eye for this website, ones I had already compiled into a style guide ahead of time. My style guide is usually a Google Slides deck, with a slide for each component that separates a professionally designed website from the othersâ€”custom menu, loader, banner, font mix, color palette, scroll features, and subtle animations. Ultimately, we picked the best headshot for the homepage, of her reading on the couch that was horizontal, and both loved the idea of using a book loader animation."},{type:"image",src:"https://cdn.dribbble.com/userupload/40987294/file/original-5e40d2d2b3a6451793b392fd3aecb51c.webp?resize=1504x774&vertical=center",alt:"Mood board",caption:"Idea board that includes pictures and images of work"},{type:"text",content:"Post-meeting, while messing around with the book animation, I noticed it sort of looked like a menu and thought it would be cool if it was one. So I got to work, reversing the way the animation opened and closed, reducing the number of pages, making it open and close only once, and moving it to the top left corner of the screen once it opened and closed in the center. Early on, I realized I had to consider browser compatibility because the pages were flipping upside down on Safari. Since Safari struggles with rotateZ(180deg), I adjusted it to 179 degrees, and that did the trick. Once the closed book transitioned to the upper left corner, I set its display to none so that book2 could take its place. That way, when you clicked on book2, it would open a sliding menu. I also had to convert the code to simple HTML, CSS, and JS in case we were to inject it into a website builder like Wix. Due to time constraints, I passed the baton of book2â€™s sliding menu to the global team Iâ€™ve assembled. The header looked a little left-heavy with the book, especially on mobile, so I decided to add a custom-designed page ear on the right corner that served as a button when clicked, leading to the client's upcoming book."},{type:"video",src:"https://cdn.dribbble.com/userupload/40987299/file/original-31541fc7c70092556a2e00245016f223.mp4",caption:"Bright Silicon Stars Page on Meredithnorvell.com",loop:!0},{type:"video",src:"https://cdn.dribbble.com/userupload/40987297/file/original-ac0fb1e55139989e8c6e9df8605ac540.mp4",caption:"Social media reel for client based on web page animation",loop:!0},{type:"image",src:"https://cdn.dribbble.com/userupload/40987295/file/original-f494f73442597098b9f027d7aae1ac6d.webp?resize=1504x777&vertical=center",alt:"About",caption:"About Page of Meredithnorvell.com"},{type:"text",content:"For the about page, I kept it simple. I didnâ€™t want to use the same concept as the Bright Silicon Stars book page to display photos, so I found a 2x2 gallery on Canva and put a flower in the middle, and exported it as an svg. Same with the contact form. Though, I really wanted to make it more fun by adding an interactive envelope, which I started here. Due to time constraints, I just made the contact page different colors and simple yet elegant. Thrilled with how this website turned out. Visit meredithnorvell.com to view it live."},{type:"image",src:"https://cdn.dribbble.com/userupload/40987296/file/original-17caa51c2656694265c63939b13fe700.png?resize=1504x855&vertical=center",alt:"Contact",caption:"Contact Page"},{type:"video",src:"https://cdn.dribbble.com/userupload/40987298/file/original-1ce09837614ef019e0ec13a06959b249.mp4",caption:"Initial animation for contact form",loop:!0}]},cherylfudge:{slug:"cherylfudge",title:"Cherylfudge.com",tagLine:"A website design that compliments Cheryl Fudge's modern, dynamic art with a nod to Nantucket.",palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{video:"https://cdn.dribbble.com/userupload/42644442/file/original-353d0c120621f000d8cad934ecf17513.mp4",alt:"Cheryl Fudge website hero video"},sections:[{type:"text",content:"\nCheryl and I had our first meeting for her website on a beach in Nantucket, looking out at the harbor. While we caught up, I asked what inspires her. She pointed straight to the water. From there, I gathered images of what moves her, along with her art and past work, to shape the site."},{type:"image",src:"https://cdn.dribbble.com/userupload/42644906/file/original-1cd7acd7d13cdefb4a7a67bc4f08b3eb.jpeg?resize=1504x1128&vertical=center",alt:"Nantucket harbor inspiration",caption:"Inspiration for Cheryl Fudge's Website"},{type:"image",src:"https://cdn.dribbble.com/userupload/42644905/file/original-4cd165f70da4304c06a04323bdff5204.jpeg?resize=1504x2005&vertical=center",alt:"Smokey lines art inspiration",caption:"Smokey Lines that Cheryl Fudge Enjoys Painting"},{type:"text",content:"\nOff the bat, I knew the color scheme would lean blue. I landed on a muted, cool shade to balance all the colors in Cherylâ€™s art. From there, I turned to CodePen and Pinterest, keeping her inspiration in mind, to find elements that felt fluid and echoed the coast. A few generative art pieces and SVG filters stood out to me."},{type:"image",src:"https://cdn.dribbble.com/userupload/42645387/file/original-b2b55f78fe3ff7010ffd4d35e3433246.png?resize=1504x733&vertical=center",alt:"Sandy flow field component",caption:"Sandy Flow Field, Which I Used as the Background for Website Components Found on My CodePen"},{type:"image",src:"https://cdn.dribbble.com/userupload/42644553/file/original-3af659af7e626b376168772477bb0edd.png?resize=1504x765&vertical=center",alt:"Interiors page screenshot",caption:"Interiors Page Featuring Cheryl's Interior Design Work"},{type:"video",src:"https://cdn.dribbble.com/userupload/42644554/file/original-c4964ccb325edb6612777a0a937c961f.mov",caption:"About Page on Cherylfudge.com, Inspired by the Smokey Lines She Draws",loop:!0},{type:"image",src:"https://cdn.dribbble.com/userupload/42645386/file/original-0174ee2676388fbf51492f41a65de65b.png?resize=1504x797&vertical=center",alt:"Homepage gallery layout",caption:"Gallery Layout for the Home Page of Cherylfudge.com"},{type:"text",content:"For the home page, I was inspired by a lot of gallery wall layouts Iâ€™ve seen, especially those using Three.js. Still, I wanted something that felt more fluid and more like water. I explored a few options that featured her work but ultimately landed on a concept built with plain CSS, which is even better for browser compatibility. "}]},americanseasons:{slug:"americanseasons",title:"Buzz-Worthy SVG Tracer Animation for American Seasons",tagLine:"Custom SVG tracer animation brings the restaurant's logo to life for dynamic social media content.",palette:{bg:"#F4F7EF",ink:"#212121"},hero:{video:"https://cdn.dribbble.com/userupload/43999509/file/original-cb29508e406a48e6a079f3f13d1283e3.mp4",alt:"American Seasons SVG Tracer Animation Demo"},sections:[{type:"text",content:"Neil, the owner and head chef of American Seasons, reached out looking for more dynamic Instagram content ahead of their seasonal opening on Nantucket."},{type:"video",src:"https://cdn.dribbble.com/userupload/43999509/file/original-cb29508e406a48e6a079f3f13d1283e3.mp4",caption:"SVG Tracer Animation in action for the American Seasons Instagram reel.",loop:!0},{type:"text",content:"Inspired by the bee in their logo, I created a custom SVG tracer animation using JavaScript to animate a curly pollen path. I pulled everything together in Canva to produce an Instagram reel that brings their logo to life."}]},katherinegroverfinejewelry:{slug:"katherinegroverfinejewelry",title:"Canvas of Jewels for Katherine Grover Fine Jewelry",tagLine:"A custom canvas-based particle system that uses jewels as interactive particles to form Nantucket Island",palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{video:"https://cdn.dribbble.com/userupload/43826090/file/original-8a677209789bca38ccbf0b3c835cccc6.mp4",alt:"Katherine Grover Fine Jewelry Canvas Particle Animation"},sections:[{type:"video",src:"https://cdn.dribbble.com/userupload/43826090/file/original-8a677209789bca38ccbf0b3c835cccc6.mp4",caption:"The particle animation forming Nantucket.",loop:!0},{type:"text",content:"**Concept**  \nFor Katie, founder of Katherine Grover Fine Jewelry, I created a custom canvas particle animation using her own jewelry designs as the particles. She wanted an animation she could use across email marketing and Instagram ads that maintained a clean, elevated feel while introducing movement."},{type:"text",content:"**Approach**  \nI designed the system so the particles form around the shape of Nantucket Island rather than filling it in. Katieâ€™s logo sits in the negative space at the center, giving the composition a clear focal point while keeping the overall layout minimal."},{type:"text",content:"**Implementation**  \nThe animation is built with a custom canvas particle system adapted from an interactive logo tutorial. I reversed the particle coverage logic, used a base64 island image as a reference mask, and mapped high-resolution jewelry images across the canvas using getImageData(). The motion responds to mouse and touch, runs on GSAPâ€™s ticker for smooth performance, and stays sharp on retina displays."},{type:"text",content:"**Outcome**  \nThe final animation gave Katie a flexible, high-impact visual she could use across marketing channels. She was thrilled with the result."}]},madewithlove:{slug:"madewithlove",title:"When it comes together like this, itâ€™s Valentineâ€™s Day post-worthy",tagLine:"A generative art animation using thread-like strokes to form a heart and the text 'Made with Love' for a social media post.",palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{video:"https://cdn.dribbble.com/userupload/40906361/file/original-391a3ed9ce0b7e144eca01fb724be566.mp4",alt:"Made with Love generative thread animation"},sections:[{type:"text",content:"This is the version I made for Cheryl Fudge who makes one of a kind art and clothing based in Nantucket, MA. Much like the title, a lot of love went into making the components of this Valentineâ€™s Day post for a client in Nantucket, MA. Some of these elements, in fact, had been archived months ago, as I waited for the right moment to string them all together."},{type:"text",content:"\nThe inspiration for this project stemmed from a piece I saw on Pinterest, designed by Tiffany Lo. The free-flowing continuity of the thread and how it formed the text, coupled with the subtle shift in thick and thin organic lines, stood out to me. I was also drawn to the idea of â€œbeginning anywhereâ€. Cut to down the line, I came across a generative art code featured on CodePen that mimicked the thread-like, random behavior, and I quickly made the connection."},{type:"image",src:"https://cdn.dribbble.com/userupload/40906355/file/original-eafad0fda00dfee0430907aee38da23c.jpg?resize=1504x1945&vertical=center",alt:"Tiffany Lo's thread art inspiration",caption:"Inspiration piece designed by Tiffany Lo."},{type:"image",src:"https://cdn.dribbble.com/userupload/40906356/file/original-e2ddf43f59fe2aded87d11258d8511f4.webp?resize=1504x1200&vertical=center",alt:"Generative art code inspiration screenshot",caption:"Screenshot of the generative art code found on CodePen."},{type:"text",content:'\nKnowing that this was the start of something good, I had to look under the hood. I was impressed by the idea of creating thread-like strokes with randomized color values, such as:\n`c.strokeStyle = "rgba(51," + Math.floor(Math.random() * 100 + 55) + ",51,1)"`\nand the fact that the code draws 200 tiny line segments per frame. With the animation running at 60 frames per second, that results in 12,000 lines drawn per second. I messed around with different values, thicknesses, and colors until I found something that felt smooth. I also noticed that the original code was still drawing transparent lines outside the canvas, making it less efficient. I fixed that and added boundaries in the center for the points to navigate around.'},{type:"text",content:'\nWhile brainstorming for a Valentineâ€™s Day post, I decided to shape the boundaries in the center into a heart. To make it work within the canvas, I adjusted the coordinate system by flipping the heartâ€™s y-values, negating `py - heartY` before applying the heart equation. This ensured the shape rendered correctly.\n\nNext, I needed to find a font that would work in the center. I found inspiration from a poster  and had Lino, a similar font, as a reference. I worked with a designer to refine the lettering\'s curls and swoop placement. Considering the clientâ€™s clothes are all one-of-a-kind and handmade, "Made with Love" felt like the perfect fit. I fine-tuned everything in Adobe Illustrator to get the final vector shape.'},{type:"image",src:"https://cdn.dribbble.com/userupload/40906357/file/original-b415dea5683426c1a6e0b52dcc6a27c4.webp?resize=1504x2126&vertical=center",alt:"Deepfried friends concept poster",caption:"Lettering concept for deepfried freinds by Anna Kulachek."},{type:"image",src:"https://cdn.dribbble.com/userupload/40906354/file/original-e7d62c838597ba85af20072f2e7ac495.webp?resize=1504x576&vertical=center",alt:"Made with Love lettering detail",caption:"Close-up of the finalized 'Made with Love' lettering."},{type:"text",content:"\nOverall, Iâ€™m thrilled with how this piece turned out and hope that it spread love on Valentineâ€™s Day for my clientâ€™s followers."},{type:"video",src:"https://cdn.dribbble.com/userupload/40906360/file/original-1c0f9cab7f9f2321779d44e30e3d7caf.mp4",caption:"Final animation of the 'Made with Love' post.",loop:!0}]},aj:{slug:"aj",title:"It's Game On for a Sports Marketing Firm's Branding",tagLine:"Designing the Logo, Custom Animations, and Website for a Sports Marketing Firm",palette:{bg:"#F0F0F0",ink:"#202020"},hero:{video:null,alt:"AJ Integrated Branding Concept"},sections:[{type:"text",content:"Client was looking for a professional logo and custom website to showcase their expertise in brand partnerships, highlighting past successes, core services, and case studies. They wanted something more engaging and compelling than standard templated websites, with a playful aspect inspired by their six-year-old daughter."},{type:"text",content:"\nHere is a link to a blank style guide I've made based on my work with clients: https://docs.google.com/presentation/d/16oks3qcIFuduKPTuQJI1LElEfQ09EM8Nuky3Hy2djyE/edit. It helps get the ball rolling in the first meeting by visualizing the possibilities of the creative direction. I also get organized, making a folder and a Pinterest board for the client. "},{type:"text",content:"\nOnce a mood board was put together, I began searching for logo inspiration. I came across this logo on Pinterest:"},{type:"image",src:"https://cdn.dribbble.com/userupload/41028161/file/original-187a0aba41ada49523ce53758fcd8576.png?resize=1504x900&vertical=center",alt:"Source of inspiration for AJ Integrated logo",caption:"The logo above was the source of inspiration for my client's logo."},{type:"text",content:"Ultimately, I decided to merge the inspiration with a 'J' and asked a designer I work with to perfect it. I wanted to make the branding more playful and pulled up a website I had archived that used Matter.js in a clever manner. Given the business is about sports, I found suitable balls that could interact with the logo."},{type:"video",src:"https://cdn.dribbble.com/userupload/41028162/file/original-067928c75a7d3d6b4685559265e1fbe6.mp4",caption:"Matter.js animation interacting with the AJ Integrated logo.",loop:!0},{type:"text",content:"\nThe split text in the hero section creates a sharp, dynamic feel. The background animation adds depth. The callouts were positioned strategically. Every detail contributes to the flow, making the design feel intentional and connected."},{type:"video",src:"https://cdn.dribbble.com/userupload/41514812/file/original-18db272623106a8f737356f7596fe2d3.mp4",caption:"Demo of the website's dynamic hero section and split text.",loop:!0},{type:"text",content:"\nThis project was about more than building a website. It was about crafting an experience. The physics-based animations and bold branding reinforce the idea of momentum."}]},checkerboard3d:{slug:"checkerboard3d",title:"Checkerboard in Motion and 3D",tagLine:"Made another color version of this featured on CodePen",tagLink:{label:"here",href:"https://codepen.io/hollandblumer/pen/ZYQoBVe"},palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{type:"instagram",embed:"https://www.instagram.com/p/DQM3z9TDzv5/",alt:"3D checkerboard animation moving to music"},sections:[{type:"text",content:"**Concept**  \nThis began as a quick hero experiment for a private equity client with a square logo. I wanted to explore something in 3D and tested a range of square-based motions as potential directions."},{type:"text",content:"**Exploration**  \nI originally planned to color each block individually, and even explored variations inspired by the logo itself. But the default checkered texture that came with Three.js held the composition together better than anything I designed on top of it, so I kept it."},{type:"text",content:"**Refinement**  \nFrom there, I adjusted timing, speed, depth, and lighting so the motion felt slower and more intentional. I chose a warm, fall-inspired palette for my personal version and paired it with a St. Germain track so the grid felt like it moved with the music"},{type:"video",src:"https://assets.codepen.io/9259849/5cc44ca4-52f5-4d90-98a1-0d993bc4b837.mp4",caption:"Final animation of the 3D checkerboard.",loop:!0}]},ccnycposter:{slug:"ccnycposter",title:"Creative Coding NYC Poster",tagLine:"Animated typography where each letter emerges from smaller copies of itself, moving in waves with a soft glow. You can view the event",tagLink:{label:"here",href:"https://partiful.com/e/zaMIwOD0uSo4zEXIKgkn"},palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{video:"https://hollandblumer.github.io/portfolio_videos/cc.mp4",alt:"Creative Coding NYC Animated Poster Demo"},sections:[{type:"video",src:"https://hollandblumer.github.io/portfolio_videos/cc.mp4",caption:"Creative Coding NYC animated poster.",loop:!0},{type:"text",content:"Enjoyed making this poster for Creative Coding NYC. Lately, Iâ€™ve been exploring how timing and motion can make shapes appear through perception."},{type:"text",content:"Here, each letter is built from smaller copies of itself that move in a wave pattern, with an outward glow effect. The motion helps the event details come through without needing to sit perfectly still."},{type:"text",content:"Excited to keep pushing this concept and share it with the CCNYC community."}]},floatinglibrary:{slug:"floatinglibrary",title:"Floating Library for Steven Shorkey",tagLine:"A Three.js hero concept designed for an author looking beyond traditional book websites. It was also featured on CodePen",tagLink:{label:"here",href:"https://codepen.io/hollandblumer/pen/QwWzyqm"},palette:{bg:"#e4eeefff",ink:"#101010ff"},hero:{video:"https://hollandblumer.github.io/portfolio_videos/floatinglibrary.mp4",alt:"Floating Library Three.js hero animation for Steven Shorkey"},sections:[{type:"video",src:"https://hollandblumer.github.io/portfolio_videos/floatinglibrary.mp4",caption:"Floating Library hero animation designed for author Steven Shorkey",loop:!0},{type:"text",content:"**Concept**  \nSteven Shorkey, an author and writer, came to me after seeing Meredith Norvellâ€™s website. He was drawn to the motion and custom details and wanted that same sense of intention for his own site. He was clear from the start that he didnâ€™t want something conventional. Heâ€™s outdoorsy, drawn to greens and blues, and deeply interested in new technology. The goal was an author website that felt current and forward-thinking.\nThat direction was clear immediately. I wanted the hero to feel dimensional, setting the tone for the rest of the site. It was also an opportunity to explore Three.js in a way that felt purposeful rather than purely visual. I started with the idea of a library, explored multiple directions, from 2D books forming an S to words falling in Matter.js, before landing on this floating library approach."},{type:"text",content:"**Execution**  \nThe books are designed to drift slowly and close together, rotating just enough to create depth. The palette leans into cool greens and blues to reflect Stevenâ€™s interest in the outdoors, while simple lighting keeps the scene natural. I added text that shifts in color as books overlap, reinforcing depth and interaction."},{type:"text",content:"**Outcome**  \nThis project focused on using Three.js in a way that could realistically live on an author website. Every decision, from camera framing to motion speed, supported that goal. The site has not yet launched, as Steven is currently finalizing the written content he plans to publish. After sharing the project on CodePen, it was featured and received over 100 likes, reinforcing interest in subtle, spatial interactions on the web."}]},uvsense:{slug:"uvsense",title:"Antenna Design for the World's Smallest UV Sensor",tagLine:"Building a microscopic wearable that monitors UV exposure and syncs to smartphones.",tagLink:{label:"Read Article",href:"https://news.northwestern.edu/stories/2018/december/worlds-smallest-wearable-device-warns-of-uv-exposure-enables-precision-phototherapy"},palette:{bg:"#f4f4f4ff",ink:"#131414ff"},sections:[{type:"image",src:"https://assets.codepen.io/9259849/uv%20sense.png",alt:"UV Sense lab and device assembly",caption:"Built on a tight deadline, we produced 300 UV-monitoring wearables for Lâ€™OrÃ©al and I contributed across PCB design, assembly, and firmware, plus an antenna redesign to shrink the device further."}]},chargepoint:{slug:"chargepoint",title:"Automated Quality Assurance System for ChargePoint",tagLine:"A React + AWS dashboard that automated defect detection and real-time QA analytics for EV charger manufacturing.",palette:{bg:"#FCFCFC",ink:"#141618"},hero:{video:null,alt:"ChargePoint quality assurance dashboard and cloud infrastructure"},sections:[{type:"text",content:"As part of ENGG 199 - Special Topics in Engineering Sciences, I worked on a full-stack development project focused on improving manufacturing quality assurance for ChargePoint. This course provided an opportunity to apply software development, cloud infrastructure, and computer vision techniques in a real-world setting. The goal was to automate defect detection for EV chargers using a React-based dashboard and AWS services."},{type:"text",content:"**Problem**\nManufacturing high-quality EV chargers requires rigorous quality control, but the existing process relied heavily on manual inspections, leading to delays, incomplete data, and inefficiencies. ChargePoint needed an automated system to capture defect data in real time, reduce inspection time per unit, and improve traceability for defect analysis."},{type:"text",content:"**Solution**\nI built a React-powered dashboard that integrates computer vision, cloud computing, and real-time analytics to monitor key production metrics, including first pass yield, retest and rework rates, final yield, cycle time, and takt time. The dashboard allows users to search and filter quality control data by serial number, factory location, and pass or fail status, providing engineers with instant access to critical insights."},{type:"image",src:"https://cdn.dribbble.com/userupload/41491172/file/original-8f10aad278ebf69990949bc646b948a4.png?resize=2048x1217&vertical=center",alt:"ChargePoint QA dashboard screenshot",caption:"Screenshot of the dashboard I developed and presented for ChargePoint. Built with React, AWS Amplify, and GraphQL to automate quality assurance and defect tracking before the rise of GenAI."},{type:"image",src:"https://cdn.dribbble.com/userupload/41491171/file/original-c9980180dca46e3e7448f6690554d6f8.png?resize=1504x923&vertical=center",alt:"Recent capture data and charger detail view",caption:"Recent capture data and detailed charger view from the dashboard I built for ChargePoint."},{type:"text",content:"**Cloud Infrastructure and Backend**\nOriginally, the project was set up with MongoDB, but I transitioned to AWS Amplify and Cognito for a scalable authentication and data management system. Rather than building a traditional backend with custom server logic, I leveraged AWSâ€™s managed services to handle authentication, database interactions, and API management. I configured AWS AppSync for efficient GraphQL querying and implemented AWS S3 for secure storage and retrieval of inspection images. This cloud-based setup ensured real-time data accessibility and automation while minimizing the need for direct backend maintenance.\n\nTo automate quality checks, the system captured barcode and component images, analyzing them with SIFT and other image processing algorithms in Python. This enabled automated defect detection, reducing the need for manual inspection and improving error traceability."},{type:"text",content:"**Error Tracking and Visualization**\nI developed an interactive dashboard that categorized and visualized manufacturing defects. Using Recharts.js, I built bar charts for error frequency analysis, helping engineers identify recurring issues. Additionally, I implemented moment.js to calculate time-based metrics such as units per hour and cycle time, providing deeper insights into production efficiency."},{type:"text",content:"**Statistical Analysis and Performance Metrics**\nThe dashboard calculated first pass yield as the ratio of chargers that passed inspection on the first attempt to the total number of chargers produced. This was updated in real time and displayed as a percentage.\n\nThe retest rate was determined by the proportion of chargers flagged for rework after failing the initial inspection. The system also calculated final yield, which measured the percentage of chargers that ultimately passed inspection, including those that required rework.\n\nCycle time was computed by measuring the time difference between the first recorded inspection of the day and the last, divided by the number of chargers processed. The system also estimated units per hour using timestamp data from inspection logs, calculating the rate at which chargers were passing through quality control."},{type:"text",content:"**Impact**\nThis project merged hardware, software, and cloud technologies, improving production efficiency, defect traceability, and real-time quality monitoring. By automating quality control processes, the system reduced inspection time per unit and provided engineers with actionable insights to improve manufacturing performance.\n\nDue to NDA, I can discuss technical details upon request."}]},larq:{slug:"larq",title:"Filter Lifespan Detection & Sensor Prototyping for LARQ",tagLine:"Designing and validating a capacitance-based system to track water filter lifespan.",palette:{bg:"#FFFFFF",ink:"#111314"},hero:{video:null,alt:"LARQ water filter prototyping and sensor experimentation"},sections:[{type:"text",content:"**Problem**\nLARQ needed a reliable way to track water filter lifespan and prompt users to reorder at the right time. The challenge was that capacitance sensor data is noisy and highly sensitive to physical factors like flow rate, vessel geometry, and how users pour water. The system needed to work consistently across these variables, not just under ideal conditions."},{type:"text",content:"**Solution**\nI was sent a physical prototype and assembled a multi-sensor setup using capacitance sensors placed at different heights. I designed experiments where I controlled drain rate and observed how sensor signals changed as water levels dropped. This helped me understand which signals were stable, where false positives occurred, and how detection thresholds needed to be tuned."},{type:"text",content:"**Experimental Setup**\nTo simulate different real-world behaviors, I partially covered the drain hole to control flow rate. I ran tests at multiple drain speeds, from fast to very slow, and recorded readings from the top, middle, and bottom sensors. I focused primarily on the middle sensor as a reference point and compared how signals shifted across repeated drain cycles."},{type:"text",content:"**Analysis & Algorithm Development**\nAs drain rates slowed, the sensor signals became more spread out and less predictable. Faster drains produced tighter, more consistent peaks. In some cases, the bottom sensor registered changes faster than the top sensor due to the internal geometry of the pitcher and the charcoal filter material.\n\nUsing Python and Excel, I analyzed these patterns, identified outliers, and refined detection thresholds so the algorithm could reliably infer filter usage over time. This work directly informed the logic used to track filter lifespan and trigger reorder reminders."},{type:"text",content:"**Edge Cases & Failure Modes**\nI uncovered several failure cases during testing. Pouring water out too quickly could spike the signal and falsely trigger events. Hardware issues, like a broken sensor wire, made it clear where redundancy and better validation checks were needed.\n\nThese edge cases shaped how conservative the final detection logic needed to be and helped prevent false alerts in the user-facing app."},{type:"image",src:"https://assets.codepen.io/9259849/Screenshot%202026-01-20%20at%202.11.11%E2%80%AFPM.png",alt:"Capacitance sensor drain rate experiment data",caption:"Early Pitcher Prototype"},{type:"image",src:"https://assets.codepen.io/9259849/Screenshot%202026-01-19%20at%2012.22.50%E2%80%AFPM.png",alt:"LARQ team",caption:"End-of-summer wrap-up with the LARQ team in 2019"},{type:"text",content:"**Impact**\nThis work directly contributed to an algorithm that tracks filter lifespan and prompts users to reorder at the right time. The logic was integrated into the LARQ mobile app, helping translate noisy physical sensor data into a reliable, consumer-facing feature."}]},abstractolives:{slug:"abstractolives",title:"Design with a Splash of Code",tagLine:"Featured on the p5.js Instagram Stories, CodePen, and in a LinkedIn article by Ãlvaro Montoro",tagLink:{label:"here",href:"https://www.linkedin.com/pulse/10-cool-codepen-demos-december-2025-%C3%A1lvaro-montoro-taude/?trackingId=4YyH6XVWtUS6nx2e7boODw%3D%3D"},palette:{bg:"#f4f4f4ff",ink:"#131414ff"},hero:{type:"instagram",embed:"https://www.instagram.com/p/DRydoI9jWon/",alt:"Abstract Olives Instagram post"},sections:[{type:"text",content:"**Concept**  \nThis generative art project began as an exploration of circles within circles. While playing with the forms, I landed on a color palette that felt reminiscent of olives, which became the visual anchor for the piece.\nFrom there, the idea shifted toward creating a calm, design-led composition. I was inspired by Okazz and Andor Saga on OpenProcessing, especially their use of centrally clustered forms."},{type:"text",content:"**Execution**  \nI introduced subtle motion using p5.js to bring variation and life into the composition, keeping the movement slow and controlled so the shapes and color relationships stayed front and center."},{type:"text",content:"**Outcome**  \nThe project was featured on the official p5.js Instagram account through their Instagram stories and was later selected by CodePen and shared in a LinkedIn article reflecting on the intersection of visual design and creative coding."}]},"3dslicescountdown":{slug:"3dslicescountdown",title:"3D Slices Countdown with Three.js",tagLine:"A 3D countdown revealed through sliced ribbons and a subtle contour line",palette:{bg:"#f4f3ef",ink:"#131414ff"},hero:{type:"instagram",embed:"https://www.instagram.com/p/DS8IsIOESqk/",alt:"3D Slices Countdown Instagram post"},sections:[{type:"text",content:" **Inspiration**\n        This project started from a photo posted by Kelly Wearstler. I was drawn to the way the surface feels carved and rhythmic, like soft folds or woven ribbons. I wanted to translate that same energy into motion typography, but in 3D.\n"},{type:"image",src:"https://assets.codepen.io/9259849/1DB0E0DF-C076-486C-BF09-55FBB19D6B08_1_105_c.jpeg",alt:"Photo posted by Kelly Wearstler",caption:"Photo Posted by Kelly Wearstler that inspired this project"},{type:"text",content:"**Execution**\nThe piece is built with Three.js. The number is not a single mesh. It is formed by a stack of thin vertical ribbons. Each ribbon samples a blurred digit field and pushes forward by row, so the face of the number emerges as a sculpted relief. The movement snaps into place slowly, with a stagger across ribbons so it feels alive instead of mechanical. I originally planned to add more explicit contour lines, almost like topographic bands running through the form. In the end I kept it quieter. The subtle contour halo around the edge gave the number enough definition while letting the surface and depth do the talking"}]}},Ow=e=>{try{const t=new URL(e).hostname.replace("www.","");return t.includes("instagram.com")?"Instagram":t.includes("codepen.io")?"CodePen":t.includes("linkedin.com")?"LinkedIn":t}catch(Rr){return"Link"}},Bw=m(lw()),m(lw()).default.initialize("G-Z4ZB8VFFWL"),(0,pe.createRoot)(document.getElementById("root")).render((0,sg.jsx)(BS,{children:(0,sg.jsx)(pF,{})}))}}});